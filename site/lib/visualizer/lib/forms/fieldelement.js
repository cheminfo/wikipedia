'use strict';define(["jquery"],function(a){"use strict";var b=function(){};return b.defaultOptions={},a.extend(b.prototype,{init:function(c){this.options=a.extend(!0,{},b.options,c),this.validation={error:void 0,value:void 0}},getDom:function(){return this._dom||(this._dom=this._makeDom()),this.field.changed(this),this.dom},display:function(){this.getDom().show()},hide:function(){this.getDom().hide()},getName:function(){return this.field.name},getExpander:function(){var a=this.form.getExpanderDom();a.css(this.groupElement.getExpanderInfosFor(this)).css("height","")},hideExpander:function(){this.form.hideExpander()},showExpander:function(){this.getExpander(),this.field.showExpander(this)},redoTabIndices:function(){this.fieldElement&&this.fieldElement.attr("tabindex",1),this.form.incrementTabIndex(this)},focus:function(){this.fieldElement&&this.fieldElement.trigger("click").trigger("focus")},setValueSilent:function(a,b){var c=this._value;this._validate(a),this.validation.error||(a=this.validation.value,this._value=a,this.field.changed(this),!b&&this.form.fieldElementValueChanged(this,a,c),this._inDom&&this.form.conditionalDisplayer.changed(this,c))},showError:function(){return!!this.dom&&((this.dom.removeClass("form-field-valid"),!!this.validation.feedback)?(this.validation.feedback._class&&this.dom.addClass("form-field-error"),this.validation.feedback.message&&this.addValidationMessage(this.validation.feedback.message),!0):void 0)},hideError:function(){return!!this.dom&&(this.dom.removeClass("form-field-error"),this.field.options.validation&&this.field.options.validation.positiveFeedback?(this.dom.addClass("form-field-valid"),this.field.options.validation.positiveFeedback.message&&this.addValidationMessage(this.field.options.validation.positiveFeedback.message,!0)):this.removeValidationMessage(),!0)},addValidationMessage:function(b,c){this.validationMessageDOM||(this.validationMessageDOM=a("<div />")),c?this.validationMessageDOM.addClass("form-field-valid-message").removeClass("form-field-error-message"):this.validationMessageDOM.addClass("form-field-error-message").removeClass("form-field-valid-message"),this.dom.after(this.validationMessageDOM.html(b))},removeValidationMessage:function(){this.validationMessageDOM&&this.validationMessageDOM.remove()},_validate:function(a){this.validation.value=a,this.backupValidation(),this.validation.error=void 0,this.validate(a),this.validation.error||this.field.validate(this,a),this.doValidationFeedback()},validate:function(){},backupValidation:function(){this._backedUpValidation=this._backedUpValidation||{},this._backedUpValidation.error=this.validation.error,this._backedUpValidation.value=this.validation.value},doValidationFeedback:function(){(!0===this._backedUpValidation.error||void 0===this._backedUpValidation.error)&&!1===this.validation.error&&(this.hideError()||(this.validation.error=void 0)),!this._backedUpValidation.error&&!0===this.validation.error&&(this.showError()||(this.validation.error=void 0))},setDefaultOr:function(a){if(void 0!==a&&null!==a)this.value=this.insertValue(a);else{var b=this.field.options.default;Array.isArray(b)&&(b=b.slice()),this.value=this.insertValue(b)}},inDom:function(){},unSelect:function(a){a&&(a.preventDefault(),a.stopPropagation()),this.selected=!1,this.form.unSelectFieldElement(this),this.field.domExpander&&this.hideExpander(),this.fieldElement&&this.fieldElement.removeClass("selected")},select:function(a){a&&(a.preventDefault(),a.stopPropagation()),this.selected=!0,this.form.selectFieldElement(this),this.field.domExpander&&this.showExpander(),this.fieldElement&&this.fieldElement.addClass("selected")},toggleSelect:function(a){this.selected?this.unSelect(a):this.select(a)},extractValue:function(){return this.field.options.extractValue?this.field.options.extractValue(this.value):this.value},insertValue:function(a){return this.field.options.insertValue?this.field.options.insertValue(a):a}}),Object.defineProperty(b.prototype,"form",{enumerable:!0,configurable:!1,get:function(){return this._form||this.field.form},set:function(a){this._form=a}}),Object.defineProperty(b.prototype,"field",{enumerable:!0,configurable:!1,get:function(){return this._field},set:function(a){this._field=a}}),Object.defineProperty(b.prototype,"groupElement",{enumerable:!0,configurable:!1,get:function(){return this._groupElement},set:function(a){this._groupElement=a}}),Object.defineProperty(b.prototype,"value",{enumerable:!0,configurable:!1,get:function(){return this._value},set:function(a){this.setValueSilent(a),this.checkValue()}}),b});
