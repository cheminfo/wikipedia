(function(e){function t(e,t){var o=t?A[G]:A[W];return o.test(e)?new n(e,t):null}function n(e,t){if(e instanceof n){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(!(this instanceof n))return new n(e,t);this.loose=t;var o=e.trim().match(t?A[G]:A[W]);if(!o)throw new TypeError("Invalid Version: "+e);this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.prerelease=o[4]?o[4].split(".").map(function(e){return /^[0-9]+$/.test(e)?+e:e}):[],this.build=o[5]?o[5].split("."):[],this.format()}function o(e,t){var n=ye.test(e),o=ye.test(t);return n&&o&&(e=+e,t=+t),n&&!o?-1:o&&!n?1:e<t?-1:e>t?1:0}function r(e,t,o){return new n(e,o).compare(t)}function s(e,t,n){return r(t,e,n)}function l(e,t,n){return 0<r(e,t,n)}function d(e,t,n){return 0>r(e,t,n)}function p(e,t,n){return 0===r(e,t,n)}function c(e,t,n){return 0!==r(e,t,n)}function u(e,t,n){return 0<=r(e,t,n)}function m(e,t,n){return 0>=r(e,t,n)}function g(e,t,n,o){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=p(e,n,o);break;case"!=":i=c(e,n,o);break;case">":i=l(e,n,o);break;case">=":i=u(e,n,o);break;case"<":i=d(e,n,o);break;case"<=":i=m(e,n,o);break;default:throw new TypeError("Invalid operator: "+t);}return i}function h(e,t){if(e instanceof h){if(e.loose===t)return e;e=e.value}if(!(this instanceof h))return new h(e,t);this.loose=t,this.parse(e),this.value=this.semver===be?"":this.operator+this.semver.version}function f(e,t){if(e instanceof f&&e.loose===t)return e;if(!(this instanceof f))return new f(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function y(e,t){return e=x(e,t),e=_(e,t),e=k(e,t),(e=C(e,t),e)}function b(e){return!e||"x"===e.toLowerCase()||"*"===e}function _(e,t){return e.trim().split(/\s+/).map(function(e){return v(e,t)}).join(" ")}function v(e,t){var n=t?A[re]:A[ie];return e.replace(n,function(e,t,n,o,i){var r;return b(t)?r="":b(n)?r=">="+t+".0.0 <"+(+t+1)+".0.0":b(o)?r=">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":i?("-"!==i.charAt(0)&&(i="-"+i),r=">="+t+"."+n+"."+o+i+" <"+t+"."+(+n+1)+".0"):r=">="+t+"."+n+"."+o+" <"+t+"."+(+n+1)+".0",r})}function x(e,t){return e.trim().split(/\s+/).map(function(e){return w(e,t)}).join(" ")}function w(e,t){var n=t?A[de]:A[le];return e.replace(n,function(e,t,n,o,i){var r;return b(t)?r="":b(n)?r=">="+t+".0.0 <"+(+t+1)+".0.0":b(o)?r="0"===t?">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":">="+t+"."+n+".0 <"+(+t+1)+".0.0":i?("-"!==i.charAt(0)&&(i="-"+i),r="0"===t?"0"===n?">="+t+"."+n+"."+o+i+" <"+t+"."+n+"."+(+o+1):">="+t+"."+n+"."+o+i+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+o+i+" <"+(+t+1)+".0.0"):r="0"===t?"0"===n?">="+t+"."+n+"."+o+" <"+t+"."+n+"."+(+o+1):">="+t+"."+n+"."+o+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+o+" <"+(+t+1)+".0.0",r})}function k(e,t){return e.split(/\s+/).map(function(e){return T(e,t)}).join(" ")}function T(e,t){e=e.trim();var n=t?A[te]:A[ee];return e.replace(n,function(e,t,n,o,i){var r=b(n),a=r||b(o),s=a||b(i),l=s;return"="===t&&l&&(t=""),r?">"===t||"<"===t?e="<0.0.0":e="*":t&&l?(a&&(o=0),s&&(i=0),">"===t?(t=">=",a?(n=+n+1,o=0,i=0):s&&(o=+o+1,i=0)):"<="==t&&(t="<",a?n=+n+1:o=+o+1),e=t+n+"."+o+"."+i):a?e=">="+n+".0.0 <"+(+n+1)+".0.0":s&&(e=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0"),e})}function C(e){return e.trim().replace(A[he],"")}function S(e,t,n,o,i,r,a,s,l,d,p,c){return t=b(n)?"":b(o)?">="+n+".0.0":b(i)?">="+n+"."+o+".0":">="+t,s=b(l)?"":b(d)?"<"+(+l+1)+".0.0":b(p)?"<"+l+"."+(+d+1)+".0":c?"<="+l+"."+d+"."+p+"-"+c:"<="+s,(t+" "+s).trim()}function E(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(var n=0;n<e.length;n++){if(e[n].semver===be)return!0;if(0<e[n].semver.prerelease.length){var o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}}return!1}return!0}function j(e,t,n){try{t=new f(t,n)}catch(e){return!1}return t.test(e)}function D(e,t,o,r){e=new n(e,r),t=new f(t,r);var a,s,p,c,g;switch(o){case">":a=l,s=m,p=d,c=">",g=">=";break;case"<":a=d,s=u,p=l,c="<",g="<=";break;default:throw new TypeError("Must provide a hilo val of \"<\" or \">\"");}if(j(e,t,r))return!1;for(var h=0;h<t.set.length;++h){var y=t.set[h],b=null,_=null;if(y.forEach(function(e){b=b||e,_=_||e,a(e.semver,b.semver,r)?b=e:p(e.semver,_.semver,r)&&(_=e)}),b.operator===c||b.operator===g)return!1;if((!_.operator||_.operator===c)&&s(e,_.semver))return!1;if(_.operator===g&&p(e,_.semver))return!1}return!0}"object"==typeof module&&module.exports===e&&(e=module.exports=n),e.SEMVER_SPEC_VERSION="2.0.0";var A=e.re=[],a=e.src=[],P=0,O=P++;a[O]="0|[1-9]\\d*";var L=P++;a[L]="[0-9]+";var N=P++;a[N]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var I=P++;a[I]="("+a[O]+")\\."+"("+a[O]+")\\."+"("+a[O]+")";var F=P++;a[F]="("+a[L]+")\\."+"("+a[L]+")\\."+"("+a[L]+")";var M=P++;a[M]="(?:"+a[O]+"|"+a[N]+")";var z=P++;a[z]="(?:"+a[L]+"|"+a[N]+")";var H=P++;a[H]="(?:-("+a[M]+"(?:\\."+a[M]+")*))";var q=P++;a[q]="(?:-?("+a[z]+"(?:\\."+a[z]+")*))";var U=P++;a[U]="[0-9A-Za-z-]+";var B=P++;a[B]="(?:\\+("+a[U]+"(?:\\."+a[U]+")*))";var W=P++,V="v?"+a[I]+a[H]+"?"+a[B]+"?";a[W]="^"+V+"$";var Y="[v=\\s]*"+a[F]+a[q]+"?"+a[B]+"?",G=P++;a[G]="^"+Y+"$";var Q=P++;a[Q]="((?:<|>)?=?)";var X=P++;a[X]=a[L]+"|x|X|\\*";var J=P++;a[J]=a[O]+"|x|X|\\*";var K=P++;a[K]="[v=\\s]*("+a[J]+")"+"(?:\\.("+a[J]+")"+"(?:\\.("+a[J]+")"+"(?:"+a[H]+")?"+a[B]+"?"+")?)?";var Z=P++;a[Z]="[v=\\s]*("+a[X]+")"+"(?:\\.("+a[X]+")"+"(?:\\.("+a[X]+")"+"(?:"+a[q]+")?"+a[B]+"?"+")?)?";var ee=P++;a[ee]="^"+a[Q]+"\\s*"+a[K]+"$";var te=P++;a[te]="^"+a[Q]+"\\s*"+a[Z]+"$";var ne=P++;a[ne]="(?:~>?)";var oe=P++;a[oe]="(\\s*)"+a[ne]+"\\s+",A[oe]=new RegExp(a[oe],"g");var ie=P++;a[ie]="^"+a[ne]+a[K]+"$";var re=P++;a[re]="^"+a[ne]+a[Z]+"$";var ae=P++;a[ae]="(?:\\^)";var se=P++;a[se]="(\\s*)"+a[ae]+"\\s+",A[se]=new RegExp(a[se],"g");var le=P++;a[le]="^"+a[ae]+a[K]+"$";var de=P++;a[de]="^"+a[ae]+a[Z]+"$";var pe=P++;a[pe]="^"+a[Q]+"\\s*("+Y+")$|^$";var ce=P++;a[ce]="^"+a[Q]+"\\s*("+V+")$|^$";var ue=P++;a[ue]="(\\s*)"+a[Q]+"\\s*("+Y+"|"+a[K]+")",A[ue]=new RegExp(a[ue],"g");var me=P++;a[me]="^\\s*("+a[K]+")"+"\\s+-\\s+"+"("+a[K]+")"+"\\s*$";var ge=P++;a[ge]="^\\s*("+a[Z]+")"+"\\s+-\\s+"+"("+a[Z]+")"+"\\s*$";var he=P++;a[he]="(<|>)?=?\\s*\\*";for(var fe=0;fe<P;fe++)A[fe]||(A[fe]=new RegExp(a[fe]));e.parse=t,e.valid=function(e,n){var o=t(e,n);return o?o.version:null},e.clean=function(e,n){var o=t(e.trim().replace(/^[=v]+/,""),n);return o?o.version:null},e.SemVer=n,n.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},n.prototype.inspect=function(){return"<SemVer \""+this+"\">"},n.prototype.toString=function(){return this.version},n.prototype.compare=function(e){return e instanceof n||(e=new n(e,this.loose)),this.compareMain(e)||this.comparePre(e)},n.prototype.compareMain=function(e){return e instanceof n||(e=new n(e,this.loose)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)},n.prototype.comparePre=function(e){if(e instanceof n||(e=new n(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],a=e.prerelease[t];if(void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r===a)continue;else return o(r,a)}while(++t)},n.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;0<=--n;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1==n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e);}return this.format(),this},e.inc=function(e,t,o,i){"string"==typeof o&&(i=o,o=void 0);try{return new n(e,o).inc(t,i).version}catch(e){return null}},e.diff=function(e,n){if(p(e,n))return null;var o=t(e),i=t(n);if(o.prerelease.length||i.prerelease.length){for(var r in o)if(("major"==r||"minor"==r||"patch"==r)&&o[r]!==i[r])return"pre"+r;return"prerelease"}for(var r in o)if(("major"==r||"minor"==r||"patch"==r)&&o[r]!==i[r])return r},e.compareIdentifiers=o;var ye=/^[0-9]+$/;e.rcompareIdentifiers=function(e,t){return o(t,e)},e.major=function(e,t){return new n(e,t).major},e.minor=function(e,t){return new n(e,t).minor},e.patch=function(e,t){return new n(e,t).patch},e.compare=r,e.compareLoose=function(e,t){return r(e,t,!0)},e.rcompare=s,e.sort=function(t,n){return t.sort(function(t,o){return e.compare(t,o,n)})},e.rsort=function(t,n){return t.sort(function(t,o){return e.rcompare(t,o,n)})},e.gt=l,e.lt=d,e.eq=p,e.neq=c,e.gte=u,e.lte=m,e.cmp=g,e.Comparator=h;var be={};h.prototype.parse=function(e){var t=this.loose?A[pe]:A[ce],o=e.match(t);if(!o)throw new TypeError("Invalid comparator: "+e);this.operator=o[1],"="===this.operator&&(this.operator=""),this.semver=o[2]?new n(o[2],this.loose):be},h.prototype.inspect=function(){return"<SemVer Comparator \""+this+"\">"},h.prototype.toString=function(){return this.value},h.prototype.test=function(e){return!(this.semver!==be)||("string"==typeof e&&(e=new n(e,this.loose)),g(e,this.operator,this.semver,this.loose))},e.Range=f,f.prototype.inspect=function(){return"<SemVer Range \""+this.range+"\">"},f.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},f.prototype.toString=function(){return this.range},f.prototype.parseRange=function(e){var t=this.loose;e=e.trim();var n=t?A[ge]:A[me];e=e.replace(n,S),e=e.replace(A[ue],"$1$2$3"),e=e.replace(A[oe],"$1~"),e=e.replace(A[se],"$1^"),e=e.split(/\s+/).join(" ");var o=t?A[pe]:A[ce],i=e.split(" ").map(function(e){return y(e,t)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(e){return!!e.match(o)})),i=i.map(function(e){return new h(e,t)}),i},e.toComparators=function(e,t){return new f(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},f.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new n(e,this.loose));for(var t=0;t<this.set.length;t++)if(E(this.set[t],e))return!0;return!1},e.satisfies=j,e.maxSatisfying=function(e,t,n){return e.filter(function(e){return j(e,t,n)}).sort(function(e,t){return s(e,t,n)})[0]||null},e.validRange=function(e,t){try{return new f(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,n){return D(e,t,"<",n)},e.gtr=function(e,t,n){return D(e,t,">",n)},e.outside=D,"function"==typeof define&&define.amd&&define("lib/semver/semver",e)})("object"==typeof exports?exports:"function"==typeof define&&define.amd?{}:semver={}),"use strict",define("version",["lib/semver/semver"],function(semver){"use strict";const MAJOR=2,MINOR=156,PATCH=0,PRERELEASE=!1,IS_RELEASE=!0,BUILD_TIME=1674118543293,INCLUDED_MODULE_CSS=["configured_search","smart_array_filter","feature_viewer","seq_alignment","sequence","plot_function","hex","canvas_matrix","som","scatter3D","pie_chart","pie_chart_jit","radar_chart","stack_chart","leaflet","dendrogram","parallel_coordinates","phylogram","loading_plot","wordcloud","button_action","code_editor","code_executor","dragdrop","paste_text","xnavigator","xyzoomnavigator","single_value","fancytree","iframe","panzoom","progress","postit","jqgrid","fasttable","template-twig","2d_list_fast","2d_list","dualview","filter_editor","object_editor","onde","rich_text","quill_editor","form_simple","slick_grid","svg_editor","form","jsme","jsmol","ocl_editor","periodic_table","well_plate","gcms","ivstability","spectra_displayer","2dnmr","webservice_nmr_spin","webservice_cron","webservice_search"];let version=`${MAJOR}.${MINOR}.${PATCH}`;if(!1!==PRERELEASE&&(version+=`-${PRERELEASE}`),!semver.valid(version))throw new Error(`Version number is invalid: ${version}`);let isModernBrowser;try{eval("(async function() {})()"),isModernBrowser=!0}catch(t){isModernBrowser=!1}let buildTime=null,head=!1;if(BUILD_TIME){const e=new Date(BUILD_TIME);buildTime=window.Intl?new window.Intl.DateTimeFormat("en-GB",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(e):e.toLocaleDateString()}else head=!0,isModernBrowser||alert("To use the unbuilt HEAD of the visualizer, you need a browser that supports async/await features (like Chrome 55+).\nIf you are not on HEAD, please report a bug on GitHub.");return{major:MAJOR,minor:MINOR,patch:PATCH,prerelease:PRERELEASE,isRelease:IS_RELEASE,includedModuleCss:INCLUDED_MODULE_CSS,version:version,buildTime:buildTime,isBuild:null!=buildTime,head:head,isModernBrowser:isModernBrowser}}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"==typeof window?this:window,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ae.type(e);return!("function"===n||ae.isWindow(e))&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function o(e,t,n){if(ae.isFunction(t))return ae.grep(e,function(e,o){return!!t.call(e,o,e)!==n});if(t.nodeType)return ae.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ae.filter(t,e,n);t=ae.filter(t,e)}return ae.grep(e,function(e){return-1<ee.call(t,e)!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return ae.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),ae.ready()}function s(){this.expando=ae.expando+s.uid++}function l(e,t,n){var o;if(void 0===n&&1===e.nodeType)if(o="data-"+t.replace(De,"-$&").toLowerCase(),n=e.getAttribute(o),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:je.test(n)?ae.parseJSON(n):n)}catch(t){}Ee.set(e,t,n)}else n=void 0;return n}function d(e,t,n,o){var i=1,r=20,a=o?function(){return o.cur()}:function(){return ae.css(e,t,"")},s=a(),l=n&&n[3]||(ae.cssNumber[t]?"":"px"),d=(ae.cssNumber[t]||"px"!==l&&+s)&&Pe.exec(ae.css(e,t)),p;if(d&&d[3]!==l){l=l||d[3],n=n||[],d=+s||1;do i=i||".5",d/=i,ae.style(e,t,d+l);while(i!=(i=a()/s)&&1!=i&&--r)}return n&&(d=+d||+s||0,p=n[1]?d+(n[1]+1)*n[2]:+n[2],o&&(o.unit=l,o.start=d,o.end=p)),p}function p(e,t){var n="undefined"==typeof e.getElementsByTagName?"undefined"==typeof e.querySelectorAll?[]:e.querySelectorAll(t||"*"):e.getElementsByTagName(t||"*");return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],n):n}function c(e,t){for(var n=0,o=e.length;n<o;n++)Se.set(e[n],"globalEval",!t||Se.get(t[n],"globalEval"))}function u(e,t,n,o,r){for(var a=t.createDocumentFragment(),s=[],d=0,u=e.length,l,m,g,h,f,y;d<u;d++)if(l=e[d],l||0===l)if("object"===ae.type(l))ae.merge(s,l.nodeType?[l]:l);else if(!Me.test(l))s.push(t.createTextNode(l));else{for(m=m||a.appendChild(t.createElement("div")),g=(Ne.exec(l)||["",""])[1].toLowerCase(),h=Fe[g]||Fe._default,m.innerHTML=h[1]+ae.htmlPrefilter(l)+h[2],y=h[0];y--;)m=m.lastChild;ae.merge(s,m.childNodes),m=a.firstChild,m.textContent=""}for(a.textContent="",d=0;l=s[d++];){if(o&&-1<ae.inArray(l,o)){r&&r.push(l);continue}if(f=ae.contains(l.ownerDocument,l),m=p(a.appendChild(l),"script"),f&&c(m),n)for(y=0;l=m[y++];)Ie.test(l.type||"")&&n.push(l)}return a}function m(){return!0}function g(){return!1}function h(){try{return X.activeElement}catch(e){}}function f(e,t,n,o,i,r){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(o=o||n,n=void 0),t)f(e,s,n,o,t[s],r);return e}if(null==o&&null==i?(i=n,o=n=void 0):null==i&&("string"==typeof n?(i=o,o=void 0):(i=o,o=n,n=void 0)),!1===i)i=g;else if(!i)return e;return 1===r&&(a=i,i=function(e){return ae().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ae.guid++)),e.each(function(){ae.event.add(this,t,i,o,n)})}function y(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11===t.nodeType?t.firstChild:t,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function _(e){var t=Ve.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){var n,o,r,a,s,d,p,c;if(1===t.nodeType){if(Se.hasData(e)&&(a=Se.access(e),s=Se.set(t,a),c=a.events,c))for(r in delete s.handle,s.events={},c)for(n=0,o=c[r].length;n<o;n++)ae.event.add(t,r,c[r][n]);Ee.hasData(e)&&(d=Ee.access(e),p=ae.extend({},d),Ee.set(t,p))}}function x(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Le.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function w(e,t,n,o){t=K.apply([],t);var r=0,a=e.length,s=t[0],l=ae.isFunction(s),d,c,m,g,h,f;if(l||1<a&&"string"==typeof s&&!ie.checkClone&&We.test(s))return e.each(function(i){var r=e.eq(i);l&&(t[0]=s.call(this,i,r.html())),w(r,t,n,o)});if(a&&(d=u(t,e[0].ownerDocument,!1,e,o),c=d.firstChild,1===d.childNodes.length&&(d=c),c||o)){for(m=ae.map(p(d,"script"),b),g=m.length;r<a;r++)h=d,r!=a-1&&(h=ae.clone(h,!0,!0),g&&ae.merge(m,p(h,"script"))),n.call(e[r],h,r);if(g)for(f=m[m.length-1].ownerDocument,ae.map(m,_),r=0;r<g;r++)h=m[r],Ie.test(h.type||"")&&!Se.access(h,"globalEval")&&ae.contains(f,h)&&(h.src?ae._evalUrl&&ae._evalUrl(h.src):ae.globalEval(h.textContent.replace($e,"")))}return e}function k(e,t,n){for(var o=t?ae.filter(t,e):e,r=0,a;null!=(a=o[r]);r++)n||1!==a.nodeType||ae.cleanData(p(a)),a.parentNode&&(n&&ae.contains(a.ownerDocument,a)&&c(p(a,"script")),a.parentNode.removeChild(a));return e}function T(e,t){var n=ae(t.createElement(e)).appendTo(t.body),o=ae.css(n[0],"display");return n.detach(),o}function C(e){var t=X,n=Ye[e];return n||(n=T(e,t),("none"===n||!n)&&(Ze=(Ze||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ze[0].contentDocument,t.write(),t.close(),n=T(e,t),Ze.detach()),Ye[e]=n),n}function S(e,t,n){var o=e.style,i,r,a,s;return n=n||Xe(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ae.contains(e.ownerDocument,e)||(s=ae.style(e,t)),n&&!ie.pixelMarginRight()&&Qe.test(s)&&Ge.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a),void 0===s?s:s+""}function E(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function j(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ot.length;n--;)if(e=ot[n]+t,e in it)return e}function D(e,t,n){var o=Pe.exec(t);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):t}function A(e,t,n,o,r){for(var a=n===(o?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===n&&(s+=ae.css(e,n+Oe[a],!0,r)),o?("content"===n&&(s-=ae.css(e,"padding"+Oe[a],!0,r)),"margin"!==n&&(s-=ae.css(e,"border"+Oe[a]+"Width",!0,r))):(s+=ae.css(e,"padding"+Oe[a],!0,r),"padding"!==n&&(s+=ae.css(e,"border"+Oe[a]+"Width",!0,r)));return s}function P(e,t,n){var o=!0,i="width"===t?e.offsetWidth:e.offsetHeight,r=Xe(e),a="border-box"===ae.css(e,"boxSizing",!1,r);if(0>=i||null==i){if(i=S(e,t,r),(0>i||null==i)&&(i=e.style[t]),Qe.test(i))return i;o=a&&(ie.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(a?"border":"content"),o,r)+"px"}function O(e,t){for(var n=[],o=0,i=e.length,r,a,s;o<i;o++)(a=e[o],!!a.style)&&(n[o]=Se.get(a,"olddisplay"),r=a.style.display,t?(!n[o]&&"none"===r&&(a.style.display=""),""===a.style.display&&Re(a)&&(n[o]=Se.access(a,"olddisplay",C(a.nodeName)))):(s=Re(a),("none"!==r||!s)&&Se.set(a,"olddisplay",s?r:ae.css(a,"display"))));for(o=0;o<i;o++)(a=e[o],!!a.style)&&(t&&"none"!==a.style.display&&""!==a.style.display||(a.style.display=t?n[o]||"":"none"));return e}function R(e,t,n,o,i){return new R.prototype.init(e,t,n,o,i)}function L(){return e.setTimeout(function(){st=void 0}),st=ae.now()}function N(e,t){var n=0,o={height:e},r;for(t=t?1:0;4>n;n+=2-t)r=Oe[n],o["margin"+r]=o["padding"+r]=e;return t&&(o.opacity=o.width=e),o}function I(e,t,n){for(var o=(z.tweeners[t]||[]).concat(z.tweeners["*"]),i=0,r=o.length,a;i<r;i++)if(a=o[i].call(n,t,e))return a}function F(e,t,n){var o=this,i={},r=e.style,a=e.nodeType&&Re(e),s=Se.get(e,"fxshow"),l,d,p,c,u,m,g,h;for(l in n.queue||(u=ae._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,m=u.empty.fire,u.empty.fire=function(){u.unqueued||m()}),u.unqueued++,o.always(function(){o.always(function(){u.unqueued--,ae.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[r.overflow,r.overflowX,r.overflowY],g=ae.css(e,"display"),h="none"===g?Se.get(e,"olddisplay")||C(e.nodeName):g,"inline"===h&&"none"===ae.css(e,"float")&&(r.display="inline-block")),n.overflow&&(r.overflow="hidden",o.always(function(){r.overflow=n.overflow[0],r.overflowX=n.overflow[1],r.overflowY=n.overflow[2]})),t)if(d=t[l],rt.exec(d)){if(delete t[l],p=p||"toggle"===d,d===(a?"hide":"show"))if("show"===d&&s&&void 0!==s[l])a=!0;else continue;i[l]=s&&s[l]||ae.style(e,l)}else g=void 0;if(!ae.isEmptyObject(i))for(l in s?"hidden"in s&&(a=s.hidden):s=Se.access(e,"fxshow",{}),p&&(s.hidden=!a),a?ae(e).show():o.done(function(){ae(e).hide()}),o.done(function(){for(var t in Se.remove(e,"fxshow"),i)ae.style(e,t,i[t])}),i)c=I(a?s[l]:0,l,o),l in s||(s[l]=c.start,a&&(c.end=c.start,c.start="width"===l||"height"===l?1:0));else"inline"===("none"===g?C(e.nodeName):g)&&(r.display=g)}function M(e,t){var n,o,i,r,a;for(n in e)if(o=ae.camelCase(n),i=t[o],r=e[n],ae.isArray(r)&&(i=r[1],r=e[n]=r[0]),n!==o&&(e[o]=r,delete e[n]),a=ae.cssHooks[o],a&&"expand"in a)for(n in r=a.expand(r),delete e[o],r)n in e||(e[n]=r[n],t[n]=i);else t[o]=i}function z(e,t,n){var o=0,i=z.prefilters.length,r=ae.Deferred().always(function(){delete a.elem}),a=function(){if(p)return!1;for(var t=st||L(),n=Math.max(0,s.startTime+s.duration-t),o=n/s.duration||0,i=1-o,a=0,l=s.tweens.length;a<l;a++)s.tweens[a].run(i);return r.notifyWith(e,[s,i,n]),1>i&&l?n:(r.resolveWith(e,[s]),!1)},s=r.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{},easing:ae.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||L(),duration:n.duration,tweens:[],createTween:function(t,n){var o=ae.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(o),o},stop:function(t){var n=0,o=t?s.tweens.length:0;if(p)return this;for(p=!0;n<o;n++)s.tweens[n].run(1);return t?(r.notifyWith(e,[s,1,0]),r.resolveWith(e,[s,t])):r.rejectWith(e,[s,t]),this}}),l=s.props,d,p;for(M(l,s.opts.specialEasing);o<i;o++)if(d=z.prefilters[o].call(s,e,l,s.opts),d)return ae.isFunction(d.stop)&&(ae._queueHooks(s.elem,s.opts.queue).stop=ae.proxy(d.stop,d)),d;return ae.map(l,I,s),ae.isFunction(s.opts.start)&&s.opts.start.call(e,s),ae.fx.timer(ae.extend(a,{elem:e,anim:s,queue:s.opts.queue})),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always)}function H(e){return e.getAttribute&&e.getAttribute("class")||""}function q(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o=0,r=t.toLowerCase().match(we)||[],a;if(ae.isFunction(n))for(;a=r[o++];)"+"===a[0]?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function U(e,t,n,o){function i(s){var l;return r[s]=!0,ae.each(e[s]||[],function(e,s){var d=s(t,n,o);return"string"!=typeof d||a||r[d]?a?!(l=d):void 0:(t.dataTypes.unshift(d),i(d),!1)}),l}var r={},a=e===Et;return i(t.dataTypes[0])||!r["*"]&&i("*")}function B(e,t){var n=ae.ajaxSettings.flatOptions||{},o,i;for(o in t)void 0!==t[o]&&((n[o]?e:i||(i={}))[o]=t[o]);return i&&ae.extend(!0,e,i),e}function W(e,t,n){for(var o=e.contents,i=e.dataTypes,r,a,s,l;"*"===i[0];)i.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in o)if(o[a]&&o[a].test(r)){i.unshift(a);break}if(i[0]in n)s=i[0];else{for(a in n){if(!i[0]||e.converters[a+" "+i[0]]){s=a;break}l||(l=a)}s=s||l}return s?(s!==i[0]&&i.unshift(s),n[s]):void 0}function V(e,t,n,o){var i={},r=e.dataTypes.slice(),a,s,l,d,p;if(r[1])for(l in e.converters)i[l.toLowerCase()]=e.converters[l];for(s=r.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!p&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),p=s,s=r.shift(),s)if("*"===s)s=p;else if("*"!==p&&p!=s){if(l=i[p+" "+s]||i["* "+s],!l)for(a in i)if(d=a.split(" "),d[1]===s&&(l=i[p+" "+d[0]]||i["* "+d[0]],l)){!0===l?l=i[a]:!0!==i[a]&&(s=d[0],r.unshift(d[1]));break}if(!0!==l)if(l&&e.throws)t=l(t);else try{t=l(t)}catch(t){return{state:"parsererror",error:l?t:"No conversion from "+p+" to "+s}}}return{state:"success",data:t}}function Y(e,t,n,o){if(ae.isArray(t))ae.each(t,function(t,i){n||Pt.test(e)?o(e,i):Y(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,o)});else if(!n&&"object"===ae.type(t))for(var i in t)Y(e+"["+i+"]",t[i],n,o);else o(e,t)}function G(e){return ae.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Q=[],X=e.document,J=Q.slice,K=Q.concat,Z=Q.push,ee=Q.indexOf,te={},ne=te.toString,oe=te.hasOwnProperty,ie={},re="2.2.4",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,le=/^-ms-/,de=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:re,constructor:ae,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null==e?J.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ae.each(this,e)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Q.sort,splice:Q.splice},ae.extend=ae.fn.extend=function(){var e=arguments[0]||{},t=1,n=arguments.length,o=!1,r,a,s,l,d,p;for("boolean"==typeof e&&(o=e,e=arguments[t]||{},t++),"object"==typeof e||ae.isFunction(e)||(e={}),t===n&&(e=this,t--);t<n;t++)if(null!=(r=arguments[t]))for(a in r)(s=e[a],l=r[a],e!==l)&&(o&&l&&(ae.isPlainObject(l)||(d=ae.isArray(l)))?(d?(d=!1,p=s&&ae.isArray(s)?s:[]):p=s&&ae.isPlainObject(s)?s:{},e[a]=ae.extend(o,p,l)):void 0!==l&&(e[a]=l));return e},ae.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ae.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){if("object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;if(e.constructor&&!oe.call(e,"constructor")&&!oe.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(var t in e);return void 0===t||oe.call(e,t)},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?te[ne.call(e)]||"object":typeof e},globalEval:function(e){var t=eval,n;e=ae.trim(e),e&&(1===e.indexOf("use strict")?(n=X.createElement("script"),n.text=e,X.head.appendChild(n).parentNode.removeChild(n)):t(e))},camelCase:function(e){return e.replace(le,"ms-").replace(de,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var o=0,r;if(n(e))for(r=e.length;o<r&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var o=t||[];return null!=e&&(n(Object(e))?ae.merge(o,"string"==typeof e?[e]:e):Z.call(o,e)),o},inArray:function(e,t,n){return null==t?-1:ee.call(t,e,n)},merge:function(e,t){for(var n=+t.length,o=0,r=e.length;o<n;o++)e[r++]=t[o];return e.length=r,e},grep:function(e,t,n){for(var o=[],r=0,a=e.length,s;r<a;r++)s=!t(e[r],r),s!==!n&&o.push(e[r]);return o},map:function(e,t,o){var r=0,a=[],s,l;if(n(e))for(s=e.length;r<s;r++)l=t(e[r],r,o),null!=l&&a.push(l);else for(r in e)l=t(e[r],r,o),null!=l&&a.push(l);return K.apply([],a)},guid:1,proxy:function(e,t){var n,o,i;if("string"==typeof t&&(n=e[t],t=e,e=n),!!ae.isFunction(e))return o=J.call(arguments,2),i=function(){return e.apply(t||this,o.concat(J.call(arguments)))},i.guid=e.guid=e.guid||ae.guid++,i},now:Date.now,support:ie}),"function"==typeof Symbol&&(ae.fn[Symbol.iterator]=Q[Symbol.iterator]),ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){te["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,o){var r=t&&t.ownerDocument,a=t?t.nodeType:9,s,l,d,p,u,g,h,f;if(n=n||[],"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!o&&((t?t.ownerDocument||t:w)!==ye&&fe(t),t=t||ye,_e)){if(11!==a&&(g=Z.exec(e)))if(!(s=g[1])){if(g[2])return N.apply(n,t.getElementsByTagName(e)),n;if((s=g[3])&&ae.getElementsByClassName&&t.getElementsByClassName)return N.apply(n,t.getElementsByClassName(s)),n}else if(9===a){if(!(d=t.getElementById(s)))return n;if(d.id===s)return n.push(d),n}else if(r&&(d=r.getElementById(s))&&ke(t,d)&&d.id===s)return n.push(d),n;if(ae.qsa&&!E[e+" "]&&(!ve||!ve.test(e))){if(1!==a)r=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((p=t.getAttribute("id"))?p=p.replace(te,"\\$&"):t.setAttribute("id",p=x),h=pe(e),l=h.length,u=G.test(p)?"#"+p:"[id='"+p+"']";l--;)h[l]=u+" "+m(h[l]);f=h.join(","),r=ee.test(e)&&c(t.parentNode)||t}if(f)try{return N.apply(n,r.querySelectorAll(f)),n}catch(e){}finally{p===x&&t.removeAttribute("id")}}}return ue(e.replace(U,"$1"),t,n,o)}function n(){function e(n,o){return t.push(n+" ")>se.cacheLength&&delete e[t.shift()],e[n+" "]=o}var t=[];return e}function o(e){return e[x]=!0,e}function r(e){var t=ye.createElement("div");try{return!!e(t)}catch(t){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),o=n.length;o--;)se.attrHandle[n[o]]=t}function s(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function d(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function p(e){return o(function(t){return t=+t,o(function(n,o){for(var r=e([],n.length,t),a=r.length,s;a--;)n[s=r[a]]&&(n[s]=!(o[s]=n[s]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function m(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function g(e,t,n){var o=t.dir,i=n&&"parentNode"===o,r=T++;return t.first?function(t,n,r){for(;t=t[o];)if(1===t.nodeType||i)return e(t,n,r)}:function(t,n,a){var s=[k,r],l,d,p;if(a){for(;t=t[o];)if((1===t.nodeType||i)&&e(t,n,a))return!0;}else for(;t=t[o];)if(1===t.nodeType||i){if(p=t[x]||(t[x]={}),d=p[t.uniqueID]||(p[t.uniqueID]={}),(l=d[o])&&l[0]===k&&l[1]===r)return s[2]=l[2];if(d[o]=s,s[2]=e(t,n,a))return!0}}}function h(e){return 1<e.length?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function f(e,n,o){for(var r=0,a=n.length;r<a;r++)t(e,n[r],o);return o}function y(e,t,n,o,r){for(var a=[],s=0,l=e.length,d;s<l;s++)(d=e[s])&&(!n||n(d,o,r))&&(a.push(d),null!=t&&t.push(s));return a}function b(e,t,n,r,a,s){return r&&!r[x]&&(r=b(r)),a&&!a[x]&&(a=b(a,s)),o(function(o,s,l,d){var p=[],c=[],u=s.length,m=o||f(t||"*",l.nodeType?[l]:l,[]),g=e&&(o||!t)?y(m,p,e,l,d):m,h=n?a||(o?e:u||r)?[]:s:g,b,_,v;if(n&&n(g,h,l,d),r)for(b=y(h,c),r(b,[],l,d),_=b.length;_--;)(v=b[_])&&(h[c[_]]=!(g[c[_]]=v));if(!o)h=y(h===s?h.splice(u,h.length):h),a?a(null,s,h,d):N.apply(s,h);else if(a||e){if(a){for(b=[],_=h.length;_--;)(v=h[_])&&b.push(g[_]=v);a(null,h=[],b,d)}for(_=h.length;_--;)(v=h[_])&&-1<(b=a?F(o,v):p[_])&&(o[b]=!(s[b]=v))}})}function _(e){for(var t=e.length,n=se.relative[e[0].type],o=n||se.relative[" "],r=n?1:0,a=g(function(e){return e===d},o,!0),s=g(function(e){return-1<F(d,e)},o,!0),l=[function(e,t,o){var i=!n&&(o||t!==me)||((d=t).nodeType?a(e,t,o):s(e,t,o));return d=null,i}],d,p,c;r<t;r++)if(p=se.relative[e[r].type])l=[g(h(l),p)];else{if(p=se.filter[e[r].type].apply(null,e[r].matches),p[x]){for(c=++r;c<t&&!se.relative[e[c].type];c++);return b(1<r&&h(l),1<r&&m(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(U,"$1"),p,r<c&&_(e.slice(r,c)),c<t&&_(e=e.slice(c)),c<t&&m(e))}l.push(p)}return h(l)}function v(e,n){var r=0<n.length,a=0<e.length,s=function(o,s,l,d,p){var c=0,u="0",m=o&&[],g=[],h=me,f=o||a&&se.find.TAG("*",p),b=k+=null==h?1:Math.random()||.1,_=f.length,v,x,w;for(p&&(me=s===ye||s||p);u!==_&&null!=(v=f[u]);u++){if(a&&v){for(x=0,s||v.ownerDocument===ye||(fe(v),l=!_e);w=e[x++];)if(w(v,s||ye,l)){d.push(v);break}p&&(k=b)}r&&((v=!w&&v)&&c--,o&&m.push(v))}if(c+=u,r&&u!==c){for(x=0;w=n[x++];)w(m,g,s,l);if(o){if(0<c)for(;u--;)m[u]||g[u]||(g[u]=R.call(d));g=y(g)}N.apply(d,g),p&&!o&&0<g.length&&1<c+n.length&&t.uniqueSort(d)}return p&&(k=b,me=h),m};return r?o(s):s}var x="sizzle"+1*new Date,w=e.document,k=0,T=0,C=n(),S=n(),E=n(),D=function(e,t){return e===t&&(he=!0),0},A=1<<31,P={}.hasOwnProperty,O=[],R=O.pop,L=O.push,N=O.push,I=O.slice,F=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=/[\x20\t\r\n\f]+/g,U=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,B=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,W=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,V=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,Y=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,G=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Q={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,oe=function(e,t,n){var o="0x"+t-65536;return o!=o||n?t:0>o?String.fromCharCode(o+65536):String.fromCharCode(55296|o>>10,56320|1023&o)},ie=function(){fe()},re,ae,se,le,de,pe,ce,ue,me,ge,he,fe,ye,be,_e,ve,xe,we,ke;try{N.apply(O=I.call(w.childNodes),w.childNodes),O[w.childNodes.length].nodeType}catch(t){N={apply:O.length?function(e,t){L.apply(e,I.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}for(re in ae=t.support={},de=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},fe=t.setDocument=function(e){var t=e?e.ownerDocument||e:w,n,o;return t!==ye&&9===t.nodeType&&t.documentElement?(ye=t,be=ye.documentElement,_e=!de(ye),(o=ye.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),ae.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),ae.getElementsByTagName=r(function(e){return e.appendChild(ye.createComment("")),!e.getElementsByTagName("*").length}),ae.getElementsByClassName=K.test(ye.getElementsByClassName),ae.getById=r(function(e){return be.appendChild(e).id=x,!ye.getElementsByName||!ye.getElementsByName(x).length}),ae.getById?(se.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&_e){var n=t.getElementById(e);return n?[n]:[]}},se.filter.ID=function(e){var t=e.replace(ne,oe);return function(e){return e.getAttribute("id")===t}}):(delete se.find.ID,se.filter.ID=function(e){var t=e.replace(ne,oe);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),se.find.TAG=ae.getElementsByTagName?function(e,t){return"undefined"==typeof t.getElementsByTagName?ae.qsa?t.querySelectorAll(e):void 0:t.getElementsByTagName(e)}:function(e,t){var n=[],o=0,r=t.getElementsByTagName(e),a;if("*"===e){for(;a=r[o++];)1===a.nodeType&&n.push(a);return n}return r},se.find.CLASS=ae.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&_e)return t.getElementsByClassName(e)},xe=[],ve=[],(ae.qsa=K.test(ye.querySelectorAll))&&(r(function(e){be.appendChild(e).innerHTML="<a id='"+x+"'></a>"+"<select id='"+x+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&ve.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||ve.push("\\["+z+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+x+"-]").length||ve.push("~="),e.querySelectorAll(":checked").length||ve.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||ve.push(".#.+[+~]")}),r(function(e){var t=ye.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&ve.push("name"+z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||ve.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),ve.push(",.*:")})),(ae.matchesSelector=K.test(we=be.matches||be.webkitMatchesSelector||be.mozMatchesSelector||be.oMatchesSelector||be.msMatchesSelector))&&r(function(e){ae.disconnectedMatch=we.call(e,"div"),we.call(e,"[s!='']:x"),xe.push("!=",":("+H+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+("\\["+z+"*("+H+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+z+"*\\]")+")*)|"+".*"+")\\)|)")}),ve=ve.length&&new RegExp(ve.join("|")),xe=xe.length&&new RegExp(xe.join("|")),n=K.test(be.compareDocumentPosition),ke=n||K.test(be.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!!(o&&1===o.nodeType&&(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=n?function(e,t){if(e===t)return he=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!ae.sortDetached&&t.compareDocumentPosition(e)===n?e===ye||e.ownerDocument===w&&ke(w,e)?-1:t===ye||t.ownerDocument===w&&ke(w,t)?1:ge?F(ge,e)-F(ge,t):0:4&n?-1:1)}:function(e,t){if(e===t)return he=!0,0;var n=0,o=e.parentNode,r=t.parentNode,a=[e],l=[t],d;if(!o||!r)return e===ye?-1:t===ye?1:o?-1:r?1:ge?F(ge,e)-F(ge,t):0;if(o===r)return s(e,t);for(d=e;d=d.parentNode;)a.unshift(d);for(d=t;d=d.parentNode;)l.unshift(d);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===w?-1:l[n]===w?1:0},ye):ye},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==ye&&fe(e),n=n.replace(V,"='$1']"),ae.matchesSelector&&_e&&!E[n+" "]&&(!xe||!xe.test(n))&&(!ve||!ve.test(n)))try{var o=we.call(e,n);if(o||ae.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(t){}return 0<t(n,ye,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!==ye&&fe(e),ke(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==ye&&fe(e);var n=se.attrHandle[t.toLowerCase()],o=n&&P.call(se.attrHandle,t.toLowerCase())?n(e,t,!_e):void 0;return void 0===o?ae.attributes||!_e?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null:o},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t=[],n=0,o=0,r;if(he=!ae.detectDuplicates,ge=!ae.sortStable&&e.slice(0),e.sort(D),he){for(;r=e[o++];)r===e[o]&&(n=t.push(o));for(;n--;)e.splice(t[n],1)}return ge=null,e},le=t.getText=function(e){var t="",n=0,o=e.nodeType,r;if(!o)for(;r=e[n++];)t+=le(r);else if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=le(e)}else if(3===o||4===o)return e.nodeValue;return t},se=t.selectors={cacheLength:50,createPseudo:o,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,oe),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,oe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(!e[3]&&t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t=!e[6]&&e[2],n;return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":t&&Y.test(t)&&(n=pe(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,oe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,o){return function(i){var r=t.attr(i,e);return null==r?"!="===n:!n||(r+="","="===n?r===o:"!="===n?r!==o:"^="===n?o&&0===r.indexOf(o):"*="===n?o&&-1<r.indexOf(o):"$="===n?o&&r.slice(-o.length)===o:"~="===n?-1<(" "+r.replace(q," ")+" ").indexOf(o):"|="==n&&(r===o||r.slice(0,o.length+1)===o+"-"))}},CHILD:function(e,t,n,o,i){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===o&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var d=r==a?"previousSibling":"nextSibling",p=t.parentNode,c=s&&t.nodeName.toLowerCase(),u=!l&&!s,m=!1,g,h,f,y,b,_;if(p){if(r){for(;d;){for(y=t;y=y[d];)if(s?y.nodeName.toLowerCase()===c:1===y.nodeType)return!1;_=d="only"===e&&!_&&"nextSibling"}return!0}if(_=[a?p.firstChild:p.lastChild],a&&u){for(y=p,f=y[x]||(y[x]={}),h=f[y.uniqueID]||(f[y.uniqueID]={}),g=h[e]||[],b=g[0]===k&&g[1],m=b&&g[2],y=b&&p.childNodes[b];y=++b&&y&&y[d]||(m=b=0)||_.pop();)if(1===y.nodeType&&++m&&y===t){h[e]=[k,b,m];break}}else if(u&&(y=t,f=y[x]||(y[x]={}),h=f[y.uniqueID]||(f[y.uniqueID]={}),g=h[e]||[],b=g[0]===k&&g[1],m=b),!1===m)for(;(y=++b&&y&&y[d]||(m=b=0)||_.pop())&&!((s?y.nodeName.toLowerCase()===c:1===y.nodeType)&&++m&&(u&&(f=y[x]||(y[x]={}),h=f[y.uniqueID]||(f[y.uniqueID]={}),h[e]=[k,m]),y===t)););return m-=i,m===o||0==m%o&&0<=m/o}}},PSEUDO:function(e,n){var r=se.pseudos[e]||se.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e),i;return r[x]?r(n):1<r.length?(i=[e,e,"",n],se.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,t){for(var o=r(e,n),a=o.length,s;a--;)s=F(e,o[a]),e[s]=!(t[s]=o[a])}):function(e){return r(e,0,i)}):r}},pseudos:{not:o(function(e){var t=[],n=[],r=ce(e.replace(U,"$1"));return r[x]?o(function(e,t,n,o){for(var a=r(e,null,o,[]),s=e.length,l;s--;)(l=a[s])&&(e[s]=!(t[s]=l))}):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:o(function(e){return function(n){return 0<t(e,n).length}}),contains:o(function(e){return e=e.replace(ne,oe),function(t){return-1<(t.textContent||t.innerText||le(t)).indexOf(e)}}),lang:o(function(e){return G.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ne,oe).toLowerCase(),function(t){var n;do if(n=_e?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===be},focus:function(e){return e===ye.activeElement&&(!ye.hasFocus||ye.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!se.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:p(function(){return[0]}),last:p(function(e,t){return[t-1]}),eq:p(function(e,t,n){return[0>n?n+t:n]}),even:p(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:p(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:p(function(e,t,n){for(var o=0>n?n+t:n;0<=--o;)e.push(o);return e}),gt:p(function(e,t,n){for(var o=0>n?n+t:n;++o<t;)e.push(o);return e})}},se.pseudos.nth=se.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})se.pseudos[re]=l(re);for(re in{submit:!0,reset:!0})se.pseudos[re]=d(re);return u.prototype=se.filters=se.pseudos,se.setFilters=new u,pe=t.tokenize=function(e,n){var o=S[e+" "],i,r,a,s,l,d,p;if(o)return n?0:o.slice(0);for(l=e,d=[],p=se.preFilter;l;){for(s in(!i||(r=B.exec(l)))&&(r&&(l=l.slice(r[0].length)||l),d.push(a=[])),i=!1,(r=W.exec(l))&&(i=r.shift(),a.push({value:i,type:r[0].replace(U," ")}),l=l.slice(i.length)),se.filter)(r=Q[s].exec(l))&&(!p[s]||(r=p[s](r)))&&(i=r.shift(),a.push({value:i,type:s,matches:r}),l=l.slice(i.length));if(!i)break}return n?l.length:l?t.error(e):S(e,d).slice(0)},ce=t.compile=function(e,t){var n=[],o=[],r=E[e+" "],a;if(!r){for(t||(t=pe(e)),a=t.length;a--;)r=_(t[a]),r[x]?n.push(r):o.push(r);r=E(e,v(o,n)),r.selector=e}return r},ue=t.select=function(e,t,n,o){var r="function"==typeof e&&e,a=!o&&pe(e=r.selector||e),s,l,d,p,u;if(n=n||[],1===a.length){if(l=a[0]=a[0].slice(0),2<l.length&&"ID"===(d=l[0]).type&&ae.getById&&9===t.nodeType&&_e&&se.relative[l[1].type]){if(t=(se.find.ID(d.matches[0].replace(ne,oe),t)||[])[0],!t)return n;r&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=Q.needsContext.test(e)?0:l.length;s--&&(d=l[s],!se.relative[p=d.type]);)if((u=se.find[p])&&(o=u(d.matches[0].replace(ne,oe),ee.test(l[0].type)&&c(t.parentNode)||t))){if(l.splice(s,1),e=o.length&&m(l),!e)return N.apply(n,o),n;break}}return(r||ce(e,a))(o,t,!_e,n,!t||ee.test(e)&&c(t.parentNode)||t),n},ae.sortStable=x.split("").sort(D).join("")===x,ae.detectDuplicates=!!he,fe(),ae.sortDetached=r(function(e){return 1&e.compareDocumentPosition(ye.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),ae.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(M,function(e,t,n){var o;if(!n)return!0===e[t]?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),t}(e);ae.find=ce,ae.expr=ce.selectors,ae.expr[":"]=ae.expr.pseudos,ae.uniqueSort=ae.unique=ce.uniqueSort,ae.text=ce.getText,ae.isXMLDoc=ce.isXML,ae.contains=ce.contains;var ue=function(e,t,n){for(var o=[];(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(void 0!==n&&ae(e).is(n))break;o.push(e)}return o},me=function(e,t){for(var o=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&o.push(e);return o},ge=ae.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?ae.find.matchesSelector(o,e)?[o]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t=this.length,n=[],o=this,r;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(r=0;r<t;r++)if(ae.contains(o[r],this))return!0}));for(r=0;r<t;r++)ae.find(e,o[r],n);return n=this.pushStack(1<t?ae.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&ge.test(e)?ae(e):e||[],!1).length}});var ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=ae.fn.init=function(e,t,n){var o,i;if(!e)return this;if(n=n||_e,"string"==typeof e){if(o="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ye.exec(e),o&&(o[1]||!t)){if(o[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),he.test(o[1])&&ae.isPlainObject(t))for(o in t)ae.isFunction(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return i=X.getElementById(o[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=e,this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?void 0===n.ready?e(ae):n.ready(e):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))},_e;be.prototype=ae.fn,_e=ae(X);var ve=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({has:function(e){var t=ae(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ae.contains(this,t[e]))return!0})},closest:function(e,t){for(var n=0,o=this.length,r=[],a=ge.test(e)||"string"!=typeof e?ae(e,t||this.context):0,s;n<o;n++)for(s=this[n];s&&s!==t;s=s.parentNode)if(11>s.nodeType&&(a?-1<a.index(s):1===s.nodeType&&ae.find.matchesSelector(s,e))){r.push(s);break}return this.pushStack(1<r.length?ae.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?ee.call(ae(e),this[0]):ee.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.uniqueSort(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,n){return ue(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,n){return ue(e,"nextSibling",n)},prevUntil:function(e,t,n){return ue(e,"previousSibling",n)},siblings:function(e){return me((e.parentNode||{}).firstChild,e)},children:function(e){return me(e.firstChild)},contents:function(e){return e.contentDocument||ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(n,o){var i=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(o=n),o&&"string"==typeof o&&(i=ae.filter(o,i)),1<this.length&&(!xe[e]&&ae.uniqueSort(i),ve.test(e)&&i.reverse()),this.pushStack(i)}});var we=/\S+/g;ae.Callbacks=function(e){e="string"==typeof e?r(e):ae.extend({},e);var t=[],n=[],o=-1,i=function(){for(p=e.once,d=s=!0;n.length;o=-1)for(l=n.shift();++o<t.length;)!1===t[o].apply(l[0],l[1])&&e.stopOnFalse&&(o=t.length,l=!1);e.memory||(l=!1),s=!1,p&&(l?t=[]:t="")},a={add:function(){return t&&(l&&!s&&(o=t.length-1,n.push(l)),function n(o){ae.each(o,function(o,i){ae.isFunction(i)?(!e.unique||!a.has(i))&&t.push(i):i&&i.length&&"string"!==ae.type(i)&&n(i)})}(arguments),l&&!s&&i()),this},remove:function(){return ae.each(arguments,function(e,n){for(var i;-1<(i=ae.inArray(n,t,i));)t.splice(i,1),i<=o&&o--}),this},has:function(e){return e?-1<ae.inArray(e,t):0<t.length},empty:function(){return t&&(t=[]),this},disable:function(){return p=n=[],t=l="",this},disabled:function(){return!t},lock:function(){return p=n=[],l||(t=l=""),this},locked:function(){return!!p},fireWith:function(e,t){return p||(t=t||[],t=[e,t.slice?t.slice():t],n.push(t),!s&&i()),this},fire:function(){return a.fireWith(this,arguments),this},fired:function(){return!!d}},s,l,d,p;return a},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(n){ae.each(t,function(t,i){var a=ae.isFunction(e[t])&&e[t];r[i[1]](function(){var e=a&&a.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===o?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null==e?o:ae.extend(e,o)}},r={};return o.pipe=o.then,ae.each(t,function(e,i){var a=i[2],s=i[3];o[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[i[0]]=function(){return r[i[0]+"With"](this===r?o:this,arguments),this},r[i[0]+"With"]=a.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=0,n=J.call(arguments),o=n.length,r=1!==o||e&&ae.isFunction(e.promise)?o:0,a=1===r?e:ae.Deferred(),s=function(e,t,n){return function(o){t[e]=this,n[e]=1<arguments.length?J.call(arguments):o,n===l?a.notifyWith(t,n):! --r&&a.resolveWith(t,n)}},l,d,p;if(1<o)for(l=Array(o),d=Array(o),p=Array(o);t<o;t++)n[t]&&ae.isFunction(n[t].promise)?n[t].promise().progress(s(t,d,l)).done(s(t,p,n)).fail(a.reject):--r;return r||a.resolveWith(p,n),a.promise()}});var ke;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){(!0===e?! --ae.readyWait:!ae.isReady)&&(ae.isReady=!0,!0!==e&&0<--ae.readyWait||(ke.resolveWith(X,[ae]),ae.fn.triggerHandler&&(ae(X).triggerHandler("ready"),ae(X).off("ready"))))}}),ae.ready.promise=function(t){return ke||(ke=ae.Deferred(),"complete"!==X.readyState&&("loading"===X.readyState||X.documentElement.doScroll)?(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a)):e.setTimeout(ae.ready)),ke.promise(t)},ae.ready.promise();var Te=function(e,t,n,o,r,a,s){var l=0,d=e.length,p=null==n;if("object"===ae.type(n))for(l in r=!0,n)Te(e,t,l,n[l],!0,a,s);else if(void 0!==o&&(r=!0,ae.isFunction(o)||(s=!0),p&&(s?(t.call(e,o),t=null):(p=t,t=function(e,t,n){return p.call(ae(e),n)})),t))for(;l<d;l++)t(e[l],n,s?o:o.call(e[l],l,t(e[l],n)));return r?e:p?t.call(e):d?t(e[0],n):a},Ce=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ce(e))return{};var t=e[this.expando];return t||(t={},Ce(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o=this.cache(e),i;if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var o;return void 0===t||t&&"string"==typeof t&&void 0===n?(o=this.get(e,t),void 0===o?this.get(e,ae.camelCase(t)):o):(this.set(e,t,n),void 0===n?t:n)},remove:function(e,t){var n=e[this.expando],o,r,a;if(void 0!==n){if(void 0===t)this.register(e);else for(ae.isArray(t)?r=t.concat(t.map(ae.camelCase)):(a=ae.camelCase(t),(t in n)?r=[t,a]:(r=a,r=(r in n)?[r]:r.match(we)||[])),o=r.length;o--;)delete n[r[o]];(void 0===t||ae.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ae.isEmptyObject(t)}};var Se=new s,Ee=new s,je=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;ae.extend({hasData:function(e){return Ee.hasData(e)||Se.hasData(e)},data:function(e,t,n){return Ee.access(e,t,n)},removeData:function(e,t){Ee.remove(e,t)},_data:function(e,t,n){return Se.access(e,t,n)},_removeData:function(e,t){Se.remove(e,t)}}),ae.fn.extend({data:function(e,t){var n=this[0],o=n&&n.attributes,r,a,s;if(void 0===e){if(this.length&&(s=Ee.get(n),1===n.nodeType&&!Se.get(n,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&(a=o[r].name,0===a.indexOf("data-")&&(a=ae.camelCase(a.slice(5)),l(n,a,s[a])));Se.set(n,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){Ee.set(this,e)}):Te(this,function(t){var o,i;return n&&void 0===t?(o=Ee.get(n,e)||Ee.get(n,e.replace(De,"-$&").toLowerCase()),void 0!==o)?o:(i=ae.camelCase(e),o=Ee.get(n,i),void 0!==o)?o:(o=l(n,i,void 0),void 0===o?void 0:o):void(i=ae.camelCase(e),this.each(function(){var n=Ee.get(this,i);Ee.set(this,i,t),-1<e.indexOf("-")&&void 0!==n&&Ee.set(this,e,t)}))},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Ee.remove(this,e)})}}),ae.extend({queue:function(e,t,n){var o;if(e)return t=(t||"fx")+"queue",o=Se.get(e,t),n&&(!o||ae.isArray(n)?o=Se.access(e,t,ae.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),o=n.length,i=n.shift(),r=ae._queueHooks(e,t),a=function(){ae.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),o--),i&&("fx"===t&&n.unshift("inprogress"),delete r.stop,i.call(e,a,r)),!o&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Se.get(e,n)||Se.access(e,n,{empty:ae.Callbacks("once memory").add(function(){Se.remove(e,[t+"queue",n])})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n=1,o=ae.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])},l;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)l=Se.get(r[a],e+"queueHooks"),l&&l.empty&&(n++,l.empty.add(s));return s(),o.promise(t)}});var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),Oe=["Top","Right","Bottom","Left"],Re=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},Le=/^(?:checkbox|radio)$/i,Ne=/<([\w:-]+)/,Ie=/^$|\/(?:java|ecma)script/i,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td;var Me=/<|&#?\w+;/;(function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var ze=/^key/,He=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qe=/^([^.]*)(?:\.(.+)|)/;ae.event={global:{},add:function(n,o,i,r,a){var s=Se.get(n),l,d,p,c,u,e,m,g,h,f,y;if(s)for(i.handler&&(l=i,i=l.handler,a=l.selector),i.guid||(i.guid=ae.guid++),(c=s.events)||(c=s.events={}),(d=s.handle)||(d=s.handle=function(t){return"undefined"!=typeof ae&&ae.event.triggered!==t.type?ae.event.dispatch.apply(n,arguments):void 0}),o=(o||"").match(we)||[""],u=o.length;u--;)(p=qe.exec(o[u])||[],h=y=p[1],f=(p[2]||"").split(".").sort(),!!h)&&(m=ae.event.special[h]||{},h=(a?m.delegateType:m.bindType)||h,m=ae.event.special[h]||{},e=ae.extend({type:h,origType:y,data:r,handler:i,guid:i.guid,selector:a,needsContext:a&&ae.expr.match.needsContext.test(a),namespace:f.join(".")},l),(g=c[h])||(g=c[h]=[],g.delegateCount=0,(!m.setup||!1===m.setup.call(n,r,f,d))&&n.addEventListener&&n.addEventListener(h,d)),m.add&&(m.add.call(n,e),!e.handler.guid&&(e.handler.guid=i.guid)),a?g.splice(g.delegateCount++,0,e):g.push(e),ae.event.global[h]=!0)},remove:function(e,n,o,i,r){var a=Se.hasData(e)&&Se.get(e),s,l,d,p,c,u,m,g,h,f,y;if(a&&(p=a.events)){for(n=(n||"").match(we)||[""],c=n.length;c--;){if(d=qe.exec(n[c])||[],h=y=d[1],f=(d[2]||"").split(".").sort(),!h){for(h in p)ae.event.remove(e,h+n[c],o,i,!0);continue}for(m=ae.event.special[h]||{},h=(i?m.delegateType:m.bindType)||h,g=p[h]||[],d=d[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=g.length;s--;)u=g[s],(r||y===u.origType)&&(!o||o.guid===u.guid)&&(!d||d.test(u.namespace))&&(!i||i===u.selector||"**"===i&&u.selector)&&(g.splice(s,1),u.selector&&g.delegateCount--,m.remove&&m.remove.call(e,u));l&&!g.length&&((!m.teardown||!1===m.teardown.call(e,f,a.handle))&&ae.removeEvent(e,h,a.handle),delete p[h])}ae.isEmptyObject(p)&&Se.remove(e,"handle events")}},dispatch:function(e){e=ae.event.fix(e);var t=[],n=J.call(arguments),o=(Se.get(this,"events")||{})[e.type]||[],r=ae.event.special[e.type]||{},a,s,l,d,p;if(n[0]=e,e.delegateTarget=this,!(r.preDispatch&&!1===r.preDispatch.call(this,e))){for(t=ae.event.handlers.call(this,e,o),a=0;(d=t[a++])&&!e.isPropagationStopped();)for(e.currentTarget=d.elem,s=0;(p=d.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(p.namespace))&&(e.handleObj=p,e.data=p.data,l=((ae.event.special[p.origType]||{}).handle||p.handler).apply(d.elem,n),void 0!==l&&!1===(e.result=l)&&(e.preventDefault(),e.stopPropagation()));return r.postDispatch&&r.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n=[],o=t.delegateCount,r=e.target,a,s,l,d;if(o&&r.nodeType&&("click"!==e.type||isNaN(e.button)||1>e.button))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&(!0!==r.disabled||"click"!==e.type)){for(s=[],a=0;a<o;a++)d=t[a],l=d.selector+" ",void 0===s[l]&&(s[l]=d.needsContext?-1<ae(l,this).index(r):ae.find(l,this,null,[r]).length),s[l]&&s.push(d);s.length&&n.push({elem:r,handlers:s})}return o<t.length&&n.push({elem:this,handlers:t.slice(o)}),n},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null==t.charCode?t.keyCode:t.charCode),e}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(e,t){var n=t.button,o,i,r;return null==e.pageX&&null!=t.clientX&&(o=e.target.ownerDocument||X,i=o.documentElement,r=o.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===n||(e.which=1&n?1:2&n?3:4&n?2:0),e}},fix:function(e){if(e[ae.expando])return e;var t=e.type,n=e,o=this.fixHooks[t],r,a,s;for(o||(this.fixHooks[t]=o=He.test(t)?this.mouseHooks:ze.test(t)?this.keyHooks:{}),s=o.props?this.props.concat(o.props):this.props,e=new ae.Event(n),r=s.length;r--;)a=s[r],e[a]=n[a];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,n):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ae.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ae.Event=function(e,t){return this instanceof ae.Event?void(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?m:g):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),this[ae.expando]=!0):new ae.Event(e,t)},ae.Event.prototype={constructor:ae.Event,isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=m,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=m,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=m,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,o=e.relatedTarget,i=e.handleObj,r;return o&&(o===n||ae.contains(n,o))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),ae.fn.extend({on:function(e,t,n,o){return f(this,e,t,n,o)},one:function(e,t,n,o){return f(this,e,t,n,o,1)},off:function(e,t,n){var o,i;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,ae(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=g),this.each(function(){ae.event.remove(this,e,n,t)})}});var Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Be=/<script|<style|<link/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^true\/(.*)/,$e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ae.extend({htmlPrefilter:function(e){return e.replace(Ue,"<$1></$2>")},clone:function(e,t,n){var o=e.cloneNode(!0),r=ae.contains(e.ownerDocument,e),a,s,d,u;if(!ie.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!ae.isXMLDoc(e))for(u=p(o),d=p(e),(a=0,s=d.length);a<s;a++)x(d[a],u[a]);if(t)if(n)for(d=d||p(e),u=u||p(o),(a=0,s=d.length);a<s;a++)v(d[a],u[a]);else v(e,o);return u=p(o,"script"),0<u.length&&c(u,!r&&p(e,"script")),o},cleanData:function(e){for(var t=ae.event.special,n=0,o,r,a;void 0!==(r=e[n]);n++)if(Ce(r)){if(o=r[Se.expando]){if(o.events)for(a in o.events)t[a]?ae.event.remove(r,a):ae.removeEvent(r,a,o.handle);r[Se.expando]=void 0}r[Ee.expando]&&(r[Ee.expando]=void 0)}}}),ae.fn.extend({domManip:w,detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Te(this,function(e){return void 0===e?ae.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e=0,t;null!=(t=this[e]);e++)1===t.nodeType&&(ae.cleanData(p(t,!1)),t.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Te(this,function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Fe[(Ne.exec(e)||["",""])[1].toLowerCase()]){e=ae.htmlPrefilter(e);try{for(;n<o;n++)t=this[n]||{},1===t.nodeType&&(ae.cleanData(p(t,!1)),t.innerHTML=e);t=0}catch(t){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return w(this,arguments,function(t){var n=this.parentNode;0>ae.inArray(this,e)&&(ae.cleanData(p(this)),n&&n.replaceChild(t,this))},e)}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n=[],o=ae(e),r=o.length-1,a=0,s;a<=r;a++)s=a===r?this:this.clone(!0),ae(o[a])[t](s),Z.apply(n,s.get());return this.pushStack(n)}});var Ye={HTML:"block",BODY:"block"},Ge=/^margin/,Qe=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Je=function(e,t,n,o){var i={},r,a;for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,o||[]),t)e.style[a]=i[a];return r},Ke=X.documentElement,Ze;(function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%",o.innerHTML="",Ke.appendChild(n);var t=e.getComputedStyle(o);i="1%"!==t.top,s="2px"===t.marginLeft,r="4px"===t.width,o.style.marginRight="50%",a="4px"===t.marginRight,Ke.removeChild(n)}var n=X.createElement("div"),o=X.createElement("div"),i,r,a,s;o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===o.style.backgroundClip,n.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute",n.appendChild(o),ae.extend(ie,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),a},reliableMarginLeft:function(){return null==r&&t(),s},reliableMarginRight:function(){var t=o.appendChild(X.createElement("div")),i;return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",Ke.appendChild(n),i=!parseFloat(e.getComputedStyle(t).marginRight),Ke.removeChild(n),o.removeChild(t),i}}))})();var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"},ot=["Webkit","O","Moz","ms"],it=X.createElement("div").style;ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=S(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i=ae.camelCase(t),r=e.style,a,s,l;if(t=ae.cssProps[i]||(ae.cssProps[i]=j(i)||i),l=ae.cssHooks[t]||ae.cssHooks[i],void 0!==n){if(s=typeof n,"string"===s&&(a=Pe.exec(n))&&a[1]&&(n=d(e,t,a),s="number"),null==n||n!==n)return;"number"===s&&(n+=a&&a[3]||(ae.cssNumber[i]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(r[t]="inherit"),l&&"set"in l&&void 0===(n=l.set(e,n,o))||(r[t]=n)}else return l&&"get"in l&&void 0!==(a=l.get(e,!1,o))?a:r[t]}},css:function(e,t,n,o){var i=ae.camelCase(t),r,a,s;return t=ae.cssProps[i]||(ae.cssProps[i]=j(i)||i),s=ae.cssHooks[t]||ae.cssHooks[i],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=S(e,t,o)),"normal"===r&&t in nt&&(r=nt[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,o){if(n)return et.test(ae.css(e,"display"))&&0===e.offsetWidth?Je(e,tt,function(){return P(e,t,o)}):P(e,t,o)},set:function(e,n,o){var i=o&&Xe(e),r=o&&A(e,t,o,"border-box"===ae.css(e,"boxSizing",!1,i),i),a;return r&&(a=Pe.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=ae.css(e,t)),D(e,n,r)}}}),ae.cssHooks.marginLeft=E(ie.reliableMarginLeft,function(e,t){if(t)return(parseFloat(S(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ae.cssHooks.marginRight=E(ie.reliableMarginRight,function(e,t){if(t)return Je(e,{display:"inline-block"},S,[e,"marginRight"])}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var o=0,r={},a="string"==typeof n?n.split(" "):[n];4>o;o++)r[e+Oe[o]+t]=a[o]||a[o-2]||a[0];return r}},Ge.test(e)||(ae.cssHooks[e+t].set=D)}),ae.fn.extend({css:function(e,t){return Te(this,function(e,t,n){var o={},r=0,a,s;if(ae.isArray(t)){for(a=Xe(e),s=t.length;r<s;r++)o[t[r]]=ae.css(e,t[r],!1,a);return o}return void 0===n?ae.css(e,t):ae.style(e,t,n)},e,t,1<arguments.length)},show:function(){return O(this,!0)},hide:function(){return O(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Re(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=R,R.prototype={constructor:R,init:function(e,t,n,o,i,r){this.elem=e,this.prop=n,this.easing=i||ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=r||(ae.cssNumber[n]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t=R.propHooks[this.prop],n;return this.pos=this.options.duration?n=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):n=e,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):1===e.elem.nodeType&&(null!=e.elem.style[ae.cssProps[e.prop]]||ae.cssHooks[e.prop])?ae.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},ae.fx=R.prototype.init,ae.fx.step={};var rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/,st,lt;ae.Animation=ae.extend(z,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return d(n.elem,e,Pe.exec(t),n),n}]},tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n=0,o=e.length,i;n<o;n++)i=e[n],z.tweeners[i]=z.tweeners[i]||[],z.tweeners[i].unshift(t)},prefilters:[F],prefilter:function(e,t){t?z.prefilters.unshift(e):z.prefilters.push(e)}}),ae.speed=function(e,t,n){var o=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return o.duration=ae.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in ae.fx.speeds?ae.fx.speeds[o.duration]:ae.fx.speeds._default,(null==o.queue||!0===o.queue)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){ae.isFunction(o.old)&&o.old.call(this),o.queue&&ae.dequeue(this,o.queue)},o},ae.fn.extend({fadeTo:function(e,t,n,o){return this.filter(Re).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var i=ae.isEmptyObject(e),r=ae.speed(t,n,o),a=function(){var t=z(this,ae.extend({},e),r);(i||Se.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=ae.timers,a=Se.get(this);if(i)a[i]&&a[i].stop&&o(a[i]);else for(i in a)a[i]&&a[i].stop&&at.test(i)&&o(a[i]);for(i=r.length;i--;)r[i].elem===this&&(null==e||r[i].queue===e)&&(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&ae.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t=Se.get(this),n=t[e+"queue"],o=t[e+"queueHooks"],i=ae.timers,r=n?n.length:0,a;for(t.finish=!0,ae.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),a=i.length;a--;)i[a].elem===this&&i[a].queue===e&&(i[a].anim.stop(!0),i.splice(a,1));for(a=0;a<r;a++)n[a]&&n[a].finish&&n[a].finish.call(this);delete t.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,o,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,o,i)}}),ae.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}}),ae.timers=[],ae.fx.tick=function(){var e=0,t=ae.timers,n;for(st=ae.now();e<t.length;e++)n=t[e],n()||t[e]!==n||t.splice(e--,1);t.length||ae.fx.stop(),st=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){lt||(lt=e.setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){e.clearInterval(lt),lt=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(t,n){return t=ae.fx?ae.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,o){var i=e.setTimeout(n,t);o.stop=function(){e.clearTimeout(i)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var dt=ae.expr.attrHandle,pt;ae.fn.extend({attr:function(e,t){return Te(this,ae.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var o=e.nodeType,i,r;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ae.prop(e,t,n):(1===o&&ae.isXMLDoc(e)||(t=t.toLowerCase(),r=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?pt:void 0)),void 0!==n)?null===n?void ae.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ae.find.attr(e,t),null==i?void 0:i)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n=0,o=t&&t.match(we),r,a;if(o&&1===e.nodeType)for(;r=o[n++];)a=ae.propFix[r]||r,ae.expr.match.bool.test(r)&&(e[a]=!1),e.removeAttribute(r)}}),pt={set:function(e,t,n){return!1===t?ae.removeAttr(e,n):e.setAttribute(n,n),n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||ae.find.attr;dt[t]=function(e,t,o){var i,r;return o||(r=dt[t],dt[t]=i,i=null==n(e,t,o)?null:t.toLowerCase(),dt[t]=r),i}});var ct=/^(?:input|select|textarea|button)$/i,ut=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Te(this,ae.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ae.propFix[e]||e]})}}),ae.extend({prop:function(e,t,n){var o=e.nodeType,i,r;if(3!==o&&8!==o&&2!==o)return 1===o&&ae.isXMLDoc(e)||(t=ae.propFix[t]||t,r=ae.propHooks[t]),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]:r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||ut.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this});var mt=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t=0,n,o,r,a,s,l,d;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(n=e.match(we)||[];o=this[t++];)if(a=H(o),r=1===o.nodeType&&(" "+a+" ").replace(mt," "),r){for(l=0;s=n[l++];)0>r.indexOf(" "+s+" ")&&(r+=s+" ");d=ae.trim(r),a!==d&&o.setAttribute("class",d)}return this},removeClass:function(e){var t=0,n,o,r,a,s,l,d;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(n=e.match(we)||[];o=this[t++];)if(a=H(o),r=1===o.nodeType&&(" "+a+" ").replace(mt," "),r){for(l=0;s=n[l++];)for(;-1<r.indexOf(" "+s+" ");)r=r.replace(" "+s+" "," ");d=ae.trim(r),a!==d&&o.setAttribute("class",d)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"==n?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(n){ae(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,o,r,a;if("string"==n)for(o=0,r=ae(this),a=e.match(we)||[];t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(void 0===e||"boolean"==n)&&(t=H(this),t&&Se.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Se.get(this,"__className__")||""))})},hasClass:function(e){var t=0,n,o;for(n=" "+e+" ";o=this[t++];)if(1===o.nodeType&&-1<(" "+H(o)+" ").replace(mt," ").indexOf(n))return!0;return!1}});var gt=/\r/g,ht=/[\x20\t\r\n\f]+/g;ae.fn.extend({val:function(e){var t=this[0],n,o,r;return arguments.length?(r=ae.isFunction(e),this.each(function(t){var o;1!==this.nodeType||(o=r?e.call(this,t,ae(this).val()):e,null==o?o="":"number"==typeof o?o+="":ae.isArray(o)&&(o=ae.map(o,function(e){return null==e?"":e+""})),n=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],(!n||!("set"in n)||void 0===n.set(this,o,"value"))&&(this.value=o))})):t?(n=ae.valHooks[t.type]||ae.valHooks[t.nodeName.toLowerCase()],n&&"get"in n&&void 0!==(o=n.get(t,"value")))?o:(o=t.value,"string"==typeof o?o.replace(gt,""):null==o?"":o):void 0}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null==t?ae.trim(ae.text(e)).replace(ht," "):t}},select:{get:function(e){for(var t=e.options,n=e.selectedIndex,o="select-one"===e.type||0>n,r=o?null:[],a=o?n+1:t.length,s=0>n?a:o?n:0,l,d;s<a;s++)if(d=t[s],(d.selected||s===n)&&(ie.optDisabled?!d.disabled:null===d.getAttribute("disabled"))&&(!d.parentNode.disabled||!ae.nodeName(d.parentNode,"optgroup"))){if(l=ae(d).val(),o)return l;r.push(l)}return r},set:function(e,t){for(var n=e.options,o=ae.makeArray(t),r=n.length,a,s;r--;)s=n[r],(s.selected=-1<ae.inArray(ae.valHooks.option.get(s),o))&&(a=!0);return a||(e.selectedIndex=-1),o}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){if(ae.isArray(t))return e.checked=-1<ae.inArray(ae(e).val(),t)}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^(?:focusinfocus|focusoutblur)$/;ae.extend(ae.event,{trigger:function(t,n,o,r){var a=[o||X],s=oe.call(t,"type")?t.type:t,l=oe.call(t,"namespace")?t.namespace.split("."):[],d,p,c,u,m,g,h;if((p=c=o=o||X,3!==o.nodeType&&8!==o.nodeType)&&!ft.test(s+ae.event.triggered)&&(-1<s.indexOf(".")&&(l=s.split("."),s=l.shift(),l.sort()),m=0>s.indexOf(":")&&"on"+s,t=t[ae.expando]?t:new ae.Event(s,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=l.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:ae.makeArray(n,[t]),h=ae.event.special[s]||{},r||!h.trigger||!1!==h.trigger.apply(o,n))){if(!r&&!h.noBubble&&!ae.isWindow(o)){for(u=h.delegateType||s,ft.test(u+s)||(p=p.parentNode);p;p=p.parentNode)a.push(p),c=p;c===(o.ownerDocument||X)&&a.push(c.defaultView||c.parentWindow||e)}for(d=0;(p=a[d++])&&!t.isPropagationStopped();)t.type=1<d?u:h.bindType||s,g=(Se.get(p,"events")||{})[t.type]&&Se.get(p,"handle"),g&&g.apply(p,n),g=m&&p[m],g&&g.apply&&Ce(p)&&(t.result=g.apply(p,n),!1===t.result&&t.preventDefault());return t.type=s,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(a.pop(),n)||!Ce(o)||!m||!ae.isFunction(o[s])||ae.isWindow(o)||(c=o[m],c&&(o[m]=null),ae.event.triggered=s,o[s](),ae.event.triggered=void 0,c&&(o[m]=c)),t.result}},simulate:function(t,n,o){var i=ae.extend(new ae.Event,o,{type:t,isSimulated:!0});ae.event.trigger(i,null,n)}}),ae.fn.extend({trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ae.event.trigger(e,t,n,!0)}}),ae.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,t){ae.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e))};ae.event.special[t]={setup:function(){var o=this.ownerDocument||this,i=Se.access(o,t);i||o.addEventListener(e,n,!0),Se.access(o,t,(i||0)+1)},teardown:function(){var o=this.ownerDocument||this,i=Se.access(o,t)-1;i?Se.access(o,t,i):(o.removeEventListener(e,n,!0),Se.remove(o,t))}}});var yt=e.location,bt=ae.now(),_t=/\?/;ae.parseJSON=function(e){return JSON.parse(e+"")},ae.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=new e.DOMParser().parseFromString(t,"text/xml")}catch(t){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&ae.error("Invalid XML: "+t),n};var vt=/#.*$/,xt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/mg,kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tt=/^(?:GET|HEAD)$/,Ct=/^\/\//,St={},Et={},jt="*/".concat("*"),Dt=X.createElement("a");Dt.href=yt.href,ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:kt.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,ae.ajaxSettings),t):B(ae.ajaxSettings,e)},ajaxPrefilter:q(St),ajaxTransport:q(Et),ajax:function(t,n){function o(t,n,o,i){var c=n,u,g,_,x,k;2===m||(m=2,v&&e.clearTimeout(v),f=void 0,b=i||"",h.readyState=0<t?4:0,u=200<=t&&300>t||304===t,o&&(x=W(r,h,o)),x=V(r,x,h,u),u?(r.ifModified&&(k=h.getResponseHeader("Last-Modified"),k&&(ae.lastModified[y]=k),k=h.getResponseHeader("etag"),k&&(ae.etag[y]=k)),204===t||"HEAD"===r.type?c="nocontent":304===t?c="notmodified":(c=x.state,g=x.data,_=x.error,u=!_)):(_=c,(t||!c)&&(c="error",0>t&&(t=0))),h.status=t,h.statusText=(n||c)+"",u?l.resolveWith(a,[g,c,h]):l.rejectWith(a,[h,c,_]),h.statusCode(p),p=void 0,w&&s.trigger(u?"ajaxSuccess":"ajaxError",[h,r,u?g:_]),d.fireWith(a,[h,c]),w&&(s.trigger("ajaxComplete",[h,r]),! --ae.active&&ae.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r=ae.ajaxSetup({},n),a=r.context||r,s=r.context&&(a.nodeType||a.jquery)?ae(a):ae.event,l=ae.Deferred(),d=ae.Callbacks("once memory"),p=r.statusCode||{},c={},u={},m=0,g="canceled",h={readyState:0,getResponseHeader:function(e){var t;if(2==m){if(!_)for(_={};t=wt.exec(b);)_[t[1].toLowerCase()]=t[2];t=_[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2==m?b:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return m||(e=u[n]=u[n]||e,c[e]=t),this},overrideMimeType:function(e){return m||(r.mimeType=e),this},statusCode:function(e){if(e)if(2>m)for(var t in e)p[t]=[p[t],e[t]];else h.always(e[h.status]);return this},abort:function(e){var t=e||g;return f&&f.abort(t),o(0,t),this}},f,y,b,_,v,x,w,k;if(l.promise(h).complete=d.add,h.success=h.done,h.error=h.fail,r.url=((t||r.url||yt.href)+"").replace(vt,"").replace(Ct,yt.protocol+"//"),r.type=n.method||n.type||r.method||r.type,r.dataTypes=ae.trim(r.dataType||"*").toLowerCase().match(we)||[""],null==r.crossDomain){x=X.createElement("a");try{x.href=r.url,x.href=x.href,r.crossDomain=Dt.protocol+"//"+Dt.host!=x.protocol+"//"+x.host}catch(t){r.crossDomain=!0}}if(r.data&&r.processData&&"string"!=typeof r.data&&(r.data=ae.param(r.data,r.traditional)),U(St,r,n,h),2==m)return h;for(k in w=ae.event&&r.global,w&&0==ae.active++&&ae.event.trigger("ajaxStart"),r.type=r.type.toUpperCase(),r.hasContent=!Tt.test(r.type),y=r.url,r.hasContent||(r.data&&(y=r.url+=(_t.test(y)?"&":"?")+r.data,delete r.data),!1===r.cache&&(r.url=xt.test(y)?y.replace(xt,"$1_="+bt++):y+(_t.test(y)?"&":"?")+"_="+bt++)),r.ifModified&&(ae.lastModified[y]&&h.setRequestHeader("If-Modified-Since",ae.lastModified[y]),ae.etag[y]&&h.setRequestHeader("If-None-Match",ae.etag[y])),(r.data&&r.hasContent&&!1!==r.contentType||n.contentType)&&h.setRequestHeader("Content-Type",r.contentType),h.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"===r.dataTypes[0]?"":", "+jt+"; q=0.01"):r.accepts["*"]),r.headers)h.setRequestHeader(k,r.headers[k]);if(r.beforeSend&&(!1===r.beforeSend.call(a,h,r)||2==m))return h.abort();for(k in g="abort",{success:1,error:1,complete:1})h[k](r[k]);if(f=U(Et,r,n,h),!f)o(-1,"No Transport");else{if(h.readyState=1,w&&s.trigger("ajaxSend",[h,r]),2==m)return h;r.async&&0<r.timeout&&(v=e.setTimeout(function(){h.abort("timeout")},r.timeout));try{m=1,f.send(c,o)}catch(t){if(2>m)o(-1,t);else throw t}}return h},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,o,i){return ae.isFunction(n)&&(i=i||o,o=n,n=void 0),ae.ajax(ae.extend({url:e,type:t,dataType:i,data:n,success:o},ae.isPlainObject(e)&&e))}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ae.fn.extend({wrapAll:function(e){var t;return ae.isFunction(e)?this.each(function(t){ae(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return!ae.expr.filters.visible(e)},ae.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var At=/%20/g,Pt=/\[\]$/,Ot=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n=[],o=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},i;if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){o(this.name,this.value)});else for(i in e)Y(i,e[i],t,o);return n.join("&").replace(At,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Lt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:ae.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Nt={0:200,1223:204},It=ae.ajaxSettings.xhr();ie.cors=!!It&&"withCredentials"in It,ie.ajax=It=!!It,ae.ajaxTransport(function(t){var n,o;if(ie.cors||It&&!t.crossDomain)return{send:function(r,a){var s=t.xhr(),l;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(l in t.xhrFields)s[l]=t.xhrFields[l];for(l in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(l,r[l]);n=function(e){return function(){n&&(n=o=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"==typeof s.status?a(s.status,s.statusText):a(0,"error"):a(Nt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),o=s.onerror=n("error"),void 0===s.onabort?s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&o()})}:s.onabort=o,n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(o,i){t=ae("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ft=[],Mt=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||ae.expando+"_"+bt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,o){var i=!1!==t.jsonp&&(Mt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data"),r,a,s;if(i||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,i?t[i]=t[i].replace(Mt,"$1"+r):!1!==t.jsonp&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||ae.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},o.always(function(){void 0===a?ae(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,Ft.push(r)),s&&ae.isFunction(a)&&a(s[0]),s=a=void 0}),"script"}),ae.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var o=he.exec(e),i=!n&&[];return o?[t.createElement(o[1])]:(o=u([e],t,i),i&&i.length&&ae(i).remove(),ae.merge([],o.childNodes))};var zt=ae.fn.load;ae.fn.load=function(e,t,n){if("string"!=typeof e&&zt)return zt.apply(this,arguments);var o=this,i=e.indexOf(" "),r,a,s;return-1<i&&(r=ae.trim(e.slice(i)),e=e.slice(0,i)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&ae.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?ae("<div>").append(ae.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length},ae.offset={setOffset:function(e,t,n){var o=ae.css(e,"position"),i=ae(e),r={},a,s,l,d,p,c,u;"static"===o&&(e.style.position="relative"),p=i.offset(),l=ae.css(e,"top"),c=ae.css(e,"left"),u=("absolute"===o||"fixed"===o)&&-1<(l+c).indexOf("auto"),u?(a=i.position(),d=a.top,s=a.left):(d=parseFloat(l)||0,s=parseFloat(c)||0),ae.isFunction(t)&&(t=t.call(e,n,ae.extend({},p))),null!=t.top&&(r.top=t.top-p.top+d),null!=t.left&&(r.left=t.left-p.left+s),"using"in t?t.using.call(e,r):i.css(r)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t=this[0],n={top:0,left:0},o=t&&t.ownerDocument,i,r;if(o)return(i=o.documentElement,!ae.contains(i,t))?n:(n=t.getBoundingClientRect(),r=G(o),{top:n.top+r.pageYOffset-i.clientTop,left:n.left+r.pageXOffset-i.clientLeft})},position:function(){if(this[0]){var e=this[0],t={top:0,left:0},n,o;return"fixed"===ae.css(e,"position")?o=e.getBoundingClientRect():(n=this.offsetParent(),o=this.offset(),!ae.nodeName(n[0],"html")&&(t=n.offset()),t.top+=ae.css(n[0],"borderTopWidth",!0),t.left+=ae.css(n[0],"borderLeftWidth",!0)),{top:o.top-t.top-ae.css(e,"marginTop",!0),left:o.left-t.left-ae.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||Ke})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ae.fn[e]=function(o){return Te(this,function(e,o,i){var r=G(e);return void 0===i?r?r[t]:e[o]:void(r?r.scrollTo(n?r.pageXOffset:i,n?i:r.pageYOffset):e[o]=i)},e,o,arguments.length)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=E(ie.pixelPosition,function(e,n){if(n)return n=S(e,t),Qe.test(n)?ae(e).position()[t]+"px":n})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,o){ae.fn[o]=function(o,i){var r=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===i?"margin":"border");return Te(this,function(t,n,o){var i;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?ae.css(t,n,a):ae.style(t,n,o,a)},t,r?o:void 0,r,null)}})}),ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var Ht=e.jQuery,qt=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=qt),t&&e.jQuery===ae&&(e.jQuery=Ht),ae},t||(e.jQuery=e.$=ae),ae}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("bluebird",[],t);else{var e;"undefined"==typeof window?"undefined"==typeof global?"undefined"!=typeof self&&(e=self):e=global:e=window,e.Promise=t()}}(function(){var e,t,n;return function d(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){var s="function"==typeof _dereq_&&_dereq_;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return r(e?e:t)},c,c.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof _dereq_&&_dereq_,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=new n(e),o=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),o}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t){"use strict";function n(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=a}function o(e){for(;0<e.length();)i(e)}function i(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),o=e.shift();t.call(n,o)}}var r;try{throw new Error}catch(t){r=t}var a=e("./schedule"),s=e("./queue");n.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},n.prototype.hasCustomScheduler=function(){return this._customScheduler},n.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},n.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},n.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},n.prototype.invokeLater=function(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()},n.prototype.invoke=function(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()},n.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},n.prototype._drainQueues=function(){o(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,o(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},t.exports=n,t.exports.firstLineError=r},{"./queue":26,"./schedule":29}],3:[function(e,t){"use strict";t.exports=function(e,t,n,o){var i=!1,r=function(t,n){this._reject(n)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};e.prototype.bind=function(r){i||(i=!0,e.prototype._propagateFrom=o.propagateFromFunction(),e.prototype._boundValue=o.boundValueFunction());var d=n(r),p=new e(t);p._propagateFrom(this,1);var c=this._target();if(p._setBoundTo(d),d instanceof e){var u={promiseRejectionQueued:!1,promise:p,target:c,bindingPromise:d};c._then(t,a,void 0,p,u),d._then(s,l,void 0,p,u),p._setOnCancel(d)}else p._resolveCallback(c);return p},e.prototype._setBoundTo=function(e){e===void 0?this._bitField&=~2097152:(this._bitField|=2097152,this._boundTo=e)},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t){"use strict";function n(){try{Promise===i&&(Promise=o)}catch(t){}return i}var o;"undefined"!=typeof Promise&&(o=Promise);var i=e("./promise")();i.noConflict=n,t.exports=i},{"./promise":22}],5:[function(e,t){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){function n(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(i)}return o}function o(e){var t=this.pop(),o=n(e,t);return o.apply(e,this)}function i(e){return e[this]}function r(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var a=e("./util"),s=a.canEvaluate,l=a.isIdentifier,d;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if(!!("number"==typeof e))t=r;else if(s){var n=d(e);t=null===n?i:n}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t){"use strict";t.exports=function(t,n,o,i){var r=e("./util"),a=r.tryCatch,s=r.errorObj,l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}else e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||0>=this._branchesRemainingToCancel},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):!(this._branchHasCancelled(),!this._enoughBranchesHaveCancelled())&&(this._invokeOnCancel(),!0)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,n){if(r.isArray(t))for(var o=0;o<t.length;++o)this._doInvokeOnCancel(t[o],n);else if(t!==void 0)if("function"!=typeof t)t._resultCancelled(this);else if(!n){var d=a(t).call(this._boundValue());d===s&&(this._attachExtraTrace(d.e),l.throwLater(d.e))}},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t){"use strict";t.exports=function(t){var n=e("./util"),o=e("./es5").keys,r=n.tryCatch,a=n.errorObj;return function(s,l,d){return function(p){var e=d._boundValue();predicateLoop:for(var c=0,u;c<s.length;++c)if(u=s[c],u===Error||null!=u&&u.prototype instanceof Error){if(p instanceof u)return r(l).call(e,p);}else if("function"==typeof u){var m=r(u).call(e,p);if(m===a)return m;if(m)return r(l).call(e,p)}else if(n.isObject(p)){for(var g=o(u),h=0,f;h<g.length;++h)if(f=g[h],u[f]!=p[f])continue predicateLoop;return r(l).call(e,p)}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(o())}function n(){if(i)return new t}function o(){var e=r.length-1;return 0<=e?r[e]:void 0}var i=!1,r=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,r=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=r,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=l,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=o,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,t){"use strict";t.exports=function(t,n,o,i){function r(e,t){return{promise:t}}function a(){return!1}function s(e,t,n){var o=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+L.toString(e));o._attachCancellationCallback(e)})}catch(t){return t}}function l(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0===t?this._setOnCancel(e):L.isArray(t)?t.push(e):this._setOnCancel([t,e])}function d(){return this._onCancelField}function p(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function m(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function g(){this._trace=new P(this._peekContext())}function h(e,t){if(I(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var o=T(e);L.notEnumerableProp(e,"stack",o.message+"\n"+o.stack.join("\n")),L.notEnumerableProp(e,"__stackCleaned__",!0)}}}function f(){this._trace=void 0}function y(e,t,n,o,r){if(void 0===e&&null!==t&&Y){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&o._bitField))return;n&&(n+=" ");var a="",s="";if(t._trace){for(var l=t._trace.stack.split("\n"),d=w(l),p=d.length-1,c;0<=p;--p)if(c=d[p],!M.test(c)){var u=c.match(z);u&&(a="at "+u[1]+":"+u[2]+":"+u[3]+" ");break}if(0<d.length)for(var m=d[0],p=0;p<l.length;++p)if(l[p]===m){0<p&&(s="\n"+l[p-1]);break}}var g="a promise was created in a "+n+"handler "+a+"but was not returned from it, "+"see http://goo.gl/rRqMUw"+s;o._warn(g,!0,t)}}function b(e,n,o){if(le.warnings){var i=new R(e),r;if(n)o._attachExtraTrace(i);else if(le.longStackTraces&&(r=t._peekContext()))r.attachExtraTrace(i);else{var a=T(i);i.stack=a.message+"\n"+a.stack.join("\n")}oe("warning",i)||C(i,"",!0)}}function _(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function v(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function x(e){for(var t=e[0],n=1;n<e.length;++n){for(var o=e[n],r=t.length-1,a=t[r],s=-1,l=o.length-1;0<=l;--l)if(o[l]===a){s=l;break}for(var l=s,d;0<=l&&(d=o[l],t[r]===d);--l)t.pop(),r--;t=o}}function w(e){for(var t=[],n=0;n<e.length;++n){var o=e[n],r="    (No stack trace)"===o||H.test(o),a=r&&re(o);r&&!a&&(U&&" "!==o.charAt(0)&&(o="    "+o),t.push(o))}return t}function k(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0,o;n<t.length&&(o=t[n],!("    (No stack trace)"===o||H.test(o)));++n);return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function T(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&0<t.length?k(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:w(t)}}function C(e,t,n){if("undefined"!=typeof console){var o;if(L.isObject(e)){var i=e.stack;o=t+q(i,e)}else o=t+(e+"");"function"==typeof X?X(o,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(o)}}function S(e,t,n,o){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(o):t(n,o))}catch(t){O.throwLater(t)}"unhandledRejection"===e?!oe(e,n,o)&&!i&&C(n,"Unhandled rejection "):oe(e,o)}function E(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():L.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var o=JSON.stringify(e);t=o}catch(t){}0===t.length&&(t="(empty array)")}return"(<"+j(t)+">, no stack trace)"}function j(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function D(){return"function"==typeof se}function A(e){var t=e.match(ae);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function P(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);se(this,P),32<t&&this.uncycle()}var O=t._async,R=e("./errors").Warning,L=e("./util"),N=e("./es5"),I=L.canAttachTrace,F=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,M=/\((?:timers\.js):\d+:\d+\)/,z=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,H=null,q=null,U=!1,B=!(0==L.env("BLUEBIRD_DEBUG")||0),W=!!(0!=L.env("BLUEBIRD_WARNINGS")&&(B||L.env("BLUEBIRD_WARNINGS"))),V=!!(0!=L.env("BLUEBIRD_LONG_STACK_TRACES")&&(B||L.env("BLUEBIRD_LONG_STACK_TRACES"))),Y=0!=L.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!L.env("BLUEBIRD_W_FORGOTTEN_RETURN")),G,Q,X,J;(function(){function e(){for(var e=0;e<o.length;++e)o[e]._notifyUnhandledRejection();n()}function n(){o.length=0}var o=[];J=function(t){o.push(t),setTimeout(e,1)},N.defineProperty(t,"_unhandledRejectionCheck",{value:e}),N.defineProperty(t,"_unhandledRejectionClear",{value:n})})(),t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=524288|~1048576&e._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0!=(524288&this._bitField)||(this._setRejectionIsUnhandled(),J(this))},t.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",G,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField|=268435456},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",Q,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=262144},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField&=~262144},t.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},t.prototype._setRejectionIsUnhandled=function(){this._bitField|=1048576},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=~1048576,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},t.prototype._warn=function(e,t,n){return b(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var n=t._getContext();Q=L.contextBind(n,e)},t.onUnhandledRejectionHandled=function(e){var n=t._getContext();G=L.contextBind(n,e)};var K=function(){};t.longStackTraces=function(){if(O.haveItemsQueued()&&!le.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!le.longStackTraces&&D()){var e=t.prototype._captureStackTrace,o=t.prototype._attachExtraTrace,i=t.prototype._dereferenceTrace;le.longStackTraces=!0,K=function(){if(O.haveItemsQueued()&&!le.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=o,t.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),le.longStackTraces=!1},t.prototype._captureStackTrace=g,t.prototype._attachExtraTrace=h,t.prototype._dereferenceTrace=f,n.activateLongStackTraces()}},t.hasLongStackTraces=function(){return le.longStackTraces&&D()};var Z={unhandledrejection:{before:function(){var e=L.global.onunhandledrejection;return L.global.onunhandledrejection=null,e},after:function(e){L.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=L.global.onrejectionhandled;return L.global.onrejectionhandled=null,e},after:function(e){L.global.onrejectionhandled=e}}},ee=function(){var e=function(t,n){if(t){var e;try{return e=t.before(),!L.global.dispatchEvent(n)}finally{t.after(e)}}else return!L.global.dispatchEvent(n)};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return L.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var o=new CustomEvent(t,{detail:n,cancelable:!0});return N.defineProperty(o,"promise",{value:n.promise}),N.defineProperty(o,"reason",{value:n.reason}),e(Z[t],o)}}if("function"==typeof Event){var t=new Event("CustomEvent");return L.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var o=new Event(t,{cancelable:!0});return o.detail=n,N.defineProperty(o,"promise",{value:n.promise}),N.defineProperty(o,"reason",{value:n.reason}),e(Z[t],o)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),L.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!1,!0,n),e(Z[t],o)}}catch(t){}return function(){return!1}}(),te=function(){return L.isNode?function(){return process.emit.apply(process,arguments)}:L.global?function(e){var t="on"+e.toLowerCase(),n=L.global[t];return!!n&&(n.apply(L.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),ne={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:r},oe=function(e){var t=!1;try{t=te.apply(null,arguments)}catch(n){O.throwLater(n),t=!0}var n=!1;try{n=ee(e,ne[e].apply(null,arguments))}catch(t){O.throwLater(t),n=!0}return n||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&K()),"warnings"in e){var n=e.warnings;le.warnings=!!n,Y=le.warnings,L.isObject(n)&&"wForgottenReturn"in n&&(Y=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!le.cancellation){if(O.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=c,t.prototype._propagateFrom=u,t.prototype._onCancel=d,t.prototype._setOnCancel=p,t.prototype._attachCancellationCallback=l,t.prototype._execute=s,ie=u,le.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!le.monitoring?(le.monitoring=!0,t.prototype._fireEvent=oe):!e.monitoring&&le.monitoring&&(le.monitoring=!1,t.prototype._fireEvent=a)),"asyncHooks"in e&&L.nodeSupportsAsyncResource){var r=le.asyncHooks,m=!!e.asyncHooks;r!==m&&(le.asyncHooks=m,m?o():i())}return t},t.prototype._fireEvent=a,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(t){return t}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(){},t.prototype._attachCancellationCallback=function(){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(){};var ie=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},re=function(){return!1},ae=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;L.inherits(P,Error),n.CapturedTrace=P,P.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},o=0,r=this;void 0!==r;++o)t.push(r),r=r._parent;e=this._length=o;for(var o=e-1,a;0<=o;--o)a=t[o].stack,void 0===n[a]&&(n[a]=o);for(var o=0;o<e;++o){var s=t[o].stack,l=n[s];if(void 0!==l&&l!==o){0<l&&(t[l-1]._parent=void 0,t[l-1]._length=1),t[o]._parent=void 0,t[o]._length=1;var d=0<o?t[o-1]:this;l<e-1?(d._parent=t[l+1],d._parent.uncycle(),d._length=d._parent._length+1):(d._parent=void 0,d._length=1);for(var p=d._length+1,c=o-2;0<=c;--c)t[c]._length=p,p++;return}}}},P.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=T(e),n=t.message,o=[t.stack],i=this;void 0!==i;)o.push(w(i.stack.split("\n"))),i=i._parent;x(o),v(o),L.notEnumerableProp(e,"stack",_(n,o)),L.notEnumerableProp(e,"__stackCleaned__",!0)}};var se=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():E(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=e,q=t;var n=Error.captureStackTrace;return re=function(e){return F.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var o=new Error;if("string"==typeof o.stack&&0<=o.stack.split("\n")[0].indexOf("stackDetection@"))return H=/@/,q=t,U=!0,function(e){e.stack=new Error().stack};var i;try{throw new Error}catch(t){i="stack"in t}return!("stack"in o)&&i&&"number"==typeof Error.stackTraceLimit?(H=e,q=t,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(n){t.stack=n.stack}Error.stackTraceLimit-=6}):(q=function(e,t){return"string"==typeof e?e:("object"==typeof t||"function"==typeof t)&&void 0!==t.name&&void 0!==t.message?t.toString():E(t)},null)}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(X=function(e){console.warn(e)},L.isNode&&process.stderr.isTTY?X=function(e,t){var n=t?"\x1B[33m":"\x1B[31m";console.warn(n+e+"\x1B[0m\n")}:!L.isNode&&"string"==typeof new Error().stack&&(X=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var le={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return V&&t.longStackTraces(),{asyncHooks:function(){return le.asyncHooks},longStackTraces:function(){return le.longStackTraces},warnings:function(){return le.warnings},cancellation:function(){return le.cancellation},monitoring:function(){return le.monitoring},propagateFromFunction:function(){return ie},boundValueFunction:function(){return m},checkForgottenReturns:y,setBounds:function(e,t){if(D()){for(var n=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),r=-1,a=-1,s=0,l,d,p;s<n.length;++s)if(p=A(n[s]),p){l=p.fileName,r=p.line;break}for(var s=0,p;s<o.length;++s)if(p=A(o[s]),p){d=p.fileName,a=p.line;break}0>r||0>a||!l||!d||l!==d||r>=a||(re=function(e){if(F.test(e))return!0;var t=A(e);return!!(t&&t.fileName===l&&r<=t.line&&t.line<=a)})}},warn:b,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),b(n)},CapturedTrace:P,fireDomEvent:ee,fireGlobalEvent:te}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(1>=arguments.length)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(1>=arguments.length)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var o=arguments[1];o instanceof e&&o.suppressUnhandledRejections();return this.caught(n,function(){return o})}}},{}],11:[function(e,t){"use strict";t.exports=function(e,t){function n(){return i(this)}var o=e.reduce,i=e.all;e.prototype.each=function(e){return o(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,i){return o(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return o(e,n,t,t)}}},{}],12:[function(e,t){"use strict";function n(e,t){function n(o){return this instanceof n?void(d(this,"message","string"==typeof o?o:t),d(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)):new n(o)}return l(n,Error),n}function o(e){return this instanceof o?void(d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)):new o(e)}var r=e("./es5"),a=r.freeze,s=e("./util"),l=s.inherits,d=s.notEnumerableProp,p=n("Warning","warning"),c=n("CancellationError","cancellation error"),u=n("TimeoutError","timeout error"),m=n("AggregateError","aggregate error"),g,h;try{g=TypeError,h=RangeError}catch(t){g=n("TypeError","type error"),h=n("RangeError","range error")}for(var f=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" "),y=0;y<f.length;++y)"function"==typeof Array.prototype[f[y]]&&(m.prototype[f[y]]=Array.prototype[f[y]]);r.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var b=0;m.prototype.toString=function(){var e=Array(4*b+1).join(" "),t="\n"+e+"AggregateError of:"+"\n";b++,e=Array(4*b+1).join(" ");for(var n=0;n<this.length;++n){for(var o=this[n]===this?"[Circular AggregateError]":this[n]+"",r=o.split("\n"),a=0;a<r.length;++a)r[a]=e+r[a];o=r.join("\n"),t+=o+"\n"}return b--,t},l(o,Error);var _=Error.__BluebirdErrorTypes__;_||(_=a({CancellationError:c,TimeoutError:u,OperationalError:o,RejectionError:o,AggregateError:m}),r.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:g,RangeError:h,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t){var n=function(){"use strict";return this===void 0}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!(!n||n.writable||n.set)}};else{var i={}.hasOwnProperty,r={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},l=function(e,t){return{value:e[t]}},d=function(e,t,n){return e[t]=n.value,e},p=function(e){return e},c=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},u=function(e){try{return"[object Array]"===r.call(e)}catch(t){return!1}};t.exports={isArray:u,keys:s,names:s,defineProperty:d,getDescriptor:l,freeze:p,getPrototypeOf:c,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,o){return n(this,e,o,t)},e.filter=function(e,o,i){return n(e,o,i,t)}}},{}],15:[function(e,t){"use strict";t.exports=function(t,n,o){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function r(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return d.call(this,this.promise._target()._settledValue())}function l(e){if(!a(this,e))return u.e=e,u}function d(e){var i=this.promise,d=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?d.call(i._boundValue()):d.call(i._boundValue(),e);if(p===o)return p;if(void 0!==p){i._setReturnedNonUndefined();var m=n(p,i);if(m instanceof t){if(null!=this.cancelPromise){if(m._isCancelled()){var g=new c("late cancellation observer");return i._attachExtraTrace(g),u.e=g,u}m.isPending()&&m._attachCancellationCallback(new r(this))}return m._then(s,l,void 0,this,void 0)}}}return i.isRejected()?(a(this),u.e=e,u):(a(this),e)}var p=e("./util"),c=t.CancellationError,u=p.errorObj,m=e("./catch_filter")(o);return i.prototype.isFinallyHandler=function(){return 0===this.type},r.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,o){return"function"==typeof e?this._then(n,o,void 0,new i(this,t,e),void 0):this.then()},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,d,d)},t.prototype.tap=function(e){return this._passThrough(e,1,d)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,d);var o=Array(n-1),r=0,a;for(a=0;a<n-1;++a){var s=arguments[a];if(p.isObject(s))o[r++]=s;else return t.reject(new TypeError("tapCatch statement predicate: "+"expecting an object but got "+p.classString(s)))}o.length=r;var l=arguments[a];return this._passThrough(m(o,l,this),1,void 0,d)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t){"use strict";t.exports=function(t,n,o,r,a,s){function l(e,n,o){for(var a=0;a<n.length;++a){o._pushContext();var s=g(n[a])(e);if(o._popContext(),s===m){o._pushContext();var l=t.reject(m.e);return o._popContext(),l}var d=r(s,o);if(d instanceof t)return d}return null}function d(e,n,i,r){if(s.cancellation()){var a=new t(o),l=this._finallyPromise=new t(o);this._promise=a.lastly(function(){return l}),a._captureStackTrace(),a._setOnCancel(this)}else{var d=this._promise=new t(o);d._captureStackTrace()}this._stack=r,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var p=e("./errors"),c=p.TypeError,u=e("./util"),m=u.errorObj,g=u.tryCatch,h=[];u.inherits(d,a),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e="undefined"!=typeof this._generator["return"],n;if(!e){var o=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=o,this._promise._attachExtraTrace(o),this._promise._pushContext(),n=g(this._generator["throw"]).call(this._generator,o),this._promise._popContext()}else this._promise._pushContext(),n=g(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(n)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=g(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=g(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var n=this._promise;if(e===m)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var o=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(o);var i=r(o,this._promise);if(!(i instanceof t)&&(i=l(i,this._yieldHandlers,this._promise),null===i))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",o+"")+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var a=i._bitField;0==(50397184&a)?(this._yieldedPromise=i,i._proxy(this,null)):0==(33554432&a)?0==(16777216&a)?this._promiseCancelled():t._async.invoke(this._promiseRejected,this,i._reason()):t._async.invoke(this._promiseFulfilled,this,i._value())},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,o=new Error().stack;return function(){var t=e.apply(this,arguments),i=new d(void 0,void 0,n,o),r=i.promise();return i._generator=t,i._promiseFulfilled(void 0),r}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+u.classString(e));h.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=new d(e,this),i=o.promise();return o._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t){"use strict";t.exports=function(t,n){var o=e("./util"),i=o.canEvaluate,r=o.tryCatch,a=o.errorObj;t.join=function(){var e=arguments.length-1,t;if(0<e&&"function"==typeof arguments[e]){t=arguments[e];var o}var i=[].slice.call(arguments);t&&i.pop();var o=new n(i).promise();return t===void 0?o:o.spread(t)}}},{"./util":36}],18:[function(e,t){"use strict";t.exports=function(t,n,o,i,r,a){function s(e,n,o,a){this.constructor$(e),this._promise._captureStackTrace();var s=t._getContext();if(this._callback=d.contextBind(s,n),this._preservedValues=a===r?Array(this.length()):null,this._limit=o,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0),d.isArray(e))for(var l=0,p;l<e.length;++l)p=e[l],p instanceof t&&p.suppressUnhandledRejections()}function l(e,n,i,r){if("function"!=typeof n)return o("expecting a function but got "+d.classString(n));var a=0;if(void 0!==i)if("object"==typeof i&&null!==i){if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+d.classString(i.concurrency)));a=i.concurrency}else return t.reject(new TypeError("options argument must be an object but it is "+d.classString(i)));return a="number"==typeof a&&isFinite(a)&&1<=a?a:0,new s(e,n,a,r).promise()}var d=e("./util"),p=d.tryCatch,c=d.errorObj,u=t._async;d.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var o=this._values,r=this.length(),s=this._preservedValues,l=this._limit;if(!(0>n)){if(1<=l&&this._inFlight>=l)return o[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var d=this._promise,u=this._callback,m=d._boundValue();d._pushContext();var g=p(u).call(m,e,n,r),h=d._popContext();if(a.checkForgottenReturns(g,h,null===s?"Promise.map":"Promise.filter",d),g===c)return this._reject(g.e),!0;var f=i(g,this._promise);if(f instanceof t){f=f._target();var y=f._bitField;if(0==(50397184&y))return 1<=l&&this._inFlight++,o[n]=f,f._proxy(this,-1*(n+1)),!1;if(0!=(33554432&y))g=f._value();else return 0==(16777216&y)?(this._cancel(),!0):(this._reject(f._reason()),!0)}o[n]=g}else if(n=-1*n-1,o[n]=e,1<=l&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0;var b=++this._totalResolved;return!!(b>=r)&&(null===s?this._resolve(o):this._filter(o,s),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var o=e.pop();this._promiseFulfilled(n[o],o)}},s.prototype._filter=function(e,t){for(var n=t.length,o=Array(n),r=0,a=0;a<n;++a)e[a]&&(o[r++]=t[a]);o.length=r,this._resolve(o)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,n,o){return l(e,t,n,o)}}},{"./util":36}],19:[function(e,t){"use strict";t.exports=function(t,n,o,i,r){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var o=new t(n);o._captureStackTrace(),o._pushContext();var i=s(e).apply(this,arguments),a=o._popContext();return r.checkForgottenReturns(i,a,"Promise.method",o),o._resolveFromSyncValue(i),o}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var o=new t(n);o._captureStackTrace(),o._pushContext();var l;if(1<arguments.length){r.deprecated("calling Promise.try with more than 1 argument");var d=arguments[1],p=arguments[2];l=a.isArray(d)?s(e).apply(p,d):s(e).call(p,d)}else l=s(e)();var c=o._popContext();return r.checkForgottenReturns(l,c,"Promise.try",o),o._resolveFromSyncValue(l),o},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t){"use strict";function n(e){return e instanceof Error&&d.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(n(e)){t=new l(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var o=d.keys(e),a=0,s;a<o.length;++a)s=o[a],p.test(s)||(t[s]=e[s]);return t}return r.markAsOriginatingFromRejection(e),e}var r=e("./util"),a=r.maybeWrapAsError,s=e("./errors"),l=s.OperationalError,d=e("./es5"),p=/^(?:name|message|stack|cause)$/;t.exports=function(e,t){return function(n,i){if(null!==e){if(n){var r=o(a(n));e._attachExtraTrace(r),e._reject(r)}else if(!t)e._fulfill(i);else{var s=[].slice.call(arguments,1);e._fulfill(s)}e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!r.isArray(e))return o.call(n,e,t);var i=s(t).apply(n._boundValue(),[null].concat(e));i===l&&a.throwLater(i.e)}function o(e,t){var n=this,o=n._boundValue(),i=e===void 0?s(t).call(o,null):s(t).call(o,null,e);i===l&&a.throwLater(i.e)}function i(e,t){var n=this;if(!e){var o=new Error(e+"");o.cause=e,e=o}var i=s(t).call(n._boundValue(),e);i===l&&a.throwLater(i.e)}var r=e("./util"),a=t._async,s=r.tryCatch,l=r.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=o;t!==void 0&&Object(t).spread&&(r=n),this._then(r,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t){"use strict";t.exports=function(){function n(){}function o(e,t){if(null==e||e.constructor!==r)throw new k("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new k("expecting a function but got "+m.classString(t))}function r(e){e!==C&&o(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function l(e){var t=new r(C);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var d=function(){return new k("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},p=function(){return new r.PromiseInspection(this._target())},c=function(e){return r.reject(new k(e))},u={},m=e("./util");m.setReflectHandler(p);var g=function(){var e=process.domain;return void 0===e?null:e},h=function(){return{domain:g(),async:null}},f=m.isNode&&m.nodeSupportsAsyncResource?e("async_hooks").AsyncResource:null,y=function(){return{domain:g(),async:new f("Bluebird::Promise")}},b=m.isNode?h:function(){return null};m.notEnumerableProp(r,"_getContext",b);var _=e("./es5"),v=e("./async"),x=new v;_.defineProperty(r,"_async",{value:x});var w=e("./errors"),k=r.TypeError=w.TypeError;r.RangeError=w.RangeError;var T=r.CancellationError=w.CancellationError;r.TimeoutError=w.TimeoutError,r.OperationalError=w.OperationalError,r.RejectionError=w.OperationalError,r.AggregateError=w.AggregateError;var C=function(){},S={},E={},j=e("./thenables")(r,C),D=e("./promise_array")(r,C,j,c,n),A=e("./context")(r),P=A.create,O=e("./debuggability")(r,A,function(){b=y,m.notEnumerableProp(r,"_getContext",y)},function(){b=h,m.notEnumerableProp(r,"_getContext",h)}),R=O.CapturedTrace,L=e("./finally")(r,j,E),N=e("./catch_filter")(E),I=e("./nodeback"),F=m.errorObj,M=m.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(e){var t=arguments.length;if(1<t){var n=Array(t-1),o=0,r;for(r=0;r<t-1;++r){var a=arguments[r];if(m.isObject(a))n[o++]=a;else return c("Catch statement predicate: "+"expecting an object but got "+m.classString(a))}if(n.length=o,e=arguments[r],"function"!=typeof e)throw new k("The last argument to .catch() "+"must be a function, got "+m.toString(e));return this.then(void 0,N(n,e,this))}return this.then(void 0,e)},r.prototype.reflect=function(){return this._then(p,p,void 0,this,void 0)},r.prototype.then=function(e,t){if(O.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+m.classString(e);1<arguments.length&&(n+=", "+m.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},r.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},r.prototype.spread=function(e){return"function"==typeof e?this.all()._then(e,void 0,void 0,S,void 0):c("expecting a function but got "+m.classString(e))},r.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},r.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new D(this).promise()},r.prototype.error=function(e){return this.caught(m.originatesFromRejection,e)},r.getNewLibraryCopy=t.exports,r.is=function(e){return e instanceof r},r.fromNode=r.fromCallback=function(e){var t=new r(C);t._captureStackTrace();var n=!!(1<arguments.length)&&!!Object(arguments[1]).multiArgs,o=M(e)(I(t,n));return o===F&&t._rejectCallback(o.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},r.all=function(e){return new D(e).promise()},r.cast=function(e){var t=j(e);return t instanceof r||(t=new r(C),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(e){var t=new r(C);return t._captureStackTrace(),t._rejectCallback(e,!0),t},r.setScheduler=function(e){if("function"!=typeof e)throw new k("expecting a function but got "+m.classString(e));return x.setScheduler(e)},r.prototype._then=function(e,t,n,o,i){var a=void 0!==i,s=a?i:new r(C),l=this._target(),d=l._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===o&&0!=(2097152&this._bitField)&&(0==(50397184&d)?o=l===this?void 0:this._boundTo:o=this._boundValue()),this._fireEvent("promiseChained",this,s));var p=b();if(0!=(50397184&d)){var c=l._settlePromiseCtx,u,g;0==(33554432&d)?0==(16777216&d)?(c=l._settlePromiseLateCancellationObserver,g=new T("late cancellation observer"),l._attachExtraTrace(g),u=t):(g=l._fulfillmentHandler0,u=t,l._unsetRejectionIsUnhandled()):(g=l._rejectionHandler0,u=e),x.invoke(c,l,{handler:m.contextBind(p,u),promise:s,receiver:o,value:g})}else l._addCallbacks(e,t,s,o,p);return s},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},r.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},r.prototype._setFulfilled=function(){this._bitField|=33554432,this._fireEvent("promiseFulfilled",this)},r.prototype._setRejected=function(){this._bitField|=16777216,this._fireEvent("promiseRejected",this)},r.prototype._setFollowing=function(){this._bitField|=67108864,this._fireEvent("promiseResolved",this)},r.prototype._setIsFinal=function(){this._bitField|=4194304},r.prototype._isFinal=function(){return 0<(4194304&this._bitField)},r.prototype._unsetCancelled=function(){this._bitField&=~65536},r.prototype._setCancelled=function(){this._bitField|=65536,this._fireEvent("promiseCancelled",this)},r.prototype._setWillBeCancelled=function(){this._bitField|=8388608},r.prototype._setAsyncGuaranteed=function(){if(!x.hasCustomScheduler()){var e=this._bitField;this._bitField=e|134217728^(536870912&e)>>2}},r.prototype._setNoAsyncGuarantee=function(){this._bitField=~134217728&(536870912|this._bitField)},r.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},r.prototype._promiseAt=function(e){return this[4*e-4+2]},r.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},r.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(e){var t=e._bitField,n=e._fulfillmentHandler0,o=e._rejectionHandler0,i=e._promise0,r=e._receiverAt(0);void 0===r&&(r=u),this._addCallbacks(n,o,i,r,null)},r.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),o=e._rejectionHandlerAt(t),i=e._promiseAt(t),r=e._receiverAt(t);void 0===r&&(r=u),this._addCallbacks(n,o,i,r,null)},r.prototype._addCallbacks=function(e,t,n,o,i){var r=this._length();if(r>=65535-4&&(r=0,this._setLength(0)),0===r)this._promise0=n,this._receiver0=o,"function"==typeof e&&(this._fulfillmentHandler0=m.contextBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=m.contextBind(i,t));else{var a=4*r-4;this[a+2]=n,this[a+3]=o,"function"==typeof e&&(this[a+0]=m.contextBind(i,e)),"function"==typeof t&&(this[a+1]=m.contextBind(i,t))}return this._setLength(r+1),r},r.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},r.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(d(),!1);var n=j(e,this);if(!(n instanceof r))return this._fulfill(e);t&&this._propagateFrom(n,2);var o=n._target();if(o===this)return void this._reject(d());var a=o._bitField;if(0==(50397184&a)){var s=this._length();0<s&&o._migrateCallback0(this);for(var l=1;l<s;++l)o._migrateCallbackAt(this,l);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&a))this._fulfill(o._value());else if(0!=(16777216&a))this._reject(o._reason());else{var p=new T("late cancellation observer");o._attachExtraTrace(p),this._reject(p)}}},r.prototype._rejectCallback=function(e,t,n){var o=m.ensureErrorObject(e),i=o===e;if(!i&&!n&&O.warnings()){var r="a promise was rejected with a non-error: "+m.classString(e);this._warn(r,!0)}this._attachExtraTrace(o,!!t&&i),this._reject(e)},r.prototype._resolveFromExecutor=function(e){if(e!==C){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,o=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==o&&t._rejectCallback(o,!0)}},r.prototype._settlePromiseFromHandler=function(e,t,n,o){var i=o._bitField;if(0==(65536&i)){o._pushContext();var r;t===S?n&&"number"==typeof n.length?r=M(e).apply(this._boundValue(),n):(r=F,r.e=new k("cannot .spread() a non-array: "+m.classString(n))):r=M(e).call(t,n);var a=o._popContext();i=o._bitField,0!=(65536&i)||(r===E?o._reject(n):r===F?o._rejectCallback(r.e,!1):(O.checkForgottenReturns(r,a,"",o,this),o._resolveCallback(r)))}},r.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(e){this._rejectionHandler0=e},r.prototype._settlePromise=function(e,t,o,i){var a=e instanceof r,s=this._bitField,l=0!=(134217728&s);0==(65536&s)?"function"==typeof t?a?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,o,i,e)):t.call(o,i,e):o instanceof n?!o._isResolved()&&(0==(33554432&s)?o._promiseRejected(i,e):o._promiseFulfilled(i,e)):a&&(l&&e._setAsyncGuaranteed(),0==(33554432&s)?e._reject(i):e._fulfill(i)):(a&&e._invokeInternalOnCancel(),o instanceof L&&o.isFinallyHandler()?(o.cancelPromise=e,M(t).call(o,i)===F&&e._reject(F.e)):t===p?e._fulfill(p.call(o)):o instanceof n?o._promiseCancelled(e):a||e instanceof D?e._cancel():o.cancel())},r.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,o=e.receiver,i=e.value;"function"==typeof t?n instanceof r?this._settlePromiseFromHandler(t,o,i,n):t.call(o,i,n):n instanceof r&&n._reject(i)},r.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},r.prototype._settlePromise0=function(e,t){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},r.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},r.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=d();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0==(134217728&t)?x.settlePromises(this):this._settlePromises(),this._dereferenceTrace())}},r.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?x.fatalError(e,m.isNode):void(0<(65535&t)?x.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var o=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,o,a,t)}},r.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var o=this._rejectionHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,o,a,t)}},r.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(0<t){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,e),this._fulfillPromises(t,o)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var e=this._bitField;return 0==(33554432&e)?0==(16777216&e)?void 0:this._fulfillmentHandler0:this._rejectionHandler0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&_.defineProperty(r.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),r.defer=r.pending=function(){O.deprecated("Promise.defer","new Promise");var e=new r(C);return{promise:e,resolve:a,reject:s}},m.notEnumerableProp(r,"_makeSelfResolutionError",d),e("./method")(r,C,j,c,O),e("./bind")(r,C,j,O),e("./cancel")(r,D,c,O),e("./direct_resolve")(r),e("./synchronous_inspection")(r),e("./join")(r,D,j,C,x),r.Promise=r,r.version="3.7.2",e("./call_get.js")(r),e("./generators.js")(r,c,C,j,n,O),e("./map.js")(r,D,c,j,C,O),e("./nodeify.js")(r),e("./promisify.js")(r,C),e("./props.js")(r,D,j,c),e("./race.js")(r,C,j,c),e("./reduce.js")(r,D,c,j,C,O),e("./settle.js")(r,D,O),e("./some.js")(r,D,c),e("./timers.js")(r,C,O),e("./using.js")(r,c,j,P,C,O),e("./any.js")(r),e("./each.js")(r,C),e("./filter.js")(r,C),m.toFastProperties(r),m.toFastProperties(r.prototype),l({a:1}),l({b:2}),l({c:3}),l(1),l(function(){}),l(void 0),l(!1),l(new r(C)),O.setBounds(v.firstLineError,m.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t){"use strict";t.exports=function(t,n,o,i,r){function a(e){return-2===e?[]:-3===e?{}:-6===e?new Map:void 0}function s(e){var o=this._promise=new t(n);e instanceof t&&(o._propagateFrom(e,3),e.suppressUnhandledRejections()),o._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util"),d=l.isArray;return l.inherits(s,r),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,r){var s=o(this._values,this._promise);if(s instanceof t){s=s._target();var d=s._bitField;if(this._values=s,0==(50397184&d))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,r);if(0!=(33554432&d))s=s._value();else return 0==(16777216&d)?this._cancel():this._reject(s._reason())}if(s=l.asArray(s),null===s){var p=i("expecting an array or an iterable object but got "+l.classString(s)).reason();return void this._promise._rejectCallback(p,!1)}return 0===s.length?void(-5===r?this._resolveEmptyArray():this._resolve(a(r))):void this._iterate(s)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?Array(n):this._values;for(var r=this._promise,a=!1,s=null,l=0,d;l<n;++l)d=o(e[l],r),d instanceof t?(d=d._target(),s=d._bitField):s=null,a?null!==s&&d.suppressUnhandledRejections():null===s?a=this._promiseFulfilled(d,l):0==(50397184&s)?(d._proxy(this,l),this._values[l]=d):0==(33554432&s)?0==(16777216&s)?a=this._promiseCancelled(l):a=this._promiseRejected(d._reason(),l):a=this._promiseFulfilled(d._value(),l);a||r._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return!!(n>=this._length)&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t){"use strict";t.exports=function(t,n){function o(e){return!_.test(e)}function r(e){try{return!0===e.__isPromisified__}catch(t){return!1}}function a(e,t,n){var o=u.getDataPropertyOrDefault(e,t+n,b);return!!o&&r(o)}function s(e,t,n){for(var o=0,r;o<e.length;o+=2)if(r=e[o],n.test(r))for(var a=r.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===a)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}function l(e,t,n,o){for(var l=u.inheritedDataKeys(e),d=[],p=0;p<l.length;++p){var c=l[p],m=e[c],g=o===v||v(c,m,e);"function"!=typeof m||r(m)||a(e,c,t)||!o(c,m,e,g)||d.push(c,m)}return s(d,t,n),d}function d(e,t,n,o,r){for(var a=new RegExp(x(t)+"$"),s=l(e,t,a,n),d=0,p=s.length;d<p;d+=2){var m=s[d],g=s[d+1],h=m+t;if(o===k)e[h]=k(m,c,m,g,t,r);else{var f=o(g,function(){return k(m,c,m,g,t,r)});u.notEnumerableProp(f,"__isPromisified__",!0),e[h]=f}}return u.toFastProperties(e),e}function p(e,t,n){return k(e,t,void 0,e,null,n)}var c={},u=e("./util"),m=e("./nodeback"),g=u.withAppended,h=u.maybeWrapAsError,f=u.canEvaluate,y=e("./errors").TypeError,b={__isPromisified__:!0},_=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),v=function(e){return u.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},x=function(e){return e.replace(/([$])/,"\\$")},w;var k=f?w:function(e,o,i,r,a,s){function l(){var i=o;o===c&&(i=this);var r=new t(n);r._captureStackTrace();var a="string"==typeof p&&this!==d?this[p]:e,l=m(r,s);try{a.apply(i,g(arguments,l))}catch(t){r._rejectCallback(h(t),!0,!0)}return r._isFateSealed()||r._setAsyncGuaranteed(),r}var d=function(){return this}(),p=e;return"string"==typeof p&&(e=r),u.notEnumerableProp(l,"__isPromisified__",!0),l};t.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+u.classString(e));if(r(e))return e;t=Object(t);var n=void 0===t.context?c:t.context,i=!!t.multiArgs,a=p(e,n,i);return u.copyDescriptors(e,a,o),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,o=t.suffix;"string"!=typeof o&&(o="Async");var r=t.filter;"function"!=typeof r&&(r=v);var a=t.promisifier;if("function"!=typeof a&&(a=k),!u.isIdentifier(o))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=u.inheritedDataKeys(e),l=0,p;l<s.length;++l)p=e[s[l]],"constructor"!==s[l]&&u.isClass(p)&&(d(p.prototype,o,r,a,n),d(p,o,r,a,n));return d(e,o,r,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t){"use strict";t.exports=function(t,n,o,i){function r(e){var t=!1,n;if(p!==void 0&&e instanceof p)n=c(e),t=!0;else{var o=d.keys(e),r=o.length;n=Array(2*r);for(var a=0,s;a<r;++a)s=o[a],n[a]=e[s],n[a+r]=s}this.constructor$(n),this._isMap=t,this._init$(void 0,t?-6:-3)}function a(e){var n=o(e),a;return l(n)?(a=n instanceof t?n._then(t.props,void 0,void 0,void 0,void 0):new r(n).promise(),n instanceof t&&a._propagateFrom(n,2),a):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s=e("./util"),l=s.isObject,d=e("./es5"),p;"function"==typeof Map&&(p=Map);var c=function(){function e(e,o){this[t]=e,this[t+n]=o,t++}var t=0,n=0;return function(o){n=o.size,t=0;var i=Array(2*o.size);return o.forEach(e,i),i}}(),u=function(e){for(var t=new p,n=0|e.length/2,o=0;o<n;++o){var r=e[n+o],a=e[o];t.set(r,a)}return t};s.inherits(r,n),r.prototype._init=function(){},r.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var o;if(this._isMap)o=u(this._values);else{o={};for(var r=this.length(),a=0,s=this.length();a<s;++a)o[this._values[a+r]]=this._values[a]}return this._resolve(o),!0}return!1},r.prototype.shouldCopyValues=function(){return!1},r.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t){"use strict";function n(e,t,n,o,i){for(var r=0;r<i;++r)n[r+o]=e[r+t],e[r+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},o.prototype.push=function(e,t,n){var o=this.length()+3;if(this._willBeOverCapacity(o))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+o-3;this._checkCapacity(o);var r=this._capacity-1;this[i+0&r]=e,this[i+1&r]=t,this[i+2&r]=n,this._length=o},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var o=this._front,i=this._length;n(this,0,this,t,o+i&t-1)},t.exports=o},{}],27:[function(e,t){"use strict";t.exports=function(t,n,o,r){function a(e,a){var d=o(e);if(d instanceof t)return l(d);if(e=s.asArray(e),null===e)return r("expecting an array or an iterable object but got "+s.classString(e));var p=new t(n);a!==void 0&&p._propagateFrom(a,3);for(var c=p._fulfill,u=p._reject,m=0,g=e.length,h;m<g;++m)(h=e[m],void 0!==h||m in e)&&t.cast(h)._then(c,u,void 0,p,null);return p}var s=e("./util"),l=function(e){return e.then(function(t){return a(t,e)})};t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t){"use strict";t.exports=function(t,n,o,i,r,a){function s(e,n,o,i){this.constructor$(e);var a=t._getContext();this._fn=u.contextBind(a,n),o!==void 0&&(o=t.resolve(o),o._attachCancellationCallback(this)),this._initialValue=o,this._currentCancellable=null,this._eachValues=i===r?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,i){if("function"!=typeof t)return o("expecting a function but got "+u.classString(t));var r=new s(e,t,n,i);return r.promise()}function p(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(c,void 0,void 0,this,void 0)):c.call(this,n)}function c(e){var n=this.array,o=n._promise,i=m(n._fn);o._pushContext();var r;r=void 0===n._eachValues?i.call(o._boundValue(),this.accum,e,this.index,this.length):i.call(o._boundValue(),e,this.index,this.length),r instanceof t&&(n._currentCancellable=r);var s=o._popContext();return a.checkForgottenReturns(r,s,void 0===n._eachValues?"Promise.reduce":"Promise.each",o),r}var u=e("./util"),m=u.tryCatch;u.inherits(s,n),s.prototype._gotAccum=function(e){this._eachValues!==void 0&&null!==this._eachValues&&e!==r&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues===void 0?this._initialValue:this._eachValues)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n=e.length,o,r;this._initialValue===void 0?(o=t.resolve(e[0]),r=1):(o=this._initialValue,r=0),this._currentCancellable=o;for(var a=r,s;a<n;++a)s=e[a],s instanceof t&&s.suppressUnhandledRejections();if(!o.isRejected())for(;r<n;++r){var d={accum:null,value:e[r],index:r,length:n,array:this};o=o._then(p,void 0,void 0,d,void 0),0==(127&r)&&o._setNoAsyncGuarantee()}this._eachValues!==void 0&&(o=o._then(this._eachComplete,void 0,void 0,this,void 0)),o._then(l,l,void 0,o,this)},t.prototype.reduce=function(e,t){return d(this,e,t,null)},t.reduce=function(e,t,n,o){return d(e,t,n,o)}}},{"./util":36}],29:[function(e,t){"use strict";var n=e("./util"),o=n.getNativePromise(),i;if(n.isNode&&"undefined"==typeof MutationObserver){var r=global.setImmediate,a=process.nextTick;i=n.isRecentNode?function(e){r.call(global,e)}:function(e){a.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var s=o.resolve();i=function(e){s.then(e)}}else i="undefined"!=typeof MutationObserver&&!("undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?function(){var e=document.createElement("div"),t={attributes:!0},n=!1,o=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(o,t);var r=function(){n||(n=!0,o.classList.toggle("foo"))};return function(n){var i=new MutationObserver(function(){i.disconnect(),n()});i.observe(e,t),r()}}():"undefined"==typeof setImmediate?"undefined"==typeof setTimeout?function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(e){setTimeout(e,0)}:function(e){setImmediate(e)};t.exports=i},{"./util":36}],30:[function(e,t){"use strict";t.exports=function(t,n,o){function i(e){this.constructor$(e)}var r=t.PromiseInspection,a=e("./util");a.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return!!(n>=this._length)&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return o.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t){"use strict";t.exports=function(t,n,o){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function r(e,t){if((0|t)!==t||0>t)return o("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),r=n.promise();return n.setHowMany(t),n.init(),r}var a=e("./util"),s=e("./errors").RangeError,l=e("./errors").AggregateError,d=a.isArray,p={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=d(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(p),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new l,e=this.length();e<this._values.length;++e)this._values[e]!==p&&t.push(this._values[e]);return 0<t.length?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return r(e,t)},t.prototype.some=function(e){return r(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t){"use strict";t.exports=function(e){function t(e){e===void 0?(this._bitField=0,this._settledValueField=void 0):(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},r=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return r.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),o.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t){"use strict";t.exports=function(t,n){function o(e){return e.then}function i(e){try{return o(e)}catch(t){return l.e=t,l}}function r(e){try{return p.call(e,"_promise0")}catch(t){return!1}}function a(e,o,i){function r(e){d&&(d._resolveCallback(e),d=null)}function a(e){d&&(d._rejectCallback(e,c,!0),d=null)}var d=new t(n),p=d;i&&i._pushContext(),d._captureStackTrace(),i&&i._popContext();var c=!0,u=s.tryCatch(o).call(e,r,a);return c=!1,d&&u===l&&(d._rejectCallback(u.e,!0,!0),d=null),p}var s=e("./util"),l=s.errorObj,d=s.isObject,p={}.hasOwnProperty;return function(e,o){if(d(e)){if(e instanceof t)return e;var s=i(e);if(s===l){o&&o._pushContext();var p=t.reject(s.e);return o&&o._popContext(),p}if("function"==typeof s){if(r(e)){var p=new t(n);return e._then(p._fulfill,p._reject,void 0,p,null),p}return a(e,s,o)}}return e}}},{"./util":36}],34:[function(e,t){"use strict";t.exports=function(t,n,o){function i(e){this.handle=e}function r(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),l=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var d=function(e){return p(+this).thenReturn(e)},p=t.delay=function(e,r){var a,s;return void 0===r?(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),o.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()):(a=t.resolve(r)._then(d,null,null,e,void 0),o.cancellation()&&r instanceof t&&a._setOnCancel(r)),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return p(e,this)};var c=function(e,t,n){var o;o="string"==typeof t?new l(t):t instanceof Error?t:new l("operation timed out"),s.markAsOriginatingFromRejection(o),e._attachExtraTrace(o),e._reject(o),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n=new i(setTimeout(function(){s.isPending()&&c(s,t,l)},e)),s,l;return o.cancellation()?(l=this.then(),s=l._then(r,a,void 0,n,void 0),s._setOnCancel(n)):s=this._then(r,a,void 0,n,void 0),s}}},{"./util":36}],35:[function(e,t){"use strict";t.exports=function(t,n,o,i,r,a){function s(t){setTimeout(function(){throw t},0)}function l(e){var t=o(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function d(e,n){function a(){if(d>=p)return c._fulfill();var i=l(e[d++]);if(i instanceof t&&i._isDisposable()){try{i=o(i._getDisposer().tryDispose(n),e.promise)}catch(t){return s(t)}if(i instanceof t)return i._then(a,s,null,null,null)}a()}var d=0,p=e.length,c=new t(r);return a(),c}function p(e,t,n){this._data=e,this._promise=t,this._context=n}function c(e,t,n){this.constructor$(e,t,n)}function u(e){return p.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function m(e){this.length=e,this.promise=null,this[e-1]=null}var g=e("./util"),h=e("./errors").TypeError,f=e("./util").inherits,y=g.errorObj,b=g.tryCatch,_={};p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},p.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var o=t===_?null:this.doDispose(t,e);return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,o},p.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},f(c,p),c.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},m.prototype._resultCancelled=function(){for(var e=this.length,n=0,o;n<e;++n)o=this[n],o instanceof t&&o.cancel()},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[e-1];if("function"!=typeof r)return n("expecting a function but got "+g.classString(r));var s=!0,l;2===e&&Array.isArray(arguments[0])?(l=arguments[0],e=l.length,s=!1):(l=arguments,e--);for(var c=new m(e),h=0,f;h<e;++h){if(f=l[h],p.isDisposer(f)){var _=f;f=f.promise(),f._setDisposable(_)}else{var v=o(f);v instanceof t&&(f=v._then(u,null,null,{resources:c,index:h},void 0))}c[h]=f}for(var x=Array(c.length),h=0;h<x.length;++h)x[h]=t.resolve(c[h]).reflect();var w=t.all(x).then(function(e){for(var t=0,n;t<e.length;++t){if(n=e[t],n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}k._pushContext(),r=b(r);var o=s?r.apply(void 0,e):r(e),l=k._popContext();return a.checkForgottenReturns(o,l,"Promise.using",k),o}),k=w.lastly(function(){var e=new t.PromiseInspection(w);return d(c,e)});return c.promise=k,k._setOnCancel(c),k},t.prototype._setDisposable=function(e){this._bitField|=131072,this._disposer=e},t.prototype._isDisposable=function(){return 0<(131072&this._bitField)},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField&=~131072,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new c(e,this,i());throw new h}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";function o(){try{var e=I;return I=null,e.apply(this,arguments)}catch(t){return j.e=t,j}}function i(e){return I=e,o}function r(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return r(e)?new Error(f(e)):e}function l(e,t){var n=e.length,o=Array(n+1),r;for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o}function d(e,t,n){if(S.isES5){var o=Object.getOwnPropertyDescriptor(e,t);if(null!=o)return null==o.get&&null==o.set?o.value:n}else return{}.hasOwnProperty.call(e,t)?e[t]:void 0}function p(e,t,n){if(r(e))return e;return S.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0}),e}function c(e){throw e}function u(e){try{if("function"==typeof e){var t=S.names(e.prototype),n=S.isES5&&1<t.length,o=0<t.length&&(1!==t.length||"constructor"!==t[0]),i=O.test(e+"")&&0<S.names(e).length;if(n||o||i)return!0}return!1}catch(t){return!1}}function m(e){function t(){}function n(){return typeof o.foo}t.prototype=e;var o=new t;return n(),n(),e}function g(e){return R.test(e)}function h(e,t,n){for(var o=Array(e),r=0;r<e;++r)o[r]=t+r+n;return o}function f(e){try{return e+""}catch(t){return"[no string representation]"}}function y(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function b(t){try{p(t,"isOperational",!0)}catch(e){}}function _(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function v(e){return y(e)&&S.propertyIsWritable(e,"stack")}function x(e){return{}.toString.call(e)}function w(e,t,n){for(var o=S.names(e),r=0,a;r<o.length;++r)if(a=o[r],n(a))try{S.defineProperty(t,a,S.getDescriptor(e,a))}catch(e){}}function k(e){return z?process.env[e]:void 0}function T(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"===x(e))return Promise}catch(t){}}function C(e,t){if(null===e||"function"!=typeof t||t===q)return t;null!==e.domain&&(t=e.domain.bind(t));var n=e.async;if(null!==n){var o=t;t=function(){var e=[,,].concat([].slice.call(arguments));return e[0]=o,e[1]=this,n.runInAsyncScope.apply(n,e)}}return t}var S=e("./es5"),E="undefined"==typeof navigator,j={e:{}},D="undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof global?this===void 0?null:this:global:window:self,A=function(e,t){function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)o.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var o={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},P=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(S.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var o=[],r=Object.create(null);null!=e&&!t(e);){var a;try{a=n(e)}catch(t){return o}for(var s=0,l;s<a.length;++s)if(l=a[s],!r[l]){r[l]=!0;var d=Object.getOwnPropertyDescriptor(e,l);null!=d&&null==d.get&&null==d.set&&o.push(l)}e=S.getPrototypeOf(e)}return o}}var o={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];enumeration:for(var a in n)if(o.call(n,a))r.push(a);else{for(var s=0;s<e.length;++s)if(o.call(e[s],a))continue enumeration;r.push(a)}return r}}(),O=/this\s*\.\s*\S+\s*=/,R=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(e){return v(e)?e:new Error(f(e))}:function(e){if(v(e))return e;try{throw new Error(f(e))}catch(e){return e}}}(),N=function(e){return S.isArray(e)?e:null},I;if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t=[],n=e[Symbol.iterator](),o;!(o=n.next()).done;)t.push(o.value);return t};N=function(e){if(S.isArray(e))return e;return null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var M="undefined"!=typeof process&&"[object process]"===x(process).toLowerCase(),z="undefined"!=typeof process&&"undefined"!=typeof process.env,H={setReflectHandler:function(e){q=e},isClass:u,isIdentifier:g,inheritedDataKeys:P,getDataPropertyOrDefault:d,thrower:c,isArray:S.isArray,asArray:N,notEnumerableProp:p,isPrimitive:r,isObject:a,isError:y,canEvaluate:E,errorObj:j,tryCatch:i,inherits:A,withAppended:l,maybeWrapAsError:s,toFastProperties:m,filledRange:h,toString:f,canAttachTrace:v,ensureErrorObject:L,originatesFromRejection:_,markAsOriginatingFromRejection:b,classString:x,copyDescriptors:w,isNode:M,hasEnvVariables:z,env:k,global:D,getNativePromise:T,contextBind:C},q;H.isRecentNode=H.isNode&&function(){var e;return process.versions&&process.versions.node?e=process.versions.node.split(".").map(Number):process.version&&(e=process.version.split(".").map(Number)),0===e[0]&&10<e[1]||0<e[0]}(),H.nodeSupportsAsyncResource=H.isNode&&function(){var t=!1;try{var n=e("async_hooks").AsyncResource;t="function"==typeof n.prototype.runInAsyncScope}catch(n){t=!1}return t}(),H.isNode&&H.toFastProperties(process);try{throw new Error}catch(t){H.lastLineError=t}t.exports=H},{"./es5":13,async_hooks:void 0}]},{},[4])(4)});"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);(function(e,t){"use strict";"function"==typeof define&&define.amd?define("loglevel",t):"object"==typeof module&&module.exports?module.exports=t():e.log=t()})(this,function(){"use strict";function e(e){return typeof console!==s&&(void 0===console[e]?void 0===console.log?a:t(console,"log"):t(console,e))}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(o.call(this,t,n),this[e].apply(this,arguments))}}function o(e,t){for(var n=0,o;n<l.length;n++)o=l[n],this[o]=n<e?a:this.methodFactory(o,e,t)}function i(t){return e(t)||n.apply(this,arguments)}function r(e,t,n){function r(e){var t=(l[e]||"silent").toUpperCase();try{return void(window.localStorage[p]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+t+";"}catch(e){}}function a(){var e;try{e=window.localStorage[p]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(p)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}var d=this,p="loglevel",c;e&&(p+=":"+e),d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||i,d.getLevel=function(){return c},d.setLevel=function(t,n){if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),!("number"==typeof t&&0<=t&&t<=d.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;else if(c=t,!1!==n&&r(t),o.call(d,t,e),typeof console===s&&t<d.levels.SILENT)return"No console available for logging"},d.setDefaultLevel=function(e){a()||d.setLevel(e,!1)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)};var u=a();null==u&&(u=null==t?"WARN":t),d.setLevel(u,!1)}var a=function(){},s="undefined",l=["trace","debug","info","warn","error"],d=new r,p={};d.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new r(e,d.getLevel(),d.methodFactory)),t};var c=typeof window===s?void 0:window.log;return d.noConflict=function(){return typeof window!==s&&window.log===d&&(window.log=c),d},d}),"use strict",define("src/util/debug",["loglevel"],function(e){"use strict";function t(e,t){if(t){if("ms"===t)return`${e.toFixed(3)}ms`;if("s"===t)return`${(e/1e3).toFixed(3)}s`}else return e}function n(){this._started=!1,this._paused=!1,this._steps=[],this._laps=[],this._sumElapsed=0,this._sums={}}var o=window.performance?window.performance:Date;e.setLevel("trace");var i={NODEBUG:-1,ERROR:0,WARN:1,INFO:2,DEBUG:3,TRACE:4},r={"-1":"silent",0:"error",1:"warn",2:"info",3:"debug",4:"trace"},a=i.TRACE,s={Levels:i,setDebugLevel:function(t){t=parseInt(t,10),isNaN(t)||-1>t||(4<t&&(t=4),e.setLevel(r[t]),this.error=e.error,this.warn=e.warn,this.info=e.info,this.debug=e.debug,this.trace=e.trace,a=t)},getDebugLevel:function(){return a},error:e.error,warn:e.warn,info:e.info,debug:e.debug,trace:e.trace,timer:function(){var e=new n;return e.start(),e},Timer:n};return n.prototype={start:function(){this._paused?(this._start=o.now()-this._elapsed,this._paused=!1):!this._started&&(this._start=o.now(),this._started=!0)},pause:function(){this._started&&!this._paused&&(this._paused=!0,this._elapsed=o.now()-this._start)},time:function(e){if(this._started&&!this._paused)return t(o.now()-this._start,e)},step:function(e){if(this._started&&!this._paused){var n=o.now(),i=n-this._start;return this._start=n,this._total+=i,this._steps.push(i),t(i,e)}},lap:function(e){if(this._started&&!this._paused){var n=o.now()-this._start;return this._laps.push(n),t(this._total,e)}},log:function(){s.info(this.time())},sum:function(e){var t=o.now()-this._start;e&&(!this._sums[e]&&(this._sums[e]=0),this._sums[e]+=t-this._sumElapsed),this._sumElapsed=t},getSteps:function(e){return this._steps.map(function(n){return t(n,e)})},getLaps:function(e){return this._laps.map(function(n){return t(n,e)})},getSums:function(e){var n={};for(var o in this._sums)n[o]=t(this._sums[o],e);return n}},s}),"use strict",define("src/util/color",[],function(){"use strict";var e={};return e.hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},e.array2rgba=function(e){return Array.isArray(e)?3===e.length?`rgba(${e[0]},${e[1]},${e[2]},1)`:4===e.length?`rgba(${e[0]},${e[1]},${e[2]},${e[3]})`:"rgba(0,0,0,1)":e},e.rgb2hex=function(e,t,n){if(1===arguments.length){var o=e.match(/rgba?\(([^(]*)\)/,"i");if(!o)return null;var i=o[1].split(",");3<=i.length&&(e=+i[0],t=+i[1],n=+i[2])}return`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`},e.hue2rgb=function(e,n,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?e+6*(n-e)*o:o<1/2?n:o<2/3?e+6*((n-e)*(2/3-o)):e},e.hsl2rgb=function(t,n,o){var i,a,d,p,c,u;return n/=100,o/=100,0===n?p=c=u=255*o:(a=.5>=o?o*(n+1):o+n-o*n,i=2*o-a,d=t/360,p=e.hue2rgb(i,a,d+1/3),c=e.hue2rgb(i,a,d),u=e.hue2rgb(i,a,d-1/3)),{r:p,g:c,b:u}},e.getDistinctColors=function(t){for(var n=Array(t),o=0,r=0;360>r;r+=360/t){o++;var a=e.hsl2rgb(r,100,30+15*(o%4));n[o-1]=[Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b)]}return n},e.getDistinctColorsAsString=function(t){for(var n=e.getDistinctColors(t),o=Array(t),r=0;r<t;r++)o[r]=e.getColor(n[r]);return o},e.getNextColorRGB=function(e,t){return this.getDistinctColors(t)[e]},e.getColor=function(e){if(Array.isArray(e)){if(3<=e.length)for(var t=0;3>t;t++)e[t]=Math.round(e[t]);switch(e.length){case 3:return`rgb(${e.join(",")})`;case 4:return`rgba(${e.join(",")})`;}}else if("object"==typeof e)return`rgb(${Math.round(255*e.r)}, ${Math.round(255*e.g)}, ${Math.round(255*e.b)})`;return e},e.getBrightness=function(e){return(299*(e[0]/255)+587*(e[1]/255)+114*(e[2]/255))/(e[3]||1)},e}),"use strict",define("src/data/structures",[],function(){"use strict";var e={latex:"string",rxn:"string",reaction:"object",mol2d:"string",molfile2D:"string",mol3d:"string",molfile3D:"string",jme:"string",smiles:"string",actelionID:"string",oclID:"string",doi:"string",gif:"string",picture:"string",string:"string",jpg:"string",jpeg:"string",webp:"string",png:"string",svg:"string",number:"number",color:"string",mf:"string",elecConfig:"string",jcamp:"string",date:"string",downloadLink:"string",openLink:"string",html:"string",boolean:"boolean",array:"array",regexp:"string",regex:"string",gradient:"object",barcode:"string",qrcode:"string",colorBar:{type:"array",elements:{type:"array",elements:["number","string"]}},indicator:{type:"array",elements:{color:"string",bgcolor:"string",text:"string",class:"string",icon:"string",css:"object",tooltip:"string"}},styledValue:{type:"object",elements:{css:"object",value:"object"}},arrayXY:{type:"array",elements:["number","number"]},matrix:{type:"object"},sparkline:{type:"object"},chart:{type:"object"},tree:{type:"object"},fromTo:{type:"object",elements:{from:"number",to:"number"}},loading:{type:"object",elements:{title:"string",series:{type:"array",nbElements:6,elements:{type:"object",elements:{label:"string",data:{type:"array",elements:{type:"object",elements:{a:"number",c:"string",h:"number",info:"object",l:"string",u:"string",n:"string",o:"number",w:"number",x:"number",y:"number"}}}}}}}},gridSelector:{type:"object",elements:{categories:{type:"array",elements:{type:"object",elements:{selectorType:"string",name:"string",label:"string",defaultValue:"number",defaultMaxValue:"number",defaultMinValue:"number",maxValue:"number",minValue:"number"}}},variables:{type:"array",elements:{type:"object",elements:{name:"string",label:"strig"}}}}},chemical:{type:"object",elements:{_entryID:"int",supplierName:"string",_dateCreated:"string",_dateLastModified:"string",iupac:{type:"array",nbElements:2,elements:{type:"object",elements:{value:"string",language:"string"}}},mf:{type:"array",nbElements:2,elements:{type:"object",elements:{value:"mf",mw:"int",exactMass:"int"}}},mol:{type:"array",nbElements:2,elements:{type:"object",elements:{value:"molfile2D",gif:"gif"}}},rn:{type:"array",nbElements:2,elements:{type:"object",elements:{value:"int"}}},batchID:"string",catalogID:"string",entryDetails:"chemicalDetails"}},chemicalDetails:{type:"object",elements:{_entryID:"int",supplierName:"string",_dateCreated:"string",_dateLastModified:"string",iupac:{type:"array",elements:{type:"object",elements:{value:"string",language:"string"}}},mf:{type:"array",elements:{type:"object",elements:{value:"mf",mw:"int",exactMass:"int"}}},mol:{type:"array",elements:{type:"object",elements:{value:"molfile2D",gif:"gif"}}},batchID:"string",catalogID:"string",bp:{type:"array",elements:{type:"object",elements:{pressure:"number",high:"number",low:"number"}}},mp:{type:"array",elements:{type:"object",elements:{pressure:"number",high:"number",low:"number"}}},rn:{type:"array",elements:{type:"object",elements:{value:"number"}}},density:{type:"array",elements:{type:"object",elements:{high:"number",low:"number",temperature:"number"}}},mol3d:{type:"array",elements:"molfile3d"},ir:{type:"array",elements:{type:"object",elements:{conditions:"string",solvent:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},nmr:{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},nmrExperiment:{type:"object",elements:{"1H":{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},"13C":{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},cosy:{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},hsqc:{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},hmbc:{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}},jresolv:{type:"array",elements:{type:"object",elements:{pressure:"string",solvent:"string",experiment:"string",frequency:"number",nucleus:"string",temperature:"string",jcamp:"jcamp",view:{type:"object",elements:{description:"string",value:"string",url:"string",pdf:"string"}}}}}}},mass:{type:"array",elements:{type:"object",elements:{experiment:"string",jcamp:"jcamp"}}},massExperiment:{type:"object",elements:{hplcMS:{type:"array",elements:{type:"object",elements:{experiment:"string",jcamp:"jcamp"}}},gcMS:{type:"array",elements:{type:"object",elements:{experiment:"string",jcamp:"jcamp"}}},ms:{type:"array",elements:{type:"object",elements:{experiment:"string",jcamp:"jcamp"}}}}}}},geojson:"object",pdb:"string",cif:"string",magres:"string",jsmolscript:"string"};return Object.defineProperty(e,"_getList",{value:function(){return Object.keys(this).sort()}}),Object.defineProperty(e,"_parse",{value:function(e,t){if(this[e]){var n={type:e},o;if("string"==typeof this[e])switch(this[e]){case"string":o=t;break;case"number":o=parseFloat(t);break;case"boolean":o=!!t;break;default:o=JSON.parse(t);}else o=JSON.parse(t);return n.value=o,DataObject.check(n,!0)}}}),e}),!function(a,b){var c={},d={},e={},f=null;!function(u){function a(e){if("number"==typeof e)return e;var t={};for(var n in e)t[n]=e[n];return t}function m(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=f}function d(){return u.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function e(e,n){var o=new m;return n&&(o.fill="both",o.duration="auto"),"number"!=typeof e||isNaN(e)?void 0!==e&&Object.getOwnPropertyNames(e).forEach(function(n){if("auto"!=e[n]){if(("number"==typeof o[n]||"duration"==n)&&("number"!=typeof e[n]||isNaN(e[n])))return;if("fill"==n&&-1==t.indexOf(e[n]))return;if("direction"==n&&-1==v.indexOf(e[n]))return;if("playbackRate"==n&&1!==e[n]&&u.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;o[n]=e[n]}}):o.duration=e,o}function g(t,n,o,r){return 0>t||1<t||0>o||1<o?f:function(a){function e(e,t,n){return 3*e*(1-n)*(1-n)*n+3*t*(1-n)*n*n+n*n*n}if(0>=a){var s=0;return 0<t?s=n/t:!n&&0<o&&(s=r/o),s*a}if(1<=a){var d=0;return 1>o?d=(r-1)/(o-1):1==o&&1>t&&(d=(n-1)/(t-1)),1+d*(a-1)}for(var p=0,c=1;p<c;){var u=(p+c)/2,m=e(t,o,u);if(1e-5>Math.abs(a-m))return e(n,r,u);m<a?p=u:c=u}return e(n,r,u)}}function i(e,t){return function(n){if(1<=n)return 1;var o=1/e;return n+=t*o,n-n%o}}function c(e){T||(T=document.createElement("div").style),T.animationTimingFunction="",T.animationTimingFunction=e;var t=T.animationTimingFunction;if(""==t&&d())throw new TypeError(e+" is not a valid value for easing");return t}function h(e){if("linear"==e)return f;var t=S.exec(e);if(t)return g.apply(this,t.slice(1).map(Number));var n=E.exec(e);if(n)return i(+n[1],{start:x,middle:y,end:w}[n[2]]);var o=k[e];return o?o:f}function l(e){return 0===e.duration||0===e.iterations?0:e.duration*e.iterations}function n(e,t,n){if(null==t)return j;var o=n.delay+e+n.endDelay;return t<Math.min(n.delay,o)?D:t>=Math.min(n.delay+e,o)?A:P}function o(t,n,o,i,r){return i===D?"backwards"==n||"both"==n?0:null:i===P?o-r:i===A?"forwards"==n||"both"==n?t:null:i===j?null:void 0}function p(t,n,o,i,r){var e=r;return 0===t?n!==D&&(e+=o):e+=i/t,e}function _(t,n,o,i,r,e){var a=t===1/0?n%1:t%1;return 0!=a||o!==A||0===i||0===r&&0!==e||(a=1),a}function r(e,t,n,o){return e===A&&t===1/0?1/0:1===n?Math.floor(o)-1:Math.floor(o)}function s(t,n,o){var i=t;if("normal"!==t&&"reverse"!==t){var r=n;"alternate-reverse"===t&&(r+=1),i="normal",r!==1/0&&0!=r%2&&(i="reverse")}return"normal"===i?o:1-o}var t="backwards|forwards|both|none".split("|"),v="reverse|alternate|alternate-reverse".split("|"),f=function(e){return e};m.prototype={_setMember:function(e,t){this["_"+e]=t,this._effect&&(this._effect._timingInput[e]=t,this._effect._timing=u.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=u.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(e){this._setMember("delay",e)},get delay(){return this._delay},set endDelay(e){this._setMember("endDelay",e)},get endDelay(){return this._endDelay},set fill(e){this._setMember("fill",e)},get fill(){return this._fill},set iterationStart(e){if((isNaN(e)||0>e)&&d())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",e)},get iterationStart(){return this._iterationStart},set duration(e){if("auto"!=e&&(isNaN(e)||0>e)&&d())throw new TypeError("duration must be non-negative or auto, received: "+e);this._setMember("duration",e)},get duration(){return this._duration},set direction(e){this._setMember("direction",e)},get direction(){return this._direction},set easing(e){this._easingFunction=h(c(e)),this._setMember("easing",e)},get easing(){return this._easing},set iterations(e){if((isNaN(e)||0>e)&&d())throw new TypeError("iterations must be non-negative, received: "+e);this._setMember("iterations",e)},get iterations(){return this._iterations}};var x=1,y=.5,w=0,k={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,1),"ease-in-out":g(.42,0,.58,1),"step-start":i(1,x),"step-middle":i(1,y),"step-end":i(1,w)},T=null,S=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,E=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,j=0,D=1,A=2,P=3;u.cloneTimingInput=a,u.makeTiming=e,u.numericTimingToObject=function(e){return"number"==typeof e&&(e=isNaN(e)?{duration:0}:{duration:e}),e},u.normalizeTimingInput=function(t,n){return t=u.numericTimingToObject(t),e(t,n)},u.calculateActiveDuration=function(e){return Math.abs(l(e)/e.playbackRate)},u.calculateIterationProgress=function(t,a,l){var c=n(t,a,l),d=o(t,l.fill,a,c,l.delay);if(null===d)return null;var e=p(l.duration,c,l.iterations,d,l.iterationStart),u=_(e,l.iterationStart,c,l.iterations,d,l.duration),m=r(c,l.iterations,u,e),g=s(l.direction,m,u);return l._easingFunction(g)},u.calculatePhase=n,u.normalizeEasing=c,u.parseEasingFunction=h}(c,f),function(t){function n(e,t){return e in d?d[e][t]||t:t}function o(e){return"display"===e||0===e.lastIndexOf("animation",0)||0===e.lastIndexOf("transition",0)}function r(t,i,r){if(!o(t)){var e=s[t];if(e)for(var a in l.style[t]=i,e){var d=e[a],p=l.style[d];r[d]=n(d,p)}else r[t]=n(t,i)}}function e(t){var n=[];for(var o in t)if(!(o in["easing","offset","composite"])){var i=t[o];Array.isArray(i)||(i=[i]);for(var r=i.length,a=0,s;a<r;a++)s={},s.offset="offset"in t?t.offset:1==r?1:a/(r-1),"easing"in t&&(s.easing=t.easing),"composite"in t&&(s.composite=t.composite),s[o]=i[a],n.push(s)}return n.sort(function(e,t){return e.offset-t.offset}),n}function a(n){function o(){var t=s.length;null==s[t-1].offset&&(s[t-1].offset=1),1<t&&null==s[0].offset&&(s[0].offset=0);for(var n=0,o=s[0].offset,i=1,r;i<t;i++)if(r=s[i].offset,null!=r){for(var a=1;a<i-n;a++)s[n+a].offset=o+(r-o)*a/(i-n);n=i,o=r}}if(null==n)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&n[Symbol.iterator]&&(n=Array.from(n)),Array.isArray(n)||(n=e(n));for(var s=n.map(function(e){var n={};for(var o in e){var i=e[o];if("offset"==o){if(null!=i){if(i=+i,!isFinite(i))throw new TypeError("Keyframe offsets must be numbers.");if(0>i||1<i)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==o){if("add"==i||"accumulate"==i)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=i)throw new TypeError("Invalid composite mode "+i+".")}else i="easing"==o?t.normalizeEasing(i):""+i;r(o,i,n)}return null==n.offset&&(n.offset=null),null==n.easing&&(n.easing="linear"),n}),a=!0,l=-(1/0),p=0,c;p<s.length;p++)if(c=s[p].offset,null!=c){if(c<l)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");l=c}else a=!1;return s=s.filter(function(e){return 0<=e.offset&&1>=e.offset}),a||o(),s}var s={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},l=document.createElementNS("http://www.w3.org/1999/xhtml","div"),i={thin:"1px",medium:"3px",thick:"5px"},d={borderBottomWidth:i,borderLeftWidth:i,borderRightWidth:i,borderTopWidth:i,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:i,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};t.convertToArrayForm=e,t.normalizeKeyframes=a}(c,f),function(t){var n={};t.isDeprecated=function(t,o,i,r){var e=r?"are":"is",a=new Date,s=new Date(o);return s.setMonth(s.getMonth()+3),!(a<s&&(t in n||console.warn("Web Animations: "+t+" "+e+" deprecated and will stop working on "+s.toDateString()+". "+i),n[t]=!0,1))},t.deprecated=function(n,o,i,r){var e=r?"are":"is";if(t.isDeprecated(n,o,i,r))throw new Error(n+" "+e+" no longer supported. "+i)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(e){void 0===a[e]&&(b=!0)})),!b)return}!function(t,n){function o(t){for(var n={},o=0;o<t.length;o++)for(var i in t[o])if("offset"!=i&&"easing"!=i&&"composite"!=i){var r={offset:t[o].offset,easing:t[o].easing,value:t[o][i]};n[i]=n[i]||[],n[i].push(r)}for(var e in n){var a=n[e];if(0!=a[0].offset||1!=a[a.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return n}function i(o){var r=[];for(var a in o)for(var e=o[a],s=0;s<e.length-1;s++){var d=s,p=s+1,c=e[d].offset,u=e[p].offset,f=c,y=u;0==s&&(f=-(1/0),0==u&&(p=d)),s==e.length-2&&(y=1/0,1==c&&(d=p)),r.push({applyFrom:f,applyTo:y,startOffset:e[d].offset,endOffset:e[p].offset,easingFunction:t.parseEasingFunction(e[d].easing),property:a,interpolation:n.propertyInterpolation(a,e[d].value,e[p].value)})}return r.sort(function(e,t){return e.startOffset-t.startOffset}),r}n.convertEffectInput=function(e){var r=t.normalizeKeyframes(e),s=o(r),l=i(s);return function(t,o){if(null!=o)l.filter(function(e){return o>=e.applyFrom&&o<e.applyTo}).forEach(function(i){var r=o-i.startOffset,e=i.endOffset-i.startOffset,a=0==e?0:i.easingFunction(r/e);n.apply(t,i.property,i.interpolation(a))});else for(var e in s)"offset"!=e&&"easing"!=e&&"composite"!=e&&n.clear(t,e)}}}(c,d,f),function(t,r){function s(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function n(e,t,n){d[n]=d[n]||[],d[n].push([e,t])}function e(e,t,o){for(var i=0,r;i<o.length;i++)r=o[i],n(e,t,s(r))}function o(i,p,c){var u=i;/-/.test(i)&&!t.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(u=s(i)),"initial"!=p&&"initial"!=c||("initial"==p&&(p=a[u]),"initial"==c&&(c=a[u]));for(var h=p==c?[]:d[u],y=0;h&&y<h.length;y++){var b=h[y][0](p),l=h[y][0](c);if(void 0!==b&&void 0!==l){var m=h[y][1](b,l);if(m){var n=r.Interpolation.apply(null,m);return function(e){return 0==e?p:1==e?c:n(e)}}}}return r.Interpolation(!1,!0,function(e){return e?c:p})}var d={};r.addPropertiesHandler=e;var a={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};r.propertyInterpolation=o}(c,d,f),function(t,n){function o(e){var n=t.calculateActiveDuration(e),o=function(o){return t.calculateIterationProgress(n,o,e)};return o._totalDuration=e.delay+n+e.endDelay,o}n.KeyframeEffect=function(r,a,e,s){var l=o(t.normalizeTimingInput(e)),i=n.convertEffectInput(a),d=function(){i(r,p)},p;return d._update=function(e){return p=l(e),null!==p},d._clear=function(){i(r,null)},d._hasSameTarget=function(e){return r===e},d._target=r,d._totalDuration=l._totalDuration,d._id=s,d},n.NullEffect=function(e){var t=function(){e&&(e(),e=null)};return t._update=function(){return null},t._totalDuration=0,t._hasSameTarget=function(){return!1},t}}(c,d,f),function(t){function n(e,t,n){n.enumerable=!0,n.configurable=!0,Object.defineProperty(e,t,n)}function o(e){this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=e.style,this._length=0,this._isAnimatedProperty={};for(var t=0,n;t<this._style.length;t++)n=this._style[t],this._surrogateStyle[n]=this._style[n];this._updateIndices()}function r(e){if(!e._webAnimationsPatchedStyle){var t=new o(e);try{n(e,"style",{get:function(){return t}})}catch(t){e.style._set=function(t,n){e.style[t]=n},e.style._clear=function(t){e.style[t]=""}}e._webAnimationsPatchedStyle=e.style}}var e={cssText:1,length:1,parentRule:1},a={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},s={removeProperty:1,setProperty:1};for(var l in o.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(e){for(var t={},n=0;n<this._surrogateStyle.length;n++)t[this._surrogateStyle[n]]=!0;this._surrogateStyle.cssText=e,this._updateIndices();for(var n=0;n<this._surrogateStyle.length;n++)t[this._surrogateStyle[n]]=!0;for(var o in t)this._isAnimatedProperty[o]||this._style.setProperty(o,this._surrogateStyle.getPropertyValue(o))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(e){return function(){return this._surrogateStyle[e]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(e,t){this._style[e]=t,this._isAnimatedProperty[e]=!0},_clear:function(e){this._style[e]=this._surrogateStyle[e],delete this._isAnimatedProperty[e]}},a)o.prototype[l]=function(e,t){return function(){var n=this._surrogateStyle[e].apply(this._surrogateStyle,arguments);return t&&(this._isAnimatedProperty[arguments[0]]||this._style[e].apply(this._style,arguments),this._updateIndices()),n}}(l,l in s);for(var i in document.documentElement.style)i in e||i in a||!function(e){n(o.prototype,e,{get:function(){return this._surrogateStyle[e]},set:function(t){this._surrogateStyle[e]=t,this._updateIndices(),this._isAnimatedProperty[e]||(this._style[e]=t)}})}(i);t.apply=function(e,n,o){r(e),e.style._set(t.propertyName(n),o)},t.clear=function(e,n){e._webAnimationsPatchedStyle&&e.style._clear(t.propertyName(n))}}(d,f),function(e){window.Element.prototype.animate=function(t,n){var o="";return n&&n.id&&(o=n.id),e.timeline._play(e.KeyframeEffect(this,t,n,o))}}(d),function(e){function t(n,o,i){if("number"==typeof n&&"number"==typeof o)return n*(1-i)+o*i;if("boolean"==typeof n&&"boolean"==typeof o)return .5>i?n:o;if(n.length==o.length){for(var r=[],e=0;e<n.length;e++)r.push(t(n[e],o[e],i));return r}throw"Mismatched interpolation arguments "+n+":"+o}e.Interpolation=function(n,o,i){return function(r){return i(t(n,o,r))}}}(d,f),function(t){function n(e,t,n){return Math.max(Math.min(e,n),t)}function o(o,r,a){var e=t.dot(o,r);e=n(e,-1,1);var s=[];if(1===e)s=o;else for(var l=Math.acos(e),d=1*Math.sin(a*l)/Math.sqrt(1-e*e),i=0;4>i;i++)s.push(o[i]*(Math.cos(a*l)-e*d)+r[i]*d);return s}var i=function(){function t(t,n){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=0;4>i;i++)for(var r=0;4>r;r++)for(var a=0;4>a;a++)o[i][r]+=n[i][a]*t[a][r];return o}function r(e){return 0==e[0][2]&&0==e[0][3]&&0==e[1][2]&&0==e[1][3]&&0==e[2][0]&&0==e[2][1]&&1==e[2][2]&&0==e[2][3]&&0==e[3][2]&&1==e[3][3]}function e(a,s,d,e,c){for(var u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],g=0;4>g;g++)u[g][3]=c[g];for(var g=0;3>g;g++)for(var f=0;3>f;f++)u[3][g]+=a[f]*u[f][g];var y=e[0],b=e[1],l=e[2],m=e[3],n=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];n[0][0]=1-2*(b*b+l*l),n[0][1]=2*(y*b-l*m),n[0][2]=2*(y*l+b*m),n[1][0]=2*(y*b+l*m),n[1][1]=1-2*(y*y+l*l),n[1][2]=2*(b*l-y*m),n[2][0]=2*(y*l-b*m),n[2][1]=2*(b*l+y*m),n[2][2]=1-2*(y*y+b*b),u=t(u,n);var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];d[2]&&(o[2][1]=d[2],u=t(u,o)),d[1]&&(o[2][1]=0,o[2][0]=d[0],u=t(u,o)),d[0]&&(o[2][0]=0,o[1][0]=d[0],u=t(u,o));for(var g=0;3>g;g++)for(var f=0;3>f;f++)u[g][f]*=s[g];return r(u)?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3])}return e}();t.composeMatrix=i,t.quat=o}(d,f),function(e,t){e.sequenceNumber=0;var n=function(e,t,n){this.target=e,this.currentTime=t,this.timelineTime=n,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=e,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};t.Animation=function(t){this.id="",t&&t._id&&(this.id=t._id),this._sequenceNumber=e.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=t,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},t.Animation.prototype={_ensureAlive:function(){this._inEffect=0>this.playbackRate&&0===this.currentTime?this._effect._update(-1):this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,t.timeline._animations.push(this))},_tickCurrentTime:function(e,t){e!=this._currentTime&&(this._currentTime=e,this._isFinished&&!t&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(e){e=+e,isNaN(e)||(t.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-e/this._playbackRate),this._currentTimePending=!1,this._currentTime!=e&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(e,!0),t.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(e){e=+e,isNaN(e)||this._paused||this._idle||(this._startTime=e,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),t.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(e){if(e!=this._playbackRate){var n=this.currentTime;this._playbackRate=e,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),t.applyDirtiedAnimation(this)),null!=n&&(this.currentTime=n)}},get _isFinished(){return!this._idle&&(0<this._playbackRate&&this._currentTime>=this._totalDuration||0>this._playbackRate&&0>=this._currentTime)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(0<=this._playbackRate)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),t.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,t.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),t.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(e,t){"function"==typeof t&&"finish"==e&&this._finishHandlers.push(t)},removeEventListener:function(e,t){if("finish"==e){var n=this._finishHandlers.indexOf(t);0<=n&&this._finishHandlers.splice(n,1)}},_fireEvents:function(e){if(!this._isFinished)this._finishedFlag=!1;else if(!this._finishedFlag){var t=new n(this,this._currentTime,e),o=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){o.forEach(function(e){e.call(t.target,t)})},0),this._finishedFlag=!0}},_tick:function(e,t){this._idle||this._paused||(null==this._startTime?t&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((e-this._startTime)*this.playbackRate)),t&&(this._currentTimePending=!1,this._fireEvents(e))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var e=this._effect._target;return e._activeAnimations||(e._activeAnimations=[]),e._activeAnimations},_markTarget:function(){var e=this._targetAnimations();-1===e.indexOf(this)&&e.push(this)},_unmarkTarget:function(){var e=this._targetAnimations(),t=e.indexOf(this);-1!==t&&e.splice(t,1)}}}(c,d,f),function(t,r){function s(e){var t=i;i=[],e<v.currentTime&&(e=v.currentTime),v._animations.sort(u),v._animations=g(e,!0,v._animations)[0],t.forEach(function(t){t[1](e)}),f(),h=void 0}function u(e,t){return e._sequenceNumber-t._sequenceNumber}function e(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function f(){_.forEach(function(e){e()}),_.length=0}function g(t,n,a){o=!0,b=!1;var s=r.timeline;s.currentTime=t,y=!1;var e=[],l=[],p=[],c=[];return a.forEach(function(o){o._tick(t,n),o._inEffect?(l.push(o._effect),o._markTarget()):(e.push(o._effect),o._unmarkTarget()),o._needsTick&&(y=!0);var i=o._inEffect||o._needsTick;o._inTimeline=i,i?p.push(o):c.push(o)}),_.push.apply(_,e),_.push.apply(_,l),y&&requestAnimationFrame(function(){}),o=!1,[p,c]}var d=window.requestAnimationFrame,i=[],c=0;window.requestAnimationFrame=function(e){var t=c++;return 0==i.length&&d(s),i.push([t,e]),t},window.cancelAnimationFrame=function(e){i.forEach(function(t){t[0]==e&&(t[1]=function(){})})},e.prototype={_play:function(e){e._timing=t.normalizeTimingInput(e.timing);var n=new r.Animation(e);return n._idle=!1,n._timeline=this,this._animations.push(n),r.restart(),r.applyDirtiedAnimation(n),n}};var h=void 0,y=!1,b=!1;r.restart=function(){return y||(y=!0,requestAnimationFrame(function(){}),b=!0),b},r.applyDirtiedAnimation=function(e){if(!o){e._markTarget();var t=e._targetAnimations();t.sort(u);var n=g(r.timeline.currentTime,!1,t.slice())[1];n.forEach(function(e){var t=v._animations.indexOf(e);-1!==t&&v._animations.splice(t,1)}),f()}};var _=[],o=!1,v=new e;r.timeline=v}(c,d,f),function(t){function _(e,t){for(var n=0,o=0;o<e.length;o++)n+=e[o]*t[o];return n}function n(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function o(t){var n=t.rad||0,o=t.deg||0,i=t.grad||0,r=t.turn||0,e=(o/360+i/400+r)*(2*Math.PI)+n;return e}function e(e){switch(e.t){case"rotatex":var t=o(e.d[0]);return[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1];case"rotatey":var t=o(e.d[0]);return[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1];case"rotate":case"rotatez":var t=o(e.d[0]);return[Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var r=e.d[0],a=e.d[1],s=e.d[2],t=o(e.d[3]),p=r*r+a*a+s*s;if(0==p)r=1,a=0,s=0;else if(1!=p){var u=Math.sqrt(p);r/=u,a/=u,s/=u}var g=Math.sin(t/2),i=g*Math.cos(t/2),h=g*g;return[1-2*(a*a+s*s)*h,2*(r*a*h+s*i),2*(r*s*h-a*i),0,2*(r*a*h-s*i),1-2*(r*r+s*s)*h,2*(a*s*h+r*i),0,2*(r*s*h+a*i),2*(a*s*h-r*i),1-2*(r*r+a*a)*h,0,0,0,0,1];case"scale":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0],0,0,0,0,1];case"scale3d":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,e.d[2],0,0,0,0,1];case"skew":var y=o(e.d[0]),l=o(e.d[1]);return[1,Math.tan(l),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var t=o(e.d[0]);return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var t=o(e.d[0]);return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var r=e.d[0].px||0,a=e.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,r,a,0,1];case"translatex":var r=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,r,0,0,1];case"translatey":var a=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,a,0,1];case"translatez":var s=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,s,1];case"translate3d":var r=e.d[0].px||0,a=e.d[1].px||0,s=e.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,r,a,s,1];case"perspective":var m=e.d[0].px?-1/e.d[0].px:0;return[1,0,0,0,0,1,0,0,0,0,1,m,0,0,0,1];case"matrix":return[e.d[0],e.d[1],0,0,e.d[2],e.d[3],0,0,0,0,1,0,e.d[4],e.d[5],0,1];case"matrix3d":return e.d;}}function r(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(e).reduce(n)}var s=function(){function T(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][2]*e[1][1]*e[2][0]-e[1][2]*e[2][1]*e[0][0]-e[2][2]*e[0][1]*e[1][0]}function t(t){for(var r=1/T(t),a=t[0][0],s=t[0][1],e=t[0][2],d=t[1][0],c=t[1][1],u=t[1][2],i=t[2][0],g=t[2][1],h=t[2][2],l=[[(c*h-u*g)*r,(e*g-s*h)*r,(s*u-e*c)*r,0],[(u*i-d*h)*r,(a*h-e*i)*r,(e*d-a*u)*r,0],[(d*g-c*i)*r,(i*s-a*g)*r,(a*c-s*d)*r,0]],m=[],n=0;3>n;n++){for(var f=0,y=0;3>y;y++)f+=t[3][y]*l[y][n];m.push(f)}return m.push(1),l.push(m),l}function n(e){return[[e[0][0],e[1][0],e[2][0],e[3][0]],[e[0][1],e[1][1],e[2][1],e[3][1]],[e[0][2],e[1][2],e[2][2],e[3][2]],[e[0][3],e[1][3],e[2][3],e[3][3]]]}function r(t,n){for(var o=[],i=0;4>i;i++){for(var r=0,a=0;4>a;a++)r+=t[a]*n[a][i];o.push(r)}return o}function e(e){var t=d(e);return[e[0]/t,e[1]/t,e[2]/t]}function d(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function a(e,t,n,o){return[n*e[0]+o*t[0],n*e[1]+o*t[1],n*e[2]+o*t[2]]}function c(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function o(i){var g=[i.slice(0,4),i.slice(4,8),i.slice(8,12),i.slice(12,16)];if(1!==g[3][3])return null;for(var h=[],l=0;4>l;l++)h.push(g[l].slice());for(var l=0;3>l;l++)h[l][3]=0;if(0===T(h))return!1;var f=[],o;if(g[0][3]||g[1][3]||g[2][3]){f.push(g[0][3]),f.push(g[1][3]),f.push(g[2][3]),f.push(g[3][3]);var b=t(h),p=n(b);o=r(f,p)}else o=[0,0,0,1];var k=g[3].slice(0,3),C=[];C.push(g[0].slice(0,3));var s=[];s.push(d(C[0])),C[0]=e(C[0]);var S=[];C.push(g[1].slice(0,3)),S.push(_(C[0],C[1])),C[1]=a(C[1],C[0],1,-S[0]),s.push(d(C[1])),C[1]=e(C[1]),S[0]/=s[1],C.push(g[2].slice(0,3)),S.push(_(C[0],C[2])),C[2]=a(C[2],C[0],1,-S[1]),S.push(_(C[1],C[2])),C[2]=a(C[2],C[1],1,-S[2]),s.push(d(C[2])),C[2]=e(C[2]),S[1]/=s[2],S[2]/=s[2];var u=c(C[1],C[2]);if(0>_(C[0],u))for(var l=0;3>l;l++)s[l]*=-1,C[l][0]*=-1,C[l][1]*=-1,C[l][2]*=-1;var v=C[0][0]+C[1][1]+C[2][2]+1,y,E;return 1e-4<v?(y=.5/Math.sqrt(v),E=[(C[2][1]-C[1][2])*y,(C[0][2]-C[2][0])*y,(C[1][0]-C[0][1])*y,.25/y]):C[0][0]>C[1][1]&&C[0][0]>C[2][2]?(y=2*Math.sqrt(1+C[0][0]-C[1][1]-C[2][2]),E=[.25*y,(C[0][1]+C[1][0])/y,(C[0][2]+C[2][0])/y,(C[2][1]-C[1][2])/y]):C[1][1]>C[2][2]?(y=2*Math.sqrt(1+C[1][1]-C[0][0]-C[2][2]),E=[(C[0][1]+C[1][0])/y,.25*y,(C[1][2]+C[2][1])/y,(C[0][2]-C[2][0])/y]):(y=2*Math.sqrt(1+C[2][2]-C[0][0]-C[1][1]),E=[(C[0][2]+C[2][0])/y,(C[1][2]+C[2][1])/y,.25*y,(C[1][0]-C[0][1])/y]),[k,s,S,E,o]}return o}();t.dot=_,t.makeMatrixDecomposition=function(e){return[s(r(e))]}}(d,f),function(t){function n(e,t){var n=e.exec(t);if(n)return n=e.ignoreCase?n[0].toLowerCase():n[0],[n,t.substr(n.length)]}function o(e,t){t=t.replace(/^\s*/,"");var n=e(t);if(n)return[n[0],n[1].replace(/^\s*/,"")]}function i(t,i,r){t=o.bind(null,t);for(var s=[],l;;){if(l=t(r),!l)return[s,r];if(s.push(l[0]),r=l[1],l=n(i,r),!l||""==l[1])return[s,r];r=l[1]}}function r(t,n){for(var o=0,i=0;i<n.length&&(!/\s|,/.test(n[i])||0!=o);i++)if("("==n[i])o++;else if(")"==n[i]&&(o--,0==o&&i++,0>=o))break;var r=t(n.substr(0,i));return null==r?void 0:[r,n.substr(i)]}function a(e,t){for(var n=e,o=t;n&&o;)n>o?n%=o:o%=n;return n=e*t/(n+o)}function e(t,n,o,r,s){for(var e=[],d=[],p=[],i=a(r.length,s.length),c=0,u;c<i;c++){if(u=n(r[c%r.length],s[c%s.length]),!u)return;e.push(u[0]),d.push(u[1]),p.push(u[2])}return[e,d,function(e){var n=e.map(function(e,t){return p[t](e)}).join(o);return t?t(n):n}]}t.consumeToken=n,t.consumeTrimmed=o,t.consumeRepeated=i,t.consumeParenthesised=r,t.ignore=function(e){return function(t){var n=e(t);return n&&(n[0]=void 0),n}},t.optional=function(e,t){return function(n){var o=e(n);return o?o:[t,n]}},t.consumeList=function(n,o){for(var i=[],r=0,a;r<n.length;r++){if(a=t.consumeTrimmed(n[r],o),!a||""==a[0])return;void 0!==a[0]&&i.push(a[0]),o=a[1]}if(""==o)return i},t.mergeNestedRepeated=e.bind(null,null),t.mergeWrappedNestedRepeated=e,t.mergeList=function(t,n,o){for(var r=[],s=[],e=[],a=0,l=0;l<o.length;l++)if("function"==typeof o[l]){var d=o[l](t[a],n[a++]);r.push(d[0]),s.push(d[1]),e.push(d[2])}else!function(t){r.push(!1),s.push(!1),e.push(function(){return o[t]})}(l);return[r,s,function(t){for(var n="",o=0;o<t.length;o++)n+=e[o](t[o]);return n}]}}(d),function(t){function n(n){function o(e){var n=t.consumeToken(/^inset/i,e);if(n)return i.inset=!0,n;var n=t.consumeLengthOrPercent(e);if(n)return i.lengths.push(n[0]),n;var n=t.consumeColor(e);return n?(i.color=n[0],n):void 0}var i={inset:!1,lengths:[],color:null},r=t.consumeRepeated(o,/^/,n);if(r&&r[0].length)return[i,r[1]]}function o(e){var o=t.consumeRepeated(n,/^,/,e);if(o&&""==o[1])return o[0]}function i(n,o){for(;n.lengths.length<Math.max(n.lengths.length,o.lengths.length);)n.lengths.push({px:0});for(;o.lengths.length<Math.max(n.lengths.length,o.lengths.length);)o.lengths.push({px:0});if(n.inset==o.inset&&!!n.color==!!o.color){for(var r=[],e=[[],0],a=[[],0],s=0,l,p;s<n.lengths.length;s++)p=t.mergeDimensions(n.lengths[s],o.lengths[s],2==s),e[0].push(p[0]),a[0].push(p[1]),r.push(p[2]);if(n.color&&o.color){var c=t.mergeColors(n.color,o.color);e[1]=c[0],a[1]=c[1],l=c[2]}return[e,a,function(e){for(var t=n.inset?"inset ":" ",o=0;o<r.length;o++)t+=r[o](e[0][o])+" ";return l&&(t+=l(e[1])),t}]}}function r(n,o,r,a){function e(e){return{inset:e,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var s=[],l=[],d=0;d<r.length||d<a.length;d++){var p=r[d]||e(a[d].inset),c=a[d]||e(r[d].inset);s.push(p),l.push(c)}return t.mergeNestedRepeated(n,o,s,l)}var e=r.bind(null,i,", ");t.addPropertiesHandler(o,e,["box-shadow","text-shadow"])}(d),function(t){function n(e){return e.toFixed(3).replace(".000","")}function o(e,t,n){return Math.min(t,Math.max(e,n))}function r(e){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e))return+e}function e(t,i){return function(r,e){return[r,e,function(r){return n(o(t,i,r))}]}}t.clamp=o,t.addPropertiesHandler(r,e(0,1/0),["border-image-width","line-height"]),t.addPropertiesHandler(r,e(0,1),["opacity","shape-image-threshold"]),t.addPropertiesHandler(r,function(t,n){if(0!=t)return e(0,1/0)(t,n)},["flex-grow","flex-shrink"]),t.addPropertiesHandler(r,function(e,t){return[e,t,function(e){return Math.round(o(1,1/0,e))}]},["orphans","widows"]),t.addPropertiesHandler(r,function(e,t){return[e,t,Math.round]},["z-index"]),t.parseNumber=r,t.mergeNumbers=function(e,t){return[e,t,n]},t.numberToString=n}(d,f),function(e){e.addPropertiesHandler(String,function(e,t){if("visible"==e||"visible"==t)return[0,1,function(n){return 0>=n?e:1<=n?t:"visible"}]},["visibility"])}(d),function(t){function n(t){t=t.trim(),e.fillStyle="#000",e.fillStyle=t;var n=e.fillStyle;if(e.fillStyle="#fff",e.fillStyle=t,n==e.fillStyle){e.fillRect(0,0,1,1);var o=e.getImageData(0,0,1,1).data;e.clearRect(0,0,1,1);var i=o[3]/255;return[o[0]*i,o[1]*i,o[2]*i,i]}}function o(e,n){return[e,n,function(e){function n(e){return Math.max(0,Math.min(255,e))}if(e[3])for(var o=0;3>o;o++)e[o]=Math.round(n(e[o]/e[3]));return e[3]=t.numberToString(t.clamp(0,1,e[3])),"rgba("+e.join(",")+")"}]}var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=i.height=1;var e=i.getContext("2d");t.addPropertiesHandler(n,o,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),t.consumeColor=t.consumeParenthesised.bind(null,n),t.mergeColors=o}(d,f),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&0<="px".search(a))return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(e){return c[e]=null,"U"+e});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(t,n){return e(t,n,!0)}function e(t,n,o){var i=[],r;for(r in t)i.push(r);for(r in n)0>i.indexOf(r)&&i.push(r);return t=i.map(function(e){return t[e]||0}),n=i.map(function(e){return n[e]||0}),[t,n,function(t){var e=t.map(function(n,r){return 1==t.length&&o&&(n=Math.max(n,0)),a.numberToString(n)+i[r]}).join(" + ");return 1<t.length?"calc("+e+")":e}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g),h=c.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(e){var t=l(e);if(t&&""==t[1])return t[0]},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(t){function e(e){return t.consumeLengthOrPercent(e)||t.consumeToken(/^auto/,e)}function n(n){var o=t.consumeList([t.ignore(t.consumeToken.bind(null,/^rect/)),t.ignore(t.consumeToken.bind(null,/^\(/)),t.consumeRepeated.bind(null,e,/^,/),t.ignore(t.consumeToken.bind(null,/^\)/))],n);if(o&&4==o[0].length)return o[0]}var o=t.mergeWrappedNestedRepeated.bind(null,function(e){return"rect("+e+")"},function(n,o){return"auto"==n||"auto"==o?[!0,!1,function(i){var r=i?n:o;if("auto"==r)return"auto";var e=t.mergeDimensions(r,r);return e[2](e[0])}]:t.mergeDimensions(n,o)},", ");t.parseBox=n,t.mergeBoxes=o,t.addPropertiesHandler(n,o,["clip"])}(d,f),function(_){function t(e){return function(t){var n=0;return e.map(function(e){return e===s?t[n++]:e})}}function o(e){return e}function r(t){if(t=t.toLowerCase().trim(),"none"==t)return[];for(var n=/\s*(\w+)\(([^)]*)\)/g,a=[],e=0,s;s=n.exec(t);){if(s.index!=e)return;e=s.index+s[0].length;var u=s[1],m=T[u];if(!m)return;var g=s[2].split(","),i=m[0];if(i.length<g.length)return;for(var h=[],y=0;y<i.length;y++){var v=g[y],x=i[y],r;if(r=v?{A:function(e){return"0"==e.trim()?l:_.parseAngle(e)},N:_.parseNumber,T:_.parseLengthOrPercent,L:_.parseLength}[x.toUpperCase()](v):{a:l,n:h[0],t:d}[x],void 0===r)return;h.push(r)}if(a.push({t:u,d:h}),n.lastIndex==t.length)return a}}function a(e){return e.toFixed(6).replace(".000000","")}function e(t,n){if(t.decompositionPair!==n){t.decompositionPair=n;var o=_.makeMatrixDecomposition(t)}if(n.decompositionPair!==t){n.decompositionPair=t;var i=_.makeMatrixDecomposition(n)}return null==o[0]||null==i[0]?[[!1],[!0],function(e){return e?n[0].d:t[0].d}]:(o[0].push(0),i[0].push(1),[o,i,function(e){var t=_.quat(o[0][3],i[0][3],e[5]),n=_.composeMatrix(e[0],e[1],e[2],t,e[4]),r=n.map(a).join(",");return r}])}function g(e){return e.replace(/[xy]/,"")}function p(e){return e.replace(/(x|y|z|3d)?$/,"3d")}function i(n,i){var a=_.makeMatrixDecomposition&&!0,d=!1;if(!n.length||!i.length){n.length||(d=!0,n=i,i=[]);for(var h=0;h<n.length;h++){var S=n[h].t,E=n[h].d,k="scale"==S.substr(0,5)?1:0;i.push({t:S,d:E.map(function(e){if("number"==typeof e)return k;var t={};for(var n in e)t[n]=k;return t})})}}var l=function(e,t){return"perspective"==e&&"perspective"==t||("matrix"==e||"matrix3d"==e)&&("matrix"==t||"matrix3d"==t)},m=[],P=[],O=[];if(n.length!=i.length){if(!a)return;var R=e(n,i);m=[R[0]],P=[R[1]],O=[["matrix",[R[2]]]]}else for(var h=0;h<n.length;h++){var L=n[h].t,s=i[h].t,t=n[h].d,N=i[h].d,I=T[L],w=T[s],S;if(l(L,s)){if(!a)return;var R=e([n[h]],[i[h]]);m.push(R[0]),P.push(R[1]),O.push(["matrix",[R[2]]])}else{if(L==s)S=L;else if(I[2]&&w[2]&&g(L)==g(s))S=g(L),t=I[2](t),N=w[2](N);else{if(!I[1]||!w[1]||p(L)!=p(s)){if(!a)return;var R=e(n,i);m=[R[0]],P=[R[1]],O=[["matrix",[R[2]]]];break}S=p(L),t=I[1](t),N=w[1](N)}for(var x=[],y=[],F=[],A=0;A<t.length;A++){var M="number"==typeof t[A]?_.mergeNumbers:_.mergeDimensions,R=M(t[A],N[A]);x[A]=R[0],y[A]=R[1],F.push(R[2])}m.push(x),P.push(y),O.push([S,F])}}if(d){var C=m;m=P,P=C}return[m,P,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return O[t][1][n](e)}).join(",");return"matrix"==O[t][0]&&16==n.split(",").length&&(O[t][0]="matrix3d"),O[t][0]+"("+n+")"}).join(" ")}]}var s=null,d={px:0},l={deg:0},T={matrix:["NNNNNN",[s,s,0,0,s,s,0,0,0,0,1,0,s,s,0,1],o],matrix3d:["NNNNNNNNNNNNNNNN",o],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",t([s,s,1]),o],scalex:["N",t([s,1,1]),t([s,1])],scaley:["N",t([1,s,1]),t([1,s])],scalez:["N",t([1,1,s])],scale3d:["NNN",o],skew:["Aa",null,o],skewx:["A",null,t([s,l])],skewy:["A",null,t([l,s])],translate:["Tt",t([s,s,d]),o],translatex:["T",t([s,d,d]),t([s,d])],translatey:["T",t([d,s,d]),t([d,s])],translatez:["L",t([d,d,s])],translate3d:["TTL",o]};_.addPropertiesHandler(r,i,["transform"])}(d,f),function(e){function t(e){var t=+e;if(!(isNaN(t)||100>t||900<t||0!=t%100))return t}function n(t){return t=100*Math.round(t/100),t=e.clamp(100,900,t),400===t?"normal":700===t?"bold":t+""}e.addPropertiesHandler(t,function(e,t){return[e,t,n]},["font-weight"])}(d),function(t){function n(e){var t={};for(var n in e)t[n]=-e[n];return t}function o(e){return t.consumeToken(/^(left|center|right|top|bottom)\b/i,e)||t.consumeLengthOrPercent(e)}function r(n,i){var r=t.consumeRepeated(o,/^/,i);if(r&&""==r[1]){var e=r[0];if(e[0]=e[0]||"center",e[1]=e[1]||"center",3==n&&(e[2]=e[2]||{px:0}),e.length==n){if(/top|bottom/.test(e[0])||/left|right/.test(e[1])){var a=e[0];e[0]=e[1],e[1]=a}if(/left|right|center|Object/.test(e[0])&&/top|bottom|center|Object/.test(e[1]))return e.map(function(e){return"object"==typeof e?e:s[e]})}}}function a(r){var a=t.consumeRepeated(o,/^/,r);if(a){for(var e=a[0],d=[{"%":50},{"%":50}],p=0,c=!1,u=0,m;u<e.length;u++)m=e[u],"string"==typeof m?(c=/bottom|right/.test(m),p={left:0,right:0,center:p,top:1,bottom:1}[m],d[p]=s[m],"center"==m&&p++):(c&&(m=n(m),m["%"]=(m["%"]||0)+100),d[p]=m,p++,c=!1);return[d,a[1]]}}var s={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},e=t.mergeNestedRepeated.bind(null,t.mergeDimensions," ");t.addPropertiesHandler(r.bind(null,3),e,["transform-origin"]),t.addPropertiesHandler(r.bind(null,2),e,["perspective-origin"]),t.consumePosition=a,t.mergeOffsetList=e;var l=t.mergeNestedRepeated.bind(null,e,", ");t.addPropertiesHandler(function(e){var n=t.consumeRepeated(a,/^,/,e);if(n&&""==n[1])return n[0]},l,["background-position","object-position"])}(d),function(t){function n(e){var n=t.consumeToken(/^circle/,e);if(n&&n[0])return["circle"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),i,t.ignore(t.consumeToken.bind(void 0,/^at/)),t.consumePosition,t.ignore(t.consumeToken.bind(void 0,/^\)/))],n[1]));var o=t.consumeToken(/^ellipse/,e);if(o&&o[0])return["ellipse"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),r,t.ignore(t.consumeToken.bind(void 0,/^at/)),t.consumePosition,t.ignore(t.consumeToken.bind(void 0,/^\)/))],o[1]));var a=t.consumeToken(/^polygon/,e);return a&&a[0]?["polygon"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),t.optional(t.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),t.consumeSizePairList,t.ignore(t.consumeToken.bind(void 0,/^\)/))],a[1])):void 0}function o(e,n){if(e[0]===n[0])return"circle"==e[0]?t.mergeList(e.slice(1),n.slice(1),["circle(",t.mergeDimensions," at ",t.mergeOffsetList,")"]):"ellipse"==e[0]?t.mergeList(e.slice(1),n.slice(1),["ellipse(",t.mergeNonNegativeSizePair," at ",t.mergeOffsetList,")"]):"polygon"==e[0]&&e[1]==n[1]?t.mergeList(e.slice(2),n.slice(2),["polygon(",e[1],a,")"]):void 0}var i=t.consumeParenthesised.bind(null,t.parseLengthOrPercent),r=t.consumeRepeated.bind(void 0,i,/^/),e=t.mergeNestedRepeated.bind(void 0,t.mergeDimensions," "),a=t.mergeNestedRepeated.bind(void 0,e,",");t.addPropertiesHandler(n,o,["shape-outside"])}(d),function(e){function t(e,t){t.concat([e]).forEach(function(t){t in document.documentElement.style&&(n[e]=t)})}var n={};t("transform",["webkitTransform","msTransform"]),t("transformOrigin",["webkitTransformOrigin"]),t("perspective",["webkitPerspective"]),t("perspectiveOrigin",["webkitPerspectiveOrigin"]),e.propertyName=function(e){return n[e]||e}}(d,f)}(),!function(){if(void 0===document.createElement("div").animate([]).oncancel){var e;if(window.performance&&performance.now)var e=function(){return performance.now()};else var e=function(){return Date.now()};var t=function(e,t,n){this.target=e,this.currentTime=t,this.timelineTime=n,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=e,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},n=window.Element.prototype.animate;window.Element.prototype.animate=function(o,r){var a=n.call(this,o,r);a._cancelHandlers=[],a.oncancel=null;var s=a.cancel;a.cancel=function(){s.call(this);var n=new t(this,null,e()),o=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){o.forEach(function(e){e.call(n.target,n)})},0)};var l=a.addEventListener;a.addEventListener=function(e,t){"function"==typeof t&&"cancel"==e?this._cancelHandlers.push(t):l.call(this,e,t)};var d=a.removeEventListener;return a.removeEventListener=function(e,t){if("cancel"==e){var n=this._cancelHandlers.indexOf(t);0<=n&&this._cancelHandlers.splice(n,1)}else d.call(this,e,t)},a}}}(),function(t){var n=document.documentElement,o=null,i=!1;try{var r=getComputedStyle(n).getPropertyValue("opacity"),e="0"==r?"1":"0";o=n.animate({opacity:[e,e]},{duration:1}),o.currentTime=0,i=getComputedStyle(n).getPropertyValue("opacity")==e}catch(e){}finally{o&&o.cancel()}if(!i){var a=window.Element.prototype.animate;window.Element.prototype.animate=function(e,n){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&e[Symbol.iterator]&&(e=Array.from(e)),Array.isArray(e)||null===e||(e=t.convertToArrayForm(e)),a.call(this,e,n)}}}(c),b.true=a}({},function(){return this}()),define("web-animations",function(){}),"use strict",define("src/util/util",["bluebird","lodash","./debug","./color","../data/structures","web-animations"],function(Promise,_,Debug,Color,structures){"use strict";function noop(){}function makejPathFunction(jpath){if(!jpath)return noop;for(var jpaths2=jpath.replace(regJpath,""),splitted=jpaths2.split("."),l=splitted.length-1,ifArray=[],ifElement="el",i=0,ifString;i<l;i++)ifElement+=`["${splitted[i].replace(regQuote,"\\\"")}"]`,ifArray.push(`${ifElement} != undefined`);ifString=ifArray.join(" && "),ifString||(ifString="true");var functionEvaled=noop;return eval(`functionEvaled = function( el ) { if (el && ${ifString}) return ${ifElement}['${splitted[l].replace(regQuote,"\\\"")}']; };`),functionEvaled}function getCSS(e,t){if(e=e.toLowerCase(),!!document.styleSheets){for(var n=0,o,r,a;n<document.styleSheets.length;n++){o=document.styleSheets[n],r=0,a=!1;do{if(a=o.cssRules?o.cssRules[r]:o.rules?o.rules[r]:null,!a||!a.selectorText){r++;continue}if(a.selectorText.toLowerCase()==e)return t?(o.cssRules?o.deleteRule(r):o.removeRule(r),!0):a;r++}while(a)}return!1}}var months=["January","February","March","April","Mai","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],regQuote=/"/g,regJpath=/^element\./;const units=["B","KiB","MiB","GiB","TiB"];var exports={getCurrentLang:function(){return"en"},maskIframes:function(){$("iframe").each(function(){var e=$(this),t=e.position(),n=e.width(),o=e.height();e.before($("<div />").css({position:"absolute",width:n,height:o,top:t.top,left:t.left,background:"white",opacity:.5}).addClass("iframemask"))})},unmaskIframes:function(){$(".iframemask").remove()},formatSize:function(e){let t=0;for(;1024<e;)e/=1024,t++;return`${Math.round(100*e)/100} ${units[t]}`},pad:function(e){return 10>e?`0${e}`:e},getMonth:function(e){return months[e]},getDay:function(e){return days[e]},loadCss:function(e){var t=this;return new Promise(function(n,o){if(e=require.toUrl(e),t.loadedCss=t.loadedCss||{},t.loadedCss[e])return t.loadedCss[e].disabled=!1,n(t.loadedCss[e]);var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=function(){t.loadedCss[e]=i,n(i)};try{document.getElementsByTagName("head")[0].appendChild(i)}catch(t){o(t)}})},unloadCss:function(e){var t=this;e=require.toUrl(e),t.loadedCss[e]&&(t.loadedCss[e].disabled=!0)},getCssVendorPrefix:function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return`-${t}-`},makejPathFunction:makejPathFunction,addjPathFunction:function(e,t){e[t]=makejPathFunction(t)},jpathToArray:function(e){if(e){var t=e.split(".");return t.shift(),t}return[]},jpathToString:function(e){return e=e||[],e=e.slice(),e.unshift("element"),e.join(".")},getWebsafeFonts:function(){return[{title:"Arial",key:"Arial"},{title:"Arial Black",key:"Arial Black"},{title:"Comic Sans MS",key:"Comic Sans MS"},{title:"Courier",key:"Courier"},{title:"Courier new",key:"Courier New"},{title:"Georgia",key:"Georgia"},{title:"Helvetica",key:"Helvetica"},{title:"Impact",key:"Impact"},{title:"Palatino",key:"Palatino"},{title:"Times new roman",key:"Times New Roman"},{title:"Trebuchet MS",key:"Trebuchet MS"},{title:"Verdana",key:"Verdana"}]},getCSS:getCSS,removeCSS:function(e){return getCSS(e,!0)},addCSS:function(e){if(document.styleSheets){var t;return(t=getCSS(e))?t:(document.styleSheets[0].addRule?document.styleSheets[0].addRule(e,null,0):document.styleSheets[0].insertRule(`${e} { }`,0),getCSS(e))}},formatMoney:function(e,t,o,r){t=isNaN(t=Math.abs(t))?2:t,r=null==r?".":r,o=null==o?",":o;var a=0>e?"-":"",s=`${parseInt(e=Math.abs(+e||0).toFixed(t),10)}`,i=s.length;return i=3<i?i%3:0,a+(i?s.substr(0,i)+o:"")+s.substr(i).replace(/(\d{3})(?=\d)/g,`$1${o}`)+(t?r+Math.abs(e-s).toFixed(t).slice(2):"")},safeAccess:function(){for(var e=arguments[0],t=1;t<arguments.length;t++)if(!(e=e[arguments[t]]))return!1;return e},noop:noop};let uniqueid=0;exports.getNextUniqueId=function(e){return e?`id_${Date.now()}${Math.round(1e5*Math.random())}`:`uniqid_${++uniqueid}`},exports.deprecate=function(e,t){var n=!1;return function(){return n||(Debug.warn(`Method ${e.name} is deprecated. ${t||""}`),n=!0),e.apply(this,arguments)}};const warnOnceMap=new Set,warnOnceCheck=function(e){return!!warnOnceMap.has(e)||(warnOnceMap.add(e),!1)};exports.warnOnce=function(e,t){warnOnceCheck(e)||Debug.warn(t)},exports.inherits=function(e,t,n){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&_.assign(e.prototype,n)},exports.getLoadingAnimation=function(e,t){void 0===e&&(e=32),void 0===t&&(t="black");var n=$(`
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="black">
               <style>
                 @keyframes ci-loading-rectangles {
                   0% {transform: none}
                   25% { transform: matrix(1,0,0,2,0,-16) }
                   50% { transform: none}
                 }
                 .ci-loading-rectanim {
                   animation: ci-loading-rectangles 1s infinite
                 }
                 #ci-loading-rectanim-2 {
                   animation-delay: 0.16s;
                 }
                 #ci-loading-rectanim-3 {
                   animation-delay: 0.32s;
                 }
                 #ci-loading-rectanim-4 {
                   animation-delay: 0.48s;
                 }
                 #ci-loading-rectanim-5 {
                   animation-delay: 0.64s;
                 }
               </style>
               <rect class="ci-loading-rectanim" id="ci-loading-rectanim-1" x="0" y="12" width="4" height="8"></rect>
               <rect class="ci-loading-rectanim" id="ci-loading-rectanim-2" x="7" y="12" width="4" height="8"></rect>
               <rect class="ci-loading-rectanim" id="ci-loading-rectanim-3" x="14" y="12" width="4" height="8"></rect>
               <rect class="ci-loading-rectanim" id="ci-loading-rectanim-4" x="21" y="12" width="4" height="8"></rect>
               <rect class="ci-loading-rectanim" id="ci-loading-rectanim-5" x="28" y="12" width="4" height="8"></rect>
            </svg>
        `).attr({width:e,height:e,fill:t});return n},exports.moduleIdFromUrl=function(e){var t=/([^/]+)(\/)?$/,n=e.match(t);return n[1]},exports.requireNeedsExtension=function(e){return /^https?:\/\/|^\.|^\/|^\/\//.test(e)};var utilReqPaths={};exports.rewriteRequirePath=function(e){var t=require.toUrl(e);if(!this.requireNeedsExtension(e))return e;var n=exports.getNextUniqueId(!0);if(utilReqPaths[t])return utilReqPaths[e];utilReqPaths[t]=n;var o={};return o[n]=t,require.config({paths:o}),n};var objToString=Object.prototype.toString;exports.objectToString=function(e){return objToString.call(e).slice(8,-1)},exports.isArray=function(e){return"Array"===exports.objectToString(e).slice("-5")},exports.getDistinctColors=exports.deprecate(Color.getDistinctColors,"use Color.getDistinctColors"),exports.getNextColorRGB=exports.deprecate(Color.getNextColorRGB,"use Color.getNextColorRGB"),exports.hsl2rgb=exports.deprecate(Color.hsl2rgb,"use Color.hsl2rgb"),exports.hueToRgb=exports.deprecate(Color.hue2rgb,"use Color.hue2rgb"),exports.hexToRgb=exports.deprecate(Color.hex2rgb,"use Color.hex2rgb"),exports.rgbToHex=exports.deprecate(Color.rgb2hex,"use Color.rgb2hex"),exports.getColor=exports.deprecate(Color.getColor,"use Color.getColor"),exports.evalOptions=function(options){var result;if("string"!=typeof options)return options;if(options){options.match(/^\s*\{/)||(options=`{${options}}`);try{return eval(`result = ${options}`),result}catch(t){return void Debug.warn("could not eval options")}}};const isEmail=/^[-a-z0-9~!$%^&*_=+}{'?]+(\.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;return exports.isEmail=function(e){return isEmail.test(e)},exports.b64toBlob=function(e,t,n){t=t||"",n=n||512;for(var o=atob(e),r=[],a=0;a<o.length;a+=n){for(var s=o.slice(a,a+n),l=Array(s.length),d=0;d<s.length;d++)l[d]=s.charCodeAt(d);var p=new Uint8Array(l);r.push(p)}var c=new Blob(r,{type:t});return c},exports.toB64=function(e){return btoa(unescape(encodeURIComponent(e+"")))},exports.getStructuresComboOptions=function(){for(var e=[{key:"",title:"none"}],t=structures._getList(),n=0;n<t.length;n++)e.push({key:t[n],title:t[n]});return e},exports.hexToBase64=function(e){return btoa(String.fromCharCode.apply(null,e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))},exports.base64ToHex=function(e){for(var t=0,n=atob(e.replace(/[ \r\n]+$/,"")),o=[],r;t<n.length;++t)r=n.charCodeAt(t).toString(16),1===r.length&&(r=`0${r}`),o[o.length]=r;return o.join("")},exports.contentTypeToType=function(e){return"image/gif"===e?"gif":"image/tif"===e||"image/tiff"===e?"tiff":"image/jpg"===e||"image/jpeg"===e?"jpg":"image/png"===e?"png":"image/svg"===e?"svg":"chemical/x-jcamp-dx"===e?"jcamp":"chemical/x-mdl-sdfile"===e?"sdf":"chemical/x-mdl-molfile"===e?"mol2d":"text/html"===e?"html":"text/plain"===e?"string":null},exports.hashCode=function(e){var t=0,n=e.length,o,r;if(0===n)return t;for(o=0;o<n;o++)r=e.charCodeAt(o),t=(t<<5)-t+r,t|=0;return t},exports.stringsToAutocomplete=function(e){return e.map(e=>({title:e,label:e}))},exports.require=function(e){let t=!1;return"string"==typeof e&&(e=[e],t=!0),new Promise((n,o)=>{require(e,function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];t?n(o[0]):n(o)},o)})},exports}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("superagent",[],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.superagent=e()}}(function(){return function(){function s(l,e,n){function t(d,i){if(!e[d]){if(!l[d]){var r="function"==typeof require&&require;if(!i&&r)return r(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[d]={exports:{}};l[d][0].call(a.exports,function(e){var o=l[d][1][e];return t(o||e)},a,a.exports,s,l,e,n)}return e[d].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)t(n[r]);return t}return s}()({1:[function(e,t){function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}"undefined"!=typeof t&&(t.exports=n);n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0,r;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var o=0,r=n.length;o<r;++o)n[o].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],2:[function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},t.exports=n},{}],3:[function(e,t,n){function o(){}function i(e){if(!h(e))return e;var t=[];for(var n in e)r(t,n,e[n]);return t.join("&")}function r(e,t,n){if(!(null!=n))null===n&&e.push(encodeURIComponent(t));else if(Array.isArray(n))n.forEach(function(n){r(e,t,n)});else if(h(n))for(var o in n)r(e,t+"["+o+"]",n[o]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function a(e){for(var t={},n=e.split("&"),o=0,r=n.length,a,s;o<r;++o)a=n[o],s=a.indexOf("="),-1==s?t[decodeURIComponent(a)]="":t[decodeURIComponent(a.slice(0,s))]=decodeURIComponent(a.slice(s+1));return t}function s(e){for(var t=e.split(/\r?\n/),n={},o=0,r=t.length,a,s,l,d;o<r;++o)(s=t[o],a=s.indexOf(":"),-1!==a)&&(l=s.slice(0,a).toLowerCase(),d=_(s.slice(a+1)),n[l]=d);return n}function l(e){return /[\/+]json($|[^-\w])/.test(e)}function d(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&e._responseType?this.xhr.response:"HEAD"==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function p(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t=null,o=null;try{o=new d(n)}catch(o){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=o,n.xhr?(t.rawResponse="undefined"==typeof n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",o);var i;try{n._isResponseOK(o)||(i=new Error(o.statusText||"Unsuccessful HTTP response"))}catch(e){i=e}i?(i.original=t,i.response=o,i.status=o.status,n.callback(i,o)):n.callback(null,o)})}function c(e,t,n){var o=b("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&o.send(t),n&&o.end(n),o}var u;"undefined"==typeof window?"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),u=this):u=self:u=window;var m=e("component-emitter"),g=e("./request-base"),h=e("./is-object"),f=e("./response-base"),y=e("./agent-base");var b=n=t.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=p,b.getXHR=function(){if(u.XMLHttpRequest&&(!u.location||"file:"!=u.location.protocol||!u.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var _=function(e){return e.trim()};b.serializeObject=i,b.parseString=a,b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f(d.prototype),d.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&l(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},d.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,o="cannot "+t+" "+n+" ("+this.status+")",i=new Error(o);return i.status=this.status,i.method=t,i.url=n,i},b.Response=d,m(p.prototype),g(p.prototype),p.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},p.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},p.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},p.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},p.prototype._getFormData=function(){return this._formData||(this._formData=new u.FormData),this._formData},p.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.buffer=p.prototype.ca=p.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},p.prototype.pipe=p.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},p.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},p.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||o,this._finalizeQueryString(),this._end()},p.prototype._end=function(){var t=this,n=this.xhr=b.getXHR(),o=this._formData||this._data;this._setTimeouts(),n.onreadystatechange=function(){var e=n.readyState;if(2<=e&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==e){var o;try{o=n.status}catch(t){o=0}return o?void t.emit("end"):t.timedout||t._aborted?void 0:t.crossDomainError()}};var i=function(n,o){0<o.total&&(o.percent=100*(o.loaded/o.total)),o.direction=n,t.emit("progress",o)};if(this.hasListeners("progress"))try{n.onprogress=i.bind(null,"download"),n.upload&&(n.upload.onprogress=i.bind(null,"upload"))}catch(t){}try{this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(n.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!this._isHost(o)){var r=this._header["content-type"],a=this._serializer||b.serialize[r?r.split(";")[0]:""];!a&&l(r)&&(a=b.serialize["application/json"]),a&&(o=a(o))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&n.setRequestHeader(s,this.header[s]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"==typeof o?null:o),this},b.agent=function(){return new y},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){y.prototype[e.toLowerCase()]=function(t,n){var o=new b.Request(e,t);return this._setDefaults(o),n&&o.end(n),o}}),y.prototype.del=y.prototype["delete"],b.get=function(e,t,n){var o=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&o.query(t),n&&o.end(n),o},b.head=function(e,t,n){var o=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&o.query(t),n&&o.end(n),o},b.options=function(e,t,n){var o=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&o.send(t),n&&o.end(n),o},b.del=c,b["delete"]=c,b.patch=function(e,t,n){var o=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&o.send(t),n&&o.end(n),o},b.post=function(e,t,n){var o=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&o.send(t),n&&o.end(n),o},b.put=function(e,t,n){var o=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&o.send(t),n&&o.end(n),o}},{"./agent-base":2,"./is-object":4,"./request-base":5,"./response-base":6,"component-emitter":1}],4:[function(e,t){'use strict';t.exports=function(e){return null!==e&&"object"==typeof e}},{}],5:[function(e,t){'use strict';function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var r=e("./is-object");t.exports=n,n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(e){return this._parser=e,this},n.prototype.responseType=function(e){return this._responseType=e,this},n.prototype.serialize=function(e){return this._serializer=e,this},n.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)"deadline"==t?this._timeout=e.deadline:"response"==t?this._responseTimeout=e.response:console.warn("Unknown timeout option",t);return this},n.prototype.retry=function(e,t){return(0===arguments.length||!0===e)&&(e=1),0>=e&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var a=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~a.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,o){n?t(n):e(o)})})}return this._fullfilledPromise.then(e,t)},n.prototype["catch"]=function(e){return this.then(void 0,e)},n.prototype.use=function(e){return e(this),this},n.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},n.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&300>e.status)},n.prototype.get=function(e){return this._header[e.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},n.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.prototype._auth=function(e,t,n,o){switch(n.type){case"basic":this.set("Authorization","Basic "+o(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e);}return this},n.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},n.prototype.redirects=function(e){return this._maxRedirects=e,this},n.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:!this._isHost(e)&&(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},n.prototype.sortQuery=function(e){return this._sort="undefined"==typeof e||e,this},n.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(0<=t){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(e,t,n){if(!this._aborted){var o=new Error(e+t+"ms exceeded");o.timeout=t,o.code="ECONNABORTED",o.errno=n,this.timedout=!0,this.abort(),this.callback(o)}},n.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":4}],6:[function(e,t){'use strict';function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var i=e("./utils");t.exports=n,n.prototype.get=function(e){return this.header[e.toLowerCase()]},n.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},n.prototype._setStatusProperties=function(e){var t=0|e/100;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=!(4!=t&&5!=t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},{"./utils":7}],7:[function(e,t,n){'use strict';n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),o=n.shift(),i=n.shift();return o&&i&&(e[o]=i),e},{})},n.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),o=n[0].slice(1,-1),i=n[1].split(/ *= */)[1].slice(1,-1);return e[i]=o,e},{})},n.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},{}]},{},[3])(3)}),"use strict",define("src/util/lru",["jquery","src/util/debug"],function(e,t){"use strict";function n(n,i){var r=n,a=e.Deferred();return e.when(o()).then(function(){var n=c.transaction(["lru"],"readwrite").objectStore("lru"),o=n.get(`__lrudata${r}`);o.onsuccess=function(o){var e=o.target.result,s={index:`__lrudata${r}`,data:{},store:r,_count:0,_limit:i};e&&(s.data=e.data,s._count=e._count,!i&&(s._limit=e._limit));var l=n.put(s);l.onsuccess=function(n){t.info("success storing store",n),a.resolve()},l.onerror=function(n){t.error(`error storing store ${r}`,n),a.reject()}}},function(){t.warn("IDB opening failure"),a.reject()}),a}function o(){var n=e.Deferred();if(c)return n.resolve(c);if(l=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,d=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,p=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,!l)return n.reject(),n;var o=l.open(s,2);return o.onsuccess=function(t){c=t.target.result,n.resolve()},o.onerror=function(o){t.info(o),n.reject()},o.onupgradeneeded=function(t){switch(c=t.target.result,t.oldVersion){case 0:if(c.objectStoreNames.contains("lru"))return;var e=c.createObjectStore("lru",{keyPath:"index"});e.createIndex("key","key",{unique:!0}),e.createIndex("store","store",{unique:!1});case 1:e||(e=t.currentTarget.transaction.objectStore("lru")),e.deleteIndex("key");}},n}function i(n,i){var r=e.Deferred();return e.when(o()).then(function(){var o=c.transaction("lru","readwrite").objectStore("lru"),a=o.get(n+i),s=e.Deferred();a.onsuccess=function(t){t.target.result?s.resolve(t.target.result.data):s.reject()};var l=o.get(`__lrudata${n}`);l.onsuccess=function(n){var e=n.target.result;if(e&&e.data[i]){e.data[i]=Date.now();var r=o.put(e);r.onsuccess=function(){t.info("success update resource's timestamp")}}},e.when(s).then(function(e){r.resolve(e)},function(){r.reject()})},function(){t.warn("IDB opening failure"),r.reject()}),r}function r(n,r,a){var s=n,l=e.Deferred();return e.when(o()).then(function(){var n=c.transaction(["lru"],"readwrite").objectStore("lru"),o=n.put({data:{data:a,timeout:Date.now()},index:s+r,store:s});o.onsuccess=function(n){t.info("success storing data",n)},o.onerror=function(n){t.error("error storing data",n)};var i=n.get(`__lrudata${s}`);i.onsuccess=function(t){var e=t.target.result;if(e||(e={}),e.data||(e.data={}),e.data[r]||(e._count+=1),e.data[r]=Date.now(),e._count>e._limit){var o=Object.keys(e.data);o.sort(function(t,n){return e.data[t]<e.data[n]?-1:e.data[t]>e.data[n]?1:0});for(var a=0;a<e._count-e._limit;a++)delete e.data[o[a]],n.delete(s+o[a]);e._count=e._limit}n.put({index:`__lrudata${s}`,data:e.data,store:s,_count:e._count,_limit:e._limit})},l.resolve(a)},function(){t.warn("IDB opening failure"),l.reject()}),l}function a(e){c.transaction(["lru"],"readwrite").objectStore("lru").delete(e)}var s="cilru",l,d,p,c;return{create:function(e,t){n(e,t)},get:function(e,t){return i(e,t)},store:function(e,t,n){return r(e,t,n),n},empty:function(e){a(e)}}}),"use strict",define("src/util/urldata",["superagent","src/util/lru","src/util/debug"],function(e,t,n){"use strict";function o(i,r,p){let c;var u=p.storeName||l;try{c=new URL(i).host}catch(t){c=window.location.host}const m=p.withCredentials||s[c];n.debug(`DataURL: Looking for ${i} by AJAX`);var g=e.get(i).timeout(12e4).set(r||{});return m&&g.withCredentials(),g.then(function(e){if(delete a[i],200!=e.status)throw n.info(`DataURL: Failing in retrieving ${i} by AJAX.`),new Error(`Expected status !== 200, got ${e.status}`);else{var o=null==e.body?e.text:e.body;return n.info(`DataURL: Found ${i} by AJAX`),t.create(u,p.databaseLimit||d),t.store(u,i,o),o}},function(e){if(401===e.status&&!m&&void 0===s[c])return s[c]=!0,o(i,r,p);throw e})}function i(e,t,i,a,s){return n.debug(`DataURL: Looking in LRU for ${e} with timeout of ${i} seconds`),r(e,s).then(function(t){return(n.debug(`DataURL: Found ${e} in local DB. Timeout: ${t.timeout}`),void 0!==i&&Date.now()-t.timeout>1e3*i)?(n.debug("DataURL: URL is over timeout threshold. Looking by AJAX"),o(e,a,s).catch(function(){return n.debug("DataURL: Failed in retrieving URL by AJAX. Fallback to cached version"),t.data})):(n.info("DataURL: URL is under timeout threshold. Return cached version"),t.data||t)},function(){return n.debug(`DataURL: URL ${e} not found in LRU. Look for AJAX`),o(e,a,s)})}function r(e,o){return n.debug(`DataURL: Looking into LRU for ${e}`),Promise.resolve(t.get(o.storeName||l,e))}const a={},s={},l="urlData",d=500;return{get:function(e,t,s,l,d){return(d=d||{},a[e])?a[e]:("number"==typeof t?(l=s,s=t,t=!1):"object"==typeof t?(l=t,s=0,t=!1):"object"==typeof s&&(l=s,s=0),n.debug(`DataURL: getting ${e} with force set to ${t} and timeout to ${s}`),t||0>s||"undefined"==typeof s?o(e,l,d).catch(function(){return r(e,d).then(function(e){return e.data})}):i(e,t,s,l,d))},post:function(t,n,o){return o=o||"form",e.post(t).type(o).send(n).then(e=>200===e.status?null==e.body?e.text:e.body:Promise.reject(e.status))},empty:function(e){e=e||{},t.empty(e.storeName||l)}}}),"use strict",define("src/main/datas",["src/util/util","src/util/debug","src/util/urldata"],function(e,t,n){"use strict";function o(e){if(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=o.check(e[t]));return o.check(e),e}}function r(e){var t=typeof e;if("number"==t||"string"==t||"boolean"==t||null===e)return e;if("undefined"!=t&&"function"!=t){var n,a,s;if(f(e))return b(e);if(Array.isArray(e))for(s=e.length,n=Array(s),g(e)&&(n=p(n)),a=0;a<s;a++)n[a]=r(e[a]);else{var d=Object.keys(e);for(s=d.length,n=m(e)?new o:{},a=0;a<s;a++)n[d[a]]=r(e[d[a]])}return n}}function a(e){Object.defineProperty(this,"s_",{value:e+"",writable:!0})}function s(e){Object.defineProperty(this,"s_",{value:+e,writable:!0})}function d(e){Object.defineProperty(this,"s_",{value:!!e,writable:!0})}function p(e,t,n){var r=[];if(e){if(!Array.isArray(e))throw new Error("DataArray can only be constructed from arrays");for(var a=0,s=e.length;a<s;a++)r[a]=t?o.check(e[a],t,n):e[a]}return Object.setPrototypeOf(r,k),r}function c(e,t){return h(e[t])||(e[t]=o.check(e[t],!0)),e[t]}function u(e,t){for(var n in t){var i=t[n];if("object"!=typeof i)e.set(n,i,!0);else if(Array.isArray(i)){var r=e.get(n);r instanceof p?r.length=0:(r=new p,e.set(n,r,!0));for(let e=0;e<i.length;e++){var a=i[e],s=r[e];void 0===a&&void 0!==s||("object"!=typeof a||f(a)?r.set(e,a):"object"!=typeof s||f(s)?r.set(e,a):u(r.get(e),a))}}else null!==i&&(e.get(n)||e.set(n,new o,!0),u(e.get(n),i))}}function m(e){return e instanceof o&&Object.getPrototypeOf(e)===_}function g(e){return e instanceof p&&Object.getPrototypeOf(e)===k}function h(e){return m(e)||g(e)||f(e)}function f(e){return e instanceof a||e instanceof s||e instanceof d}function y(e){return e.hasOwnProperty("type")&&(e.hasOwnProperty("value")||e.hasOwnProperty("url"))}function b(e){var t;return f(e)?(t=e.getType(),e=e.get()):t=typeof e,"string"===t?new a(e):"number"===t?new s(e):"boolean"===t?new d(e):void 0}var _=o.prototype;o.check=function(e,t){var n,o;if(h(e))return e;if(Array.isArray(e)){for(n=e;n!==k;){if(o=Object.getPrototypeOf(n),null===o||o.constructor&&(o.constructor===Array||"Array"===o.constructor.name)){Object.setPrototypeOf(n,k);break}n=o}return e}if(null===e)return null;if("object"==typeof e){for(n=e;n!==_;){if(o=Object.getPrototypeOf(n),null===o||o.constructor&&(o.constructor===Object||"Object"===o.constructor.name)){Object.setPrototypeOf(n,_);break}n=o}return e}return t?b(e):e},o.resurrect=function(e){return h(e)?e.resurrect():e},o.recursiveTransform=function(e,t){e=o.check(e,t);var n,r;if(Array.isArray(e))for(n=0,r=e.length;n<r;n++)e[n]=o.check(e[n],t),o.recursiveTransform(e[n],t);else if(e instanceof Object)for(n in e)e[n]=o.check(e[n],t),o.recursiveTransform(e[n],t);return e};a.cast=function(e){return e+""};for(var v=["charAt","charCodeAt","codePointAt","concat","includes","endsWith","indexOf","lastIndexOf","localeCompare","match","normalize","repeat","replace","search","slice","split","startsWith","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],x=0,w=v.length;x<w;x++)(function(e){a.prototype[v[e]]=function(){return String.prototype[v[e]].apply(this.s_,arguments)}})(x);a.prototype.getType=function(){return"string"},a.prototype.nativeConstructor=String,s.cast=function(e){return+e},s.prototype.getType=function(){return"number"},s.prototype.nativeConstructor=Number,d.cast=function(e){return e instanceof d?e.s_:!!e},d.prototype.getType=function(){return"boolean"},d.prototype.nativeConstructor=Boolean,window.DataString=a,window.DataNumber=s,window.DataBoolean=d;var k=p.prototype=Object.create(Array.prototype);Object.defineProperty(k,"constructor",{value:p}),window.DataObject=o,window.DataArray=p;var T={value:function(e,t){this.__parent||(Object.defineProperty(this,"__parent",{value:e,writable:!1,configurable:!0,enumerable:!1}),Object.defineProperty(this,"__name",{value:t,writable:!1,configurable:!0,enumerable:!1}))}},C={value:function(e,t,n,o){if(Array.isArray(t)||(null==t?t=[]:t=[t]),n?t.unshift({target:o,jpath:[n]}):t.unshift({target:this,jpath:[]}),this._dataChange)for(var r in this._dataChange)this._dataChange[r].apply(this,t);this.type&&this.url&&this.hasOwnProperty("value")&&(delete this.url,Object.defineProperty(this,"value",{enumerable:!0})),e||!this.__parent||(t[0].jpath.unshift(this.__name),this.__parent._triggerBubble(t))}},S={value:function(t){this._dataChange||Object.defineProperty(this,"_dataChange",{value:{},enumerable:!1,writable:!0,configurable:!0});var n=e.getNextUniqueId(!0);return this._dataChange[n]=t,t.id=n,n}},E={value:function(e){return this._dataChange?void(e.id&&(e=e.id),delete this._dataChange[e]):(t.info("Could not unbind event. No listener for this object"),!1)}};o.getType=function(t){return h(t)?t.getType():e.objectToString(t).toLowerCase()};var j={set:{value:function(e,t,n){var i=o.check(t,!0),r=this.get(),a=r[e];if(!i)r[e]=i;else{var s=i.getType();r[e]=o.check(r[e],!0);var l=null!=r[e]&&r[e].getType?r[e].getType():void 0;if(l!==s)r[e]=i;else if(f(r[e])||y(r[e])){var d=r[e]._dataChange;r[e]=i,r[e].linkToParent(this,e),r[e]._dataChange=d,n||(r[e].triggerChange(),n=!0)}else i!==r[e]&&(r[e]=i)}return n||this.triggerChange(!1,[]),a&&(delete a.__parent,delete a.__name,delete a._dataChange),r[e]}},get:{value:function(e,t,n){function o(t){return"object"!=typeof t||null===t?t:"undefined"==typeof t[e]?n?(t[e]=new n,t[e]):void 0:(c(t,e),m(t[e])?t[e].fetch(!0):t[e])}if("string"==typeof e||"number"==typeof e){if(t)return this.get(!0).then(o);var i=this.get();return"object"!=typeof i||null===i?i:"undefined"==typeof i[e]?n?(i[e]=new n,i[e]):i[e]:c(i,e)}return!0===e?this.hasOwnProperty("type")&&this.hasOwnProperty("value")?Promise.resolve(c(this,"value")):this.hasOwnProperty("type")&&this.hasOwnProperty("url")?this.fetch(!0).then(function(e){return e.get()}):Promise.resolve(this):this.hasOwnProperty("value")&&this.hasOwnProperty("type")?c(this,"value"):this}},setChild:{value:function(e,n,i,r){var a=this;"string"==typeof e&&(t.warn("Using jpath strings is deprecated"),e=e.split("."),e.shift()),e=e.slice();var s=e.length;if(0===s)throw new Error("setChild cannot be called with an empty jPath");var l=e.shift();if(1===s){var d=a.set(l,n,!0);return d&&d.linkToParent?(d.linkToParent(a,l),d.triggerChange(!1,i)):a.triggerChange(!1,i,l,d),Promise.resolve()}var c=0===e.length?r:"number"==typeof e[0]?p:o,u=l,m=[e,n,i,r];return this.get(l,!0,c).then(function(e){a.set(u,e,!0),e.linkToParent(a,u),e.setChild(...m)})}},setChildSync:{value:function(e,n,i,r){var a=this;"string"==typeof e&&(t.warn("Using jpath strings is deprecated"),e=e.split("."),e.shift()),e=e.slice();var s=e.length;if(0===s)throw new Error("setChild cannot be called with an empty jPath");var l=e.shift();if(1===s){var d=a.set(l,n,!0);return void(d&&d.linkToParent?(d.linkToParent(a,l),d.triggerChange(!1,i)):a.triggerChange(!1,i))}var c=0===e.length?r:"number"==typeof e[0]?p:o,u=l,m=[e,n,i,r],g=this.get(l,!1,c);this.set(u,g,!0),g.linkToParent(a,u),g.setChildSync(...m)}},getChild:{value:async function(e){if("string"==typeof e&&(e=e.split("."),e.shift()),!e||0===e.length)return this;e=e.slice();const t=e.shift();let n=await this.get(t,!0);return n=o.check(n,!0),n&&0!==e.length?n.getChild(e):n}},getChildSync:{value:function(e,t){if("string"==typeof e&&(e=e.split("."),e.shift()),!!e){e=e.slice();var n=e.shift(),o=this.get(n);if(null!=o)return t&&o.linkToParent(this,n),0===e.length?o:o.getChildSync(e,t)}}},trace:{value:async function(e){if(e&&e.split&&(e=e.split("."),e.shift()),!e||0===e.length)return this;e=e.slice();const t=e.shift();var n=await this.get(t,!0);return"undefined"==typeof n?n:(n&&n.linkToParent&&n.linkToParent(this,t),n&&0!==e.length?n.trace(e):n)}},duplicate:{value:function(){return r(this)}},traceSync:{value:function(e){return this.getChildSync(e,!0)}},onChange:S,unbindChange:E,triggerChange:C,_triggerBubble:{value:function(e){if(this._dataChange)for(var t in this._dataChange)this._dataChange[t].apply(this,e);this.type&&this.url&&this.hasOwnProperty("value")&&(delete this.url,Object.defineProperty(this,"value",{enumerable:!0})),this.__parent&&(e[0].jpath.unshift(this.__name),this.__parent._triggerBubble(e))}},linkToParent:T,getType:{value:function(){var t=e.objectToString(this).toLowerCase();return"object"===t?Array.isArray(this)?"array":y(this)?this.type:t:t}},setValue:{value:function(e,n){this.hasOwnProperty("type")&&this.hasOwnProperty("value")?(this.value instanceof a||this.value instanceof s||this.value instanceof d?this.value.setValue(e,!0):this.value=e,!n&&this.triggerChange(!1,[])):t.warn("Cannot set value of untyped DataObject")}}};Object.defineProperties(_,j),Object.defineProperties(k,j),Object.defineProperty(_,"fetch",{value:function(e){if(!this.url||!this.type||this.hasOwnProperty("value"))return Promise.resolve(this);if(this._fetching)return this._fetching;var i;return e&&(i={Accept:"application/json"}),this._fetching=n.get(this.url,!1,this.timeout,i,{withCredentials:this.withCredentials}).then(e=>(delete this._fetching,e=o.check(e,!0),Object.defineProperty(this,"value",{enumerable:this._keep||!1,writable:!0,configurable:!0,value:e}),this),e=>{throw delete this._fetching,t.debug(`Could not fetch ${this.url} (${e})`),e}),this._fetching}}),Object.defineProperty(_,"resurrect",{value:function(){var e={},t=Object.keys(this),n=Object.getOwnPropertyNames(this).filter(e=>!e.startsWith("__")),o=t.concat(n);o=o.filter((e,t)=>o.indexOf(e)===t);for(var r of o)e[r]=h(this[r])?this[r].resurrect():this[r];return e}}),Object.defineProperty(_,"mergeWith",{value:function(e,t,n){"object"!=typeof e||Array.isArray(e)||null==e||(u(this,e),this.triggerChange(n,[t]))}}),Object.defineProperty(k,"resurrect",{value:function(){for(var e=[],t=0,n=this.length;t<n;t++)e[t]=h(this[t])?this[t].resurrect():this[t];return e}}),Object.defineProperty(k,"mergeWith",{value:function(e,n,o){return this.triggerChange(o,[n]),t.warn("mergeWith method not yet implemented for DataArray")}});const D={value:function(){return this.s_}},A={trace:{value:function(e){return Promise.resolve(this.getChildSync(e))}},onChange:S,unbindChange:E,triggerChange:C,linkToParent:T,toJSON:D,get:D,resurrect:D,getChild:{value:function(e){return Promise.resolve(this.getChildSync(e))}},getChildSync:{value:function(e){return e&&0!==e.length?void 0:this}},valueOf:D,setValue:{value:function(e,t){this.s_=this.nativeConstructor(e),t||this.triggerChange(!1,[])}},toString:{value:function(){return this.s_+""}}};return Object.defineProperties(a.prototype,A),Object.defineProperties(s.prototype,A),Object.defineProperties(d.prototype,A),o.isDataObject=m,p.isDataArray=g,{DataObject:o,DataArray:p,DataString:a,DataBoolean:d,DataNumber:s,isSpecialObject:h,isSpecialNativeObject:f,resurrect:o.resurrect,check:o.check}}),"use strict",define("src/util/cache",[],function(){"use strict";var e={},t={};return t.get=function(t){return e[t]},t.set=function(t,n){return e[t]=n},t.clear=function(){e={}},t}),"use strict",define("src/util/localdb",["jquery"],function(t){"use strict";var n,o;return{open:function(){"indexedDB"in window||(window.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB),window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;var i=t.Deferred();if(!indexedDB)return i.reject();if(n)return i.resolve();var r=indexedDB.open("ci",26);return r.onsuccess=function(t){o=!1,n=t.target.result,i.resolve()},r.onupgradeneeded=function(r){o=!1,n=r.target.result;var e=t.Deferred(),a=t.Deferred();n.objectStoreNames.contains("localview")&&n.deleteObjectStore("localview"),n.objectStoreNames.contains("localdata")&&n.deleteObjectStore("localdata");var s=t.Deferred(),l=t.Deferred(),d=n.createObjectStore("localdata",{keyPath:"readURL"}),p=n.createObjectStore("localview",{keyPath:"readURL"});d.onsuccess=function(){s.resolve()},p.onsuccess=function(){l.resolve()},t.when(s,l).then(function(){i.resolve()})},r.onerror=function(t){i.reject(t)},i},getAll:function(o,i,r){var a=t.Deferred(),s=this;o="data"==o||"localdata"==o?"localdata":"localview";var l=n.transaction([o],"readwrite"),d=l.objectStore(o),p={};if(r)var c=d.get(`${i};${r}`);else var c=d.openCursor();return c.onsuccess=function(t){r?null==t.target.result?s.create(o,i,r).pipe(function(e){a.resolve(e)}):a.resolve(t.target.result):(t.target.result&&-1<t.target.result.key.indexOf(i)&&(p[t.target.result.value.branch]=t.target.result.value),t.target.result?t.target.result.continue():a.resolve(p))},c.onerror=function(t){a.reject(t)},a},create:function(e,o,i){var r={readURL:`${o};${i}`,url:o,branch:i,list:[],head:"{}"},a=t.Deferred();e="data"==e||"localdata"==e?"localdata":"localview";var s=n.transaction(e,"readwrite"),l=s.objectStore(e),d=l.put(r);return d.onsuccess=function(){a.resolve(r)},a},storeToHead:function(o,i,r,a){var s=t.Deferred(),l=this;o="data"==o||"localdata"==o?"localdata":"localview";var d=n.transaction(o,"readwrite"),p=d.objectStore(o),c=p.get(`${i};${r}`);return c.onsuccess=function(t){if(t.target.result){var e=t.target.result;e.head=JSON.stringify(a);var n=p.put(e);n.onsuccess=function(){s.resolve(a)}}else l.create(o,i,r).done(function(){l.storeToHead(o,i,r,a).done(function(){s.resolve(a)})})},s},store:function o(i,r,a,s){var l=t.Deferred();i="data"==i||"localdata"==i?"localdata":"localview";var d=n.transaction(i,"readwrite"),o=d.objectStore(i),p=o.get(`${r};${a}`),s=JSON.stringify(s);return p.onsuccess=function(t){if(null==t.target.result)n.create(i,r,a).done(function(e){var t=n.transaction(i,"readwrite"),o=t.objectStore(i);e.head=s;var r=o.put(e);r.onsuccess=function(){l.resolve(s)}});else{var e=t.target.result;e.list.push(s);var d=o.put(e);d.onsuccess=function(){l.resolve(s)}}},l},getHead:function(e,t,n){var o=this;return this.open().pipe(function(){return o.getAll(e,t,n).pipe(function(e){return e.head})})},getList:function(e,t,o){return n.getAll(e,t,o).pipe(function(e){return e.list})}}}),"use strict",define("src/util/datatraversing",["jquery","src/data/structures","src/util/debug"],function(e,t,n){"use strict";function o(t,n){var i=r(t),s=n.shift();return s?i&&!1!==(i=i[s])?a(i).pipe(function(e){return o(e,n)}):e.Deferred().reject():e.Deferred().resolve(t)}function i(e,t,n,o,s){var d=r(e),p;if("object"!=typeof d&&0<t.length&&(d={}),1==t.length)return d[t[0]]=n;var c=t.shift();if(c)return(p=d[c])||(p={},d[c]=p),a(p).pipe(function(e){return i(e,t,n)}).done(function(){s||l(d,o)})}function r(e){return"undefined"==typeof e?void 0:"object"==typeof e&&e.url?a(e).pipe(function(e){return e.value}):e.value&&e.type?e.value:e}function a(t){var o=e.Deferred();if("undefined"==typeof t||null==t)return o.reject();var i=s(t);return t.url&&t.type?(require(["src/util/urldata"],function(e){e.get(t.url,!1,t.timeout).then(function(e){e={type:i,value:e},o.resolve(e)},function(e){n.error("Fetching error",e)})}),o):o.resolve(t)}function s(e){if(null!=e){if(e.getType)return e.getType();var o=typeof e;return"object"==o?Array.isArray(e)?"array":t[e.type]&&(e.value||e.url)?e.type:"undefined"!=typeof e.type&&e.value?void n.error(`Type ${e.type} could not be found`):"object":o}}function l(e,t){if(e.__onDataChanged)for(var n=0,o=e.__onDataChanged.length;n<o;n++)(void 0!==t&&e.__onDataChanged[n][1]!==t||void 0===t)&&e.__onDataChanged[n][0].call(e,e)}function d(e,t){if(e&&e.children){var n=e.children.find(e=>e.title===t[0]);n?1<t.length&&(t=t.splice(1,t.length-1),d(n,t)):(e.children.push({key:`${e.key}.${t[0]}`,title:t[0],children:[]}),1<t.length&&(t=t.splice(1,t.length-1),d(e.children[e.children.length-1],t)))}}return{getType:s,getValueIfNeeded:r,fetchElementIfNeeded:a,getValueFromJPath:function(t,n){if(!n)return e.Deferred().resolve(t);n.split||(n="");var i=n.split(".");return i.shift(),o(t,i)},setValueFromJPath:function(e,t,n,o,r){t.split||(t="");var a=t.split(".");return a.shift(),(!0===o||!1===o)&&(r=o,o=void 0),i(e,a,n,o,r)},addJpathToTree:function(e,t){return 0===e.length&&e.push({title:"element",key:"element",children:[]}),d(e[0],t)},getJPathsFromStructure:function(e,n,o,r){if(e){var a=[],s,l;if(e.elements)switch(r?r+=`.${n}`:r=n="element",o.push({title:n,children:a,key:r}),e.type){case"object":for(l in e.elements)this.getJPathsFromStructure(e.elements[l],`${l}`,a,r);break;case"array":for(Array.isArray(e.elements)||(e.elements=[e.elements]),s=Math.min(5,e.elements.length||0),e.nbElements&&(s=e.nbElements),l=0;l<s;l++)this.getJPathsFromStructure(e.elements[l]||e.elements[0],`${l}`,a,r);a.push({title:"length",key:`${r}.length`,children:[]});}else"string"==typeof e&&"object"==typeof t[e]?this.getJPathsFromStructure(t[e],n,o,r):(r&&null!=r?r+=`.${n}`:r=n="element",o.push({title:n,children:a,key:r}))}},getStructureFromElement(e,n,o){if(n=n||{},o=o||0,!(n.recursionLimit&&o>=n.recursionLimit)){var r={};if(e){e.getType||(e=DataObject.check(e,!0));var a=e.getType();if(e=DataObject.check(e.get()),"array"==a){r.type="array",r.elements=[];for(var s=Math.min(5,e.length),l=0;l<s;l++)r.elements[l]=this.getStructureFromElement(e.get(l,!1),n,o+1)}else if("object"==a){r.type="object",r.elements={};var d=0;for(var l in e){if(100<=d++)break;"_"!==l[0]&&(r.elements[l]=this.getStructureFromElement(e.get(l,!1),n,o+1))}}else r=a&&t[a]&&(e.value||e.url)?t[a]:a;return r}}},getJPathsFromElement:function(e,n){if(n||(n=[]),void 0!==e&&null!=e){if(e._structure)this.getJPathsFromStructure(e._structure,null,n);else if(e.type&&t[e.type]&&(e.value||e.url))this.getJPathsFromStructure(t[e.type],null,n);else{var o=this.getStructureFromElement(e,{recursionLimit:7});this.getJPathsFromStructure(o,null,n)}return n}},get:function(e){if(e){if("function"==typeof e.get)return e.get();if(e.type&&e.value)return e.value}return e},getHighlights:function(e){return e?e._highlight?e._highlight:[]:[]},getOptions:function(e){return e?e._options?e._options:{}:{}},triggerDataChange:l,listenDataChange:function(e,t,n){e.__onDataChanged||(e.__onDataChanged=[]),e.__onDataChanged.push([t,n])}}});(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()})(this,function(){'use strict';function e(){return vt.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){for(var t in e)return!1;return!0}function r(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var n=[],o;for(o=0;o<e.length;++o)n.push(t(e[o],o));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,o){return Ie(e,t,n,o,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function u(e){return null==e._pf&&(e._pf=c()),e._pf}function m(e){if(null==e._isValid){var t=u(e),n=wt.call(t.parsedDateParts,function(e){return null!=e}),o=!isNaN(e._d.getTime())&&0>t.overflow&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null==Object.isFrozen||!Object.isFrozen(e))e._isValid=o;else return o}return e._isValid}function g(e){var t=p(NaN);return null==e?u(t).userInvalidated=!0:d(u(t),e),t}function h(e){return void 0===e}function f(e,t){var n,o,r;if(h(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),h(t._i)||(e._i=t._i),h(t._f)||(e._f=t._f),h(t._l)||(e._l=t._l),h(t._strict)||(e._strict=t._strict),h(t._tzm)||(e._tzm=t._tzm),h(t._isUTC)||(e._isUTC=t._isUTC),h(t._offset)||(e._offset=t._offset),h(t._pf)||(e._pf=u(t)),h(t._locale)||(e._locale=t._locale),0<kt.length)for(n in kt)o=kt[n],r=t[o],h(r)||(e[o]=r);return e}function y(t){f(this,t),this._d=new Date(null==t._d?NaN:t._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1===Tt&&(Tt=!0,e.updateOffset(this),Tt=!1)}function b(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function _(e){return 0>e?Math.ceil(e)||0:Math.floor(e)}function v(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=_(t)),n}function x(e,t,n){var o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0,s;for(s=0;s<o;s++)(n&&e[s]!==t[s]||!n&&v(e[s])!==v(t[s]))&&a++;return a+r}function w(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,n){var o=!0;return d(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),o){for(var r=[],a=0,s;a<arguments.length;a++){if(s="","object"==typeof arguments[a]){for(var l in s+="\n["+a+"] ",arguments[0])s+=l+": "+arguments[0][l]+", ";s=s.slice(0,-2)}else s=arguments[a];r.push(s)}w(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+new Error().stack),o=!1}return n.apply(this,arguments)},n)}function T(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Ct[t]||(w(n),Ct[t]=!0)}function C(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function S(e,t){var o=d({},e),i;for(i in t)l(t,i)&&(n(e[i])&&n(t[i])?(o[i]={},d(o[i],e[i]),d(o[i],t[i])):null==t[i]?delete o[i]:o[i]=t[i]);for(i in e)l(e,i)&&!l(t,i)&&n(e[i])&&(o[i]=d({},o[i]));return o}function E(e){null!=e&&this.set(e)}function j(e,t){var n=e.toLowerCase();Dt[n]=Dt[n+"s"]=Dt[t]=e}function D(e){return"string"==typeof e?Dt[e]||Dt[e.toLowerCase()]:void 0}function A(e){var t={},n,o;for(o in e)l(e,o)&&(n=D(o),n&&(t[n]=e[o]));return t}function P(e,t){At[e]=t}function O(e){var t=[];for(var n in e)t.push({unit:n,priority:At[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function R(t,n){return function(o){return null==o?L(this,t):(N(this,t,o),e.updateOffset(this,n),this)}}function L(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function N(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function I(e,t,n){var o=""+Math.abs(e),i=t-o.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+o}function F(e,t,n,o){var i=o;"string"==typeof o&&(i=function(){return this[o]()}),e&&(Lt[e]=i),t&&(Lt[t[0]]=function(){return I(i.apply(this,arguments),t[1],t[2])}),n&&(Lt[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function M(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t=e.match(Pt),n,o;for(n=0,o=t.length;n<o;n++)t[n]=Lt[t[n]]?Lt[t[n]]:M(t[n]);return function(n){var r="",a;for(a=0;a<o;a++)r+=t[a]instanceof Function?t[a].call(n,e):t[a];return r}}function H(e,t){return e.isValid()?(t=q(t,e.localeData()),Rt[t]=Rt[t]||z(t),Rt[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var o=5;for(Ot.lastIndex=0;0<=o&&Ot.test(e);)e=e.replace(Ot,n),Ot.lastIndex=0,o-=1;return e}function U(e,t,n){Kt[e]=C(t)?t:function(e){return e&&n?n:t}}function B(e,t){return l(Kt,e)?Kt[e](t._strict,t._locale):new RegExp(W(e))}function W(e){return V(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,o,i){return t||n||o||i}))}function V(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e,t){var n=t,o;for("string"==typeof e&&(e=[e]),r(t)&&(n=function(e,n){n[t]=v(e)}),o=0;o<e.length;o++)Zt[e[o]]=n}function G(e,t){Y(e,function(e,n,o,i){o._w=o._w||{},t(e,o._w,o,i)})}function Q(e,t,n){null!=t&&l(Zt,e)&&Zt[e](t,n._a,n,e)}function X(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function J(e,t,n){var o=e.toLocaleLowerCase(),r,a,s;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;12>r;++r)s=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?(a=cn.call(this._shortMonthsParse,o),-1===a?null:a):(a=cn.call(this._longMonthsParse,o),-1===a?null:a):"MMM"===t?(a=cn.call(this._shortMonthsParse,o),-1!==a)?a:(a=cn.call(this._longMonthsParse,o),-1===a?null:a):(a=cn.call(this._longMonthsParse,o),-1!==a)?a:(a=cn.call(this._shortMonthsParse,o),-1===a?null:a)}function K(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=v(t);else if(t=e.localeData().monthsParse(t),!r(t))return e;return n=Math.min(e.date(),X(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Z(t){return null==t?L(this,"Month"):(K(this,t),e.updateOffset(this,!0),this)}function ee(){function e(e,t){return t.length-e.length}var t=[],n=[],o=[],r,a;for(r=0;12>r;r++)a=p([2e3,r]),t.push(this.monthsShort(a,"")),n.push(this.months(a,"")),o.push(this.months(a,"")),o.push(this.monthsShort(a,""));for(t.sort(e),n.sort(e),o.sort(e),r=0;12>r;r++)t[r]=V(t[r]),n[r]=V(n[r]);for(r=0;24>r;r++)o[r]=V(o[r]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function te(e){return ne(e)?366:365}function ne(e){return 0==e%4&&0!=e%100||0==e%400}function oe(e,t,n,o,i,r,a){var s=new Date(e,t,n,o,i,r,a);return 100>e&&0<=e&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function re(e,t,n){var o=7+t-n,i=(7+ie(e,0,o).getUTCDay()-t)%7;return-i+o-1}function ae(e,t,n,o,i){var r=re(e,o,i),a=1+7*(t-1)+(7+n-o)%7+r,s,l;return 0>=a?(s=e-1,l=te(s)+a):a>te(e)?(s=e+1,l=a-te(e)):(s=e,l=a),{year:s,dayOfYear:l}}function se(e,t,n){var o=re(e.year(),t,n),i=Math.floor((e.dayOfYear()-o-1)/7)+1,r,a;return 1>i?(a=e.year()-1,r=i+le(a,t,n)):i>le(e.year(),t,n)?(r=i-le(e.year(),t,n),a=e.year()+1):(a=e.year(),r=i),{week:r,year:a}}function le(e,t,n){var o=re(e,t,n),i=re(e+1,t,n);return(te(e)-o+i)/7}function de(e,t){return"string"==typeof e?isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10):e}function pe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function ce(e,t,n){var o=e.toLocaleLowerCase(),r,a,s;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;7>r;++r)s=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?(a=cn.call(this._weekdaysParse,o),-1===a?null:a):"ddd"===t?(a=cn.call(this._shortWeekdaysParse,o),-1===a?null:a):(a=cn.call(this._minWeekdaysParse,o),-1===a?null:a):"dddd"===t?(a=cn.call(this._weekdaysParse,o),-1!==a)?a:(a=cn.call(this._shortWeekdaysParse,o),-1!==a)?a:(a=cn.call(this._minWeekdaysParse,o),-1===a?null:a):"ddd"===t?(a=cn.call(this._shortWeekdaysParse,o),-1!==a)?a:(a=cn.call(this._weekdaysParse,o),-1!==a)?a:(a=cn.call(this._minWeekdaysParse,o),-1===a?null:a):(a=cn.call(this._minWeekdaysParse,o),-1!==a)?a:(a=cn.call(this._weekdaysParse,o),-1!==a)?a:(a=cn.call(this._shortWeekdaysParse,o),-1===a?null:a)}function ue(){function e(e,t){return t.length-e.length}var t=[],n=[],o=[],r=[],a,s,l,d,c;for(a=0;7>a;a++)s=p([2e3,1]).day(a),l=this.weekdaysMin(s,""),d=this.weekdaysShort(s,""),c=this.weekdays(s,""),t.push(l),n.push(d),o.push(c),r.push(l),r.push(d),r.push(c);for(t.sort(e),n.sort(e),o.sort(e),r.sort(e),a=0;7>a;a++)n[a]=V(n[a]),o[a]=V(o[a]),r[a]=V(r[a]);this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function me(){return this.hours()%12||12}function ge(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function he(e,t){return t._meridiemParse}function fe(e){return e?e.toLowerCase().replace("_","-"):e}function ye(e){for(var t=0,n,o,r,a;t<e.length;){for(a=fe(e[t]).split("-"),n=a.length,o=fe(e[t+1]),o=o?o.split("-"):null;0<n;){if(r=be(a.slice(0,n).join("-")),r)return r;if(o&&o.length>=n&&x(a,o,!0)>=n-1)break;n--}t++}return null}function be(e){var t=null;if(!wn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=An._abbr,require("./locale/"+e),_e(t)}catch(t){}return wn[e]}function _e(e,t){var n;return e&&(n=h(t)?xe(e):ve(e,t),n&&(An=n)),An._abbr}function ve(e,t){if(null!==t){var n=xn;if(t.abbr=e,null!=wn[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=wn[e]._config;else if(null!=t.parentLocale)if(null!=wn[t.parentLocale])n=wn[t.parentLocale]._config;else return kn[t.parentLocale]||(kn[t.parentLocale]=[]),kn[t.parentLocale].push({name:e,config:t}),null;return wn[e]=new E(S(n,t)),kn[e]&&kn[e].forEach(function(e){ve(e.name,e.config)}),_e(e),wn[e]}return delete wn[e],null}function xe(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return An;if(!t(e)){if(n=be(e),n)return n;e=[e]}return ye(e)}function we(e){var t=e._a,n;return t&&-2===u(e).overflow&&(n=0>t[tn]||11<t[tn]?tn:1>t[nn]||t[nn]>X(t[en],t[tn])?nn:0>t[on]||24<t[on]||24===t[on]&&(0!==t[rn]||0!==t[an]||0!==t[sn])?on:0>t[rn]||59<t[rn]?rn:0>t[an]||59<t[an]?an:0>t[sn]||999<t[sn]?sn:-1,u(e)._overflowDayOfYear&&(n<en||n>nn)&&(n=nn),u(e)._overflowWeeks&&-1===n&&(n=ln),u(e)._overflowWeekday&&-1===n&&(n=dn),u(e).overflow=n),e}function ke(e){var t=e._i,n=Tn.exec(t)||Cn.exec(t),o,r,a,s,d,p;if(n){for(u(e).iso=!0,o=0,r=En.length;o<r;o++)if(En[o][1].exec(n[1])){s=En[o][0],a=!1!==En[o][2];break}if(null==s)return void(e._isValid=!1);if(n[3]){for(o=0,r=jn.length;o<r;o++)if(jn[o][1].exec(n[3])){d=(n[2]||" ")+jn[o][0];break}if(null==d)return void(e._isValid=!1)}if(!a&&null!=d)return void(e._isValid=!1);if(n[4])if(Sn.exec(n[4]))p="Z";else return void(e._isValid=!1);e._f=s+(d||"")+(p||""),De(e)}else e._isValid=!1}function Te(t){var n=Dn.exec(t._i);return null===n?void(ke(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))):void(t._d=new Date(+n[1]))}function Ce(e,t,n){return null==e?null==t?n:t:e}function Se(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function Ee(e){var t=[],n,o,r,a;if(!e._d){for(r=Se(e),e._w&&null==e._a[nn]&&null==e._a[tn]&&je(e),e._dayOfYear&&(a=Ce(e._a[en],r[en]),e._dayOfYear>te(a)&&(u(e)._overflowDayOfYear=!0),o=ie(a,0,e._dayOfYear),e._a[tn]=o.getUTCMonth(),e._a[nn]=o.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=t[n]=r[n];for(;7>n;n++)e._a[n]=t[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[on]&&0===e._a[rn]&&0===e._a[an]&&0===e._a[sn]&&(e._nextDay=!0,e._a[on]=0),e._d=(e._useUTC?ie:oe).apply(null,t),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[on]=24)}}function je(e){var t,n,o,i,r,a,s,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)r=1,a=4,n=Ce(t.GG,e._a[en],se(Fe(),1,4).year),o=Ce(t.W,1),i=Ce(t.E,1),(1>i||7<i)&&(l=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var d=se(Fe(),r,a);n=Ce(t.gg,e._a[en],d.year),o=Ce(t.w,d.week),null==t.d?null==t.e?i=r:(i=t.e+r,(0>t.e||6<t.e)&&(l=!0)):(i=t.d,(0>i||6<i)&&(l=!0))}1>o||o>le(n,r,a)?u(e)._overflowWeeks=!0:null==l?(s=ae(n,o,i,r,a),e._a[en]=s.year,e._dayOfYear=s.dayOfYear):u(e)._overflowWeekday=!0}function De(t){if(t._f===e.ISO_8601)return void ke(t);t._a=[],u(t).empty=!0;var n=""+t._i,o=n.length,r=0,a,s,l,d,p;for(l=q(t._f,t._locale).match(Pt)||[],a=0;a<l.length;a++)d=l[a],s=(n.match(B(d,t))||[])[0],s&&(p=n.substr(0,n.indexOf(s)),0<p.length&&u(t).unusedInput.push(p),n=n.slice(n.indexOf(s)+s.length),r+=s.length),Lt[d]?(s?u(t).empty=!1:u(t).unusedTokens.push(d),Q(d,s,t)):t._strict&&!s&&u(t).unusedTokens.push(d);u(t).charsLeftOver=o-r,0<n.length&&u(t).unusedInput.push(n),12>=t._a[on]&&!0===u(t).bigHour&&0<t._a[on]&&(u(t).bigHour=void 0),u(t).parsedDateParts=t._a.slice(0),u(t).meridiem=t._meridiem,t._a[on]=Ae(t._locale,t._a[on],t._meridiem),Ee(t),we(t)}function Ae(e,t,n){var o;return null==n?t:null==e.meridiemHour?null==e.isPM?t:(o=e.isPM(n),o&&12>t&&(t+=12),o||12!==t||(t=0),t):e.meridiemHour(t,n)}function Pe(e){var t,n,o,r,a;if(0===e._f.length)return u(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)(a=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],De(t),!!m(t))&&(a+=u(t).charsLeftOver,a+=10*u(t).unusedTokens.length,u(t).score=a,(null==o||a<o)&&(o=a,n=t));d(e,n||t)}function Oe(e){if(!e._d){var t=A(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ee(e)}}function Re(e){var t=new y(we(Le(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Le(e){var n=e._i,o=e._f;return(e._locale=e._locale||xe(e._l),null===n||void 0===o&&""===n)?g({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),b(n))?new y(we(n)):(a(n)?e._d=n:t(o)?Pe(e):o?De(e):Ne(e),m(e)||(e._d=null),e)}function Ne(n){var o=n._i;void 0===o?n._d=new Date(e.now()):a(o)?n._d=new Date(o.valueOf()):"string"==typeof o?Te(n):t(o)?(n._a=s(o.slice(0),function(e){return parseInt(e,10)}),Ee(n)):"object"==typeof o?Oe(n):r(o)?n._d=new Date(o):e.createFromInputFallback(n)}function Ie(e,i,r,a,s){var l={};return(!0===r||!1===r)&&(a=r,r=void 0),(n(e)&&o(e)||t(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=r,l._i=e,l._f=i,l._strict=a,Re(l)}function Fe(e,t,n,o){return Ie(e,t,n,o,!1)}function Me(e,n){var o,r;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return Fe();for(o=n[0],r=1;r<n.length;++r)(!n[r].isValid()||n[r][e](o))&&(o=n[r]);return o}function ze(e){var t=A(e),n=t.year||0,o=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,p=t.millisecond||0;this._milliseconds=+p+1e3*d+6e4*l+60*(60*(1e3*s)),this._days=+a+7*r,this._months=+i+3*o+12*n,this._data={},this._locale=xe(),this._bubble()}function He(e){return e instanceof ze}function qe(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function Ue(e,t){F(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)})}function Be(e,t){var n=(t||"").match(e);if(null===n)return null;var o=n[n.length-1]||[],i=(o+"").match(Rn)||["-",0,0],r=+(60*i[1])+v(i[2]);return 0===r?0:"+"===i[0]?r:-r}function We(t,n){var o,i;return n._isUTC?(o=n.clone(),i=(b(t)||a(t)?t.valueOf():Fe(t).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+i),e.updateOffset(o,!1),o):Fe(t).local()}function Ve(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function $e(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ye(e,t){var n=e,o=null,i,a,s;return He(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:r(e)?(n={},t?n[t]=e:n.milliseconds=e):(o=Ln.exec(e))?(i="-"===o[1]?-1:1,n={y:0,d:v(o[nn])*i,h:v(o[on])*i,m:v(o[rn])*i,s:v(o[an])*i,ms:v(qe(1e3*o[sn]))*i}):(o=Nn.exec(e))?(i="-"===o[1]?-1:1,n={y:Ge(o[2],i),M:Ge(o[3],i),w:Ge(o[4],i),d:Ge(o[5],i),h:Ge(o[6],i),m:Ge(o[7],i),s:Ge(o[8],i)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(s=Xe(Fe(n.from),Fe(n.to)),n={},n.ms=s.milliseconds,n.M=s.months),a=new ze(n),He(e)&&l(e,"_locale")&&(a._locale=e._locale),a}function Ge(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Xe(e,t){var n;return e.isValid()&&t.isValid()?(t=We(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Je(e,t){return function(n,o){var i,r;return null===o||isNaN(+o)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=o,o=r),n="string"==typeof n?+n:n,i=Ye(n,o),Ke(this,i,e),this}}function Ke(t,n,o,i){var r=n._milliseconds,a=qe(n._days),s=qe(n._months);t.isValid()&&(i=null==i||i,r&&t._d.setTime(t._d.valueOf()+r*o),a&&N(t,"Date",L(t,"Date")+a*o),s&&K(t,L(t,"Month")+s*o),i&&e.updateOffset(t,a||s))}function Ze(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(n,"months"),i,r;return 0>t-o?(i=e.clone().add(n-1,"months"),r=(t-o)/(o-i)):(i=e.clone().add(n+1,"months"),r=(t-o)/(i-o)),-(n+r)||0}function et(e){var t;return void 0===e?this._locale._abbr:(t=xe(e),null!=t&&(this._locale=t),this)}function tt(){return this._locale}function nt(e,t){F(0,[e,e.length],0,t)}function ot(e,t,n,o,i){var r;return null==e?se(this,o,i).year:(r=le(e,o,i),t>r&&(t=r),it.call(this,e,t,n,o,i))}function it(e,t,n,o,i){var r=ae(e,t,n,o,i),a=ie(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function rt(e,t){t[sn]=v(1e3*("0."+e))}function at(e){return e}function st(e,t,n,o){var i=xe(),r=p().set(o,t);return i[n](r,e)}function lt(e,t,n){if(r(e)&&(t=e,e=void 0),e=e||"",null!=t)return st(e,t,n,"month");var o=[],a;for(a=0;12>a;a++)o[a]=st(e,a,n,"month");return o}function dt(e,t,n,o){"boolean"==typeof e?(r(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,r(t)&&(n=t,t=void 0),t=t||"");var a=xe(),s=e?a._week.dow:0;if(null!=n)return st(t,(n+s)%7,o,"day");var l=[],d;for(d=0;7>d;d++)l[d]=st(t,(d+s)%7,o,"day");return l}function pt(e,t,n,o){var i=Ye(t,n);return e._milliseconds+=o*i._milliseconds,e._days+=o*i._days,e._months+=o*i._months,e._bubble()}function ct(e){return 0>e?Math.floor(e):Math.ceil(e)}function ut(e){return 4800*e/146097}function mt(e){return 146097*e/4800}function gt(e){return function(){return this.as(e)}}function ht(e){return function(){return this._data[e]}}function ft(e,t,n,o,i){return i.relativeTime(t||1,!!n,e,o)}function yt(e,t,n){var o=Ye(e).abs(),i=lo(o.as("s")),r=lo(o.as("m")),s=lo(o.as("h")),l=lo(o.as("d")),d=lo(o.as("M")),p=lo(o.as("y")),c=i<po.s&&["s",i]||1>=r&&["m"]||r<po.m&&["mm",r]||1>=s&&["h"]||s<po.h&&["hh",s]||1>=l&&["d"]||l<po.d&&["dd",l]||1>=d&&["M"]||d<po.M&&["MM",d]||1>=p&&["y"]||["yy",p];return c[2]=t,c[3]=0<+e,c[4]=n,ft.apply(null,c)}function bt(e){return void 0===e?lo:"function"==typeof e&&(lo=e,!0)}function _t(){var e=co(this._milliseconds)/1e3,t=co(this._days),n=co(this._months),o,i,r;o=_(e/60),i=_(o/60),e%=60,o%=60,r=_(n/12),n%=12;var a=r,l=n,d=t,p=i,c=o,u=e,s=this.asSeconds();return s?(0>s?"-":"")+"P"+(a?a+"Y":"")+(l?l+"M":"")+(d?d+"D":"")+(p||c||u?"T":"")+(p?p+"H":"")+(c?c+"M":"")+(u?u+"S":""):"P0D"}var vt,xt;xt=Array.prototype.some?Array.prototype.some:function(e){for(var n=Object(this),t=n.length>>>0,o=0;o<t;o++)if(o in n&&e.call(this,n[o],o,n))return!0;return!1};var wt=xt,kt=e.momentProperties=[],Tt=!1,Ct={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var St=Object.keys?Object.keys:function(e){var t=[],n;for(n in e)l(e,n)&&t.push(n);return t};var Et=St,jt=/\d{1,2}/,Dt={},At={},Pt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ot=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rt={},Lt={},Nt=/\d/,It=/\d\d/,Ft=/\d{3}/,Mt=/\d{4}/,zt=/[+-]?\d{6}/,Ht=/\d\d?/,qt=/\d\d\d\d?/,Ut=/\d\d\d\d\d\d?/,Bt=/\d{1,3}/,Wt=/\d{1,4}/,Vt=/[+-]?\d{1,6}/,$t=/\d+/,Yt=/[+-]?\d+/,Gt=/Z|[+-]\d\d:?\d\d/gi,Qt=/Z|[+-]\d\d(?::?\d\d)?/gi,Xt=/[+-]?\d+(\.\d{1,3})?/,Jt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt={},Zt={},en=0,tn=1,nn=2,on=3,rn=4,an=5,sn=6,ln=7,dn=8,pn;pn=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var cn=pn;F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),j("month","M"),P("month",8),U("M",Ht),U("MM",Ht,It),U("MMM",function(e,t){return t.monthsShortRegex(e)}),U("MMMM",function(e,t){return t.monthsRegex(e)}),Y(["M","MM"],function(e,t){t[tn]=v(e)-1}),Y(["MMM","MMMM"],function(e,t,n,o){var i=n._locale.monthsParse(e,o,n._strict);null==i?u(n).invalidMonth=e:t[tn]=i});var un=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,mn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");F("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),j("year","y"),P("year",1),U("Y",Yt),U("YY",Ht,It),U("YYYY",Wt,Mt),U("YYYYY",Vt,zt),U("YYYYYY",Vt,zt),Y(["YYYYY","YYYYYY"],en),Y("YYYY",function(t,n){n[en]=2===t.length?e.parseTwoDigitYear(t):v(t)}),Y("YY",function(t,n){n[en]=e.parseTwoDigitYear(t)}),Y("Y",function(e,t){t[en]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return v(e)+(68<v(e)?1900:2e3)};var hn=R("FullYear",!0);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),P("week",5),P("isoWeek",5),U("w",Ht),U("ww",Ht,It),U("W",Ht),U("WW",Ht,It),G(["w","ww","W","WW"],function(e,t,n,o){t[o.substr(0,1)]=v(e)});F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),P("day",11),P("weekday",11),P("isoWeekday",11),U("d",Ht),U("e",Ht),U("E",Ht),U("dd",function(e,t){return t.weekdaysMinRegex(e)}),U("ddd",function(e,t){return t.weekdaysShortRegex(e)}),U("dddd",function(e,t){return t.weekdaysRegex(e)}),G(["dd","ddd","dddd"],function(e,t,n,o){var i=n._locale.weekdaysParse(e,o,n._strict);null==i?u(n).invalidWeekday=e:t.d=i}),G(["d","e","E"],function(e,t,n,o){t[o]=v(e)});var fn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),yn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");F("H",["HH",2],0,"hour"),F("h",["hh",2],0,me),F("k",["kk",2],0,function(){return this.hours()||24}),F("hmm",0,0,function(){return""+me.apply(this)+I(this.minutes(),2)}),F("hmmss",0,0,function(){return""+me.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),ge("a",!0),ge("A",!1),j("hour","h"),P("hour",13),U("a",he),U("A",he),U("H",Ht),U("h",Ht),U("HH",Ht,It),U("hh",Ht,It),U("hmm",qt),U("hmmss",Ut),U("Hmm",qt),U("Hmmss",Ut),Y(["H","HH"],on),Y(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Y(["h","hh"],function(e,t,n){t[on]=v(e),u(n).bigHour=!0}),Y("hmm",function(e,t,n){var o=e.length-2;t[on]=v(e.substr(0,o)),t[rn]=v(e.substr(o)),u(n).bigHour=!0}),Y("hmmss",function(e,t,n){var o=e.length-4,i=e.length-2;t[on]=v(e.substr(0,o)),t[rn]=v(e.substr(o,2)),t[an]=v(e.substr(i)),u(n).bigHour=!0}),Y("Hmm",function(e,t){var n=e.length-2;t[on]=v(e.substr(0,n)),t[rn]=v(e.substr(n))}),Y("Hmmss",function(e,t){var n=e.length-4,o=e.length-2;t[on]=v(e.substr(0,n)),t[rn]=v(e.substr(n,2)),t[an]=v(e.substr(o))});var _n=/[ap]\.?m?\.?/i,vn=R("Hours",!0),xn={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:jt,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:mn,monthsShort:gn,week:{dow:0,doy:6},weekdays:fn,weekdaysMin:bn,weekdaysShort:yn,meridiemParse:_n},wn={},kn={},Tn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],jn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dn=/^\/?Date\((\-?\d+)/i,An;e.createFromInputFallback=k("value provided is not in a recognized ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Pn=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),On=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()});Ue("Z",":"),Ue("ZZ",""),U("Z",Qt),U("ZZ",Qt),Y(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Be(Qt,e)});var Rn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ln=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Nn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ye.fn=ze.prototype;var In=Je(1,"add"),Fn=Je(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Mn=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),nt("gggg","weekYear"),nt("ggggg","weekYear"),nt("GGGG","isoWeekYear"),nt("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),P("weekYear",1),P("isoWeekYear",1),U("G",Yt),U("g",Yt),U("GG",Ht,It),U("gg",Ht,It),U("GGGG",Wt,Mt),U("gggg",Wt,Mt),U("GGGGG",Vt,zt),U("ggggg",Vt,zt),G(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,o){t[o.substr(0,2)]=v(e)}),G(["gg","GG"],function(t,n,o,i){n[i]=e.parseTwoDigitYear(t)}),F("Q",0,"Qo","quarter"),j("quarter","Q"),P("quarter",7),U("Q",Nt),Y("Q",function(e,t){t[tn]=3*(v(e)-1)}),F("D",["DD",2],"Do","date"),j("date","D"),P("date",9),U("D",Ht),U("DD",Ht,It),U("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Y(["D","DD"],nn),Y("Do",function(e,t){t[nn]=v(e.match(Ht)[0],10)});var zn=R("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),P("dayOfYear",4),U("DDD",Bt),U("DDDD",Ft),Y(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),F("m",["mm",2],0,"minute"),j("minute","m"),P("minute",14),U("m",Ht),U("mm",Ht,It),Y(["m","mm"],rn);var Hn=R("Minutes",!1);F("s",["ss",2],0,"second"),j("second","s"),P("second",15),U("s",Ht),U("ss",Ht,It),Y(["s","ss"],an);var qn=R("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),j("millisecond","ms"),P("millisecond",16),U("S",Bt,Nt),U("SS",Bt,It),U("SSS",Bt,Ft);var Un;for(Un="SSSS";9>=Un.length;Un+="S")U(Un,$t);for(Un="S";9>=Un.length;Un+="S")Y(Un,rt);var Bn=R("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var Wn=y.prototype;Wn.add=In,Wn.calendar=function(t,n){var o=t||Fe(),i=We(o,this).startOf("day"),r=e.calendarFormat(this,i)||"sameElse",a=n&&(C(n[r])?n[r].call(this,o):n[r]);return this.format(a||this.localeData().calendar(r,this,Fe(o)))},Wn.clone=function(){return new y(this)},Wn.diff=function(e,t,n){var o,i,r,a;return this.isValid()?(o=We(e,this),!o.isValid())?NaN:(i=6e4*(o.utcOffset()-this.utcOffset()),t=D(t),"year"===t||"month"===t||"quarter"===t?(a=Ze(this,o),"quarter"===t?a/=3:"year"===t&&(a/=12)):(r=this-o,a="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-i)/864e5:"week"===t?(r-i)/6048e5:r),n?a:_(a)):NaN},Wn.endOf=function(e){return(e=D(e),void 0===e||"millisecond"===e)?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},Wn.format=function(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=H(this,t);return this.localeData().postformat(n)},Wn.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Fe(e).isValid())?Ye({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Wn.fromNow=function(e){return this.from(Fe(),e)},Wn.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Fe(e).isValid())?Ye({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Wn.toNow=function(e){return this.to(Fe(),e)},Wn.get=function(e){return e=D(e),C(this[e])?this[e]():this},Wn.invalidAt=function(){return u(this).overflow},Wn.isAfter=function(e,t){var n=b(e)?e:Fe(e);return!!(this.isValid()&&n.isValid())&&(t=D(h(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Wn.isBefore=function(e,t){var n=b(e)?e:Fe(e);return!!(this.isValid()&&n.isValid())&&(t=D(h(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Wn.isBetween=function(e,t,n,o){return o=o||"()",("("===o[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===o[1]?this.isBefore(t,n):!this.isAfter(t,n))},Wn.isSame=function(e,t){var n=b(e)?e:Fe(e),o;return!!(this.isValid()&&n.isValid())&&(t=D(t||"millisecond"),"millisecond"===t?this.valueOf()===n.valueOf():(o=n.valueOf(),this.clone().startOf(t).valueOf()<=o&&o<=this.clone().endOf(t).valueOf()))},Wn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Wn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Wn.isValid=function(){return m(this)},Wn.lang=Mn,Wn.locale=et,Wn.localeData=tt,Wn.max=On,Wn.min=Pn,Wn.parsingFlags=function(){return d({},u(this))},Wn.set=function(e,t){if("object"==typeof e){e=A(e);for(var n=O(e),o=0;o<n.length;o++)this[n[o].unit](e[n[o].unit])}else if(e=D(e),C(this[e]))return this[e](t);return this},Wn.startOf=function(e){switch(e=D(e),e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},Wn.subtract=Fn,Wn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Wn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Wn.toDate=function(){return new Date(this.valueOf())},Wn.toISOString=function(){var e=this.clone().utc();return 0<e.year()&&9999>=e.year()?C(Date.prototype.toISOString)?this.toDate().toISOString():H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},Wn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+"(\"]",o=0<this.year()&&9999>=this.year()?"YYYY":"YYYYYY",i=t+"[\")]";return this.format(n+o+"-MM-DD[T]HH:mm:ss.SSS"+i)},Wn.toJSON=function(){return this.isValid()?this.toISOString():null},Wn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Wn.unix=function(){return Math.floor(this.valueOf()/1e3)},Wn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Wn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Wn.year=hn,Wn.isLeapYear=function(){return ne(this.year())},Wn.weekYear=function(e){return ot.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Wn.isoWeekYear=function(e){return ot.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Wn.quarter=Wn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Wn.month=Z,Wn.daysInMonth=function(){return X(this.year(),this.month())},Wn.week=Wn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Wn.isoWeek=Wn.isoWeeks=function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Wn.weeksInYear=function(){var e=this.localeData()._week;return le(this.year(),e.dow,e.doy)},Wn.isoWeeksInYear=function(){return le(this.year(),1,4)},Wn.date=zn,Wn.day=Wn.days=function(e){if(!this.isValid())return null==e?NaN:this;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:(e=de(e,this.localeData()),this.add(e-t,"d"))},Wn.weekday=function(e){if(!this.isValid())return null==e?NaN:this;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Wn.isoWeekday=function(e){if(!this.isValid())return null==e?NaN:this;if(null!=e){var t=pe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Wn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Wn.hour=Wn.hours=vn,Wn.minute=Wn.minutes=Hn,Wn.second=Wn.seconds=qn,Wn.millisecond=Wn.milliseconds=Bn,Wn.utcOffset=function(t,n){var o=this._offset||0,i;if(!this.isValid())return null==t?NaN:this;if(null!=t){if("string"!=typeof t)16>Math.abs(t)&&(t*=60);else if(t=Be(Qt,t),null===t)return this;return!this._isUTC&&n&&(i=Ve(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!n||this._changeInProgress?Ke(this,Ye(t-o,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Ve(this)},Wn.utc=function(e){return this.utcOffset(0,e)},Wn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ve(this),"m")),this},Wn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Be(Gt,this._i);null==e?this.utcOffset(0,!0):this.utcOffset(e)}return this},Wn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Fe(e).utcOffset():0,0==(this.utcOffset()-e)%60)},Wn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Wn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Wn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Wn.isUtc=$e,Wn.isUTC=$e,Wn.zoneAbbr=function(){return this._isUTC?"UTC":""},Wn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Wn.dates=k("dates accessor is deprecated. Use date instead.",zn),Wn.months=k("months accessor is deprecated. Use month instead",Z),Wn.years=k("years accessor is deprecated. Use year instead",hn),Wn.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null==e?-this.utcOffset():("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this)}),Wn.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),e=Le(e),e._a){var t=e._isUTC?p(e._a):Fe(e._a);this._isDSTShifted=this.isValid()&&0<x(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Vn=E.prototype;Vn.calendar=function(e,t,n){var o=this._calendar[e]||this._calendar.sameElse;return C(o)?o.call(t,n):o},Vn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},Vn.invalidDate=function(){return this._invalidDate},Vn.ordinal=function(e){return this._ordinal.replace("%d",e)},Vn.preparse=at,Vn.postformat=at,Vn.relativeTime=function(e,t,n,o){var i=this._relativeTime[n];return C(i)?i(e,t,n,o):i.replace(/%d/i,e)},Vn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)},Vn.set=function(e){var t,n;for(n in e)t=e[n],C(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Vn.months=function(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||un).test(n)?"format":"standalone"][e.month()]:this._months},Vn.monthsShort=function(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[un.test(n)?"format":"standalone"][e.month()]:this._monthsShort},Vn.monthsParse=function(e,t,n){var o,r,a;if(this._monthsParseExact)return J.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;12>o;o++){if(r=p([2e3,o]),n&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[o]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[o]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[o].test(e))return o;if(n&&"MMM"===t&&this._shortMonthsParse[o].test(e))return o;if(!n&&this._monthsParse[o].test(e))return o}},Vn.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ee.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Jt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Vn.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ee.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Jt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Vn.week=function(e){return se(e,this._week.dow,this._week.doy).week},Vn.firstDayOfYear=function(){return this._week.doy},Vn.firstDayOfWeek=function(){return this._week.dow},Vn.weekdays=function(e,n){return e?t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]:this._weekdays},Vn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},Vn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},Vn.weekdaysParse=function(e,t,n){var o,r,a;if(this._weekdaysParseExact)return ce.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;7>o;o++){if(r=p([2e3,1]).day(o),n&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[o]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[o]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[o].test(e))return o;if(n&&"ddd"===t&&this._shortWeekdaysParse[o].test(e))return o;if(n&&"dd"===t&&this._minWeekdaysParse[o].test(e))return o;if(!n&&this._weekdaysParse[o].test(e))return o}},Vn.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ue.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Jt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Vn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ue.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Vn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ue.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Vn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Vn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},_e("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===v(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th";return e+n}}),e.lang=k("moment.lang is deprecated. Use moment.locale instead.",_e),e.langData=k("moment.langData is deprecated. Use moment.localeData instead.",xe);var $n=Math.abs,Yn=gt("ms"),Gn=gt("s"),Qn=gt("m"),Xn=gt("h"),Jn=gt("d"),Kn=gt("w"),Zn=gt("M"),eo=gt("y"),to=ht("milliseconds"),no=ht("seconds"),oo=ht("minutes"),io=ht("hours"),ro=ht("days"),ao=ht("months"),so=ht("years"),lo=Math.round,po={s:45,m:45,h:22,d:26,M:11},co=Math.abs,uo=ze.prototype;return uo.abs=function(){var e=this._data;return this._milliseconds=$n(this._milliseconds),this._days=$n(this._days),this._months=$n(this._months),e.milliseconds=$n(e.milliseconds),e.seconds=$n(e.seconds),e.minutes=$n(e.minutes),e.hours=$n(e.hours),e.months=$n(e.months),e.years=$n(e.years),this},uo.add=function(e,t){return pt(this,e,t,1)},uo.subtract=function(e,t){return pt(this,e,t,-1)},uo.as=function(e){var t=this._milliseconds,n,o;if(e=D(e),"month"===e||"year"===e)return n=this._days+t/864e5,o=this._months+ut(n),"month"===e?o:o/12;switch(n=this._days+Math.round(mt(this._months)),e){case"week":return n/7+t/6048e5;case"day":return n+t/864e5;case"hour":return 24*n+t/36e5;case"minute":return 1440*n+t/6e4;case"second":return 86400*n+t/1e3;case"millisecond":return Math.floor(864e5*n)+t;default:throw new Error("Unknown unit "+e);}},uo.asMilliseconds=Yn,uo.asSeconds=Gn,uo.asMinutes=Qn,uo.asHours=Xn,uo.asDays=Jn,uo.asWeeks=Kn,uo.asMonths=Zn,uo.asYears=eo,uo.valueOf=function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*v(this._months/12)},uo._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,o=this._data,i,r,a,s,l;return 0<=e&&0<=t&&0<=n||0>=e&&0>=t&&0>=n||(e+=864e5*ct(mt(n)+t),t=0,n=0),o.milliseconds=e%1e3,i=_(e/1e3),o.seconds=i%60,r=_(i/60),o.minutes=r%60,a=_(r/60),o.hours=a%24,t+=_(a/24),l=_(ut(t)),n+=l,t-=ct(mt(l)),s=_(n/12),n%=12,o.days=t,o.months=n,o.years=s,this},uo.get=function(e){return e=D(e),this[e+"s"]()},uo.milliseconds=to,uo.seconds=no,uo.minutes=oo,uo.hours=io,uo.days=ro,uo.weeks=function(){return _(this.days()/7)},uo.months=ao,uo.years=so,uo.humanize=function(e){var t=this.localeData(),n=yt(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},uo.toISOString=_t,uo.toString=_t,uo.toJSON=_t,uo.locale=et,uo.localeData=tt,uo.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_t),uo.lang=Mn,F("X",0,0,"unix"),F("x",0,0,"valueOf"),U("x",Yt),U("X",Xt),Y("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Y("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.17.1",function(e){vt=e}(Fe),e.fn=Wn,e.min=function(){var e=[].slice.call(arguments,0);return Me("isBefore",e)},e.max=function(){var e=[].slice.call(arguments,0);return Me("isAfter",e)},e.now=function(){return Date.now?Date.now():+new Date},e.utc=p,e.unix=function(e){return Fe(1e3*e)},e.months=function(e,t){return lt(e,t,"months")},e.isDate=a,e.locale=_e,e.invalid=g,e.duration=Ye,e.isMoment=b,e.weekdays=function(e,t,n){return dt(e,t,n,"weekdays")},e.parseZone=function(){return Fe.apply(null,arguments).parseZone()},e.localeData=xe,e.isDuration=He,e.monthsShort=function(e,t){return lt(e,t,"monthsShort")},e.weekdaysMin=function(e,t,n){return dt(e,t,n,"weekdaysMin")},e.defineLocale=ve,e.updateLocale=function(e,t){if(null!=t){var n=xn,o;null!=wn[e]&&(n=wn[e]._config),t=S(n,t),o=new E(t),o.parentLocale=wn[e],wn[e]=o,_e(e)}else null!=wn[e]&&(null==wn[e].parentLocale?null!=wn[e]&&delete wn[e]:wn[e]=wn[e].parentLocale);return wn[e]},e.locales=function(){return Et(wn)},e.weekdaysShort=function(e,t,n){return dt(e,t,n,"weekdaysShort")},e.normalizeUnits=D,e.relativeTimeRounding=bt,e.relativeTimeThreshold=function(e,t){return void 0!==po[e]&&(void 0===t?po[e]:(po[e]=t,!0))},e.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"},e.prototype=Wn,e}),function(){function e(e){this._value=e}function t(e,t,n,o){var i=e.toString().split("."),r=t-(o||0),a,s,l,d;return a=2===i.length?Math.min(Math.max(i[1].length,r),t):r,l=Math.pow(10,a),d=(n(e*l)/l).toFixed(a),o>t-a&&(s=new RegExp("\\.?0{1,"+(o-(t-a))+"}$"),d=d.replace(s,"")),d}function n(e,t,n){var d;return d=0===e._value&&null!==f.zeroFormat?f.zeroFormat:null===e._value&&null!==f.nullFormat?f.nullFormat:-1<t.indexOf("$")?o(e,t,n):-1<t.indexOf("%")?i(e,t,n):-1<t.indexOf(":")?s(e,t):-1<t.indexOf("b")||-1<t.indexOf("ib")?r(e,t,n):-1<t.indexOf("o")?a(e,t,n):l(e._value,t,n),d}function o(e,t,n){var o=t.indexOf("$"),i=t.indexOf("("),r=t.indexOf("-"),a="",s,d;return-1<t.indexOf(" $")?(a=" ",t=t.replace(" $","")):-1<t.indexOf("$ ")?(a=" ",t=t.replace("$ ","")):t=t.replace("$",""),d=l(e._value,t,n,!1),1>=o?-1<d.indexOf("(")||-1<d.indexOf("-")?(d=d.split(""),s=1,(o<i||o<r)&&(s=0),d.splice(s,0,g[f.currentLanguage].currency.symbol+a),d=d.join("")):d=g[f.currentLanguage].currency.symbol+a+d:-1<d.indexOf(")")?(d=d.split(""),d.splice(-1,0,a+g[f.currentLanguage].currency.symbol),d=d.join("")):d=d+a+g[f.currentLanguage].currency.symbol,d}function i(e,t,n){var o="",i=100*e._value,r;return-1<t.indexOf(" %")?(o=" ",t=t.replace(" %","")):t=t.replace("%",""),r=l(i,t,n),-1<r.indexOf(")")?(r=r.split(""),r.splice(-1,0,o+"%"),r=r.join("")):r=r+o+"%",r}function r(e,t,n){var o=-1<t.indexOf("ib")?y.iec:y.bytes,i=e._value,r="",a,s,d,p;for(-1<t.indexOf(" b")||-1<t.indexOf(" ib")?(r=" ",t=t.replace(" ib","").replace(" b","")):t=t.replace("ib","").replace("b",""),s=0;s<=o.length;s++)if(d=Math.pow(1024,s),p=Math.pow(1024,s+1),null===i||0===i||i>=d&&i<p){r+=o[s],0<d&&(i/=d);break}return a=l(i,t,n),a+r}function a(e,t,n){var o="",i;return-1<t.indexOf(" o")?(o=" ",t=t.replace(" o","")):t=t.replace("o",""),o+=g[f.currentLanguage].ordinal(e._value),i=l(e._value,t,n),i+o}function s(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*(60*t))/60),o=Math.round(e._value-60*(60*t)-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>o?"0"+o:o)}function l(e,n,o){var i=!1,r=!1,a=!1,s="",l=!1,p=!1,c=!1,u=!1,m=!1,h="",y=!1,b,_,v,x;return null===e&&(e=0),b=Math.abs(e),-1<n.indexOf("(")?(i=!0,n=n.slice(1,-1)):-1<n.indexOf("+")&&(r=!0,n=n.replace(/\+/g,"")),-1<n.indexOf("a")&&(l=0<=n.indexOf("aK"),p=0<=n.indexOf("aM"),c=0<=n.indexOf("aB"),u=0<=n.indexOf("aT"),m=l||p||c||u,-1<n.indexOf(" a")&&(s=" "),n=n.replace(new RegExp(s+"a[KMBT]?"),""),b>=Math.pow(10,12)&&!m||u?(s+=g[f.currentLanguage].abbreviations.trillion,e/=Math.pow(10,12)):b<Math.pow(10,12)&&b>=Math.pow(10,9)&&!m||c?(s+=g[f.currentLanguage].abbreviations.billion,e/=Math.pow(10,9)):b<Math.pow(10,9)&&b>=Math.pow(10,6)&&!m||p?(s+=g[f.currentLanguage].abbreviations.million,e/=Math.pow(10,6)):(b<Math.pow(10,6)&&b>=Math.pow(10,3)&&!m||l)&&(s+=g[f.currentLanguage].abbreviations.thousand,e/=Math.pow(10,3))),-1<n.indexOf("[.]")&&(a=!0,n=n.replace("[.]",".")),_=e.toString().split(".")[0],v=n.split(".")[1],x=n.indexOf(","),v?(-1<v.indexOf("[")?(v=v.replace("]",""),v=v.split("["),h=t(e,v[0].length+v[1].length,o,v[1].length)):h=t(e,v.length,o),_=h.split(".")[0],h=-1<h.indexOf(".")?g[f.currentLanguage].delimiters.decimal+h.split(".")[1]:"",a&&0===+h.slice(1)&&(h="")):_=t(e,null,o),-1<_.indexOf("-")&&(_=_.slice(1),y=!0),-1<x&&(_=_.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g[f.currentLanguage].delimiters.thousands)),0===n.indexOf(".")&&(_=""),(i&&y?"(":"")+(!i&&y?"-":"")+(!y&&r?"+":"")+_+h+(s?s:"")+(i&&y?")":"")}function d(e,t){var n=t,o=!1,i,r,a,s,l,d;if(-1<t.indexOf(":"))d=p(t);else if(t===f.zeroFormat||t===f.nullFormat)d=0;else{for("."!==g[f.currentLanguage].delimiters.decimal&&(t=t.replace(/\./g,"").replace(g[f.currentLanguage].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+g[f.currentLanguage].abbreviations.thousand+"(?:\\)|(\\"+g[f.currentLanguage].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+g[f.currentLanguage].abbreviations.million+"(?:\\)|(\\"+g[f.currentLanguage].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+g[f.currentLanguage].abbreviations.billion+"(?:\\)|(\\"+g[f.currentLanguage].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+g[f.currentLanguage].abbreviations.trillion+"(?:\\)|(\\"+g[f.currentLanguage].currency.symbol+")?(?:\\))?)?$"),l=1;l<=y.bytes.length&&(o=!!(-1<t.indexOf(y.bytes[l])||-1<t.indexOf(y.iec[l]))&&Math.pow(1024,l),!o);l++);d=o?o:1,d*=n.match(i)?Math.pow(10,3):1,d*=n.match(r)?Math.pow(10,6):1,d*=n.match(a)?Math.pow(10,9):1,d*=n.match(s)?Math.pow(10,12):1,d*=-1<t.indexOf("%")?.01:1,d*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,d*=+t.replace(/[^0-9\.]+/g,""),d=o?Math.ceil(d):d}return e._value=d,e._value}function p(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*(60*+t[0]),n+=60*+t[1],n+=+t[2]):2===t.length&&(n+=60*+t[0],n+=+t[1]),+n}function c(e,t){g[e]=t}function u(e){var t=e.toString().split(".");return 2>t.length?1:Math.pow(10,t[1].length)}function m(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=u(e),o=u(t);return n>o?n:o},-Infinity)}var g={},h={currentLanguage:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},f={currentLanguage:h.currentLanguage,zeroFormat:h.zeroFormat,nullFormat:h.nullFormat,defaultFormat:h.defaultFormat},y={bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],iec:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},b;b=function(t){return t=b.isNumeral(t)?t.value():0===t||"undefined"==typeof t?0:null===t?null:+t?+t:b.fn.unformat(t),new e(t)},b.version="1.5.6",b.isNumeral=function(t){return t instanceof e},b.language=function(e,t){if(!e)return f.currentLanguage;if(e=e.toLowerCase(),e&&!t){if(!g[e])throw new Error("Unknown language : "+e);f.currentLanguage=e}return(t||!g[e])&&c(e,t),b},b.reset=function(){for(var e in h)f[e]=h[e]},b.languageData=function(e){if(!e)return g[f.currentLanguage];if(!g[e])throw new Error("Unknown language : "+e);return g[e]},b.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th"},currency:{symbol:"$"}}),b.zeroFormat=function(e){f.zeroFormat="string"==typeof e?e:null},b.nullFormat=function(e){f.nullFormat="string"==typeof e?e:null},b.defaultFormat=function(e){f.defaultFormat="string"==typeof e?e:"0.0"},b.validate=function(e,t){var n,o,i,r,a,s,l,d;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),e=e.trim(),!!e.match(/^\d+$/))return!0;if(""===e)return!1;try{l=b.languageData(t)}catch(t){l=b.languageData(b.language())}return(i=l.currency.symbol,a=l.abbreviations,n=l.delimiters.decimal,o="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,d=e.match(/^[^\d]+/),!(null!==d&&(e=e.substr(1),d[0]!==i)))&&(d=e.match(/[^\d]+$/),!(null!==d&&(e=e.slice(0,-1),d[0]!==a.thousand&&d[0]!==a.million&&d[0]!==a.billion&&d[0]!==a.trillion)))&&(s=new RegExp(o+"{2}"),!e.match(/[^\d.,]/g)&&(r=e.split(n),!(2<r.length)&&(2>r.length?!!r[0].match(/^\d+.*\d$/)&&!r[0].match(s):1===r[0].length?!!r[0].match(/^\d+$/)&&!r[0].match(s)&&!!r[1].match(/^\d+$/):!!r[0].match(/^\d+.*\d$/)&&!r[0].match(s)&&!!r[1].match(/^\d+$/))))},Array.prototype.reduce||(Array.prototype.reduce=function(e){'use strict';if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=Object(this),t=n.length>>>0,o=0,i;if(2===arguments.length)i=arguments[1];else{for(;o<t&&!(o in n);)o++;if(o>=t)throw new TypeError("Reduce of empty array with no initial value");i=n[o++]}for(;o<t;o++)o in n&&(i=e(i,n[o],o,n));return i}),b.fn=e.prototype={clone:function(){return b(this)},format:function(e,t){return n(this,e?e:f.defaultFormat,t===void 0?Math.round:t)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:d(this,e?e:f.defaultFormat)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=+e,this},add:function(e){var t=m.call(null,this._value,e);return this._value=[this._value,e].reduce(function(e,n){return e+t*n},0)/t,this},subtract:function(e){var t=m.call(null,this._value,e);return this._value=[e].reduce(function(e,n){return e-t*n},this._value*t)/t,this},multiply:function(e){return this._value=[this._value,e].reduce(function(e,t){var n=m(e,t);return e*n*(t*n)/(n*n)},1),this},divide:function(e){return this._value=[this._value,e].reduce(function(e,t){var n=m(e,t);return e*n/(t*n)}),this},difference:function(e){return Math.abs(b(this._value).subtract(e).value())}},"undefined"!=typeof module&&module.exports&&(module.exports=b),"undefined"==typeof ender&&(this.numeral=b),"function"==typeof define&&define.amd&&define("numeral",[],function(){return b})}.call(this),!function(t){function o(){var e=arguments[0],t=o.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=o.parse(e)),o.format.call(null,t[e],arguments)}function u(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function p(e,t){return Array(t+1).join(e)}var y={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};o.format=function(e,t){var a=1,d=e.length,c="",f=[],b=!0,_="",v,x,w,T,C,S,E;for(x=0;d>x;x++)if(c=u(e[x]),"string"===c)f[f.length]=e[x];else if("array"===c){if(T=e[x],T[2])for(v=t[a],w=0;w<T[2].length;w++){if(!v.hasOwnProperty(T[2][w]))throw new Error(o("[sprintf] property '%s' does not exist",T[2][w]));v=v[T[2][w]]}else v=T[1]?t[T[1]]:t[a++];if("function"==u(v)&&(v=v()),y.not_string.test(T[8])&&y.not_json.test(T[8])&&"number"!=u(v)&&isNaN(v))throw new TypeError(o("[sprintf] expecting number but found %s",u(v)));switch(y.number.test(T[8])&&(b=0<=v),T[8]){case"b":v=v.toString(2);break;case"c":v=String.fromCharCode(v);break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,T[6]?parseInt(T[6]):0);break;case"e":v=T[7]?v.toExponential(T[7]):v.toExponential();break;case"f":v=T[7]?parseFloat(v).toFixed(T[7]):parseFloat(v);break;case"g":v=T[7]?parseFloat(v).toPrecision(T[7]):parseFloat(v);break;case"o":v=v.toString(8);break;case"s":v=(v=v+"")&&T[7]?v.substring(0,T[7]):v;break;case"u":v>>>=0;break;case"x":v=v.toString(16);break;case"X":v=v.toString(16).toUpperCase();}y.json.test(T[8])?f[f.length]=v:(y.number.test(T[8])&&(!b||T[3])?(_=b?"+":"-",v=v.toString().replace(y.sign,"")):_="",S=T[4]?"0"===T[4]?"0":T[4].charAt(1):" ",E=T[6]-(_+v).length,C=T[6]&&0<E?p(S,E):"",f[f.length]=T[5]?_+v+C:"0"===S?_+C+v:C+_+v)}return f.join("")},o.cache={},o.parse=function(e){for(var t=e,n=[],o=[],r=0;t;){if(null!==(n=y.text.exec(t)))o[o.length]=n[0];else if(null!==(n=y.modulo.exec(t)))o[o.length]="%";else{if(null===(n=y.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){r|=1;var a=[],s=n[2],l=[];if(null===(l=y.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=y.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=y.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}n[2]=a}else r|=2;if(3==r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o[o.length]=n}t=t.substring(n[0].length)}return o};var e=function(e,t,n){return n=(t||[]).slice(0),n.splice(0,0,e),o.apply(null,n)};"undefined"==typeof exports?(t.sprintf=o,t.vsprintf=e,"function"==typeof define&&define.amd&&define("sprintf",[],function(){return{sprintf:o,vsprintf:e}})):(exports.sprintf=o,exports.vsprintf=e)}("undefined"==typeof window?this:window),"use strict",define("src/util/typerenderer/chart",["../util"],function(e){"use strict";function t(e,t){e.empty();const o=n.fromJSON(t.resurrect(),e.get(0),()=>{});return o.resize(Math.max(e.width()-15,20),Math.max(e.height()-15,20)),o.draw(),e}let n;return{init:async function(){n=await e.require("jsgraph")},toscreen:t}}),"use strict",define("src/util/typerenderer/jcamp",["../util"],function(e){"use strict";async function t(e,t,a,s){let l=await a.get();e.empty();let d=JSON.parse(JSON.stringify(r)),p=o.convert(l+"");if(p.flatten[0]&&p.flatten[0].spectra&&p.flatten[0].spectra[0]){let t=p.flatten[0].spectra[0],o=JSON.parse(JSON.stringify(s));i.merge(d,{axes:{x:{label:t.xUnits},y:{label:t.yUnits}}},o.chart),d.series[0].data=t.data;const r=n.fromJSON(d,e.get(0),()=>{});r.resize(Math.max(e.width()-15,20),Math.max(e.height()-15,20)),r.draw()}return e}let n,o,i;const r={axes:{x:{label:"X axis"},y:{label:"Y axis"}},series:[{data:{x:[1,2,3],y:[2,3,4]},style:{line:{color:"black"}}}]};return{init:async function(){n=await e.require("jsgraph"),o=await e.require("jcampconverter"),i=await e.require("lodash")},toscreen:t}}),"use strict";function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}define("src/util/typerenderer",["require","jquery","lodash","moment","numeral","sprintf","./util","./typerenderer/chart","./typerenderer/jcamp"],function(e,t,n,o,i,r,a,s,l){"use strict";async function d(e,n,o,i,r){const s=await f(_);if(r=t.extend({},v,r),r.useCanvas){if(e){let e=o;o=e.getIDCode(),i=e.getIDCoordinates()}const l=a.getNextUniqueId();let d=Math.max(100,n.height()),p=50<n.width()?n.width():200,c=t("<canvas>",{id:l}),u=c.get(0);u.height=d-5,u.width=p,n.html(c),s.StructureView.drawStructure(l,o+"",i+"",r)}else{let t=o;e||(t=s.Molecule.fromIDCode(o,i)),n.html(t.toSVG(r.width||n.width(),r.height||n.height()-5,null,r))}}async function p(e,n,o,i,r){r=r||{};const s=await f("lib/bio-pv/bio-pv.min");var l=t("<div style=\"width:100%; height:100%\" />");n.html(l);var d;"pdb"===e?d=s.io.pdb(o,{loadAllModels:!0}):"mol3d"==e&&(d=s.io.sdf(o));var p=s.Viewer(l.get(0),{width:.99*n.width(),height:Math.max(250,.99*n.height()),quality:"medium"});p.addListener("viewerReady",function(){r.mode=p[r.mode]?r.mode:"cartoon";var t=a.getNextUniqueId();"pdb"===e?(p.clear(),d.forEach(function(e){if("cartoon"===r.mode){var n=e.select({rnames:["RVP","SAH"]});p.ballsAndSticks(`ligand-${t}`,n)}p[r.mode](t,e),p.autoZoom()})):"mol3d"==e&&p.ballsAndSticks(t,d),p.fitTo(d),n.on("remove",function(){p.destroy(),n.off("remove")})})}function c(e){return e.hasOwnProperty("dateFormat")||e.hasOwnProperty("dateFromNow")||e.hasOwnProperty("dateCalendar")}function u(e,t){if(t.dateFormat)return o(e).format(t.dateFormat);return t.dateFromNow?o(e).fromNow():t.dateCalendar?o(e).calendar():void 0}function m(e,t){var n=+e;if((e===void 0||null===e||isNaN(n))&&t.hasOwnProperty("hideUndefined"))return"";return 0==n&&t.hasOwnProperty("hideZero")?"":isNaN(n)?"NaN":t.hasOwnProperty("duration")?o.duration(n).as(t.duration):t.hasOwnProperty("durationS")?o.duration(1e3*n).as(t.durationS):t.hasOwnProperty("toPrecision")?n.toPrecision(t.toPrecision):t.hasOwnProperty("toExponential")?n.toExponential(t.toExponential):t.hasOwnProperty("toFixed")?n.toFixed(t.toFixed):t.hasOwnProperty("numeral")?i(n).format(t.numeral):t.hasOwnProperty("sprintf")?r.sprintf(t.sprintf,n):c(t)?u(n,t):n}async function g(e,n,o){if(null==n)return void e.html("");let i=await n.get(!0),r;if(o&&o.forceType?(i&&i.value&&i.type&&(i=i.value),r=o.forceType.toLowerCase()):r=n.getType().toLowerCase(),!y[r])return a.warnOnce(`no-typerenderer-${r}`,`No renderer found for type ${r}`),void e.html(i+"");o=t.extend(o,n._options),o.backgroundColor&&e.css("background-color",o.backgroundColor);let s=x.get(r);return s||(s="function"!=typeof y[r].init||y[r].init(),x.set(r,s)),await s,y[r].toscreen(e,i,n,o)}async function h(e,n){if(null==e)return"";let o=e.get?await e.get(!0):e,i;switch(n&&n.forceType?(o&&o.value&&o.type&&(o=o.value),i=n.forceType.toLowerCase()):i=e.getType?e.getType().toLowerCase():typeof e,i){case"smiles":case"color":case"mf":case"boolean":return o;case"png":case"gif":case"jpg":case"jpeg":case"image":case"webp":return i;}if(!y[i])return a.warnOnce(`no-typerenderer-${i}`,`No renderer found for type ${i}`),o;n=t.extend(n,e._options);let r=x.get(i);r||(r="function"!=typeof y[i].init||y[i].init(),x.set(i,r)),await r;let s="";await y[i].toscreen({html:e=>s=e},o,e,n);return s}const f=a.require,y={};y.barcode={},y.barcode.init=async function(){await f("jsbarcode")},y.barcode.toscreen=function(e,n,o,i){var r=t("<img>");e.append(r);var a=Object.assign({},{format:"CODE128"},i);n=a.format.startsWith("CODE")?n+"":+n,r.JsBarcode(n,a)},y.boolean={},y.boolean.toscreen=function(e,t){t instanceof DataBoolean&&(t=t.get()),t?e.html("<span style=\"color: green;\">&#10004;</span>"):e.html("<span style=\"color: red;\">&#10008;</span>")},y.chart=s,y.color={},y.color.toscreen=function(e,t){e.html(`${"<div style=\"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==); width:100%; height:100%\">"+"<div style=\"background-color: "}${t}; width: 100%; height:100%; min-height: 1px; padding:0; margin:0"></div></div>`)},y.colorbar={},y.colorbar.toscreen=function(e,n){for(var o=t("<div></div>"),r="linear-gradient(to right",a=0,s=0,d=n.length;s<d;a+=n[s++][0]);var l=0,p,c;for(s=0;s<d;s++)p=l+100*(n[s][0]/a),c=n[s][1],r+=`, ${c} ${l}%, ${c} ${p}%`,l=p;r+=")",o.css({height:"100%",width:"100%",minHeight:"1px"}).css("background",r),e.html(o)};let b;y.country={},y.country.init=async function(){const e=a.loadCss("components/flag-icon-css/css/flag-icon.min.css");b=await f("countryData"),await e},y.country.toscreen=function(e,t){t=t+"";var n;2===t.length?(t=t.toUpperCase(),n=b.lookup.countries({alpha2:t})[0]):3===t.length?(t=t.toUpperCase(),n=b.lookup.countries({alpha3:t})[0]):(t=t.slice(0,1).toUpperCase()+t.slice(1,t.length),n=b.lookup.countries({name:t})[0]),n?e.html(`<span title="${n.name}" class="flag-icon flag-icon-${n.alpha2.toLowerCase()}"></span>`):e.html(t)},y.date={},y.date.toscreen=function(t,n){try{var o=new Date(n);t.html(o.toLocaleString())}catch(n){t.html("Invalid date")}},y.downloadlink={},y.downloadlink.toscreen=function(e,t,n,o){var i=o&&o.title;i=i||"Download resource",e.html(`<a download${o.filename?`=${o.filename}`:""} title="${i}" href="${t}"></a>`)},y.elecconfig={},y.elecconfig.toscreen=function(e,t){t?e.html(t.replace(/([a-z])([0-9]+)/g,"$1<sup>$2</sup>")):e.html("")},y.ghs={},y.ghs.toscreen=function(n,o){const r={};for(var a=1;9>=a;a++)r[a]=e.toUrl(`./typerenderer/svg/${a}.svg`);if(n.html(""),o){o=o.replace(/^\s+|\s+$/g,""),Array.isArray(o)||(o=o.split(/[\r\n\t,; ]+/));for(let e of o){e=(e+"").replace(/[^1-9]/g,"");var s=t("<img>");s.attr({src:r[e]}),s.css({height:"100%"}),n.append(s)}}},y.html={},y.html.toscreen=function(e,t){e.html(t+"")},y.indicator={},y.indicator.init=async()=>{y.indicator.Color=await f("src/util/color");var n=t("<div class=\"ci-tooltip\"></div>").css({display:"none",opacity:0}).appendTo("#ci-visualizer"),o=t("#modules-grid"),i;o.on("mouseenter","[data-tooltip]",function(o){i=setTimeout(function(){var e=t(o.target),i=e.offset();n.css({left:i.left,top:i.top,display:"block"}).text(e.attr("data-tooltip")),n.animate({opacity:1})},500)}),o.on("mouseleave","[data-tooltip]",function(){clearTimeout(i),n.css({opacity:0,display:"none"})})},y.indicator.toscreen=async function(e,o){if(Array.isArray(o)){var r="<table cellpadding=\"0\" cellspacing=\"0\" style=\"text-align: center; height:100%; width:100%; table-layout: fixed;\"><tr>";o=DataObject.resurrect(o),o=n.cloneDeep(o),isNaN(o[0])||(o=o.map(function(e){return{size:e}}));for(var a=o.length,s=y.indicator.Color.getDistinctColors(o.length),l=0,d=0;d<a;d++)o[d].bgcolor||(o[d].bgcolor=y.indicator.Color.getColor(s[d])),o[d].size||0===o[d].size||(o[d].size=10),l+=o[d].size;for(var d=0;d<a;d++){var p=o[d],c=t("<td></td>").css({minHeight:"1px",width:`${100*p.size/l}%`,border:"none",overflow:"hidden","max-width":`${100*p.size/l}%`,"white-space":"nowrap","text-overflow":"ellipsis"});p.bgcolor&&c.css("background-color",p.bgcolor),p.color&&c.css("color",p.color),p.text&&c.append(p.text),p.class&&c.addClass(p.class),p.icon&&c.prepend(`<i class="fa fa-${p.icon}"></i>`),p.css&&c.css(p.css),p.tooltip&&c.attr("data-tooltip",p.tooltip),r+=c.get(0).outerHTML}r+="</tr></table>",e.html(r)}},y.jcamp=l,y.jme={},y.jme.toscreen=async function(e,t,n,o){const i=await f("lib/chemistry/jme-converter"),r=i.toMolfile(t+"");return y.mol2d.toscreen(e,r,n,o)},y.jpath={},y.jpath.toscreen=function(e,t){e.html(t.join("."))},y.latex={},y.latex.init=async function(){const e=a.loadCss("node_modules/katex/dist/katex.min.css");y.latex.katex=await f("katex"),await e},y.latex.toscreen=function(e,t,n,o){e.empty(),y.latex.katex.render(t+"",e[0],o)},y.mf={},y.mf.init=async()=>{y.mf.parseToHtml=(await f("MFParser")).parseToHtml},y.mf.toscreen=async function(e,t){if(t)try{t=(t+"").replace(/([0-9])(-+)/,"$1($2)"),e.html(y.mf.parseToHtml(t+""))}catch(n){e.html(t.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}else e.html("")},y.mol2d={},y.mol2d.toscreen=async function(e,t,n,o){const i=await f(_),r=i.Molecule.fromMolfile(t+"");return 0===r.getAllAtoms()?"":(""===r.getIDCoordinates()&&r.inventCoordinates(),d(!0,e,r,!1,o))},y.molfile2d=y.mol2d,y.mol3d={},y.mol3d.toscreen=p.bind(y.pdb,"mol3d"),y.molfile3d=y.mol3d,y.number={},y.number.toscreen=function(e,t,n,o){const i=m(t,o);e.html(i)},y.object={},y.object.init=async function(){y.object.twig=await f("lib/twigjs/twig")},y.object.toscreen=function(e,t,n,o){if(o.twig){const n=y.object.twig.twig({data:o.twig}),i=n.renderAsync(JSON.parse(JSON.stringify(t)));e.html(i.html),i.render()}else o.toJSON?e.html(JSON.stringify(t)):e.html(Object.prototype.toString.call(t))},y.oclid={},y.oclid.init=async()=>{y.oclid.OCL=await f(_)},y.oclid.toscreen=async(e,t,n,o)=>{let i=t.coordinates||n.coordinates,r=t.value?t.value:t.idCode?t.idCode:t;if(r&&(r+=""),!i&&!t.value){const e=y.oclid.OCL.Molecule.fromIDCode(r,!0);i=e.getIDCoordinates(),Object.defineProperty(n,"coordinates",{configurable:!0,enumerable:!1,value:i,writable:!0})}return d(!1,e,r,i,o)},y.actelionid=y.oclid,y.openlink={},y.openlink.toscreen=function(e,t){e.html(t.replace(/^(.*)$/,"<a href=\"$1\" target=\"_blank\"><i class=\"fa fa-external-link-alt\"></i></a>"))},y.pdb={},y.pdb.toscreen=p.bind(y.pdb,"pdb"),y.picture={},y.picture.toscreen=function(e,n,o,i){var r=t("<img>");r.attr({src:n,width:i?i.width:void 0}),i.css&&r.css(i.css),i.style&&r.attr("style",i.style),e.html(r)},y.jpeg=y.picture,y.jpg=y.picture,y.gif=y.picture,y.image=y.picture,y.png=y.picture,y.webp=y.picture,y.qrcode={},y.qrcode.init=async function(){await f("components/jquery-qrcode/jquery.qrcode.min")},y.qrcode.toscreen=function(e,t,n,o){o=Object.assign({width:128,height:128,text:t+"",render:"table"},o),e.qrcode(o)},y.rxncode={},y.rxncode.init=async()=>{y.rxncode.OCL=await f(_),y.rxncode.RxnRenderer=(await f("RxnRenderer")).RxnRenderer},y.rxncode.toscreen=async function(e,t){let n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};const o=n.maxWidth,i=void 0===o?300:o,r=n.maxHeight,a=void 0===r?300:r;let s=new y.rxncode.RxnRenderer(y.rxncode.OCL,{maxWidth:i,maxHeight:a}),l=s.renderRXNCode(DataObject.resurrect(t));e.html(l)},y.reaction={},y.reaction.init=async()=>{y.reaction.OCL=await f(_),y.reaction.RxnRenderer=(await f("RxnRenderer")).RxnRenderer},y.reaction.toscreen=async function(e,t){let n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};const o=n.maxWidth,i=void 0===o?300:o,r=n.maxHeight,a=void 0===r?300:r;let s=new y.reaction.RxnRenderer(y.reaction.OCL,{maxWidth:i,maxHeight:a}),l=s.render(DataObject.resurrect(t));e.html(l)},y.regexp={},y.regexp.init=async()=>{y.regexp.Parser=await f("lib/regexper/regexper")},y.regexp.toscreen=async function(e,n){const o=t("<div>").appendTo(e),i=new y.regexp.Parser(o.get(0));i.parse(n+"").invoke("render")},y.regex=y.regexp,y.rxn={},y.rxn.init=async()=>{y.rxn.OCL=await f(_),y.rxn.RxnRenderer=(await f("RxnRenderer")).RxnRenderer},y.rxn.toscreen=async function(e,t){let n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};const o=n.maxWidth,i=void 0===o?300:o,r=n.maxHeight,a=void 0===r?300:r;let s=new y.rxn.RxnRenderer(y.rxn.OCL,{maxWidth:i,maxHeight:a}),l=s.renderRXN(t+"");e.html(l)},y.smiles={},y.smiles.init=async()=>{y.smiles.OCL=await f(_)},y.smiles.toscreen=async function(e,t,n,o){const i=y.smiles.OCL.Molecule.fromSmiles(t+"");return d(!0,e,i,!1,o)},y.sparkline={},y.sparkline.init=async function(){await f("sparkline")},y.sparkline.toscreen=function(e,t,o,i){var r={width:"discrete"===i.type?"auto":"100%",height:"100%"};i=n.defaults(i,r),e.sparkline(t,i)},y.string={},y.string.toscreen=function(e,t,n,o){if(t+="",t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.search){var i;try{i=new RegExp(o.search)}catch(t){i=o.search}t=t.replace(i,o.replace||"")}c(o)&&(t=u(t,o)),e.html(t)},y.svg={},y.svg.toscreen=function(e,n){var o=t(n+"");let i=o.attr("width"),r=o.attr("height");if(i&&r){let e=[0,0,parseInt(i),parseInt(r)];o[0].setAttribute("viewBox",e.join(" "))}o.removeAttr("id"),o.attr("width","100%"),o.attr("height","100%"),o.css("display","block"),e.html(o)},y.unit={},y.unit.init=async function(){y.unit.mathjs=await f("mathjs")},y.unit.toscreen=async function(e,t,n,o){if(!t)return;let i;if("number"==typeof t)i=m(t,o);else{const e=t.unit?t.unit+"":"";let n=y.unit.mathjs.unit(e);if(n.value=+t.SI,o.format){const e=n.toString(),t=e.split(/\s+/),r=_toArray(t),a=r[0],s=r.slice(1);i=`${m(a,o)} ${s.join(" ")}`}else{let t;o.unit?(n=n.to(o.unit),t=n.toNumber(o.unit)):t=e?n.toNumber(e):n.value,i=`${m(t,o)} ${o.hideUnit?"":n.formatUnits()}`}}e.html(i)},y.valueunits={},y.valueunits.toscreen=async function(e,t,n,o){if(!t)return;let i;"number"==typeof t?i=m(t,o):(i=m(t.value,o),t.units&&!o.hideUnits&&(i+=` ${t.units}`)),e.html(i)};const _="openchemlib/openchemlib-full",v={suppressChiralText:!0,suppressESR:!0,suppressCIPParity:!0,noStereoProblem:!0};y.gradient={},y.gradient.init=async function(){y.gradient.colorbar=await f("src/util/colorbar")},y.gradient.toscreen=function(e,t,n,o){var i=Object.assign({},{domain:[0,1],stopType:"values"},t,o);i.stops=i.stops||i.color,i.stopPositions=i.stopPositions||i.x,i.width=e.width(),i.height=e.height(),e.html(""),y.gradient.colorbar.renderSvg(e[0],i)};const x=new Map,w=new WeakMap;return{renderAsString(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return h(e,t)},render(e,n,o){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};"object"!=typeof o||Array.isArray(o)||(i=o,o=null);var r=w.has(e)?w.get(e):Promise.resolve();var a=t(e);n=DataObject.check(n,!0);var s=()=>o?n.getChild(o).then(function(e){return g(a,e,i)}):g(a,n,i);return r=r.then(s,s),w.set(e,r),r},addType(e,t){y[e.toLowerCase()]=t},getRendererComboOptions(){return Object.keys(y).sort().map(e=>({key:e,title:e}))},getList(){return Object.keys(y).sort()},hasType(e){return!!y[e.toLowerCase()]}}}),"use strict",define("forms/title",["src/util/util"],function(e){"use strict";function t(e){return e?e.getUrl():void 0}var n=function(e,t){this.labels={},this.icon,e&&this.setLabel(e),t&&this.setIcon(t)};return n.prototype={setIcon:function(e){var t=this;require(["form/icon"],function(n){e instanceof n||(e=new n(e)),t.icon})},setLabel:function(t,n){n||(n=e.getCurrentLang()),this.labels[n]=t},getIconTag:function(){return this.icon?["<img src=\"",t(this.icon),"\" alt=\"",this.getLabel(),"\" />"].join(""):void 0},getLabel:function(t){return t||(t=e.getCurrentLang()),this.labels[t]||""},duplicate:function(){var e=new e;for(var t in this.labels)e.setLabel(this.labels[t],t);return e.setIcon(this.icon),e},getIconUrl:t},n}),"use strict",define("forms/button",["require","jquery","forms/title"],function(e,t,n){"use strict";var o=0,i={};t(document).on("click",".form-button",function(e){var n=i[t(this).data("id")];n&&!n.isDisabled()&&n.doClick(e,t(this))});return class{constructor(e,t,r){this.title=new n(e),this.onclick=t,this.id=++o,this.options=r||{},this.value=!!this.options.value&&this.options.value,this.color=this.options.color,i[this.id]=this}getTitle(){return this.title}setTitle(e){return e instanceof n||(e=new n(e)),this.title=e,this.applyStyle(),this}getId(){return this.id}setOnClick(e){this.onclick=e}setColor(e){this.oldColor=this.color,this.color=e,this.applyStyle()}setColorCss(e){return this.dom.css("color",e),this}setValue(e){return this.value=e,this}setIcon(e){return this.icon=e,this}setTooltip(e){return this.tooltip=e,this.applyStyle(),this}getTooltip(){return this.tooltip}render(){var e="";return e+="<button type=\"button\" class=\"form-button",e+="\" data-id=\"",e+=this.id,e+="\" id=\"button-"+this.id+"\"><span /><span />",e+="</button>",this.dom=t(e),this.applyStyle(),this.dom}applyStyle(){this.dom&&(this.tooltip?this.dom.attr("title",this.tooltip):this.dom.attr("title"),this.color&&(this.dom.removeClass(this.oldColor),this.dom.addClass(this.color)),this.options.disabled?this.dom.addClass("disabled"):this.dom.removeClass("disabled"),this.options.hidden?this.dom.addClass("hidden"):this.dom.removeClass("hidden"),this.options.checkbox&&(this.value?this.dom.addClass("bi-active"):this.dom.removeClass("bi-active")),this.dom.children().eq(1).html(this.title.getLabel()),this.icon&&this.dom.children().eq(0).html("<img src=\""+e.toUrl("./images/"+this.icon+".png")+"\" />"))}doClick(e,t){this.value=!this.value,this.applyStyle(),this.onclick&&this.onclick(e,this.value,t)}getDom(){return this.dom?this.dom:void console.warn("The button dom has not been created yet")}disable(){this.isDisabled()||(this.options.disabled=!0,this.applyStyle())}enable(){this.isDisabled()&&(this.options.disabled=!1,this.applyStyle())}isDisabled(){return!!this.options.disabled}isHidden(){return!!this.options.hidden}hide(){this.isHidden()||(this.options.hidden=!0,this.applyStyle())}show(){this.isHidden()&&(this.options.hidden=!1,this.applyStyle())}}}),"use strict";const dataTransform={exponential10:{forward:function(e){return Math.pow(10,e)},backward:function(e){return Math.log10(e)}}},defaultOptions={keepFormValueIfDataUndefined:!0};define("src/util/Form",["jquery","lodash","src/util/debug"],function(e,t,n){"use strict";function o(t){return function(n){t.changeCb&&t.changeCb(n)}}function i(t){return function(n){n.preventDefault(),t.submitCb&&t.submitCb(n)}}function r(e,t){if("forward"!==t&&"backward"!==t)throw new TypeError("Type should be \"forward\" or \"backward\"");const o=e.getAttribute("data-transform");let i;return o&&(dataTransform[o]?i=dataTransform[o][t]:n.warn(`util/Form: invalid attribute value for data-transform: ${o} (transform not found)`)),i||a}function a(e){return DataObject.resurrect(e)}function s(e){return"checkbox"!==e&&"radio"!==e&&""}return class{constructor(t,n){this.options=Object.assign({},defaultOptions,n),this.dom=e(t),this.bind(),this.changeCb=null,this.submitCb=null}get(){if(!this.dom)return;const e=this.dom.find("input,textarea,select");let n=[],i=[];const a=e.map(function(){const e=this.name,t=this.value,n=this.type;return{name:e,value:t,type:n,transform:r(this,"forward"),dom:this}}).toArray().filter(e=>!!e.name&&("radio"===e.type?(n.push(e),!1):("select-multiple"===e.type&&(e.value=[],i.push(e)),!0))),s=t.groupBy(n,e=>e.name);for(let e in s){const t=s[e].filter(e=>e.name),n=t.find(e=>e.dom.checked);n?a.push(n):t.length&&a.push(t[0])}for(let e of i)for(const t of e.dom.options)t.selected&&e.value.push(t.value);return a.forEach(e=>{switch(e.type){case"number":case"range":e.value=""!==e.value&&void 0!==e.value?+e.value:void 0,e.value=e.transform(e.value);break;case"checkbox":e.value=e.dom.checked;break;default:e.value=e.transform(e.value);}}),a}getData(e){var t=this.get(),n;n=e&&this.data?this.data:new DataObject;for(let o=0;o<t.length;o++){const e=t[o].name.split(".").map(e=>e.match(/^\d+$/)?Number.parseInt(e,10):e);"radio"===t[o].type&&!t[o].dom.checked||n.setChildSync(e,t[o].value)}return n.resurrect()}setData(e){if(e){e=DataObject.check(e,!0);const o=new Set;var t=this.get();for(let r=0;r<t.length;r++){const i=t[r].name.split(".");var n=e.getChildSync(i);const a=this._setElement(t[r].dom,n);a&&o.add(t[r].name)}return this.data=e,Array.from(o)}}clear(){this.setData({})}_setElement(e,t){if(null==t){if(this.options.keepFormValueIfDataUndefined)return!1;t=s(e.type)}var n=r(e,"backward");switch(e.type){case"checkbox":e.checked=DataObject.resurrect(t);break;case"select-multiple":{const n=DataObject.resurrect(t);for(const t of e.options)t.selected=n.includes(t.value)}break;case"radio":var o=e.name;this.dom.find(`input[name="${o}"]`).each(function(){this.checked=!1}),this.dom.find(`input[name="${o}"][value="${n(t)}"]`).each(function(){this.checked=!0});break;case"select-one":if(n(t)==null)return;default:e.value=n(t);}return!0}onChange(e){this.changeCb=e}onSubmit(e){this.submitCb=e}unbind(){this.dom.off("input","input,textarea",o(this)),this.dom.off("submit",i(this)),this.dom.off("change","input,select",o(this))}bind(){this.dom.on("input","input,textarea",o(this)),this.dom.on("submit",i(this)),this.dom.on("change","input,select",o(this))}}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("browserified/twig/twig",[],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.Twig=e()}}(function(){var n;return function(){function s(l,e,n){function t(d,i){if(!e[d]){if(!l[d]){var r="function"==typeof require&&require;if(!i&&r)return r(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[d]={exports:{}};l[d][0].call(a.exports,function(e){var o=l[d][1][e];return t(o||e)},a,a.exports,s,l,e,n)}return e[d].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)t(n[r]);return t}return s}()({1:[function(e,o,i){!function(r,e){"object"==typeof i&&"object"==typeof o?o.exports=e():"function"==typeof n&&n.amd?n([],e):"object"==typeof i?i.Twig=e():r.Twig=e()}(window,function(){return function(i){function a(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return i[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var e={};return a.m=i,a.c=e,a.d=function(o,e,t){a.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:t})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(i,r){if(1&r&&(i=a(i)),8&r)return i;if(4&r&&"object"==typeof i&&i&&i.__esModule)return i;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:i}),2&r&&"string"!=typeof i)for(var n in i)a.d(t,n,function(e){return i[e]}.bind(null,n));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="",a(a.s=7)}([function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(n){function e(o){return n.exports="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e=function(t){return typeof t}:e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(o)}n.exports=e},function(t){t.exports=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},function(t){t.exports=function(o,e){(null==e||e>o.length)&&(e=o.length);for(var i=0,a=Array(e);i<e;i++)a[i]=o[i];return a}},function(t){"use strict";t.exports=function(){var l=/%%|%(?:(\d+)\$)?((?:[-+#0 ]|'[\s\S])*)(\d+)?(?:\.(\d*))?([\s\S])/g,_=arguments,e=0,t=_[e++],g=function(i,e,t,a){t||(t=" ");var n=i.length>=e?"":Array(1+e-i.length>>>0).join(t);return a?i+n:n+i},x=function(o,a,t,r,n){var i=r-o.length;return 0<i&&(o=t||"0"!==n?g(o,r,n,t):[o.slice(0,a.length),g("",i,"0",!0),o.slice(a.length)].join("")),o},o=function(o,i,t,r,n,s){return o=g((o>>>0).toString(i),n||0,"0",!1),x(o,"",t,r,s)},i=function(i,a,t,r,n){return null!=r&&(i=i.slice(0,r)),x(i,"",a,t,n)},n=function(t,r,n,a,s,c){var u,k,T,C,S;if("%%"===t)return"%";var E=" ",j=!1,D="",A,P;for(A=0,P=n.length;A<P;A++)switch(n.charAt(A)){case" ":case"0":E=n.charAt(A);break;case"+":D="+";break;case"-":j=!0;break;case"'":A+1<P&&(E=n.charAt(A+1),A++);}if(a=a?+a:0,!isFinite(a))throw new Error("Width must be finite");if(s=s?+s:"d"===c?0:-1<"fFeE".indexOf(c)?6:void 0,r&&0==+r)throw new Error("Argument number must be greater than zero");if(r&&+r>=_.length)throw new Error("Too few arguments");switch(S=r?_[+r]:_[e++],c){case"%":return"%";case"s":return i(S+"",j,a,s,E);case"c":return i(String.fromCharCode(+S),j,a,s,E);case"b":return o(S,2,j,a,s,E);case"o":return o(S,8,j,a,s,E);case"x":return o(S,16,j,a,s,E);case"X":return o(S,16,j,a,s,E).toUpperCase();case"u":return o(S,10,j,a,s,E);case"i":case"d":return u=+S||0,S=(k=0>(u=Math.round(u-u%1))?"-":D)+g(Math.abs(u)+"",s,"0",!1),j&&"0"===E&&(E=" "),x(S,k,j,a,E);case"e":case"E":case"f":case"F":case"g":case"G":return k=0>(u=+S)?"-":D,T=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],C=["toString","toUpperCase"]["eEfFgG".indexOf(c)%2],S=k+Math.abs(u)[T](s),x(S,k,j,a,E)[C]();default:return"";}};try{return t.replace(l,n)}catch(t){return!1}}},function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":o(t)){case"number":return isNaN(t)||!isFinite(t)?0:0>t?Math.ceil(t):Math.floor(t);case"string":return parseInt(t,10)||0;case"boolean":default:return+!!t;}}},function(n,l,e){(function(a){function d(i,e){for(var t=0,a=i.length-1,s;0<=a;a--)s=i[a],"."===s?i.splice(a,1):".."===s?(i.splice(a,1),t++):t&&(i.splice(a,1),t--);if(e)for(;t--;t)i.unshift("..");return i}function r(o,e){if(o.filter)return o.filter(e);for(var t=[],i=0;i<o.length;i++)e(o[i],i,o)&&t.push(o[i]);return t}l.resolve=function(){for(var e="",n=!1,l=arguments.length-1,p;-1<=l&&!n;l--){if(p=0<=l?arguments[l]:a.cwd(),"string"!=typeof p)throw new TypeError("Arguments to path.resolve must be strings");p&&(e=p+"/"+e,n="/"===p.charAt(0))}return(n?"/":"")+(e=d(r(e.split("/"),function(t){return!!t}),!n).join("/"))||"."},l.normalize=function(n){var o=l.isAbsolute(n),i="/"===t(n,-1);return(n=d(r(n.split("/"),function(t){return!!t}),!o).join("/"))||o||(n="."),n&&i&&(n+="/"),(o?"/":"")+n},l.isAbsolute=function(t){return"/"===t.charAt(0)},l.join=function(){var t=Array.prototype.slice.call(arguments,0);return l.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},l.relative=function(t,d){function u(n){for(var e=0;e<n.length&&""===n[e];e++);for(var o=n.length-1;0<=o&&""===n[o];o--);return e>o?[]:n.slice(e,o-e+1)}t=l.resolve(t).substr(1),d=l.resolve(d).substr(1);for(var n=u(t.split("/")),o=u(d.split("/")),i=Math.min(n.length,o.length),s=i,m=0;m<i;m++)if(n[m]!==o[m]){s=m;break}var g=[];for(m=s;m<n.length;m++)g.push("..");return(g=g.concat(o.slice(s))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(a){if("string"!=typeof a&&(a+=""),0===a.length)return".";for(var s=a.charCodeAt(0),l=47===s,r=-1,d=!0,p=a.length-1;1<=p;--p)if(!(47===(s=a.charCodeAt(p))))d=!1;else if(!d){r=p;break}return-1==r?l?"/":".":l&&1==r?"/":a.slice(0,r)},l.basename=function(n,e){var t=function(i){"string"!=typeof i&&(i+="");var a=0,s=-1,l=!0,d;for(d=i.length-1;0<=d;--d)if(!(47===i.charCodeAt(d)))-1===s&&(l=!1,s=d+1);else if(!l){a=d+1;break}return-1===s?"":i.slice(a,s)}(n);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},l.extname=function(l){"string"!=typeof l&&(l+="");for(var d=-1,p=0,c=-1,u=!0,m=0,g=l.length-1,h;0<=g;--g)if(h=l.charCodeAt(g),47!==h)-1==c&&(u=!1,c=g+1),46===h?-1==d?d=g:1!=m&&(m=1):-1!=d&&(m=-1);else if(!u){p=g+1;break}return-1==d||-1==c||0==m||1==m&&d==c-1&&d==p+1?"":l.slice(d,c)};var t=function(n,e,t){return n.substr(e,t)}}).call(this,e(34))},function(n,e,t){"use strict";n.exports=t(8)()},function(n,e,o){"use strict";n.exports=function n(){var e={VERSION:"1.14.0"};return o(9)(e),o(10)(e),o(11)(e),o(18)(e),o(19)(e),o(20)(e),o(31)(e),o(32)(e),o(35)(e),o(36)(e),o(37)(e),o(38)(e),o(39)(e),o(40)(e),o(41)(e),e.exports.factory=n,e.exports}},function(a,e,t){"use strict";function s(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),t.push.apply(t,i)}return t}function o(n){for(var e=1,o;e<arguments.length;e++)o=null==arguments[e]?{}:arguments[e],e%2?s(Object(o),!0).forEach(function(e){(0,i.default)(n,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))});return n}var i=t(0)(t(2));a.exports=function(b){function d(e,t){if(e.template.options.rethrow)throw"string"==typeof t&&(t=new b.Error(t)),"TwigException"!==t.type||t.file||(t.file=e.template.id),t;return(b.log.error("Error parsing twig template "+e.template.id+": "),t.stack?b.log.error(t.stack):b.log.error(t.toString()),b.debug)?t.toString():void 0}return b.trace=!1,b.debug=!1,b.cache=!0,b.noop=function(){},b.merge=function(o,e,t){return Object.keys(e).forEach(function(i){t&&!(i in o)||(o[i]=e[i])}),o},b.Error=function(n,e){this.message=n,this.name="TwigException",this.type="TwigException",this.file=e},b.Error.prototype.toString=function(){return this.name+": "+this.message},b.log={trace:function(){if(b.trace&&console){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log(Array.prototype.slice.call(t))}},debug:function(){if(b.debug&&console){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log(Array.prototype.slice.call(t))}}},"undefined"==typeof console?b.log.error=function(){}:void 0===console.error?void 0!==console.log&&(b.log.error=function(){var t;(t=console).log.apply(t,arguments)}):b.log.error=function(){var t;(t=console).error.apply(t,arguments)},b.token={},b.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",outputWhitespacePre:"output_whitespace_pre",outputWhitespacePost:"output_whitespace_post",outputWhitespaceBoth:"output_whitespace_both",logicWhitespacePre:"logic_whitespace_pre",logicWhitespacePost:"logic_whitespace_post",logicWhitespaceBoth:"logic_whitespace_both"},b.token.definitions=[{type:b.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:b.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:b.token.type.outputWhitespacePre,open:"{{-",close:"}}"},{type:b.token.type.outputWhitespacePost,open:"{{",close:"-}}"},{type:b.token.type.outputWhitespaceBoth,open:"{{-",close:"-}}"},{type:b.token.type.logicWhitespacePre,open:"{%-",close:"%}"},{type:b.token.type.logicWhitespacePost,open:"{%",close:"-%}"},{type:b.token.type.logicWhitespaceBoth,open:"{%-",close:"-%}"},{type:b.token.type.output,open:"{{",close:"}}"},{type:b.token.type.logic,open:"{%",close:"%}"},{type:b.token.type.comment,open:"{#",close:"#}"}],b.token.strings=["\"","'"],b.token.findStart=function(e){var t={position:null,def:null},s=null,l=b.token.definitions.length,d,p,c,u;for(d=0;d<l;d++)p=b.token.definitions[d],c=e.indexOf(p.open),u=e.indexOf(p.close),b.log.trace("Twig.token.findStart: ","Searching for ",p.open," found at ",c),0<=c&&p.open.length!==p.close.length&&0>u||(0<=c&&(null===t.position||c<t.position)?(t.position=c,t.def=p,s=u):0<=c&&null!==t.position&&c===t.position&&(p.open.length>t.def.open.length?(t.position=c,t.def=p,s=u):p.open.length===t.def.open.length&&(p.close.length,t.def.close.length,0<=u&&u<s&&(t.position=c,t.def=p,s=u))));return t},b.token.findEnd=function(e,t,r){for(var n=null,d=!1,m=0,g=null,_=null,v=null,x=null,w=null,k=null,T,C;!d;){if(g=null,_=null,!(0<=(v=e.indexOf(t.close,m))))throw new b.Error("Unable to find closing bracket '"+t.close+"' opened near template position "+r);if(n=v,d=!0,t.type===b.token.type.comment)break;if(t.type===b.token.type.raw)break;for(C=b.token.strings.length,T=0;T<C;T+=1)0<(w=e.indexOf(b.token.strings[T],m))&&w<v&&(null===g||w<g)&&(g=w,_=b.token.strings[T]);if(null!==g)for(x=g+1,n=null,d=!1;;){if(0>(k=e.indexOf(_,x)))throw b.Error("Unclosed string in template");if("\\"!==e.slice(k-1,k)){m=k+1;break}x=k+1}}return n},b.tokenize=function(e){for(var a=[],r=0,s=null,l=null;0<e.length;)if(s=b.token.findStart(e),b.log.trace("Twig.tokenize: ","Found token: ",s),null===s.position)a.push({type:b.token.type.raw,value:e}),e="";else{if(0<s.position&&a.push({type:b.token.type.raw,value:e.slice(0,Math.max(0,s.position))}),e=e.slice(s.position+s.def.open.length),r+=s.position+s.def.open.length,l=b.token.findEnd(e,s.def,r),b.log.trace("Twig.tokenize: ","Token ends at ",l),a.push({type:s.def.type,value:e.slice(0,Math.max(0,l)).trim()}),"\n"===e.slice(l+s.def.close.length,l+s.def.close.length+1))switch(s.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":l+=1;}e=e.slice(l+s.def.close.length),r+=l+s.def.close.length}return a},b.compile=function(e){var _=this;try{for(var r=[],n=[],o=[],t=null,v=null,w=null,k=null,T=null,C=null,S=null,E=null,j=null,D=null,A=null,P=function(e){b.expression.compile.call(_,e),0<n.length?o.push(e):r.push(e)},g=function(e){if(v=b.logic.compile.call(_,e),j=v.type,D=b.logic.handler[j].open,A=b.logic.handler[j].next,b.log.trace("Twig.compile: ","Compiled logic token to ",v," next is: ",A," open is : ",D),void 0!==D&&!D){if(k=n.pop(),!b.logic.handler[k.type].next.includes(j))throw new Error(j+" not expected after a "+k.type);k.output=k.output||[],k.output=k.output.concat(o),o=[],E={type:b.token.type.logic,token:k},0<n.length?o.push(E):r.push(E)}void 0!==A&&0<A.length?(b.log.trace("Twig.compile: ","Pushing ",v," to logic stack."),0<n.length&&((k=n.pop()).output=k.output||[],k.output=k.output.concat(o),n.push(k),o=[]),n.push(v)):void 0!==D&&D&&(E={type:b.token.type.logic,token:v},0<n.length?o.push(E):r.push(E))};0<e.length;){switch(t=e.shift(),T=r[r.length-1],C=o[o.length-1],S=e[0],b.log.trace("Compiling token ",t),t.type){case b.token.type.raw:0<n.length?o.push(t):r.push(t);break;case b.token.type.logic:g.call(_,t);break;case b.token.type.comment:break;case b.token.type.output:P.call(_,t);break;case b.token.type.logicWhitespacePre:case b.token.type.logicWhitespacePost:case b.token.type.logicWhitespaceBoth:case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:switch(t.type!==b.token.type.outputWhitespacePost&&t.type!==b.token.type.logicWhitespacePost&&(T&&T.type===b.token.type.raw&&(r.pop(),T.value=T.value.trimEnd(),r.push(T)),C&&C.type===b.token.type.raw&&(o.pop(),C.value=C.value.trimEnd(),o.push(C))),t.type){case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:P.call(_,t);break;case b.token.type.logicWhitespacePre:case b.token.type.logicWhitespacePost:case b.token.type.logicWhitespaceBoth:g.call(_,t);}t.type!==b.token.type.outputWhitespacePre&&t.type!==b.token.type.logicWhitespacePre&&S&&S.type===b.token.type.raw&&(e.shift(),S.value=S.value.trimStart(),e.unshift(S));}b.log.trace("Twig.compile: "," Output: ",r," Logic Stack: ",n," Pending Output: ",o)}if(0<n.length)throw w=n.pop(),new Error("Unable to find an end tag for "+w.type+", expecting one of "+w.next);return r}catch(e){if(_.options.rethrow)throw"TwigException"!==e.type||e.file||(e.file=_.id),e;b.log.error("Error compiling twig template "+_.id+": "),e.stack?b.log.error(e.stack):b.log.error(e.toString())}},b.prepare=function(e){b.log.debug("Twig.prepare: ","Tokenizing ",e);var t=b.tokenize.call(this,e);b.log.debug("Twig.prepare: ","Compiling ",t);var o=b.compile.call(this,t);return b.log.debug("Twig.prepare: ","Compiled ",o),o},b.output=function(e){var t=this.options.autoescape;if(!t)return e.join("");var r="string"==typeof t?t:"html",n=e.map(function(e){return!e||!0===e.twigMarkup||e.twigMarkup===r||"html"==r&&"html_attr"===e.twigMarkup||(e=b.filters.escape(e,[r])),e});if(0===n.length)return"";var o=n.join("");return 0===o.length?"":new b.Markup(o,!0)},b.Templates={loaders:{},parsers:{},registry:{}},b.validateId=function(e){if("prototype"===e)throw new b.Error(e+" is not a valid twig identifier");if(b.cache&&Object.hasOwnProperty.call(b.Templates.registry,e))throw new b.Error("There is already a template with the ID "+e);return!0},b.Templates.registerLoader=function(e,t,o){if("function"!=typeof t)throw new b.Error("Unable to add loader for "+e+": Invalid function reference given.");o&&(t=t.bind(o)),this.loaders[e]=t},b.Templates.unRegisterLoader=function(t){this.isRegisteredLoader(t)&&delete this.loaders[t]},b.Templates.isRegisteredLoader=function(t){return Object.hasOwnProperty.call(this.loaders,t)},b.Templates.registerParser=function(e,t,o){if("function"!=typeof t)throw new b.Error("Unable to add parser for "+e+": Invalid function regerence given.");o&&(t=t.bind(o)),this.parsers[e]=t},b.Templates.unRegisterParser=function(t){this.isRegisteredParser(t)&&delete this.parsers[t]},b.Templates.isRegisteredParser=function(t){return Object.hasOwnProperty.call(this.parsers,t)},b.Templates.save=function(e){if(void 0===e.id)throw new b.Error("Unable to save template with no id");b.Templates.registry[e.id]=e},b.Templates.load=function(e){return Object.hasOwnProperty.call(b.Templates.registry,e)?b.Templates.registry[e]:null},b.Templates.loadRemote=function(e,t,r,n){var o=void 0===t.id?e:t.id,i=b.Templates.registry[o];return b.cache&&void 0!==i?("function"==typeof r&&r(i),i):(t.parser=t.parser||"twig",t.id=o,void 0===t.async&&(t.async=!0),(this.loaders[t.method]||this.loaders.fs).call(this,e,t,r,n))},b.Block=function(n,e){this.template=n,this.token=e},b.Block.prototype.render=function(o,e){var t=o.template;return o.template=this.template,(this.token.expression?b.expression.parseAsync.call(o,this.token.output,e):o.parseAsync(this.token.output,e)).then(function(t){return b.expression.parseAsync.call(o,{type:b.expression.type.string,value:t},e)}).then(function(n){return o.template=t,n})},b.ParseState=function(n,e){this.renderedBlocks={},this.overrideBlocks=void 0===e?{}:e,this.context={},this.macros={},this.nestingStack=[],this.template=n},b.ParseState.prototype.getBlock=function(n,e){var t;return!0!==e&&(t=this.overrideBlocks[n]),void 0===t&&(t=this.template.getBlock(n,e)),void 0===t&&null!==this.template.parentTemplate&&(t=this.template.parentTemplate.getBlock(n)),t},b.ParseState.prototype.getBlocks=function(n){var e={};return!1!==n&&null!==this.template.parentTemplate&&this.template.parentTemplate!==this.template&&(e=this.template.parentTemplate.getBlocks()),e=o(o(o({},e),this.template.getBlocks()),this.overrideBlocks)},b.ParseState.prototype.getNestingStackToken=function(n){var e;return this.nestingStack.forEach(function(t){void 0===e&&t.type===n&&(e=t)}),e},b.ParseState.prototype.parse=function(e,t,n){function o(t){s.push(t)}function r(t){void 0!==t.chain&&(h=t.chain),void 0!==t.context&&(u.context=t.context),void 0!==t.output&&s.push(t.output)}var u=this,s=[],m=null,g=!0,h=!0,f;if(t&&(u.context=t),f=b.async.forEach(e,function(e){switch(b.log.debug("Twig.ParseState.parse: ","Parsing token: ",e),e.type){case b.token.type.raw:s.push(b.filters.raw(e.value));break;case b.token.type.logic:return b.logic.parseAsync.call(u,e.token,u.context,h).then(r);case b.token.type.comment:break;case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:case b.token.type.output:return b.log.debug("Twig.ParseState.parse: ","Output token: ",e.stack),b.expression.parseAsync.call(u,e.stack,u.context).then(o);}}).then(function(){return s=b.output.call(u.template,s),g=!1,s}).catch(function(t){n&&d(u,t),m=t}),n)return f;if(null!==m)return d(u,m);if(g)throw new b.Error("You are using Twig.js in sync mode in combination with async extensions.");return s},b.Template=function(e){var t=e.data,i=e.id,s=e.base,a=e.path,d=e.url,p=e.name,l=e.method,c=e.options,u,m,g;this.base=s,this.blocks={defined:{},imported:{}},this.id=i,this.method=l,this.name=p,this.options=c,this.parentTemplate=null,this.path=a,this.url=d,u="String",m=t,g=Object.prototype.toString.call(m).slice(8,-1),this.tokens=null!=m&&g===u?b.prepare.call(this,t):t,void 0!==i&&b.Templates.save(this)},b.Template.prototype.getBlock=function(o,e){var t=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i;return!0!==e&&(i=this.blocks.defined[o]),t&&void 0===i&&(i=this.blocks.imported[o]),void 0===i&&null!==this.parentTemplate&&(i=this.parentTemplate.getBlock(o,e,t=!1)),i},b.Template.prototype.getBlocks=function(){var t={};return t=o(o(o({},t),this.blocks.imported),this.blocks.defined)},b.Template.prototype.render=function(e,a,t){var l=this;return a=a||{},b.async.potentiallyAsync(l,t,function(){var o=new b.ParseState(l,a.blocks);return o.parseAsync(l.tokens,e).then(function(e){var t,n;return null===l.parentTemplate?!0===a.isInclude?e:e.valueOf():(l.options.allowInlineIncludes&&(t=b.Templates.load(l.parentTemplate))&&(t.options=l.options),t||(n=b.path.parsePath(l,l.parentTemplate),t=b.Templates.loadRemote(n,{method:l.getLoaderMethod(),base:l.base,async:!1,id:n,options:l.options})),l.parentTemplate=t,l.parentTemplate.renderAsync(o.context,{blocks:o.getBlocks(!1),isInclude:!0}))})})},b.Template.prototype.importFile=function(e){var o=null,i;if(!this.url&&this.options.allowInlineIncludes){if(e=this.path?b.path.parsePath(this,e):e,!(i=b.Templates.load(e))&&!(i=b.Templates.loadRemote(o,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options})))throw new b.Error("Unable to find the template "+e);return i.options=this.options,i}return o=b.path.parsePath(this,e),i=b.Templates.loadRemote(o,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:o})},b.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},b.Template.prototype.compile=function(e){return b.compiler.compile(this,e)},b.Markup=function(n,e){if("string"!=typeof n)return n;var t=new String(n);return t.twigMarkup=void 0===e||e,t},b}},function(t){"use strict";t.exports=function(a){return a.compiler={module:{}},a.compiler.compile=function(e,t){var r=JSON.stringify(e.tokens),n=e.id,o=null;if(t.module){if(void 0===a.compiler.module[t.module])throw new a.Error("Unable to find module type "+t.module);o=a.compiler.module[t.module](n,r,t.twig)}else o=a.compiler.wrap(n,r);return o},a.compiler.module={amd:function(e,t,o){return"define([\""+o+"\"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = "+a.compiler.wrap(e,t)+"\n\treturn templates;\n});"},node:function(e,t){return"var twig = require(\"twig\").twig;\nexports.template = "+a.compiler.wrap(e,t)},cjs2:function(e,t,o){return"module.declare([{ twig: \""+o+"\" }], function (require, exports, module) {\n\tvar twig = require(\"twig\").twig;\n\texports.template = "+a.compiler.wrap(e,t)+"\n});"}},a.compiler.wrap=function(n,e){return"twig({id:\""+n.replace("\"","\\\"")+"\", data:"+e+", precompiled: true});\n"},a}},function(a,e,s){"use strict";var t=s(0),d=t(s(1)),n=t(s(12));a.exports=function(m){function e(e,t,o){return t?m.expression.parseAsync.call(e,t,o):m.Promise.resolve(!1)}for(m.expression={},s(17)(m),m.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if","matches","starts","ends","with"],m.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},m.expression.set={operations:[m.expression.type.filter,m.expression.type.operator.unary,m.expression.type.operator.binary,m.expression.type.array.end,m.expression.type.object.end,m.expression.type.parameter.end,m.expression.type.subexpression.end,m.expression.type.comma,m.expression.type.test],expressions:[m.expression.type._function,m.expression.type.bool,m.expression.type.string,m.expression.type.variable,m.expression.type.number,m.expression.type._null,m.expression.type.context,m.expression.type.parameter.start,m.expression.type.array.start,m.expression.type.object.start,m.expression.type.subexpression.start,m.expression.type.operator.unary]},m.expression.set.operationsExtended=m.expression.set.operations.concat([m.expression.type.key.period,m.expression.type.key.brackets,m.expression.type.slice]),m.expression.fn={compile:{push:function(n,e,t){t.push(n)},pushBoth:function(n,e,t){t.push(n),e.push(n)}},parse:{push:function(n,e){e.push(n)},pushValue:function(n,e){e.push(n.value)}}},m.expression.definitions=[{type:m.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_]\w*(\s?as)?)/,next:m.expression.set.operations.concat([m.expression.type.parameter.start]),compile:function(n,e,t){n.filter=n.match[2],n.modifier=n.match[1],delete n.match,delete n.value,t.push(n)},parse:function(a,r,t){var n=r.pop();return e(this,a.params,t).then(function(e){var t=m.test(a.filter,n,e);"not"===a.modifier?r.push(!t):r.push(t)})}},{type:m.expression.type.comma,regex:/^,/,next:m.expression.set.expressions.concat([m.expression.type.array.end,m.expression.type.object.end]),compile:function(e,t,r){var n=t.length-1,a;for(delete e.match,delete e.value;0<=n;n--){if((a=t.pop()).type===m.expression.type.object.start||a.type===m.expression.type.parameter.start||a.type===m.expression.type.array.start){t.push(a);break}r.push(a)}r.push(e)}},{type:m.expression.type.number,regex:/^-?\d+(\.\d+)?/,next:m.expression.set.operations,compile:function(n,e,t){n.value=+n.value,t.push(n)},parse:m.expression.fn.parse.pushValue},{type:m.expression.type.operator.binary,regex:/(^\?\?|^\?:|^(b-and)|^(b-or)|^(b-xor)|^[+\-~%?]|^[:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[(|\s+]|^(or)[(|\s+]|^(in)[(|\s+]|^(not in)[(|\s+]|^(matches)|^(starts with)|^(ends with)|^\.\.)/,next:m.expression.set.expressions,transform:function(n,e){switch(n[0]){case"and(":case"or(":case"in(":case"not in(":return e[e.length-1].value=n[2],n[0];default:return"";}},compile:function(e,t,r){delete e.match,e.value=e.value.trim();var n=e.value,o=m.expression.operator.lookup(n,e);for(m.log.trace("Twig.expression.compile: ","Operator: ",o," from ",n);0<t.length&&(t[t.length-1].type===m.expression.type.operator.unary||t[t.length-1].type===m.expression.type.operator.binary)&&(o.associativity===m.expression.operator.leftToRight&&o.precidence>=t[t.length-1].precidence||o.associativity===m.expression.operator.rightToLeft&&o.precidence>t[t.length-1].precidence);){var i=t.pop();r.push(i)}if(!(":"===n))t.push(o);else if(t[t.length-1]&&"?"===t[t.length-1].value);else{var s=r.pop();if(s.type===m.expression.type.string||s.type===m.expression.type.variable)e.key=s.value;else if(s.type===m.expression.type.number)e.key=s.value.toString();else{if(!s.expression||s.type!==m.expression.type.parameter.end&&s.type!==m.expression.type.subexpression.end)throw new m.Error("Unexpected value before ':' of "+s.type+" = "+s.value);e.params=s.params}r.push(e)}},parse:function(o,t,i){if(o.key)t.push(o);else{if(o.params)return m.expression.parseAsync.call(this,o.params,i).then(function(n){o.key=n,t.push(o),i.loop||delete o.params});m.expression.operator.parse(o.value,t)}}},{type:m.expression.type.operator.unary,regex:/(^not\s+)/,next:m.expression.set.expressions,compile:function(e,t,r){delete e.match,e.value=e.value.trim();var n=e.value,o=m.expression.operator.lookup(n,e);for(m.log.trace("Twig.expression.compile: ","Operator: ",o," from ",n);0<t.length&&(t[t.length-1].type===m.expression.type.operator.unary||t[t.length-1].type===m.expression.type.operator.binary)&&(o.associativity===m.expression.operator.leftToRight&&o.precidence>=t[t.length-1].precidence||o.associativity===m.expression.operator.rightToLeft&&o.precidence>t[t.length-1].precidence);){var i=t.pop();r.push(i)}t.push(o)},parse:function(e,t){m.expression.operator.parse(e.value,t)}},{type:m.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:m.expression.set.operationsExtended,compile:function(e,t,i){var n=e.value;delete e.match,n="\""===n.slice(0,1)?n.replace("\\\"","\""):n.replace("\\'","'"),e.value=n.slice(1,-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),m.log.trace("Twig.expression.compile: ","String value: ",e.value),i.push(e)},parse:m.expression.fn.parse.pushValue},{type:m.expression.type.subexpression.start,regex:/^\(/,next:m.expression.set.expressions.concat([m.expression.type.subexpression.end]),compile:function(n,e,t){n.value="(",t.push(n),e.push(n)},parse:m.expression.fn.parse.push},{type:m.expression.type.subexpression.end,regex:/^\)/,next:m.expression.set.operationsExtended,validate:function(e,t){for(var r=t.length-1,l=!1,d=!1,p=0,c;!l&&0<=r;)c=t[r],(l=c.type===m.expression.type.subexpression.start)&&d&&(d=!1,l=!1),c.type===m.expression.type.parameter.start?p++:c.type===m.expression.type.parameter.end?p--:c.type===m.expression.type.subexpression.end&&(d=!0),r--;return l&&0==p},compile:function(e,a,r){var n=e,i;for(i=a.pop();0<a.length&&i.type!==m.expression.type.subexpression.start;)r.push(i),i=a.pop();for(var l=[];e.type!==m.expression.type.subexpression.start;)l.unshift(e),e=r.pop();l.unshift(e),void 0===(i=a[a.length-1])||i.type!==m.expression.type._function&&i.type!==m.expression.type.filter&&i.type!==m.expression.type.test&&i.type!==m.expression.type.key.brackets?(n.expression=!0,l.pop(),l.shift(),n.params=l,r.push(n)):(n.expression=!1,i.params=l)},parse:function(e,t,o){if(e.expression)return m.expression.parseAsync.call(this,e.params,o).then(function(n){t.push(n)});throw new m.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:m.expression.type.parameter.start,regex:/^\(/,next:m.expression.set.expressions.concat([m.expression.type.parameter.end]),validate:function(e,t){var o=t[t.length-1];return o&&!m.expression.reservedWords.includes(o.value.trim())},compile:m.expression.fn.compile.pushBoth,parse:m.expression.fn.parse.push},{type:m.expression.type.parameter.end,regex:/^\)/,next:m.expression.set.operationsExtended,compile:function(e,a,r){var n=e,i;for(i=a.pop();0<a.length&&i.type!==m.expression.type.parameter.start;)r.push(i),i=a.pop();for(var l=[];e.type!==m.expression.type.parameter.start;)l.unshift(e),e=r.pop();l.unshift(e),void 0===(e=r[r.length-1])||e.type!==m.expression.type._function&&e.type!==m.expression.type.filter&&e.type!==m.expression.type.test&&e.type!==m.expression.type.key.brackets?(n.expression=!0,l.pop(),l.shift(),n.params=l,r.push(n)):(n.expression=!1,e.params=l)},parse:function(e,t,r){var n=[],o=!1,a=null;if(e.expression)return m.expression.parseAsync.call(this,e.params,r).then(function(n){t.push(n)});for(;0<t.length;){if((a=t.pop())&&a.type&&a.type===m.expression.type.parameter.start){o=!0;break}n.unshift(a)}if(!o)throw new m.Error("Expected end of parameter set.");t.push(n)}},{type:m.expression.type.slice,regex:/^\[(\d*:\d*)\]/,next:m.expression.set.operationsExtended,compile:function(a,e,t){var r=a.match[1].split(":"),n=r[0]?parseInt(r[0],10):void 0,o=r[1]?parseInt(r[1],10):void 0;a.value="slice",a.params=[n,o],o||(a.params=[n]),t.push(a)},parse:function(e,t){var i=t.pop(),n=e.params;t.push(m.filter.call(this,e.value,i,n))}},{type:m.expression.type.array.start,regex:/^\[/,next:m.expression.set.expressions.concat([m.expression.type.array.end]),compile:m.expression.fn.compile.pushBoth,parse:m.expression.fn.parse.push},{type:m.expression.type.array.end,regex:/^\]/,next:m.expression.set.operationsExtended,compile:function(e,t,r){for(var n=t.length-1,a;0<=n&&(a=t.pop()).type!==m.expression.type.array.start;n--)r.push(a);r.push(e)},parse:function(e,t){for(var r=[],n=!1,a=null;0<t.length;){if((a=t.pop())&&a.type&&a.type===m.expression.type.array.start){n=!0;break}r.unshift(a)}if(!n)throw new m.Error("Expected end of array.");t.push(r)}},{type:m.expression.type.object.start,regex:/^\{/,next:m.expression.set.expressions.concat([m.expression.type.object.end]),compile:m.expression.fn.compile.pushBoth,parse:m.expression.fn.parse.push},{type:m.expression.type.object.end,regex:/^\}/,next:m.expression.set.operationsExtended,compile:function(e,t,r){for(var n=t.length-1,a;0<=n&&(!(a=t.pop())||a.type!==m.expression.type.object.start);n--)r.push(a);r.push(e)},parse:function(e,t){for(var r={},n=!1,l=null,d=!1,p=null;0<t.length;){if((l=t.pop())&&l.type&&l.type===m.expression.type.object.start){n=!0;break}if(l&&l.type&&(l.type===m.expression.type.operator.binary||l.type===m.expression.type.operator.unary)&&l.key){if(!d)throw new m.Error("Missing value for key '"+l.key+"' in object definition.");r[l.key]=p,void 0===r._keys&&(r._keys=[]),r._keys.unshift(l.key),p=null,d=!1}else d=!0,p=l}if(!n)throw new m.Error("Unexpected end of object.");t.push(r)}},{type:m.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_-]*)/,next:m.expression.set.operationsExtended.concat([m.expression.type.parameter.start]),compile:function(n,e,t){n.value=n.match[1],t.push(n)},parse:function(a,t,n){var o=t.pop(),i=this;return e(i,a.params,n).then(function(e){return m.filter.call(i,a.value,o,e)}).then(function(n){t.push(n)})}},{type:m.expression.type._function,regex:/^([a-zA-Z_]\w*)\s*\(/,next:m.expression.type.parameter.start,validate:function(e){return e[1]&&!m.expression.reservedWords.includes(e[1])},transform:function(){return"("},compile:function(o,e,t){var i=o.match[1];o.fn=i,delete o.match,delete o.value,t.push(o)},parse:function(t,i,r){var o=this,a=t.fn,l;return e(o,t.params,r).then(function(e){if(m.functions[a])l=m.functions[a].apply(o,e);else{if("function"!=typeof r[a])throw new m.Error(a+" function does not exist and is not defined in the context");l=r[a].apply(r,(0,n.default)(e))}return l}).then(function(t){i.push(t)})}},{type:m.expression.type.variable,regex:/^[a-zA-Z_]\w*/,next:m.expression.set.operationsExtended.concat([m.expression.type.parameter.start]),compile:m.expression.fn.compile.push,validate:function(e){return!m.expression.reservedWords.includes(e[0])},parse:function(e,t,i){var r=this;return m.expression.resolveAsync.call(r,i[e.value],i).then(function(o){if(r.template.options.strictVariables&&void 0===o)throw new m.Error("Variable \""+e.value+"\" does not exist.");t.push(o)})}},{type:m.expression.type.key.period,regex:/^\.(\w+)/,next:m.expression.set.operationsExtended.concat([m.expression.type.parameter.start]),compile:function(n,e,t){n.key=n.match[1],delete n.match,delete n.value,t.push(n)},parse:function(t,o,n,i){var s=this,c=t.key,p=o.pop(),l;if(p&&!Object.prototype.hasOwnProperty.call(p,c)&&s.template.options.strictVariables)throw 0<Object.keys(p).length?new m.Error("Key \""+c+"\" for object with keys \""+Object.keys(p).join(", ")+"\" does not exist."):new m.Error("Key \""+c+"\" does not exist as the object is empty.");return e(s,t.params,n).then(function(e){if(null==p)l=void 0;else{var t=function(t){return t.slice(0,1).toUpperCase()+t.slice(1)};l="object"===(0,d.default)(p)&&(c in p)?p[c]:p["get"+t(c)]?p["get"+t(c)]:p["is"+t(c)]?p["is"+t(c)]:void 0}return m.expression.resolveAsync.call(s,l,n,e,i,p)}).then(function(t){o.push(t)})}},{type:m.expression.type.key.brackets,regex:/^\[([^\]:]*)\]/,next:m.expression.set.operationsExtended.concat([m.expression.type.parameter.start]),compile:function(e,t,i){var n=e.match[1];delete e.value,delete e.match,e.stack=m.expression.compile({value:n}).stack,i.push(e)},parse:function(o,u,n,i){var s=this,p=null,g,h;return e(s,o.params,n).then(function(e){return p=e,m.expression.parseAsync.call(s,o.stack,n)}).then(function(e){if((g=u.pop())&&!Object.prototype.hasOwnProperty.call(g,e)&&s.template.options.strictVariables){var t=Object.keys(g);throw 0<t.length?new m.Error("Key \""+e+"\" for array with keys \""+t.join(", ")+"\" does not exist."):new m.Error("Key \""+e+"\" does not exist as the array is empty.")}return null==g?null:(h="object"===(0,d.default)(g)&&(e in g)?g[e]:null,m.expression.resolveAsync.call(s,h,g,p,i))}).then(function(t){u.push(t)})}},{type:m.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:m.expression.set.operations,compile:function(n,e,t){delete n.match,n.value=null,t.push(n)},parse:m.expression.fn.parse.pushValue},{type:m.expression.type.context,regex:/^_context/,next:m.expression.set.operationsExtended.concat([m.expression.type.parameter.start]),compile:m.expression.fn.compile.push,parse:function(n,e,t){e.push(t)}},{type:m.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:m.expression.set.operations,compile:function(n,e,t){n.value="true"===n.match[0].toLowerCase(),delete n.match,t.push(n)},parse:m.expression.fn.parse.pushValue}],m.expression.resolveAsync=function(l,t,e,n,o){var i=this;if("function"!=typeof l)return m.Promise.resolve(l);var r=m.Promise.resolve(e);return n&&n.type===m.expression.type.parameter.end&&(r=r.then(function(){return n.params&&m.expression.parseAsync.call(i,n.params,t,!0)}).then(function(t){return n.cleanup=!0,t})),r.then(function(n){return l.apply(o||t,n||[])})},m.expression.resolve=function(e,t,r,n,o){return m.async.potentiallyAsync(this,!1,function(){return m.expression.resolveAsync.call(this,e,t,r,n,o)})},m.expression.handler={},m.expression.extendType=function(e){m.expression.type[e]="Twig.expression.type."+e},m.expression.extend=function(e){if(!e.type)throw new m.Error("Unable to extend logic definition. No type provided for "+e);m.expression.handler[e.type]=e};0<m.expression.definitions.length;)m.expression.extend(m.expression.definitions.shift());return m.expression.tokenize=function(e){var d=[],a=0,g=null,y=[],h=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=arguments.length-2,r=Array(i);0<i--;)r[i]=t[i];if(m.log.trace("Twig.expression.tokenize","Matched a ",b," regular expression of ",r),g&&!g.includes(b))return y.push(b+" cannot follow a "+d[d.length-1].type+" at template:"+a+" near '"+r[0].slice(0,20)+"...'"),r[0];var s=m.expression.handler[b];return s.validate&&!s.validate(r,d)?r[0]:(y=[],d.push({type:b,value:r[0],match:r}),v=!0,g=_,a+=r[0].length,s.transform?s.transform(r,d):"")},b,u,f,_,v;for(m.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);0<e.length;){for(b in e=e.trim(),m.expression.handler)if(Object.hasOwnProperty.call(m.expression.handler,b)){if(_=m.expression.handler[b].next,u=m.expression.handler[b].regex,m.log.trace("Checking type ",b," on ",e),v=!1,Array.isArray(u))for(f=u.length;0<f--;)e=e.replace(u[f],h);else e=e.replace(u,h);if(v)break}if(!v)throw 0<y.length?new m.Error(y.join(" OR ")):new m.Error("Unable to parse '"+e+"' at template position"+a)}return m.log.trace("Twig.expression.tokenize","Tokenized to ",d),d},m.expression.compile=function(e){var t=e.value,r=m.expression.tokenize(t),n=null,l=[],i=[],s=null;for(m.log.trace("Twig.expression.compile: ","Compiling ",t);0<r.length;)n=r.shift(),s=m.expression.handler[n.type],m.log.trace("Twig.expression.compile: ","Compiling ",n),s.compile(n,i,l),m.log.trace("Twig.expression.compile: ","Stack is",i),m.log.trace("Twig.expression.compile: ","Output is",l);for(;0<i.length;)l.push(i.pop());return m.log.trace("Twig.expression.compile: ","Final output is",l),e.stack=l,delete e.value,e},m.expression.parse=function(e,d,l,n){var r=this;Array.isArray(e)||(e=[e]);var i=[],s=[],a=m.expression.type.operator.binary;return m.async.potentiallyAsync(r,n,function(){return m.async.forEach(e,function(t,n){var o=null,c=null,g;if(!t.cleanup)return e.length>n+1&&(c=e[n+1]),(o=m.expression.handler[t.type]).parse&&(g=o.parse.call(r,t,i,d,c)),t.type===a&&d.loop&&s.push(t),g}).then(function(){for(var n=s.length,o=null;0<n--;)(o=s[n]).params&&o.key&&delete o.key;if(l){var a=i.splice(0);i.push(a)}return i.pop()})})},m}},function(a,e,t){var r=t(13),n=t(14),o=t(15),i=t(16);a.exports=function(t){return r(t)||n(t)||o(t)||i()}},function(o,e,t){var i=t(3);o.exports=function(t){if(Array.isArray(t))return i(t)}},function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(o,e,t){var i=t(3);o.exports=function(n,e){if(n){if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(n,e):void 0}}},function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t){"use strict";t.exports=function(l){l.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var e=function(n,e){if(null==e)return null;if(void 0!==e.indexOf)return(n===e||""!==n)&&e.includes(n);for(var t in e)if(Object.hasOwnProperty.call(e,t)&&e[t]===n)return!0;return!1};return l.expression.operator.lookup=function(e,t){switch(e){case"..":t.precidence=20,t.associativity=l.expression.operator.leftToRight;break;case",":t.precidence=18,t.associativity=l.expression.operator.leftToRight;break;case"?:":case"?":case":":t.precidence=16,t.associativity=l.expression.operator.rightToLeft;break;case"??":t.precidence=15,t.associativity=l.expression.operator.rightToLeft;break;case"or":t.precidence=14,t.associativity=l.expression.operator.leftToRight;break;case"and":t.precidence=13,t.associativity=l.expression.operator.leftToRight;break;case"b-or":t.precidence=12,t.associativity=l.expression.operator.leftToRight;break;case"b-xor":t.precidence=11,t.associativity=l.expression.operator.leftToRight;break;case"b-and":t.precidence=10,t.associativity=l.expression.operator.leftToRight;break;case"==":case"!=":t.precidence=9,t.associativity=l.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":t.precidence=8,t.associativity=l.expression.operator.leftToRight;break;case"~":case"+":case"-":t.precidence=6,t.associativity=l.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":t.precidence=5,t.associativity=l.expression.operator.leftToRight;break;case"not":t.precidence=3,t.associativity=l.expression.operator.rightToLeft;break;case"matches":case"starts with":case"ends with":t.precidence=8,t.associativity=l.expression.operator.leftToRight;break;default:throw new l.Error("Failed to lookup operator: "+e+" is an unknown operator.");}return t.operator=e,t},l.expression.operator.parse=function(t,r){var n,d,u;if(l.log.trace("Twig.expression.operator.parse: ","Handling ",t),"?"===t&&(u=r.pop()),d=r.pop(),"not"!==t&&(n=r.pop()),"in"!==t&&"not in"!==t&&"??"!==t&&(n&&Array.isArray(n)&&(n=n.length),"?"!==t&&d&&Array.isArray(d)&&(d=d.length)),"matches"===t&&d&&"string"==typeof d){var m=d.match(/^\/(.*)\/([gims]?)$/),a=m[1],c=m[2];d=new RegExp(a,c)}switch(t){case":":break;case"??":void 0===n&&(n=d,d=u,u=void 0),null==n?r.push(d):r.push(n);break;case"?:":l.lib.boolval(n)?r.push(n):r.push(d);break;case"?":void 0===n&&(n=d,d=u,u=void 0),l.lib.boolval(n)?r.push(d):r.push(u);break;case"+":d=parseFloat(d),n=parseFloat(n),r.push(n+d);break;case"-":d=parseFloat(d),n=parseFloat(n),r.push(n-d);break;case"*":d=parseFloat(d),n=parseFloat(n),r.push(n*d);break;case"/":d=parseFloat(d),n=parseFloat(n),r.push(n/d);break;case"//":d=parseFloat(d),n=parseFloat(n),r.push(Math.floor(n/d));break;case"%":d=parseFloat(d),n=parseFloat(n),r.push(n%d);break;case"~":r.push((null==n?"":n.toString())+(null==d?"":d.toString()));break;case"not":case"!":r.push(!l.lib.boolval(d));break;case"<":r.push(n<d);break;case"<=":r.push(n<=d);break;case">":r.push(n>d);break;case">=":r.push(n>=d);break;case"===":r.push(n===d);break;case"==":r.push(n==d);break;case"!==":r.push(n!==d);break;case"!=":r.push(n!=d);break;case"or":r.push(l.lib.boolval(n)||l.lib.boolval(d));break;case"b-or":r.push(n|d);break;case"b-xor":r.push(n^d);break;case"and":r.push(l.lib.boolval(n)&&l.lib.boolval(d));break;case"b-and":r.push(n&d);break;case"**":r.push(Math.pow(n,d));break;case"not in":r.push(!e(n,d));break;case"in":r.push(e(n,d));break;case"matches":r.push(d.test(n));break;case"starts with":r.push("string"==typeof n&&0===n.indexOf(d));break;case"ends with":r.push("string"==typeof n&&n.includes(d,n.length-d.length));break;case"..":r.push(l.functions.range(n,d));break;default:throw new l.Error("Failed to parse operator: "+t+" is an unknown operator.");}},l}},function(o,e,t){"use strict";var a=t(0)(t(1));o.exports=function(b){function l(n,e){var t=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&t===n}return b.filters={upper:function(t){return"string"==typeof t?t.toUpperCase():t},lower:function(t){return"string"==typeof t?t.toLowerCase():t},capitalize:function(t){return"string"==typeof t?t.slice(0,1).toUpperCase()+t.toLowerCase().slice(1):t},title:function(t){return"string"==typeof t?t.toLowerCase().replace(/(^|\s)([a-z])/g,function(n,e,t){return e+t.toUpperCase()}):t},length:function(e){return b.lib.is("Array",e)||"string"==typeof e?e.length:b.lib.is("Object",e)?void 0===e._keys?Object.keys(e).length:e._keys.length:0},reverse:function(t){if(l("Array",t))return t.reverse();if(l("String",t))return t.split("").reverse().join("");if(l("Object",t)){var e=t._keys||Object.keys(t).reverse();return t._keys=e,t}},sort:function(i){if(l("Array",i))return i.sort();if(l("Object",i)){delete i._keys;var e=Object.keys(i).sort(function(e,t){var r,a;return i[e]>i[t]==!(i[e]<=i[t])?i[e]>i[t]?1:i[e]<i[t]?-1:0:isNaN(r=parseFloat(i[e]))||isNaN(a=parseFloat(i[t]))?"string"==typeof i[e]?i[e]>i[t].toString()?1:i[e]<i[t].toString()?-1:0:"string"==typeof i[t]?i[e].toString()>i[t]?1:i[e].toString()<i[t]?-1:0:null:r>a?1:r<a?-1:0});return i._keys=e,i}},keys:function(n){if(null!=n){var e=n._keys||Object.keys(n),o=[];return e.forEach(function(e){"_keys"!==e&&Object.hasOwnProperty.call(n,e)&&o.push(e)}),o}},url_encode:function(e){if(null!=e){if(b.lib.is("Object",e))return function e(t,r){var n=[];return(t._keys||Object.keys(t)).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?r+"["+o+"]":o,s=t[o];n.push(b.lib.is("Object",s)||Array.isArray(s)?e(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s))}}),n.join("&amp;")}(e);var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(i,e){if(null!=i){var t="",r=[];return e&&e[0]&&(t=e[0]),l("Array",i)?r=i:(i._keys||Object.keys(i)).forEach(function(e){"_keys"!==e&&Object.hasOwnProperty.call(i,e)&&r.push(i[e])}),r.join(t)}},default:function(e,t){if(void 0!==t&&1<t.length)throw new b.Error("default filter expects one argument");return null==e||""===e?void 0===t?"":t[0]:e},json_encode:function(e){if(null==e)return"null";if("object"===(0,a.default)(e)&&l("Array",e)){var n=[];return e.forEach(function(e){n.push(b.filters.json_encode(e))}),"["+n.join(",")+"]"}if("object"===(0,a.default)(e)&&l("Date",e))return"\""+e.toISOString()+"\"";if("object"===(0,a.default)(e)){var t=e._keys||Object.keys(e),o=[];return t.forEach(function(n){o.push(JSON.stringify(n)+":"+b.filters.json_encode(e[n]))}),"{"+o.join(",")+"}"}return JSON.stringify(e)},merge:function(a,e){var n=[],s=0;if(l("Array",a)?e.forEach(function(t){l("Array",t)||(n={})}):n={},l("Array",n)||(n._keys=[]),l("Array",a)?a.forEach(function(t){n._keys&&n._keys.push(s),n[s]=t,s++}):(a._keys||Object.keys(a)).forEach(function(o){n[o]=a[o],n._keys.push(o);var e=parseInt(o,10);!isNaN(e)&&e>=s&&(s=e+1)}),e.forEach(function(o){l("Array",o)?o.forEach(function(t){n._keys&&n._keys.push(s),n[s]=t,s++}):(o._keys||Object.keys(o)).forEach(function(e){n[e]||n._keys.push(e),n[e]=o[e];var t=parseInt(e,10);!isNaN(t)&&t>=s&&(s=t+1)})}),0===e.length)throw new b.Error("Filter merge expects at least one parameter");return n},date:function(e,t){var i=b.functions.date(e),n=t&&!!t.length?t[0]:"F j, Y H:i";return b.lib.date(n.replace(/\\\\/g,"\\"),i)},date_modify:function(e,t){if(null!=e){if(void 0===t||1!==t.length)throw new b.Error("date_modify filter expects 1 argument");var i=t[0],o;return b.lib.is("Date",e)&&(o=b.lib.strtotime(i,e.getTime()/1e3)),b.lib.is("String",e)&&(o=b.lib.strtotime(i,b.lib.strtotime(e))),b.lib.is("Number",e)&&(o=b.lib.strtotime(i,e)),new Date(1e3*o)}},replace:function(e,i){if(null!=e){var r=i[0],o;for(o in r)Object.hasOwnProperty.call(r,o)&&"_keys"!==o&&(e=b.lib.replaceAll(e,o,r[o]));return e}},format:function(e,t){if(null!=e)return b.lib.vsprintf(e,t)},striptags:function(e,t){if(null!=e)return b.lib.stripTags(e,t)},escape:function(e,t){if(null!=e&&""!==e){var r="html";if(t&&!!t.length&&!0!==t[0]&&(r=t[0]),"html"===r){var _=e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return new b.Markup(_,"html")}if("js"===r){for(var o=e.toString(),i="",v=0;v<o.length;v++)if(o[v].match(/^[a-zA-Z0-9,._]$/))i+=o[v];else{var w=o.charAt(v),c=o.charCodeAt(v),p={"\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};i+=p[w]?p[w]:b.lib.sprintf("\\u%04s",c.toString(16).toUpperCase())}return new b.Markup(i,"js")}if("css"===r){for(var l=e.toString(),u="",k=0;k<l.length;k++)u+=l[k].match(/^[a-zA-Z0-9]$/)?l[k]:"\\"+l.charCodeAt(k).toString(16).toUpperCase()+" ";return new b.Markup(u,"css")}if("url"===r){var T=b.filters.url_encode(e);return new b.Markup(T,"url")}if("html_attr"===r){for(var y=e.toString(),d="",C=0;C<y.length;C++)if(y[C].match(/^[a-zA-Z0-9,.\-_]$/))d+=y[C];else if(y[C].match(/^[&<>"]$/))d+=y[C].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var S=y.charCodeAt(C);d+=31>=S&&9!==S&&10!==S&&13!==S?"&#xFFFD;":128>S?b.lib.sprintf("&#x%02s;",S.toString(16).toUpperCase()):b.lib.sprintf("&#x%04s;",S.toString(16).toUpperCase())}return new b.Markup(d,"html_attr")}throw new b.Error("escape strategy unsupported")}},e:function(e,t){return b.filters.escape(e,t)},nl2br:function(e){if(null!=e&&""!==e){var n="<br />BACKSLASH_n_replace";return e=b.filters.escape(e).replace(/\r\n/g,n).replace(/\r/g,n).replace(/\n/g,n),e=b.lib.replaceAll(e,"BACKSLASH_n_replace","\n"),new b.Markup(e)}},number_format:function(l,e){var t=l,d=e&&e[0]?e[0]:void 0,n=e&&void 0!==e[1]?e[1]:".",o=e&&void 0!==e[2]?e[2]:",";t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+t)?+t:0,s=isFinite(+d)?Math.abs(d):0,a="";return 3<(a=(s?function(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t+""}(i,s):Math.round(i)+"").split("."))[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(a[1]||"").length<s&&(a[1]=a[1]||"",a[1]+=Array(s-a[1].length+1).join("0")),a.join(n)},trim:function(a,e){if(null!=a){var t=a+"",s;s=e&&e[0]?e[0]+"":" \n\r\t\f\x0B\xA0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200B\u2028\u2029\u3000";for(var l=0;l<t.length;l++)if(!s.includes(t.charAt(l))){t=t.slice(Math.max(0,l));break}for(var d=t.length-1;0<=d;d--)if(!s.includes(t.charAt(d))){t=t.slice(0,Math.max(0,d+1));break}return s.includes(t.charAt(0))?"":t}},truncate:function(i,a){var t=30,s=!1,l="...";if(i=i+"",a&&(a[0]&&(t=a[0]),a[1]&&(s=a[1]),a[2]&&(l=a[2])),i.length>t){if(s&&-1===(t=i.indexOf(" ",t)))return i;i=i.slice(0,t)+l}return i},slice:function(e,t){if(null!=e){if(void 0===t||0===t.length)throw new b.Error("slice filter expects at least 1 argument");var r=t[0]||0,n=1<t.length?t[1]:e.length,o=0<=r?r:Math.max(e.length+r,0);if(b.lib.is("Array",e)){for(var i=[],s=o;s<o+n&&s<e.length;s++)i.push(e[s]);return i}if(b.lib.is("String",e))return e.slice(o,o+n);throw new b.Error("slice filter expects value to be an array or string")}},abs:function(t){if(null!=t)return Math.abs(t)},first:function(t){if(l("Array",t))return t[0];if(l("Object",t)){if("_keys"in t)return t[t._keys[0]];}else if("string"==typeof t)return t.slice(0,1)},split:function(e,t){if(null!=e){if(void 0===t||0===t.length||2<t.length)throw new b.Error("split filter expects 1 or 2 argument");if(b.lib.is("String",e)){var r=t[0],n=t[1],o=e.split(r);if(void 0===n)return o;if(0>n)return e.split(r,o.length+n);var i=[];if(""===r)for(;0<o.length;){for(var s="",l=0;l<n&&0<o.length;l++)s+=o.shift();i.push(s)}else{for(var d=0;d<n-1&&0<o.length;d++)i.push(o.shift());0<o.length&&i.push(o.join(r))}return i}throw new b.Error("split filter expects value to be a string")}},last:function(e){var t;return b.lib.is("Object",e)?e[(t=void 0===e._keys?Object.keys(e):e._keys)[t.length-1]]:b.lib.is("Number",e)?e.toString().slice(-1):e[e.length-1]},raw:function(e){return new b.Markup(e||"")},batch:function(e,t){var r=t.shift(),l=t.shift(),s,d;if(!b.lib.is("Array",e))throw new b.Error("batch filter expects items to be an array");if(!b.lib.is("Number",r))throw new b.Error("batch filter expects size to be a number");r=Math.ceil(r);var p=b.lib.chunkArray(e,r);if(l&&0!=e.length%r){for(d=r-(s=p.pop()).length;d--;)s.push(l);p.push(s)}return p},round:function(e,i){var a=0<(i=i||[]).length?i[0]:0,n=1<i.length?i[1]:"common";if(e=parseFloat(e),a&&!b.lib.is("Number",a))throw new b.Error("round filter expects precision to be a number");if("common"===n)return b.lib.round(e,a);if(!b.lib.is("Function",Math[n]))throw new b.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[n](e*Math.pow(10,a))/Math.pow(10,a)},spaceless:function(t){return t.replace(/>\s+</g,"><").trim()}},b.filter=function(e,t,o){if(!b.filters[e])throw new b.Error("Unable to find filter "+e);return b.filters[e].call(this,t,o)},b.filter.extend=function(e,t){b.filters[e]=t},b}},function(a,e,t){"use strict";var o=t(0)(t(1));a.exports=function(i){return i.functions={range:function(l,e,t){var r=[],i=t||1,s=!1,d,p;if(isNaN(l)||isNaN(e)?isNaN(l)&&isNaN(e)?(s=!0,d=l.charCodeAt(0),p=e.charCodeAt(0)):(d=isNaN(l)?0:l,p=isNaN(e)?0:e):(d=parseInt(l,10),p=parseInt(e,10)),!(d>p))for(;d<=p;)r.push(s?String.fromCharCode(d):d),d+=i;else for(;d>=p;)r.push(s?String.fromCharCode(d):d),d-=i;return r},cycle:function(n,e){return n[e%n.length]},dump:function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];var a=[].concat(e),d=this,i="\n",s=0,m="",g=function(n){for(var o="";0<n;)n--,o+="  ";return o},l=function(t){m+=g(s),"object"===(0,o.default)(t)?u(t):"function"==typeof t?m+="function()"+i:"string"==typeof t?m+="string("+t.length+") \""+t+"\""+i:"number"==typeof t?m+="number("+t+")"+i:"boolean"==typeof t&&(m+="bool("+t+")"+i)},u=function(n){if(null===n)m+="NULL"+i;else if(void 0===n)m+="undefined"+i;else if("object"===(0,o.default)(n)){for(var e in m+=g(s)+(0,o.default)(n),s++,m+="("+function(n){var e=0,o;for(o in n)Object.hasOwnProperty.call(n,o)&&e++;return e}(n)+") {"+i,n)Object.hasOwnProperty.call(n,e)&&(m+=g(s)+"["+e+"]=> "+i,l(n[e]));s--,m+=g(s)+"}"+i}else l(n)};return 0===a.length&&a.push(d.context),a.forEach(function(t){u(t)}),m},date:function(t){var e;if(null==t||""===t)e=new Date;else if(i.lib.is("Date",t))e=t;else if(i.lib.is("String",t))e=t.match(/^\d+$/)?new Date(1e3*t):new Date(1e3*i.lib.strtotime(t));else{if(!i.lib.is("Number",t))throw new i.Error("Unable to parse date "+t);e=new Date(1e3*t)}return e},block:function(n){var e=this.getBlock(n);if(void 0!==e)return e.render(this,this.context)},parent:function(){return this.getBlock(this.getNestingStackToken(i.logic.type.block).blockName,!0).render(this,this.context)},attribute:function(t,e,o){return i.lib.is("Object",t)&&Object.hasOwnProperty.call(t,e)?"function"==typeof t[e]?t[e].apply(void 0,o):t[e]:t&&t[e]||void 0},max:function(t){if(i.lib.is("Object",t))return delete t._keys,i.lib.max(t);for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Reflect.apply(i.lib.max,null,[t].concat(r))},min:function(t){if(i.lib.is("Object",t))return delete t._keys,i.lib.min(t);for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Reflect.apply(i.lib.min,null,[t].concat(r))},template_from_string:function(t){return void 0===t&&(t=""),i.Templates.parsers.twig({options:this.template.options,data:t})},random:function(t){function e(o){var e=Math.floor(2147483648*Math.random()),t=Math.min.call(null,0,o),i=Math.max.call(null,0,o);return t+Math.floor((i-t+1)*e/2147483648)}if(i.lib.is("Number",t))return e(t);if(i.lib.is("String",t))return t.charAt(e(t.length-1));if(i.lib.is("Array",t))return t[e(t.length-1)];if(i.lib.is("Object",t)){var o=Object.keys(t);return t[o[e(o.length-1)]]}return e(2147483647)},source:function(e,t){var r=!1,l={id:e,path:e,method:void 0!==a.exports&&"undefined"==typeof window?"fs":"ajax",parser:"source",async:!1,fetchTemplateSource:!0},s;void 0===t&&(t=!1);try{null==(s=i.Templates.loadRemote(e,l))?s="":r=!0}catch(t){i.log.debug("Twig.functions.source: ","Problem loading template  ",t)}return r||t?s:"Template \"{name}\" is not defined.".replace("{name}",e)}},i._function=function(t,e,o){if(!i.functions[t])throw new i.Error("Unable to find function "+t);return i.functions[t](e,o)},i._function.extend=function(t,e){i.functions[t]=e},i}},function(n,e,t){"use strict";n.exports=function(n){return n.lib={},n.lib.sprintf=t(4),n.lib.vsprintf=t(21),n.lib.round=t(22),n.lib.max=t(24),n.lib.min=t(25),n.lib.stripTags=t(26),n.lib.strtotime=t(28),n.lib.date=t(29),n.lib.boolval=t(30),n.lib.is=function(n,e){if(null==e)return!1;return"Array"===n?Array.isArray(e):"Date"===n?e instanceof Date:"String"===n?"string"==typeof e||e instanceof String:"Number"===n?"number"==typeof e||e instanceof Number:"Function"===n?"function"==typeof e:!("Object"!=n)&&e instanceof Object},n.lib.replaceAll=function(o,e,t){var i=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return o.replace(new RegExp(i,"g"),t)},n.lib.chunkArray=function(i,e){var t=[],r=0,a=i.length;if(1>e||!Array.isArray(i))return[];for(;r<a;)t.push(i.slice(r,r+=e));return t},n}},function(n,e,o){"use strict";n.exports=function(n,e){return o(4).apply(this,[n].concat(e))}},function(o,e,l){"use strict";function r(n,e){var t=Math.floor(Math.abs(n)+.5);return("PHP_ROUND_HALF_DOWN"===e&&n===t-.5||"PHP_ROUND_HALF_EVEN"===e&&n===.5+2*Math.floor(t/2)||"PHP_ROUND_HALF_ODD"===e&&n===.5+2*Math.floor(t/2)-1)&&(t-=1),0>n?-t:t}o.exports=function(n){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"PHP_ROUND_HALF_UP",i=l(23),s=l(5),a;if(n=i(n),d=s(d),a=Math.pow(10,d),isNaN(n)||!isFinite(n))return n;if(Math.trunc(n)===n&&0<=d)return n;var u=14-Math.floor(Math.log10(Math.abs(n)));return u>d&&u-15<d?(n=r(n*Math.pow(10,u),p),n/=Math.pow(10,Math.abs(d-u))):n*=a,(n=r(n,p))/a}},function(o,e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o.exports=function(n){switch(void 0===n?"undefined":i(n)){case"number":return n;case"string":return parseFloat(n)||0;case"boolean":default:return t(5)(n);}}},function(t){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var n=0,d=0,p=arguments,i=p.length,u=function(n){if("[object Array]"===Object.prototype.toString.call(n))return n;var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(n[t]);return e},a=function n(e,a){var d=0,m=0,g=0,h=0,f=0;if(e===a)return 0;if("object"===(void 0===e?"undefined":l(e))){if("object"===(void 0===a?"undefined":l(a))){if(e=u(e),a=u(a),f=e.length,(h=a.length)>f)return 1;if(h<f)return-1;for(d=0,m=f;d<m;++d){if(1===(g=n(e[d],a[d])))return 1;if(-1===g)return-1}return 0}return-1}return"object"===(void 0===a?"undefined":l(a))?1:isNaN(a)&&!isNaN(e)?0===e?0:0>e?1:-1:isNaN(e)&&!isNaN(a)?0===a?0:0<a?1:-1:a===e?0:a>e?1:-1},s,c;if(0===i)throw new Error("At least one value should be passed to max()");if(1===i){if("object"!==l(p[0]))throw new Error("Wrong parameter count for max()");if(0===(s=u(p[0])).length)throw new Error("Array must contain at least one element for max()")}else s=p;for(c=s[0],n=1,d=s.length;n<d;++n)1===a(c,s[n])&&(c=s[n]);return c}},function(t){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var n=0,d=0,p=arguments,i=p.length,u=function(n){if("[object Array]"===Object.prototype.toString.call(n))return n;var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(n[t]);return e},a=function n(e,a){var d=0,m=0,g=0,h=0,f=0;if(e===a)return 0;if("object"===(void 0===e?"undefined":l(e))){if("object"===(void 0===a?"undefined":l(a))){if(e=u(e),a=u(a),f=e.length,(h=a.length)>f)return 1;if(h<f)return-1;for(d=0,m=f;d<m;++d){if(1===(g=n(e[d],a[d])))return 1;if(-1===g)return-1}return 0}return-1}return"object"===(void 0===a?"undefined":l(a))?1:isNaN(a)&&!isNaN(e)?0===e?0:0>e?1:-1:isNaN(e)&&!isNaN(a)?0===a?0:0<a?1:-1:a===e?0:a>e?1:-1},s,c;if(0===i)throw new Error("At least one value should be passed to min()");if(1===i){if("object"!==l(p[0]))throw new Error("Wrong parameter count for min()");if(0===(s=u(p[0])).length)throw new Error("Array must contain at least one element for min()")}else s=p;for(c=s[0],n=1,d=s.length;n<d;++n)-1===a(c,s[n])&&(c=s[n]);return c}},function(n,e,l){"use strict";n.exports=function(r,d){var e=l(27);d=(((d||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z0-9]*)\b[^>]*>?/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,i=e(r);for(i="<"===i.substring(i.length-1)?i.substring(0,i.length-1):i;;){var p=i;if(i=p.replace(o,"").replace(n,function(t,e){return-1<d.indexOf("<"+e.toLowerCase()+">")?t:""}),p===i)return i}}},function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":o(t)){case"boolean":return t?"1":"";case"string":return t;case"number":return isNaN(t)?"NAN":isFinite(t)?t+"":(0>t?"-":"")+"INF";case"undefined":return"";case"object":return Array.isArray(t)?"Array":null===t?"":"Object";case"function":default:throw new Error("Unsupported value type");}}},function(t){"use strict";function a(n,o){switch(o=o&&o.toLowerCase()){case"a":n+=12===n?-12:0;break;case"p":n+=12===n?0:12;}return n}function o(n){var e=+n;return 4>n.length&&100>e&&(e+=70>e?2e3:1900),e}function l(t){return{jan:0,january:0,i:0,feb:1,february:1,ii:1,mar:2,march:2,iii:2,apr:3,april:3,iv:3,may:4,v:4,jun:5,june:5,vi:5,jul:6,july:6,vii:6,aug:7,august:7,viii:7,sep:8,sept:8,september:8,ix:8,oct:9,october:9,x:9,nov:10,november:10,xi:10,dec:11,december:11,xii:11}[t.toLowerCase()]}function s(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return{mon:1,monday:1,tue:2,tuesday:2,wed:3,wednesday:3,thu:4,thursday:4,fri:5,friday:5,sat:6,saturday:6,sun:0,sunday:0}[n.toLowerCase()]||e}function d(i,a){if(!(i=i&&i.match(/(?:GMT)?([+-])(\d+)(:?)(\d{0,2})/i)))return a;var t="-"===i[1]?1:-1,r=+i[2],s=+i[4];return i[4]||i[3]||(s=Math.floor(r%100),r=Math.floor(r/100)),t*(60*r+s)}var u={yesterday:{regex:/^yesterday/i,name:"yesterday",callback:function(){return this.rd-=1,this.resetTime()}},now:{regex:/^now/i,name:"now"},noon:{regex:/^noon/i,name:"noon",callback:function(){return this.resetTime()&&this.time(12,0,0,0)}},midnightOrToday:{regex:/^(midnight|today)/i,name:"midnight | today",callback:function(){return this.resetTime()}},tomorrow:{regex:/^tomorrow/i,name:"tomorrow",callback:function(){return this.rd+=1,this.resetTime()}},timestamp:{regex:/^@(-?\d+)/i,name:"timestamp",callback:function(n,e){return this.rs+=+e,this.y=1970,this.m=0,this.d=1,this.dates=0,this.resetTime()&&this.zone(0)}},firstOrLastDay:{regex:/^(first|last) day of/i,name:"firstdayof | lastdayof",callback:function(n,e){this.firstOrLastDayOfMonth="first"===e.toLowerCase()?1:-1}},backOrFrontOf:{regex:/^(back|front) of (2[0-4]|[01]?[0-9])[ \t]*(?:([ap])\.?m\.?([\t ]|$))?/i,name:"backof | frontof",callback:function(s,e,t,r){var n=+t,l=15;return"back"===e.toLowerCase()||(n-=1,l=45),n=a(n,r),this.resetTime()&&this.time(n,l,0,0)}},weekdayOf:{regex:/^(first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth|next|last|previous|this)[ \t]+(sunday|monday|tuesday|wednesday|thursday|friday|saturday|sun|mon|tue|wed|thu|fri|sat)[ \t]+of/i,name:"weekdayof"},mssqltime:{regex:/^(0?[1-9]|1[0-2]):([0-5][0-9]):(60|[0-5][0-9])[:.]([0-9]+)(?:([ap])\.?m\.?([\t ]|$))/i,name:"mssqltime",callback:function(s,e,t,r,n,o){return this.time(a(+e,o),+t,+r,+n.substr(0,3))}},timeLong12:{regex:/^(0?[1-9]|1[0-2])[:.]([0-5]?[0-9])[:.](60|[0-5][0-9])[ \t]*(?:([ap])\.?m\.?([\t ]|$))/i,name:"timelong12",callback:function(i,e,t,r,n){return this.time(a(+e,n),+t,+r,0)}},timeShort12:{regex:/^(0?[1-9]|1[0-2])[:.]([0-5][0-9])[ \t]*(?:([ap])\.?m\.?([\t ]|$))/i,name:"timeshort12",callback:function(o,e,t,i){return this.time(a(+e,i),+t,0,0)}},timeTiny12:{regex:/^(0?[1-9]|1[0-2])[ \t]*(?:([ap])\.?m\.?([\t ]|$))/i,name:"timetiny12",callback:function(n,e,t){return this.time(a(+e,t),0,0,0)}},soap:{regex:/^([0-9]{4})-(0[0-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[01])T([01][0-9]|2[0-4]):([0-5][0-9]):(60|[0-5][0-9])(?:\.([0-9]+))((?:GMT)?([+-])(2[0-4]|[01]?[0-9]):?([0-5]?[0-9])?)?/i,name:"soap",callback:function(l,e,t,r,n,o,i,s,a){return this.ymd(+e,t-1,+r)&&this.time(+n,+o,+i,+s.substr(0,3))&&this.zone(d(a))}},wddx:{regex:/^([0-9]{4})-(1[0-2]|0?[0-9])-(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)T(2[0-4]|[01]?[0-9]):([0-5]?[0-9]):(60|[0-5]?[0-9])/,name:"wddx",callback:function(a,e,t,r,n,o,i){return this.ymd(+e,t-1,+r)&&this.time(+n,+o,+i,0)}},exif:{regex:/^([0-9]{4}):(0[0-9]|1[0-2]):(0[0-9]|[1-2][0-9]|3[01]) ([01][0-9]|2[0-4]):([0-5][0-9]):(60|[0-5][0-9])/i,name:"exif",callback:function(a,e,t,r,n,o,i){return this.ymd(+e,t-1,+r)&&this.time(+n,+o,+i,0)}},xmlRpc:{regex:/^([0-9]{4})(0[0-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[01])T(2[0-4]|[01]?[0-9]):([0-5][0-9]):(60|[0-5][0-9])/,name:"xmlrpc",callback:function(a,e,t,r,n,o,i){return this.ymd(+e,t-1,+r)&&this.time(+n,+o,+i,0)}},xmlRpcNoColon:{regex:/^([0-9]{4})(0[0-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[01])[Tt](2[0-4]|[01]?[0-9])([0-5][0-9])(60|[0-5][0-9])/,name:"xmlrpcnocolon",callback:function(a,e,t,r,n,o,i){return this.ymd(+e,t-1,+r)&&this.time(+n,+o,+i,0)}},clf:{regex:/^(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)\/(jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec)\/([0-9]{4}):([01][0-9]|2[0-4]):([0-5][0-9]):(60|[0-5][0-9])[ \t]+((?:GMT)?([+-])(2[0-4]|[01]?[0-9]):?([0-5]?[0-9])?)/i,name:"clf",callback:function(p,e,t,r,n,o,i,s){return this.ymd(+r,l(t),+e)&&this.time(+n,+o,+i,0)&&this.zone(d(s))}},iso8601long:{regex:/^t?(2[0-4]|[01]?[0-9])[:.]([0-5]?[0-9])[:.](60|[0-5]?[0-9])(?:\.([0-9]+))/i,name:"iso8601long",callback:function(i,e,t,r,n){return this.time(+e,+t,+r,+n.substr(0,3))}},dateTextual:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]+([0-9]{1,4})/i,name:"datetextual",callback:function(i,e,t,r){return this.ymd(o(r),l(e),+t)}},pointedDate4:{regex:/^(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[.\t-](1[0-2]|0?[0-9])[.-]([0-9]{4})/,name:"pointeddate4",callback:function(o,e,t,i){return this.ymd(+i,t-1,+e)}},pointedDate2:{regex:/^(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[.\t](1[0-2]|0?[0-9])\.([0-9]{2})/,name:"pointeddate2",callback:function(i,e,t,r){return this.ymd(o(r),t-1,+e)}},timeLong24:{regex:/^t?(2[0-4]|[01]?[0-9])[:.]([0-5]?[0-9])[:.](60|[0-5]?[0-9])/,name:"timelong24",callback:function(o,e,t,i){return this.time(+e,+t,+i,0)}},dateNoColon:{regex:/^([0-9]{4})(0[0-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[01])/,name:"datenocolon",callback:function(o,e,t,i){return this.ymd(+e,t-1,+i)}},pgydotd:{regex:/^([0-9]{4})\.?(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])/,name:"pgydotd",callback:function(n,e,t){return this.ymd(+e,0,+t)}},timeShort24:{regex:/^t?(2[0-4]|[01]?[0-9])[:.]([0-5]?[0-9])/i,name:"timeshort24",callback:function(n,e,t){return this.time(+e,+t,0,0)}},iso8601noColon:{regex:/^t?([01][0-9]|2[0-4])([0-5][0-9])(60|[0-5][0-9])/i,name:"iso8601nocolon",callback:function(o,e,t,i){return this.time(+e,+t,+i,0)}},iso8601dateSlash:{regex:/^([0-9]{4})\/(0[0-9]|1[0-2])\/(0[0-9]|[1-2][0-9]|3[01])\//,name:"iso8601dateslash",callback:function(o,e,t,i){return this.ymd(+e,t-1,+i)}},dateSlash:{regex:/^([0-9]{4})\/(1[0-2]|0?[0-9])\/(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)/,name:"dateslash",callback:function(o,e,t,i){return this.ymd(+e,t-1,+i)}},american:{regex:/^(1[0-2]|0?[0-9])\/(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)\/([0-9]{1,4})/,name:"american",callback:function(i,e,t,r){return this.ymd(o(r),e-1,+t)}},americanShort:{regex:/^(1[0-2]|0?[0-9])\/(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)/,name:"americanshort",callback:function(n,e,t){return this.ymd(this.y,e-1,+t)}},gnuDateShortOrIso8601date2:{regex:/^([0-9]{1,4})-(1[0-2]|0?[0-9])-(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)/,name:"gnudateshort | iso8601date2",callback:function(i,e,t,r){return this.ymd(o(e),t-1,+r)}},iso8601date4:{regex:/^([+-]?[0-9]{4})-(0[0-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[01])/,name:"iso8601date4",callback:function(o,e,t,i){return this.ymd(+e,t-1,+i)}},gnuNoColon:{regex:/^t?([01][0-9]|2[0-4])([0-5][0-9])/i,name:"gnunocolon",callback:function(n,e,t){switch(this.times){case 0:return this.time(+e,+t,0,this.f);case 1:return this.y=100*e+ +t,this.times++,!0;default:return!1;}}},gnuDateShorter:{regex:/^([0-9]{4})-(1[0-2]|0?[0-9])/,name:"gnudateshorter",callback:function(n,e,t){return this.ymd(+e,t-1,1)}},pgTextReverse:{regex:/^(\d{3,4}|[4-9]\d|3[2-9])-(jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec)-(0[0-9]|[1-2][0-9]|3[01])/i,name:"pgtextreverse",callback:function(i,e,t,r){return this.ymd(o(e),l(t),+r)}},dateFull:{regex:/^(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[ \t.-]*(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ \t.-]*([0-9]{1,4})/i,name:"datefull",callback:function(i,e,t,r){return this.ymd(o(r),l(t),+e)}},dateNoDay:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*([0-9]{4})/i,name:"datenoday",callback:function(n,e,t){return this.ymd(+t,l(e),1)}},dateNoDayRev:{regex:/^([0-9]{4})[ .\t-]*(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})/i,name:"datenodayrev",callback:function(n,e,t){return this.ymd(+e,l(t),1)}},pgTextShort:{regex:/^(jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec)-(0[0-9]|[1-2][0-9]|3[01])-([0-9]{1,4})/i,name:"pgtextshort",callback:function(i,e,t,r){return this.ymd(o(r),l(e),+t)}},dateNoYear:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]*/i,name:"datenoyear",callback:function(n,e,t){return this.ymd(this.y,l(e),+t)}},dateNoYearRev:{regex:/^(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[ .\t-]*(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})/i,name:"datenoyearrev",callback:function(n,e,t){return this.ymd(this.y,l(t),+e)}},isoWeekDay:{regex:/^([0-9]{4})-?W(0[1-9]|[1-4][0-9]|5[0-3])(?:-?([0-7]))?/,name:"isoweekday | isoweek",callback:function(i,e,t,r){if(r=r?+r:1,!this.ymd(+e,0,1))return!1;var a=new Date(this.y,this.m,this.d).getDay();a=0-(4<a?a-7:a),this.rd+=a+7*(t-1)+r}},relativeText:{regex:/^(first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth|next|last|previous|this)[ \t]+((?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|sunday|monday|tuesday|wednesday|thursday|friday|saturday|sun|mon|tue|wed|thu|fri|sat|weekdays?)/i,name:"relativetext",callback:function(a,e,t){var r={amount:{last:-1,previous:-1,this:0,first:1,next:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eight:8,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12}[i=e.toLowerCase()],behavior:{this:1}[i]||0},o=r.amount,i;switch(t.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=o;break;case"min":case"mins":case"minute":case"minutes":this.ri+=o;break;case"hour":case"hours":this.rh+=o;break;case"day":case"days":this.rd+=o;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=14*o;break;case"week":case"weeks":this.rd+=7*o;break;case"month":case"months":this.rm+=o;break;case"year":case"years":this.ry+=o;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=s(t,7),this.weekdayBehavior=1,this.rd+=7*(0<o?o-1:o);}}},relative:{regex:/^([+-]*)[ \t]*(\d+)[ \t]*((?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|sunday|monday|tuesday|wednesday|thursday|friday|saturday|sun|mon|tue|wed|thu|fri|sat|weekdays?|week)/i,name:"relative",callback:function(a,e,t,r){var n=e.replace(/[^-]/g,"").length,o=+t*Math.pow(-1,n);switch(r.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=o;break;case"min":case"mins":case"minute":case"minutes":this.ri+=o;break;case"hour":case"hours":this.rh+=o;break;case"day":case"days":this.rd+=o;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=14*o;break;case"week":case"weeks":this.rd+=7*o;break;case"month":case"months":this.rm+=o;break;case"year":case"years":this.ry+=o;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=s(r,7),this.weekdayBehavior=1,this.rd+=7*(0<o?o-1:o);}}},dayText:{regex:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday|sun|mon|tue|wed|thu|fri|sat|weekdays?)/i,name:"daytext",callback:function(n,e){this.resetTime(),this.weekday=s(e,0),2!==this.weekdayBehavior&&(this.weekdayBehavior=1)}},relativeTextWeek:{regex:/^(next|last|previous|this)[ \t]+week/i,name:"relativetextweek",callback:function(n,e){switch(this.weekdayBehavior=2,e.toLowerCase()){case"this":this.rd+=0;break;case"next":this.rd+=7;break;case"last":case"previous":this.rd-=7;}isNaN(this.weekday)&&(this.weekday=1)}},monthFullOrMonthAbbr:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec)/i,name:"monthfull | monthabbr",callback:function(n,e){return this.ymd(this.y,l(e),this.d)}},tzCorrection:{regex:/^((?:GMT)?([+-])(2[0-4]|[01]?[0-9]):?([0-5]?[0-9])?)/i,name:"tzcorrection",callback:function(t){return this.zone(d(t))}},ago:{regex:/^ago/i,name:"ago",callback:function(){this.ry=-this.ry,this.rm=-this.rm,this.rd=-this.rd,this.rh=-this.rh,this.ri=-this.ri,this.rs=-this.rs,this.rf=-this.rf}},year4:{regex:/^([0-9]{4})/,name:"year4",callback:function(n,e){return this.y=+e,!0}},whitespace:{regex:/^[ .,\t]+/,name:"whitespace"},dateShortWithTimeLong:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]*t?(2[0-4]|[01]?[0-9])[:.]([0-5]?[0-9])[:.](60|[0-5]?[0-9])/i,name:"dateshortwithtimelong",callback:function(a,e,t,r,n,o){return this.ymd(this.y,l(e),+t)&&this.time(+r,+n,+o,0)}},dateShortWithTimeLong12:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]*(0?[1-9]|1[0-2])[:.]([0-5]?[0-9])[:.](60|[0-5][0-9])[ \t]*(?:([ap])\.?m\.?([\t ]|$))/i,name:"dateshortwithtimelong12",callback:function(d,e,t,r,n,o,i){return this.ymd(this.y,l(e),+t)&&this.time(a(+r,i),+n,+o,0)}},dateShortWithTimeShort:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]*t?(2[0-4]|[01]?[0-9])[:.]([0-5]?[0-9])/i,name:"dateshortwithtimeshort",callback:function(i,e,t,r,n){return this.ymd(this.y,l(e),+t)&&this.time(+r,+n,0,0)}},dateShortWithTimeShort12:{regex:/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec|i[vx]|vi{0,3}|xi{0,2}|i{1,3})[ .\t-]*(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)[,.stndrh\t ]*(0?[1-9]|1[0-2])[:.]([0-5][0-9])[ \t]*(?:([ap])\.?m\.?([\t ]|$))/i,name:"dateshortwithtimeshort12",callback:function(s,e,t,r,n,o){return this.ymd(this.y,l(e),+t)&&this.time(a(+r,o),+n,0,0)}}},m={y:NaN,m:NaN,d:NaN,h:NaN,i:NaN,s:NaN,f:NaN,ry:0,rm:0,rd:0,rh:0,ri:0,rs:0,rf:0,weekday:NaN,weekdayBehavior:0,firstOrLastDayOfMonth:0,z:NaN,dates:0,times:0,zones:0,ymd:function(n,e,t){return!(0<this.dates)&&(this.dates++,this.y=n,this.m=e,this.d=t,!0)},time:function(o,e,t,i){return!(0<this.times)&&(this.times++,this.h=o,this.i=e,this.s=t,this.f=i,!0)},resetTime:function(){return this.h=0,this.i=0,this.s=0,this.f=0,this.times=0,!0},zone:function(t){return 1>=this.zones&&(this.zones++,this.z=t,!0)},toDate:function(i){switch(this.dates&&!this.times&&(this.h=this.i=this.s=this.f=0),isNaN(this.y)&&(this.y=i.getFullYear()),isNaN(this.m)&&(this.m=i.getMonth()),isNaN(this.d)&&(this.d=i.getDate()),isNaN(this.h)&&(this.h=i.getHours()),isNaN(this.i)&&(this.i=i.getMinutes()),isNaN(this.s)&&(this.s=i.getSeconds()),isNaN(this.f)&&(this.f=i.getMilliseconds()),this.firstOrLastDayOfMonth){case 1:this.d=1;break;case-1:this.d=0,this.m+=1;}if(!isNaN(this.weekday)){var e=new Date(i.getTime());e.setFullYear(this.y,this.m,this.d),e.setHours(this.h,this.i,this.s,this.f);var t=e.getDay();if(2===this.weekdayBehavior)0===t&&0!==this.weekday&&(this.weekday=-6),0===this.weekday&&0!==t&&(this.weekday=7),this.d-=t,this.d+=this.weekday;else{var r=this.weekday-t;(0>this.rd&&0>r||0<=this.rd&&r<=-this.weekdayBehavior)&&(r+=7),0<=this.weekday?this.d+=r:this.d-=7-(Math.abs(this.weekday)-t),this.weekday=NaN}}this.y+=this.ry,this.m+=this.rm,this.d+=this.rd,this.h+=this.rh,this.i+=this.ri,this.s+=this.rs,this.f+=this.rf,this.ry=this.rm=this.rd=0,this.rh=this.ri=this.rs=this.rf=0;var a=new Date(i.getTime());switch(a.setFullYear(this.y,this.m,this.d),a.setHours(this.h,this.i,this.s,this.f),this.firstOrLastDayOfMonth){case 1:a.setDate(1);break;case-1:a.setMonth(a.getMonth()+1,0);}return isNaN(this.z)||a.getTimezoneOffset()===this.z||(a.setUTCFullYear(a.getFullYear(),a.getMonth(),a.getDate()),a.setUTCHours(a.getHours(),a.getMinutes()+this.z,a.getSeconds(),a.getMilliseconds())),a}};t.exports=function(l,d){null==d&&(d=Math.floor(Date.now()/1e3));for(var g=[u.yesterday,u.now,u.noon,u.midnightOrToday,u.tomorrow,u.timestamp,u.firstOrLastDay,u.backOrFrontOf,u.timeTiny12,u.timeShort12,u.timeLong12,u.mssqltime,u.timeShort24,u.timeLong24,u.iso8601long,u.gnuNoColon,u.iso8601noColon,u.americanShort,u.american,u.iso8601date4,u.iso8601dateSlash,u.dateSlash,u.gnuDateShortOrIso8601date2,u.gnuDateShorter,u.dateFull,u.pointedDate4,u.pointedDate2,u.dateNoDay,u.dateNoDayRev,u.dateTextual,u.dateNoYear,u.dateNoYearRev,u.dateNoColon,u.xmlRpc,u.xmlRpcNoColon,u.soap,u.wddx,u.exif,u.pgydotd,u.isoWeekDay,u.pgTextShort,u.pgTextReverse,u.clf,u.year4,u.ago,u.dayText,u.relativeTextWeek,u.relativeText,u.monthFullOrMonthAbbr,u.tzCorrection,u.dateShortWithTimeShort12,u.dateShortWithTimeLong12,u.dateShortWithTimeShort,u.dateShortWithTimeLong,u.relative,u.whitespace],r=Object.create(m);l.length;){for(var n=null,h=null,f=0,y=g.length;f<y;f++){var a=g[f],c=l.match(a.regex);c&&(!n||c[0].length>n[0].length)&&(n=c,h=a)}if(!h||h.callback&&!1===h.callback.apply(r,n))return!1;l=l.substr(n[0].length),h=null,n=null}return Math.floor(r.toDate(new Date(1e3*d))/1e3)}},function(t){"use strict";t.exports=function(l,e){var t=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,i=function(n,e){return d[n]?d[n]():e},s=function(n,o){for(n+="";n.length<o;)n="0"+n;return n},a,d;return d={d:function(){return s(d.j(),2)},D:function(){return d.l().slice(0,3)},j:function(){return a.getDate()},l:function(){return t[d.w()]+"day"},N:function(){return d.w()||7},S:function(){var n=d.j(),e=n%10;return 3>=e&&1===parseInt(n%100/10,10)&&(e=0),["st","nd","rd"][e-1]||"th"},w:function(){return a.getDay()},z:function(){var n=new Date(d.Y(),d.n()-1,d.j()),e=new Date(d.Y(),0,1);return Math.round((n-e)/864e5)},W:function(){var n=new Date(d.Y(),d.n()-1,d.j()-d.N()+3),e=new Date(n.getFullYear(),0,4);return s(1+Math.round((n-e)/864e5/7),2)},F:function(){return t[6+d.n()]},m:function(){return s(d.n(),2)},M:function(){return d.F().slice(0,3)},n:function(){return a.getMonth()+1},t:function(){return new Date(d.Y(),d.n(),0).getDate()},L:function(){var t=d.Y();return 0==t%4&0!=t%100|0==t%400},o:function(){var n=d.n(),e=d.W();return d.Y()+(12===n&&9>e?1:1===n&&9<e?-1:0)},Y:function(){return a.getFullYear()},y:function(){return d.Y().toString().slice(-2)},a:function(){return 11<a.getHours()?"pm":"am"},A:function(){return d.a().toUpperCase()},B:function(){var o=3600*a.getUTCHours(),e=60*a.getUTCMinutes(),t=a.getUTCSeconds();return s(Math.floor((o+e+t+3600)/86.4)%1e3,3)},g:function(){return d.G()%12||12},G:function(){return a.getHours()},h:function(){return s(d.g(),2)},H:function(){return s(d.G(),2)},i:function(){return s(a.getMinutes(),2)},s:function(){return s(a.getSeconds(),2)},u:function(){return s(1e3*a.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(d.Y(),0)-Date.UTC(d.Y(),0)==new Date(d.Y(),6)-Date.UTC(d.Y(),6)?0:1},O:function(){var n=a.getTimezoneOffset(),e=Math.abs(n);return(0<n?"-":"+")+s(100*Math.floor(e/60)+e%60,4)},P:function(){var t=d.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-a.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,i)},r:function(){return"D, d M Y H:i:s O".replace(o,i)},U:function(){return 0|a/1e3}},function(n,e){return a=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e),n.replace(o,i)}(l,e)}},function(t){"use strict";t.exports=function(t){return!1!==t&&0!==t&&0!==t&&""!==t&&"0"!==t&&(!Array.isArray(t)||0!==t.length)&&null!=t}},function(t){"use strict";t.exports=function(l){l.Templates.registerLoader("ajax",function(e,t,r,n){var o=t.precompiled,s=this.parsers[t.parser]||this.parser.twig,a;if("undefined"==typeof XMLHttpRequest)throw new l.Error("Unsupported platform: Unable to do ajax requests because there is no \"XMLHTTPRequest\" implementation");var d=new XMLHttpRequest;return d.onreadystatechange=function(){var i=null;4===d.readyState&&(200===d.status||window.cordova&&0===d.status?(l.log.debug("Got template ",d.responseText),i=!0===o?JSON.parse(d.responseText):d.responseText,t.url=e,t.data=i,a=s.call(this,t),"function"==typeof r&&r(a)):"function"==typeof n&&n(d))},d.open("GET",e,!!t.async),d.overrideMimeType("text/plain"),d.send(),!!t.async||a})}},function(n,e,t){"use strict";n.exports=function(d){var e,m;try{e=t(33),m=t(6)}catch(t){console.warn("Missing fs and path modules. "+t)}d.Templates.registerLoader("fs",function(n,g,o,i){var r=g.precompiled,s=this.parsers[g.parser]||this.parser.twig,l,t;if(!e||!m)throw new d.Error("Unsupported platform: Unable to load from file because there is no \"fs\" or \"path\" implementation");var p=function(a,e){a?"function"==typeof i&&i(a):(!0===r&&(e=JSON.parse(e)),g.data=e,g.path=g.path||n,l=s.call(this,g),"function"==typeof o&&o(l))};if(g.path=g.path||n,g.async)return e.stat(g.path,function(t,o){!t&&o.isFile()?e.readFile(g.path,"utf8",p):"function"==typeof i&&i(new d.Error("Unable to find template file "+g.path))}),!0;try{if(!e.statSync(g.path).isFile())throw new d.Error("Unable to find template file "+g.path)}catch(e){throw new d.Error("Unable to find template file "+g.path+". "+e)}return t=e.readFileSync(g.path,"utf8"),p(void 0,t),l})}},function(){},function(t){function m(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(n){if(o===setTimeout)return setTimeout(n,0);if((o===m||!o)&&setTimeout)return o=setTimeout,setTimeout(n,0);try{return o(n,0)}catch(e){try{return o.call(null,n,0)}catch(e){return o.call(this,n,0)}}}function a(){b&&v&&(b=!1,v.length?y=v.concat(y):_=-1,y.length&&g())}function g(){if(!b){var n=s(a);b=!0;for(var e=y.length;e;){for(v=y,y=[];++_<e;)v&&v[_].run();_=-1,e=y.length}v=null,b=!1,function(n){if(f===clearTimeout)return clearTimeout(n);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(n);try{f(n)}catch(e){try{return f.call(null,n)}catch(e){return f.call(this,n)}}}(n)}}function h(n,e){this.fun=n,this.array=e}function e(){}var d=t.exports={},o,f;!function(){try{o="function"==typeof setTimeout?setTimeout:m}catch(t){o=m}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var y=[],b=!1,_=-1,v;d.nextTick=function(n){var e=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];y.push(new h(n,e)),1!==y.length||b||s(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=e,d.addListener=e,d.once=e,d.off=e,d.removeListener=e,d.removeAllListeners=e,d.emit=e,d.prependListener=e,d.prependOnceListener=e,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(l,e,t){"use strict";function d(i,l){var t;if("undefined"==typeof Symbol||null==i[Symbol.iterator]){if(Array.isArray(i)||(t=function(n,e){if(n){if("string"==typeof n)return o(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(n,e):void 0}}(i))||l&&i&&"number"==typeof i.length){t&&(i=t);var d=0,p=function(){};return{s:p,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(t){throw t},f:p}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=!0,m=!1,g;return{s:function(){t=i[Symbol.iterator]()},n:function(){var n=t.next();return u=n.done,n},e:function(t){m=!0,g=t},f:function(){try{u||null==t.return||t.return()}finally{if(m)throw g}}}}function o(o,e){(null==e||e>o.length)&&(e=o.length);for(var i=0,a=Array(e);i<e;i++)a[i]=o[i];return a}function i(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),t.push.apply(t,i)}return t}function m(n){for(var e=1,o;e<arguments.length;e++)o=null==arguments[e]?{}:arguments[e],e%2?i(Object(o),!0).forEach(function(e){(0,a.default)(n,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))});return n}var a=t(0)(t(2));l.exports=function(g){for(g.logic={},g.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",apply:"Twig.logic.type.apply",endapply:"Twig.logic.type.endapply",do:"Twig.logic.type.do",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed",with:"Twig.logic.type.with",endwith:"Twig.logic.type.endwith",deprecated:"Twig.logic.type.deprecated"},g.logic.definitions=[{type:g.logic.type.if_,regex:/^if\s?([\s\S]+)$/,next:[g.logic.type.else_,g.logic.type.elseif,g.logic.type.endif],open:!0,compile:function(e){var t=e.match[1];return e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,delete e.match,e},parse:function(e,t,r){var a=this;return g.expression.parseAsync.call(a,e.stack,t).then(function(n){return r=!0,g.lib.boolval(n)?(r=!1,a.parseAsync(e.output,t)):""}).then(function(t){return{chain:r,output:t}})}},{type:g.logic.type.elseif,regex:/^elseif\s?([^\s].*)$/,next:[g.logic.type.else_,g.logic.type.elseif,g.logic.type.endif],open:!1,compile:function(e){var t=e.match[1];return e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,delete e.match,e},parse:function(e,t,r){var a=this;return g.expression.parseAsync.call(a,e.stack,t).then(function(n){return r&&g.lib.boolval(n)?(r=!1,a.parseAsync(e.output,t)):""}).then(function(t){return{chain:r,output:t}})}},{type:g.logic.type.else_,regex:/^else$/,next:[g.logic.type.endif,g.logic.type.endfor],open:!1,parse:function(e,t,i){var n=g.Promise.resolve("");return i&&(n=this.parseAsync(e.output,t)),n.then(function(t){return{chain:i,output:t}})}},{type:g.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:g.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([\S\s]+?)(?:\s+if\s+([^\s].*))?$/,next:[g.logic.type.else_,g.logic.type.endfor],open:!0,compile:function(e){var t=e.match[1],r=e.match[2],n=e.match[3],o=null;if(e.keyVar=null,e.valueVar=null,t.includes(",")){if(2!==(o=t.split(",")).length)throw new g.Error("Invalid expression in for loop: "+t);e.keyVar=o[0].trim(),e.valueVar=o[1].trim()}else e.valueVar=t.trim();return e.expression=g.expression.compile.call(this,{type:g.expression.type.expression,value:r}).stack,n&&(e.conditional=g.expression.compile.call(this,{type:g.expression.type.expression,value:n}).stack),delete e.match,e},parse:function(a,d){var t=[],r=0,s=this,p=a.conditional,n=function(o,n){var i=m({},d);return i[a.valueVar]=n,a.keyVar&&(i[a.keyVar]=o),i.loop=function(o,e){var t=void 0!==p;return{index:o+1,index0:o,revindex:t?void 0:e-o,revindex0:t?void 0:e-o-1,first:0===o,last:t?void 0:o===e-1,length:t?void 0:e,parent:d}}(r,e),(void 0===p?g.Promise.resolve(!0):g.expression.parseAsync.call(s,p,i)).then(function(n){if(n)return s.parseAsync(a.output,i).then(function(n){t.push(n),r+=1})}).then(function(){delete i.loop,delete i[a.valueVar],delete i[a.keyVar],g.merge(d,i,!0)})},e,l;return g.expression.parseAsync.call(s,a.expression,d).then(function(o){return Array.isArray(o)?(e=o.length,g.async.forEach(o,function(t){return n(r,t)})):g.lib.is("Object",o)?(l=void 0===o._keys?Object.keys(o):o._keys,e=l.length,g.async.forEach(l,function(t){if("_keys"!==t)return n(t,o[t])})):void 0}).then(function(){return{chain:0===t.length,context:d,output:g.output.call(s.template,t)}})}},{type:g.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:g.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),i=e.match[2],n=g.expression.compile.call(this,{type:g.expression.type.expression,value:i}).stack;return e.key=t,e.expression=n,delete e.match,e},parse:function(e,t,i){var n=e.key;return g.expression.parseAsync.call(this,e.expression,t).then(function(o){return o===t&&(o=m({},o)),t[n]=o,{chain:i,context:t}})}},{type:g.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[g.logic.type.endset],open:!0,compile:function(n){var e=n.match[1].trim();return n.key=e,delete n.match,n},parse:function(i,a,t){var r=this,n=i.key;return r.parseAsync(i.output,a).then(function(o){return r.context[n]=o,a[n]=o,{chain:t,context:a}})}},{type:g.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:g.logic.type.filter,regex:/^filter\s+(.+)$/,next:[g.logic.type.endfilter],open:!0,compile:function(e){var t="|"+e.match[1].trim();return e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,delete e.match,e},parse:function(e,t,i){var r=this;return r.parseAsync(e.output,t).then(function(o){var n=[{type:g.expression.type.string,value:o}].concat(e.stack);return g.expression.parseAsync.call(r,n,t)}).then(function(t){return{chain:i,output:t}})}},{type:g.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:g.logic.type.apply,regex:/^apply\s+(.+)$/,next:[g.logic.type.endapply],open:!0,compile:function(e){var t="|"+e.match[1].trim();return e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,delete e.match,e},parse:function(e,t,i){var r=this;return r.parseAsync(e.output,t).then(function(o){var n=[{type:g.expression.type.string,value:o}].concat(e.stack);return g.expression.parseAsync.call(r,n,t)}).then(function(t){return{chain:i,output:t}})}},{type:g.logic.type.endapply,regex:/^endapply$/,next:[],open:!1},{type:g.logic.type.do,regex:/^do\s+([\S\s]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1],o=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack;return e.expression=o,delete e.match,e},parse:function(e,t,o){return g.expression.parseAsync.call(this,e.expression,t).then(function(){return{chain:o,context:t}})}},{type:g.logic.type.block,regex:/^block\s+(\w+)$/,next:[g.logic.type.endblock],open:!0,compile:function(t){return t.blockName=t.match[1].trim(),delete t.match,t},parse:function(e,t,i){var n=g.Promise.resolve();return this.template.blocks.defined[e.blockName]=new g.Block(this.template,e),(null===this.template.parentTemplate||this.template.parentTemplate instanceof g.Template)&&(n=this.getBlock(e.blockName).render(this,t)),n.then(function(t){return{chain:i,output:t}})}},{type:g.logic.type.shortblock,regex:/^block\s+(\w+)\s+(.+)$/,next:[],open:!0,compile:function(e){return e.expression=e.match[2].trim(),e.output=g.expression.compile({type:g.expression.type.expression,value:e.expression}).stack,g.logic.handler[g.logic.type.block].compile.apply(this,[e])},parse:function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return g.logic.handler[g.logic.type.block].parse.apply(e,i)}},{type:g.logic.type.endblock,regex:/^endblock(?:\s+(\w+))?$/,next:[],open:!1},{type:g.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,e},parse:function(e,t,i){var n=this;return g.expression.parseAsync.call(n,e.stack,t).then(function(o){if(Array.isArray(o)){var e=o.reverse().reduce(function(o,e){try{return{render:n.template.importFile(e),fileName:e}}catch(e){return o}},{render:null,fileName:null});null!==e.fileName&&(n.template.parentTemplate=e.fileName)}else n.template.parentTemplate=o;return{chain:i,output:""}})}},{type:g.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,e},parse:function(e,t,i){var a=this;return g.expression.parseAsync.call(a,e.stack,t).then(function(e){var t=a.template.importFile(e),o=new g.ParseState(t);return o.parseAsync(t.tokens).then(function(){a.template.blocks.imported=m(m({},a.template.blocks.imported),o.getBlocks())})}).then(function(){return{chain:i,output:""}})}},{type:g.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(e){var t=e.match,r=t[1].trim(),n=void 0!==t[2],o=t[3],i=void 0!==t[4]&&t[4].length;return delete e.match,e.only=i,e.ignoreMissing=n,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:r}).stack,void 0!==o&&(e.withStack=g.expression.compile.call(this,{type:g.expression.type.expression,value:o.trim()}).stack),e},parse:function(e,t,r){var n=e.only?{}:m({},t),a=e.ignoreMissing,i=this,s={chain:r,output:""};return(void 0===e.withStack?g.Promise.resolve():g.expression.parseAsync.call(i,e.withStack,t).then(function(t){n=m(m({},n),t)})).then(function(){return g.expression.parseAsync.call(i,e.stack,t)}).then(function(e){var t=(Array.isArray(e)?e:[e]).reduce(function(e,t){if(null===e.render){if(t instanceof g.Template)return{render:t.renderAsync(n,{isInclude:!0}),lastError:null};try{return{render:i.template.importFile(t).renderAsync(n,{isInclude:!0}),lastError:null}}catch(t){return{render:null,lastError:t}}}return e},{render:null,lastError:null});if(null!==t.render)return t.render;if(null===t.render&&a)return"";throw t.lastError}).then(function(t){return""!==t&&(s.output=t),s})}},{type:g.logic.type.spaceless,regex:/^spaceless$/,next:[g.logic.type.endspaceless],open:!0,parse:function(e,t,o){return this.parseAsync(e.output,t).then(function(e){var t=e.replace(/>\s+</g,"><").trim();return t=new g.Markup(t),{chain:o,output:t}})}},{type:g.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:g.logic.type.macro,regex:/^macro\s+(\w+)\s*\(\s*((?:\w+(?:\s*=\s*([\s\S]+))?(?:,\s*)?)*)\s*\)$/,next:[g.logic.type.endmacro],open:!0,compile:function(e){var t=e.match[1],r=e.match[2].split(/\s*,\s*/),n=r.map(function(t){return t.split(/\s*=\s*/)[0]}),o=n.length;if(1<o)for(var i={},s=0,l;s<o;s++){if(l=n[s],i[l])throw new g.Error("Duplicate arguments for parameter: "+l);i[l]=1}return e.macroName=t,e.parameters=n,e.defaults=r.reduce(function(e,t){var r=t.split(/\s*=\s*/),n=r[0],o=r[1];return e[n]=o?g.expression.compile.call(this,{type:g.expression.type.expression,value:o}).stack:void 0,e},{}),delete e.match,e},parse:function(e,t,i){var r=this;return r.macros[e.macroName]=function(){for(var o=arguments.length,a=Array(o),n=0;n<o;n++)a[n]=arguments[n];var i=m(m({},t),{},{_self:r.macros});return g.async.forEach(e.parameters,function(r,n){return void 0===a[n]?void 0===e.defaults[r]?(i[r]=void 0,!0):g.expression.parseAsync.call(this,e.defaults[r],t).then(function(e){return i[r]=e,g.Promise.resolve()}):(i[r]=a[n],!0)}).then(function(){return r.parseAsync(e.output,i)})},{chain:i,output:""}}},{type:g.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:g.logic.type.import_,regex:/^import\s+(.+)\s+as\s+(\w+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),o=e.match[2].trim();return delete e.match,e.expression=t,e.contextName=o,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,e},parse:function(a,e,t){var n=this,r={chain:t,output:""};return"_self"===a.expression?(e[a.contextName]=n.macros,r):g.expression.parseAsync.call(n,a.stack,e).then(function(t){return n.template.importFile(t||a.expression)}).then(function(t){var n=new g.ParseState(t);return n.parseAsync(t.tokens).then(function(){return e[a.contextName]=n.macros,r})})}},{type:g.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),n={},o=d(e.match[2].trim().split(/\s*,\s*/)),i;try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s.match(/^(\w+)\s+as\s+(\w+)$/);a?n[a[1].trim()]=a[2].trim():s.match(/^(\w+)$/)&&(n[s]=s)}}catch(t){o.e(t)}finally{o.f()}return delete e.match,e.expression=t,e.macroNames=n,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:t}).stack,e},parse:function(i,t,r){var n=this;return("_self"===i.expression?g.Promise.resolve(n.macros):g.expression.parseAsync.call(n,i.stack,t).then(function(t){return n.template.importFile(t||i.expression)}).then(function(e){var t=new g.ParseState(e);return t.parseAsync(e.tokens).then(function(){return t.macros})})).then(function(n){for(var e in i.macroNames)void 0!==n[e]&&(t[i.macroNames[e]]=n[e]);return{chain:r,output:""}})}},{type:g.logic.type.embed,regex:/^embed\s+(.+?)(?:\s+(ignore missing))?(?:\s+with\s+([\S\s]+?))?(?:\s+(only))?$/,next:[g.logic.type.endembed],open:!0,compile:function(e){var t=e.match,r=t[1].trim(),n=void 0!==t[2],o=t[3],i=void 0!==t[4]&&t[4].length;return delete e.match,e.only=i,e.ignoreMissing=n,e.stack=g.expression.compile.call(this,{type:g.expression.type.expression,value:r}).stack,void 0!==o&&(e.withStack=g.expression.compile.call(this,{type:g.expression.type.expression,value:o.trim()}).stack),e},parse:function(a,e,t){var l={},n=g.Promise.resolve(),d=this;return a.only||(l=m({},e)),void 0!==a.withStack&&(n=g.expression.parseAsync.call(d,a.withStack,e).then(function(t){l=m(m({},l),t)})),n.then(function(){return g.expression.parseAsync.call(d,a.stack,l)}).then(function(e){var t=new g.Template({data:a.output,id:d.template.id,base:d.template.base,path:d.template.path,url:d.template.url,name:d.template.name,method:d.template.method,options:d.template.options});try{t.importFile(e)}catch(t){if(a.ignoreMissing)return"";throw d=null,t}return t.parentTemplate=e,t.renderAsync(l,{isInclude:!0})}).then(function(n){return{chain:t,output:n}})}},{type:g.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:g.logic.type.with,regex:/^(?:with\s+([\S\s]+?))(?:\s|$)(only)?$/,next:[g.logic.type.endwith],open:!0,compile:function(e){var t=e.match,i=t[1],n=void 0!==t[2]&&t[2].length;return delete e.match,e.only=n,void 0!==i&&(e.withStack=g.expression.compile.call(this,{type:g.expression.type.expression,value:i.trim()}).stack),e},parse:function(e,t,r){var n={},a=this,s=g.Promise.resolve(),l;return e.only||(n=m({},t)),void 0!==e.withStack&&(s=g.expression.parseAsync.call(a,e.withStack,t).then(function(t){for(l in t)Object.hasOwnProperty.call(t,l)&&(n[l]=t[l])})),s.then(function(){return a.parseAsync(e.output,n)}).then(function(t){return{chain:r,output:t}})}},{type:g.logic.type.endwith,regex:/^endwith$/,next:[],open:!1},{type:g.logic.type.deprecated,regex:/^deprecated\s+(.+)$/,next:[],open:!0,compile:function(t){return console.warn("Deprecation notice: "+t.match[1]),t},parse:function(){return{}}}],g.logic.handler={},g.logic.extendType=function(e,t){t=t||"Twig.logic.type"+e,g.logic.type[e]=t},g.logic.extend=function(e){if(!e.type)throw new g.Error("Unable to extend logic definition. No type provided for "+e);g.logic.extendType(e.type),g.logic.handler[e.type]=e};0<g.logic.definitions.length;)g.logic.extend(g.logic.definitions.shift());return g.logic.compile=function(e){var t=e.value.trim(),i=g.logic.tokenize.call(this,t),r=g.logic.handler[i.type];return r.compile&&(i=r.compile.call(this,i),g.log.trace("Twig.logic.compile: ","Compiled logic token to ",i)),i},g.logic.tokenize=function(e){var l=null,d=null,p=null,u=null,m=null,h=null,f=null;for(l in e=e.trim(),g.logic.handler)if(Object.hasOwnProperty.call(g.logic.handler,l))for(d=g.logic.handler[l].type,u=p=g.logic.handler[l].regex,Array.isArray(p)||(u=[p]),m=u.length,h=0;h<m;h++)if(null!==(f=u[h].exec(e)))return g.log.trace("Twig.logic.tokenize: ","Matched a ",d," regular expression of ",f),{type:d,match:f};throw new g.Error("Unable to parse '"+e.trim()+"'")},g.logic.parse=function(e,t,r,n){return g.async.potentiallyAsync(this,n,function(){g.log.debug("Twig.logic.parse: ","Parsing logic token ",e);var n=g.logic.handler[e.type],i=this,a;return n.parse?(i.nestingStack.unshift(e),a=n.parse.call(i,e,t||{},r),g.isPromise(a)?a=a.then(function(t){return i.nestingStack.shift(),t}):i.nestingStack.shift(),a):""})},g}},function(t){"use strict";t.exports=function(t){t.Templates.registerParser("source",function(t){return t.data||""})}},function(t){"use strict";t.exports=function(n){n.Templates.registerParser("twig",function(e){return new n.Template(e)})}},function(o,e,i){"use strict";var l=i(0)(i(1));o.exports=function(n){return n.path={},n.path.parsePath=function(e,t){var r=null,d=e.options.namespaces,i=t||"";if(d&&"object"===(0,l.default)(d))for(r in d)if(i.includes(r)){var u=new RegExp("^"+r+"::"),a=new RegExp("^@"+r+"/"),c=d[r].replace(/([^/])$/,"$1/");if(u.test(i))return i=i.replace(u,c);if(a.test(i))return i=i.replace(a,c)}return n.path.relativePath(e,i)},n.path.relativePath=function(e,t){var r="/",d=[],c=t||"",m,g,h;if(e.url)m=void 0===e.base?e.url:e.base.replace(/([^/])$/,"$1/");else if(e.path){var y=i(6),l=y.sep||r,u=new RegExp("^\\.{1,2}"+l.replace("\\","\\\\"));c=c.replace(/\//g,l),void 0!==e.base&&null===c.match(u)?(c=c.replace(e.base,""),m=e.base+l):m=y.normalize(e.path),m=m.replace(l+l,l),r=l}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new n.Error("Cannot extend an inline template.");m=e.base||e.name||e.id}for((g=m.split(r)).pop(),g=g.concat(c.split(r));0<g.length;)"."===(h=g.shift())||(".."===h&&0<d.length&&".."!==d[d.length-1]?d.pop():d.push(h));return d.join(r)},n}},function(t){"use strict";t.exports=function(o){return o.tests={empty:function(n){if(null==n)return!0;if("number"==typeof n)return!1;if(0<n.length)return!1;for(var e in n)if(Object.hasOwnProperty.call(n,e))return!1;return!0},odd:function(t){return 1==t%2},even:function(t){return 0==t%2},divisibleby:function(n,e){return 0==n%e[0]},defined:function(t){return void 0!==t},none:function(t){return null===t},null:function(t){return this.none(t)},"same as":function(n,e){return n===e[0]},sameas:function(e,t){return console.warn("`sameas` is deprecated use `same as`"),o.tests["same as"](e,t)},iterable:function(e){return e&&(o.lib.is("Array",e)||o.lib.is("Object",e))}},o.test=function(e,t,i){if(!o.tests[e])throw o.Error("Test "+e+" is not defined.");return o.tests[e](t,i)},o.test.extend=function(e,t){o.tests[e]=t},o}},function(t){"use strict";t.exports=function(a){return a.ParseState.prototype.parseAsync=function(n,e){return this.parse(n,e,!0)},a.expression.parseAsync=function(e,t,o){return a.expression.parse.call(this,e,t,o,!0)},a.logic.parseAsync=function(e,t,o){return a.logic.parse.call(this,e,t,o,!0)},a.Template.prototype.renderAsync=function(n,e){return this.render(n,e,!0)},a.async={},a.isPromise=function(t){return t&&t.then&&"function"==typeof t.then},a.async.potentiallyAsync=function(e,t,o){return t?a.Promise.resolve(o.call(e)):function(e,t,r){var n=r.call(e),l=null,d=!0;if(!a.isPromise(n))return n;if(n.then(function(t){n=t,d=!1}).catch(function(t){l=t}),null!==l)throw l;if(d)throw new a.Error("You are using Twig.js in sync mode in combination with async extensions.");return n}(e,0,o)},a.Thenable=function(n,e,t){this.then=n,this._value=t?e:null,this._state=t||0},a.Thenable.prototype.catch=function(t){return 1===this._state?this:this.then(null,t)},a.Thenable.resolvedThen=function(e){try{return a.Promise.resolve(e(this._value))}catch(e){return a.Promise.reject(e)}},a.Thenable.rejectedThen=function(e,t){if(!t||"function"!=typeof t)return this;var i=this._value,o;try{o=t(i)}catch(e){o=a.Promise.reject(e)}return a.Promise.resolve(o)},a.Promise=function(e){var i=0,s=null,t=function(n,e){i=n,s=e};return function(n,e,t){try{n(e,t)}catch(n){t(n)}}(e,function(n){t(1,n)},function(n){t(2,n)}),1===i?a.Promise.resolve(s):2===i?a.Promise.reject(s):(t=new a.FullPromise).promise},a.FullPromise=function(){function l(t){t(p._value)}function r(n,e){e(p._value)}function e(t,e){if(!p._state&&(p._value=e,p._state=t,d=1===t?l:r,n)){if(-2===n[2])return d(n[0],n[1]),void(n=null);n.forEach(function(t){d(t[0],t[1])}),n=null}}var n=null,d=function(t,e){n=function(o,i,t){var r=[i,t,-2];return o?-2===o[2]?o=[o,r]:o.push(r):o=r,o}(n,t,e)},p=new a.Thenable(function(o,i){var t="function"==typeof o;if(1===p._state&&!t)return a.Promise.resolve(p._value);if(1===p._state)try{return a.Promise.resolve(o(p._value))}catch(e){return a.Promise.reject(e)}return new a.Promise(function(n,r){d(t?function(e){try{n(o(e))}catch(t){r(t)}}:n,"function"==typeof i?function(e){try{n(i(e))}catch(t){r(t)}}:r)})});return e.promise=p,e},a.Promise.defaultResolved=new a.Thenable(a.Thenable.resolvedThen,void 0,1),a.Promise.emptyStringResolved=new a.Thenable(a.Thenable.resolvedThen,"",1),a.Promise.resolve=function(e){return 0===arguments.length||void 0===e?a.Promise.defaultResolved:a.isPromise(e)?e:""===e?a.Promise.emptyStringResolved:new a.Thenable(a.Thenable.resolvedThen,e,1)},a.Promise.reject=function(e){return new a.Thenable(a.Thenable.rejectedThen,e,2)},a.Promise.all=function(e){var o=Array(e.length);return a.async.forEach(e,function(e,t){if(a.isPromise(e)){if(1!==e._state)return e.then(function(n){o[t]=n});o[t]=e._value}else o[t]=e}).then(function(){return o})},a.async.forEach=function(e,t){var i=e?e.length:0,n=0;return function o(){var r=null;do{if(n===i)return a.Promise.resolve();r=t(e[n],n),n++}while(!r||!a.isPromise(r)||1===r._state);return r.then(o)}()},a}},function(t){"use strict";t.exports=function(l){return l.exports={VERSION:l.VERSION},l.exports.twig=function(e){var t=e.id,o={strictVariables:e.strict_variables||!1,autoescape:null!==e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(l.cache&&t&&l.validateId(t),void 0!==e.debug&&(l.debug=e.debug),void 0!==e.trace&&(l.trace=e.trace),void 0!==e.data)return l.Templates.parsers.twig({data:e.data,path:Object.hasOwnProperty.call(e,"path")?e.path:void 0,module:e.module,id:t,options:o});if(void 0!==e.ref){if(void 0!==e.id)throw new l.Error("Both ref and id cannot be set on a twig.js template.");return l.Templates.load(e.ref)}if(void 0!==e.method){if(!l.Templates.isRegisteredLoader(e.method))throw new l.Error("Loader for \""+e.method+"\" is not defined.");return l.Templates.loadRemote(e.name||e.href||e.path||t||void 0,{id:t,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:o},e.load,e.error)}return void 0===e.href?void 0===e.path?void 0:l.Templates.loadRemote(e.path,{id:t,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:o},e.load,e.error):l.Templates.loadRemote(e.href,{id:t,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:o},e.load,e.error)},l.exports.extendFilter=function(e,t){l.filter.extend(e,t)},l.exports.extendFunction=function(e,t){l._function.extend(e,t)},l.exports.extendTest=function(e,t){l.test.extend(e,t)},l.exports.extendTag=function(e){l.logic.extend(e)},l.exports.extend=function(e){e(l)},l.exports.compile=function(e,t){var r=t.filename,n=t.filename,o=new l.Template({data:e,path:n,id:r,options:t.settings["twig options"]});return function(t){return o.render(t)}},l.exports.renderFile=function(e,t,d){"function"==typeof t&&(d=t,t={});var p=(t=t||{}).settings||{},o=p["twig options"],i={path:e,base:p.views,load:function(n){o&&o.allowAsync?n.renderAsync(t).then(function(t){return d(null,t)},d):d(null,n.render(t)+"")},error:function(t){d(t)}};if(o)for(var s in o)Object.hasOwnProperty.call(o,s)&&(i[s]=o[s]);l.exports.twig(i)},l.exports.__express=l.exports.renderFile,l.exports.cache=function(e){l.cache=e},l.exports.path=l.path,l.exports.filters=l.filters,l.exports.tests=l.tests,l.exports.functions=l.functions,l.exports.Promise=l.Promise,l}}])})},{}]},{},[1])(1)}),"use strict";function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}define("lib/twigjs/twig",["browserified/twig/twig","src/util/typerenderer","src/util/util"],function(e,t,n){"use strict";function o(e,t,o,i){if(void 0!==t){"string"==typeof o&&(i=o,o={}),i&&(t=new DataObject({type:i,value:DataObject.check(t,!0).get()}));var r=n.getNextUniqueId();return this.template.waiting.push([r,t,o]),"inline"===e?`<span id="${r}"></span>`:`<div style="width: 100%; height: 100%" id="${r}"></div>`}}return e.extend(function(e){e.Template.prototype.renderAsync=function(){var e=this.waiting=[];return{render:function(){for(var n=[],o=0,r;o<e.length;o++)r=e[o],n.push(t.render($("#"+r[0]),r[1],r[2]));return Promise.all(n)},html:this.render.apply(this,arguments)}}}),e.extendFunction("rendertype",function(e,t,n){return o.call(this,"inline",e,t,n)}),e.extendFunction("rendertypeBlock",function(e,t,n){return o.call(this,"block",e,t,n)}),e.extendFunction("toJSON",function(e,t){return t=t||2,`<pre><code>${JSON.stringify(e,null,t)}</code></pre>`}),e.extendFunction("log",function(){console.log.apply(console,arguments)}),e.extendFilter("regReplace",function(e,t){const n=_toArray(t),o=n[0],i=n.slice(1);return"string"==typeof e&&o?e.replace(new RegExp(o),...i):e}),Object.getOwnPropertyNames(Math).forEach(function(t){"function"==typeof Math[t]&&e.extendFilter("math_"+t,function(){return Math[t].apply(null,arguments)})}),Object.getOwnPropertyNames(String.prototype).forEach(function(t){"function"==typeof String.prototype[t]&&e.extendFilter("string_"+t,function(e,n){return"string"==typeof e?String.prototype[t].apply(e,n):e})}),e}),function(e){"function"==typeof define&&define.amd?define("notifyjs",["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&("undefined"==typeof window?n=require("jquery")(t):n=require("jquery")),e(n),n}:e(jQuery)}(function(t){function e(e,n,o){"string"==typeof o&&(o={className:o}),this.options=v(_,t.isPlainObject(o)?o:{}),this.loadHTML(),this.wrapper=t(m.html),this.options.clickToHide&&this.wrapper.addClass(i+"-hidable"),this.wrapper.data(i,this),this.arrow=this.wrapper.find("."+i+"-arrow"),this.container=this.wrapper.find("."+i+"-container"),this.container.append(this.userContainer),e&&e.length&&(this.elementType=e.attr("type"),this.originalElement=e,this.elem=k(e),this.elem.data(i,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(n)}var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o="notify",i=o+"js",r=o+"!blank",a={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},s=["l","c","r"],l=["t","m","b"],d=["t","b","l","r"],p={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},c=function(e){var n;return n=[],t.each(e.split(/\W+/),function(e,t){var o;if(o=t.toLowerCase().charAt(0),a[o])return n.push(o)}),n},u={},m={name:"core",html:"<div class=\""+i+"-wrapper\">\n\t<div class=\""+i+"-arrow\"></div>\n\t<div class=\""+i+"-container\"></div>\n</div>",css:"."+i+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+i+"-corner ."+i+"-wrapper,\n."+i+"-corner ."+i+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+i+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+i+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+i+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+i+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},g={"border-radius":["-webkit-","-moz-"]},h=function(e,n){if(!e)throw"Missing Style name";if(!n)throw"Missing Style definition";if(!n.html)throw"Missing Style HTML";var r=u[e];r&&r.cssElem&&(window.console&&console.warn(o+": overwriting style '"+e+"'"),u[e].cssElem.remove()),n.name=e,u[e]=n;var a="";n.classes&&t.each(n.classes,function(e,o){return a+="."+i+"-"+n.name+"-"+e+" {\n",t.each(o,function(e,n){return g[e]&&t.each(g[e],function(t,o){return a+="\t"+o+e+": "+n+";\n"}),a+="\t"+e+": "+n+";\n"}),a+="}\n"}),n.css&&(a+="/* styles for "+n.name+" */\n"+n.css),a&&(n.cssElem=f(a),n.cssElem.attr("id","notify-"+n.name));var s={},l=t(n.html);y("html",l,s),y("text",l,s),n.fields=s},f=function(e){var n;n=x("style"),n.attr("type","text/css"),t("head").append(n);try{n.html(e)}catch(t){n[0].styleSheet.cssText=e}return n},y=function(e,n,o){var i;return"html"!==e&&(e="text"),i="data-notify-"+e,b(n,"["+i+"]").each(function(){var n;n=t(this).attr(i),n||(n=r),o[n]=e})},b=function(e,t){return e.is(t)?e:e.find(t)},_={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},v=function(e,n){var o;return o=function(){},o.prototype=e,t.extend(!0,new o,n)},x=function(e){return t("<"+e+"></"+e+">")},w={},k=function(n){var o;return n.is("[type=radio]")&&(o=n.parents("form:first").find("[type=radio]").filter(function(o,i){return t(i).attr("name")===n.attr("name")}),n=o.first()),n},T=function(e,t,n){var o,i;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;return isNaN(n)?void 0:(o=a[p[t.charAt(0)]],i=t,void 0!==e[o]&&(t=a[o.charAt(0)],n=-n),void 0===e[t]?e[t]=n:e[t]+=n,null)},C=function(e,t,n){if("l"===e||"t"===e)return 0;if("c"===e||"m"===e)return n/2-t/2;if("r"===e||"b"===e)return n-t;throw"Invalid alignment"},S=function(e){return S.e=S.e||x("div"),S.e.text(e).html()};e.prototype.loadHTML=function(){var e;e=this.getStyle(),this.userContainer=t(e.html),this.userFields=e.fields},e.prototype.show=function(e,t){var n,o,i,r,a;if(o=function(n){return function(){if(e||n.elem||n.destroy(),t)return t()}}(this),a=0<this.container.parent().parents(":hidden").length,i=this.container.add(this.arrow),n=[],a&&e)r="show";else if(a&&!e)r="hide";else if(!a&&e)r=this.options.showAnimation,n.push(this.options.showDuration);else if(!a&&!e)r=this.options.hideAnimation,n.push(this.options.hideDuration);else return o();return n.push(o),i[r].apply(i,n)},e.prototype.setGlobalPosition=function(){var e=this.getPosition(),n=e[0],o=e[1],r=a[n],s=a[o],l=n+"|"+o,d=w[l];if(!d){d=w[l]=x("div");var p={};p[r]=0,"middle"===s?p.top="45%":"center"===s?p.left="45%":p[s]=0,d.css(p).addClass(i+"-corner"),t("body").append(d)}return d.prepend(this.wrapper)},e.prototype.setElementPosition=function(){var e,o,i,r,c,u,m,g,h,f,y,b,_,v,x,w,S,E,D,A,P,O,R,L,N,I,F,M,z;for(F=this.getPosition(),L=F[0],O=F[1],R=F[2],y=this.elem.position(),g=this.elem.outerHeight(),b=this.elem.outerWidth(),h=this.elem.innerHeight(),f=this.elem.innerWidth(),z=this.wrapper.position(),c=this.container.height(),u=this.container.width(),E=a[L],A=p[L],P=a[A],m={},m[P]="b"===L?g:"r"===L?b:0,T(m,"top",y.top-z.top),T(m,"left",y.left-z.left),M=["top","left"],(v=0,w=M.length);v<w;v++)N=M[v],D=parseInt(this.elem.css("margin-"+N),10),D&&T(m,N,D);if(_=Math.max(0,this.options.gap-(this.options.arrowShow?i:0)),T(m,P,_),!this.options.arrowShow)this.arrow.hide();else{for(i=this.options.arrowSize,o=t.extend({},m),e=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",(x=0,S=d.length);x<S;x++)(N=d[x],I=a[N],N!==A)&&(r=I===E?e:"transparent",o["border-"+I]=i+"px solid "+r);T(m,a[A],i),0<=n.call(d,O)&&T(o,a[O],2*i)}return(0<=n.call(l,L)?(T(m,"left",C(O,u,b)),o&&T(o,"left",C(O,i,f))):0<=n.call(s,L)&&(T(m,"top",C(O,c,g)),o&&T(o,"top",C(O,i,h))),this.container.is(":visible")&&(m.display="block"),this.container.removeAttr("style").css(m),o)?this.arrow.removeAttr("style").css(o):void 0},e.prototype.getPosition=function(){var e,t,o,i,r,a,p,u;if(u=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),e=c(u),0===e.length&&(e[0]="b"),(t=e[0],0>n.call(d,t)))throw"Must be one of ["+d+"]";return(1===e.length||(o=e[0],0<=n.call(l,o))&&(i=e[1],0>n.call(s,i))||(r=e[0],0<=n.call(s,r))&&(a=e[1],0>n.call(l,a)))&&(e[1]=(p=e[0],0<=n.call(s,p))?"m":"l"),2===e.length&&(e[2]=e[1]),e},e.prototype.getStyle=function(e){var t;if(e||(e=this.options.style),e||(e="default"),t=u[e],!t)throw"Missing style: "+e;return t},e.prototype.updateClasses=function(){var e,o;return e=["base"],t.isArray(this.options.className)?e=e.concat(this.options.className):this.options.className&&e.push(this.options.className),o=this.getStyle(),e=t.map(e,function(e){return i+"-"+o.name+"-"+e}).join(" "),this.userContainer.attr("class",e)},e.prototype.run=function(e,n){var o,i,a,s,l;if(t.isPlainObject(n)?t.extend(this.options,n):"string"===t.type(n)&&(this.options.className=n),this.container&&!e)return void this.show(!1);if(this.container||e){for(a in i={},t.isPlainObject(e)?i=e:i[r]=e,i)(o=i[a],s=this.userFields[a],!!s)&&("text"===s&&(o=S(o),this.options.breakNewLines&&(o=o.replace(/\n/g,"<br/>"))),l=a===r?"":"="+a,b(this.userContainer,"[data-notify-"+s+l+"]").html(o));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}},e.prototype.destroy=function(){this.wrapper.data(i,null),this.wrapper.remove()},t[o]=function(n,i,r){return n&&n.nodeName||n.jquery?t(n)[o](i,r):(r=i,i=n,new e(null,i,r)),n},t.fn[o]=function(n,o){return t(this).each(function(){var r=k(t(this)).data(i);r&&r.destroy();new e(t(this),n,o)}),this},t.extend(t[o],{defaults:function(e){return t.extend(_,e)},addStyle:h,pluginOptions:_,getStyle:function(e){return u[e]},insertCSS:f}),h("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),t(function(){f(m.css).attr("id","core-notify"),t(document).on("click","."+i+"-hidable",function(){t(this).trigger("notify-hide")}),t(document).on("notify-hide","."+i+"-wrapper",function(){var e=t(this).data(i);e&&e.show(!1)})})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/version",["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widget",["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var o,r,a;for(a=0;null!=(r=n[a]);a++)try{o=e._data(r,"events"),o&&o.remove&&e(r).triggerHandler("remove")}catch(t){}t(n)}}(e.cleanData),e.widget=function(t,n,o){var i={},r=t.split(".")[0],a,s,l;t=t.split(".")[1];var d=r+"-"+t;return o||(o=n,n=e.Widget),e.isArray(o)&&(o=e.extend.apply(null,[{}].concat(o))),e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)},e[r]=e[r]||{},a=e[r][t],s=e[r][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,a,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),l=new n,l.options=e.widget.extend({},l.options),e.each(o,function(t,o){return e.isFunction(o)?void(i[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t=this._super,n=this._superApply,r;return this._super=e,this._superApply=i,r=o.apply(this,arguments),this._super=t,this._superApply=n,r}}()):void(i[t]=o)}),s.prototype=e.widget.extend(l,{widgetEventPrefix:a?l.widgetEventPrefix||t:t},i,{constructor:s,namespace:r,widgetName:t,widgetFullName:d}),a?(e.each(a._childConstructors,function(t,n){var o=n.prototype;e.widget(o.namespace+"."+o.widgetName,s,n._proto)}),delete a._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var o=n.call(arguments,1),i=0,r=o.length,a,s;i<r;i++)for(a in o[i])s=o[i][a],o[i].hasOwnProperty(a)&&void 0!==s&&(e.isPlainObject(s)?t[a]=e.isPlainObject(t[a])?e.widget.extend({},t[a],s):e.widget.extend({},s):t[a]=s);return t},e.widget.bridge=function(t,o){var i=o.prototype.widgetFullName||t;e.fn[t]=function(r){var a="string"==typeof r,s=n.call(arguments,1),l=this;return a?this.length||"instance"!==r?this.each(function(){var n=e.data(this,i),o;return"instance"===r?(l=n,!1):n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(o=n[r].apply(n,s),o!==n&&void 0!==o)?(l=o&&o.jquery?l.pushStack(o.get()):o,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+r+"'")}):l=void 0:(s.length&&(r=e.widget.extend.apply(null,[r].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(r||{}),t._init&&t._init()):e.data(this,i,new o(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,o){o=e(o||this.defaultElement||this)[0],this.element=e(o),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},o!==this&&(e.data(o,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===o&&this.destroy()}}),this.document=e(o.style?o.ownerDocument:o.document||o),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var o=t,r,a,s;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(a=o[t]=e.widget.extend({},this.options[t]),s=0;s<r.length-1;s++)a[r[s]]=a[r[s]]||{},a=a[r[s]];if(t=r.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,o,i;for(n in t)(i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length)&&(o=e(i.get()),this._removeClass(i,n),o.addClass(this._classes({element:o,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,a){var s,l;for(l=0;l<n.length;l++)s=r.classesElementLookup[n[l]]||e(),s=t.add?e(e.unique(s.get().concat(t.element.get()))):e(s.not(t.element).get()),r.classesElementLookup[n[l]]=s,o.push(n[l]),a&&t.classes[n[l]]&&o.push(t.classes[n[l]])}var o=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(o,i){-1!==e.inArray(t.target,i)&&(n.classesElementLookup[o]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,o){o="boolean"==typeof o?o:n;var i="string"==typeof e||null===e,r={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:o};return r.element.toggleClass(this._classes(r),o),this},_on:function(t,n,o){var i=this,r;"boolean"!=typeof t&&(o=n,n=t,t=!1),o?(n=r=e(n),this.bindings=this.bindings.add(n)):(o=n,n=this.element,r=this.widget()),e.each(o,function(o,a){function s(){return!t&&(!0===i.options.disabled||e(this).hasClass("ui-state-disabled"))?void 0:("string"==typeof a?i[a]:a).apply(i,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=o.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+i.eventNamespace,p=l[2];p?r.on(d,p,s):n.on(d,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,o){var i=this.options[t],r,a;if(o=o||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent,a)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,o),!(e.isFunction(i)&&!1===i.apply(this.element[0],[n].concat(o))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(o,i,r){"string"==typeof i&&(i={effect:i});var a=i?!0===i||"number"==typeof i?n:i.effect||n:t,s;i=i||{},"number"==typeof i&&(i={duration:i}),s=!e.isEmptyObject(i),i.complete=r,i.delay&&o.delay(i.delay),s&&e.effects&&e.effects.effect[a]?o[t](i):a!==t&&o[a]?o[a](i.duration,i.easing,r):o.queue(function(n){e(this)[t](),r&&r.call(o[0]),n()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/controlgroup",["jquery","../widget"],e):e(jQuery)}(function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(o,i){var r={},a;return i?"controlgroupLabel"===o?(a=t.element.find(i),a.each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(a,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(a.get()))):void(!e.fn[o]||(r=t["_"+o+"Options"]?t["_"+o+"Options"]("middle"):{classes:{}},t.element.find(i).each(function(){var i=e(this),a=i[o]("instance"),s=e.widget.extend({},r);if(!("button"===o&&i.parent(".ui-spinner").length)){a||(a=i[o]()[o]("instance")),a&&(s.classes=t._resolveClassesValues(s.classes,a)),i[o](s);var l=i[o]("widget");e.data(l[0],"ui-controlgroup-data",a?a:i[o]("instance")),n.push(l[0])}}))):void 0}),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this),o=n.data("ui-controlgroup-data");o&&o[t]&&o[t]()})},_updateCornerClass:function(e,t){var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,o={classes:{}};return o.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],o},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,o){var i={};return e.each(n,function(r){var a=o.options.classes[r]||"";a=e.trim(a.replace(t,"")),i[r]=(a+" "+n[r]).replace(/\s+/g," ")}),i},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t=this,n;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),n=this.childWidgets,this.options.onlyVisible&&(n=n.filter(":visible")),n.length&&(e.each(["first","last"],function(e,o){var i=n[o]().data("ui-controlgroup-data");if(i&&t["_"+i.widgetName+"Options"]){var r=t["_"+i.widgetName+"Options"](1===n.length?"only":o);r.classes=t._resolveClassesValues(r.classes,i),i.element[i.widgetName](r)}else t._updateCornerClass(n[o](),o)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/escape-selector",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/form",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/form-reset-mixin",["jquery","./form","./version"],e):e(jQuery)}(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),!!this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/labels",["jquery","./version","./escape-selector"],e):e(jQuery)}(function(e){return e.fn.labels=function(){var t,n,o,i,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),o=this.attr("id"),o&&(t=this.eq(0).parents().last(),r=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(o)+"']",i=i.add(r.find(n).addBack(n))),this.pushStack(i))}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/checkboxradio",["jquery","../escape-selector","../form-reset-mixin","../labels","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t=this,n=this._super()||{},o,i;return this._readType(),i=this.element.labels(),this.label=e(i[i.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){t.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),o=this.element[0].disabled,null!=o&&(n.disabled=o),n},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']",o;return t?(o=this.form.length?e(this.form[0].elements).filter(n):e(n).filter(function(){return 0===e(this).form().length}),o.not(this.element)):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t)return this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(!this.icon&&(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),!t&&this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/keycode",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/button",["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e=this._super()||{},t;return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var o="iconPosition"!==t,i=o?this.options.iconPosition:n;this.icon?o&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),!this.options.showLabel&&this._addClass("ui-button-icon-only")),o&&this._addClass(this.icon,null,n),this._attachIcon(i),"top"===i||"bottom"===i?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(!this.iconSpace&&(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)?this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"):this.options.icon&&(this.options.icons.primary=this.options.icon),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):void("showLabel"==e&&(this.options.text=t),"icon"==e&&(this.options.icons.primary=t),"icons"==e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return(e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2])?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/ie",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/mouse",["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var o=this,i=1===n.which,r=!!("string"==typeof this.options.cancel&&n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(i&&!r&&this._mouseCapture(n))||((this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){o.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted))?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return o._mouseMove(e)},this._mouseUpDelegate=function(e){return o._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return((t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted)?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,o){return!!e.data(t,o[3])}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,o){var r=e.ui[t].prototype,a;for(a in o)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,o[a]])},call:function(e,t,n,o){var r=e.plugins[t],a;if(r&&(o||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<r.length;a++)e.options[r[a][0]]&&r[a][1].apply(e.element,n)}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var t=e(this);return!("absolute"===n&&"static"===t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:e(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):void(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||0<e(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle)&&(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),o=e(t.target);o.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return(this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t))?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var o=this._uiHash();if(!1===this._trigger("drag",t,o))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=o.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,o=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",t)&&n._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,o=e.isFunction(n.helper),i=o?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),o&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return /(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options,n=this.document[0],o,i,r;return(this.relativeContainer=null,!t.containment)?void(this.containment=null):"window"===t.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===t.containment?void(this.containment=[0,0,e(n).width()-this.helperProportions.width-this.margins.left,(e(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):t.containment.constructor===Array?void(this.containment=t.containment):void("parent"===t.containment&&(t.containment=this.helper[0].parentNode),i=e(t.containment),r=i[0],r&&(o=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(o?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,o=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n=this.options,o=this._isRootNode(this.scrollParent[0]),i=e.pageX,r=e.pageY,a,s,l,d;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),a=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):a=this.containment,e.pageX-this.offset.click.left<a[0]&&(i=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(r=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(i=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(r=a[3]+this.offset.click.top)),n.grid&&(l=n.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,r=a?l-this.offset.click.top>=a[1]||l-this.offset.click.top>a[3]?l:l-this.offset.click.top>=a[1]?l-n.grid[1]:l+n.grid[1]:l,d=n.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,i=a?d-this.offset.click.left>=a[0]||d-this.offset.click.left>a[2]?d:d-this.offset.click.left>=a[0]?d-n.grid[0]:d+n.grid[0]:d),"y"===n.axis&&(i=this.originalPageX),"x"===n.axis&&(r=this.originalPageY)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,o){return o=o||this._uiHash(),e.ui.plugin.call(this,t,[n,o,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),o.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,o)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,o){var i=e.extend({},n,{item:o.element});o.sortables=[],e(o.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(o.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,o){var i=e.extend({},n,{item:o.element});o.cancelHelperRemoval=!1,e.each(o.sortables,function(){var e=this;e.isOver?(e.isOver=0,o.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,o){e.each(o.sortables,function(){var i=!1,r=this;r.positionAbs=o.positionAbs,r.helperProportions=o.helperProportions,r.offset.click=o.offset.click,r._intersectsWith(r.containerCache)&&(i=!0,e.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(i=!1),i})),i?(!r.isOver&&(r.isOver=1,o._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=o.offset.click.top,r.offset.click.left=o.offset.click.left,r.offset.parent.left-=o.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=o.offset.parent.top-r.offset.parent.top,o._trigger("toSortable",t),o.dropped=r.element,e.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,r.fromOutside=o),r.currentItem&&(r._mouseDrag(t),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(o._parent),o._refreshOffsets(t),n.position=o._generatePosition(t,!0),o._trigger("fromSortable",t),o.dropped=!1,e.each(o.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(n,i,r){var a=e("body"),t=r.options;a.css("cursor")&&(t._cursor=a.css("cursor")),a.css("cursor",t.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(n,i,r){var a=e(i.helper),t=r.options;a.css("opacity")&&(t._opacity=a.css("opacity")),a.css("opacity",t.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,o=!1,a=r.scrollParentNotHidden[0],s=r.document[0];a!==s&&"HTML"!==a.tagName?((!i.axis||"x"!==i.axis)&&(r.overflowOffset.top+a.offsetHeight-t.pageY<i.scrollSensitivity?a.scrollTop=o=a.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-i.scrollSpeed)),(!i.axis||"y"!==i.axis)&&(r.overflowOffset.left+a.offsetWidth-t.pageX<i.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-i.scrollSpeed))):((!i.axis||"x"!==i.axis)&&(t.pageY-e(s).scrollTop()<i.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<i.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+i.scrollSpeed))),(!i.axis||"y"!==i.axis)&&(t.pageX-e(s).scrollLeft()<i.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<i.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+i.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor===String?i.snap:i.snap.items||":data(ui-draggable)").each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(n,a,s){var p=s.options,o=p.snapTolerance,d=a.offset.left,c=d+s.helperProportions.width,u=a.offset.top,m=u+s.helperProportions.height,g,h,f,y,_,v,x,w,k,T;for(k=s.snapElements.length-1;0<=k;k--){if(_=s.snapElements[k].left-s.margins.left,v=_+s.snapElements[k].width,x=s.snapElements[k].top-s.margins.top,w=x+s.snapElements[k].height,c<_-o||d>v+o||m<x-o||u>w+o||!e.contains(s.snapElements[k].item.ownerDocument,s.snapElements[k].item)){s.snapElements[k].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,n,e.extend(s._uiHash(),{snapItem:s.snapElements[k].item})),s.snapElements[k].snapping=!1;continue}"inner"!==p.snapMode&&(g=Math.abs(x-m)<=o,h=Math.abs(w-u)<=o,f=Math.abs(_-c)<=o,y=Math.abs(v-d)<=o,g&&(a.position.top=s._convertPositionTo("relative",{top:x-s.helperProportions.height,left:0}).top),h&&(a.position.top=s._convertPositionTo("relative",{top:w,left:0}).top),f&&(a.position.left=s._convertPositionTo("relative",{top:0,left:_-s.helperProportions.width}).left),y&&(a.position.left=s._convertPositionTo("relative",{top:0,left:v}).left)),T=g||h||f||y,"outer"!==p.snapMode&&(g=Math.abs(x-u)<=o,h=Math.abs(w-m)<=o,f=Math.abs(_-d)<=o,y=Math.abs(v-c)<=o,g&&(a.position.top=s._convertPositionTo("relative",{top:x,left:0}).top),h&&(a.position.top=s._convertPositionTo("relative",{top:w-s.helperProportions.height,left:0}).top),f&&(a.position.left=s._convertPositionTo("relative",{top:0,left:_}).left),y&&(a.position.left=s._convertPositionTo("relative",{top:0,left:v-s.helperProportions.width}).left)),!s.snapElements[k].snapping&&(g||h||f||y||T)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,n,e.extend(s._uiHash(),{snapItem:s.snapElements[k].item})),s.snapElements[k].snapping=g||h||f||y||T}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r=i.options,o=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}),a;o.length&&(a=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",a+t)}),this.css("zIndex",a+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(n,i,r){var a=e(i.helper),t=r.options;a.css("zIndex")&&(t._zIndex=a.css("zIndex")),a.css("zIndex",t.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var o=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return!!(0<t[o])||(t[o]=1,i=0<t[o],t[o]=0,i)},_create:function(){var t=this.options,n=this,o;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,o={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(o),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(o),this._proportionallyResize()),this._setupHandles(),t.autoHide&&e(this.element).on("mouseenter",function(){t.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){t.disabled||!n.resizing&&(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()},n;return this.elementIsWrapper&&(t(this.element),n=this.element,this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var t=this.options,o=this,r,a,s,l,d;if(this.handles=t.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},a=0;a<s.length;a++)r=e.trim(s[a]),l="ui-resizable-"+r,d=e("<div>"),this._addClass(d,"ui-resizable-handle "+l),d.css({zIndex:t.zIndex}),this.handles[r]=".ui-resizable-"+r,this.element.append(d);this._renderAxis=function(t){var n,r,a,s;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),a=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(a,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){o.resizing||(this.className&&(d=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=d&&d[1]?d[1]:"se")}),t.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n=!1,o,r;for(o in this.handles)r=e(this.handles[o])[0],(r===t.target||e.contains(r,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var n=this.options,o=this.element,i,r,a;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),n.containment&&(i+=e(n.containment).scrollLeft()||0,r+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.originalMousePosition,o=this.axis,i=t.pageX-n.left||0,r=t.pageY-n.top||0,a=this._change[o],s,l;return(this._updatePrevProperties(),!!a)&&(s=a.apply(this,[t,i,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(s=this._updateRatio(s,t)),s=this._respectSize(s,t),this._updateCache(s),this._propagate("resize",t),l=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(l)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n=this.options,o=this,i,r,a,l,d,p,c;return this._helper&&(i=this._proportionallyResizeElements,r=i.length&&/textarea/i.test(i[0].nodeName),a=r&&this._hasScroll(i[0],"left")?0:o.sizeDiff.height,l=r?0:o.sizeDiff.width,d={width:o.helper.width()-l,height:o.helper.height()-a},p=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,c=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,!n.animate&&this.element.css(e.extend(d,{top:c,left:p})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!n.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t=this.options,n,o,i,r,a;a={minWidth:this._isNumber(t.minWidth)?t.minWidth:0,maxWidth:this._isNumber(t.maxWidth)?t.maxWidth:1/0,minHeight:this._isNumber(t.minHeight)?t.minHeight:0,maxHeight:this._isNumber(t.maxHeight)?t.maxHeight:1/0},(this._aspectRatio||e)&&(n=a.minHeight*this.aspectRatio,i=a.minWidth/this.aspectRatio,o=a.maxHeight*this.aspectRatio,r=a.maxWidth/this.aspectRatio,n>a.minWidth&&(a.minWidth=n),i>a.minHeight&&(a.minHeight=i),o<a.maxWidth&&(a.maxWidth=o),r<a.maxHeight&&(a.maxHeight=r)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,o=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,o=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(n),p=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),o&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),r&&d&&(e.left=s-t.minWidth),o&&d&&(e.left=s-t.maxWidth),a&&p&&(e.top=l-t.minHeight),i&&p&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?!e.width&&!e.height&&!e.top&&e.left&&(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],o=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseFloat(o[t])||0,n[t]+=parseFloat(r[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e=0,t=this.helper||this.element,n;e<this._proportionallyResizeElements.length;e++)n=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(n)),n.css({height:t.height()-this.outerDimensions.height||0,width:t.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,o=this.originalPosition;return{left:o.left+t,width:n.width-t}},n:function(e,t,n){var o=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:o.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,o){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,o]))},sw:function(t,n,o){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,o]))},ne:function(t,n,o){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,o]))},nw:function(t,n,o){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,o]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),a=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},d=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,p=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,p&&d?{top:p,left:d}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t=e(this).resizable("instance"),n=t.options,o=t.element,i=n.containment,r=i instanceof e?i.get(0):/parent/.test(i)?o.parent().get(0):i,a,s,l,d,c,u,m;r&&(t.containerElement=e(r),/document/.test(i)||i===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(a=e(r),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t._num(a.css("padding"+n))}),t.containerOffset=a.offset(),t.containerPosition=a.position(),t.containerSize={height:a.innerHeight()-s[3],width:a.innerWidth()-s[1]},l=t.containerOffset,d=t.containerSize.height,c=t.containerSize.width,u=t._hasScroll(r,"left")?r.scrollWidth:c,m=t._hasScroll(r)?r.scrollHeight:d,t.parentData={element:r,left:l.left,top:l.top,width:u,height:m}))},resize:function(t){var n=e(this).resizable("instance"),i=n.options,o=n.containerOffset,r=n.position,a=n._aspectRatio||t.shiftKey,s={top:0,left:0},l=n.containerElement,d=!0,p,c,u,m;l[0]!==document&&/static/.test(l.css("position"))&&(s=o),r.left<(n._helper?o.left:0)&&(n.size.width+=n._helper?n.position.left-o.left:n.position.left-s.left,a&&(n.size.height=n.size.width/n.aspectRatio,d=!1),n.position.left=i.helper?o.left:0),r.top<(n._helper?o.top:0)&&(n.size.height+=n._helper?n.position.top-o.top:n.position.top,a&&(n.size.width=n.size.height*n.aspectRatio,d=!1),n.position.top=n._helper?o.top:0),u=n.containerElement.get(0)===n.element.parent().get(0),m=/relative|absolute/.test(n.containerElement.css("position")),u&&m?(n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top):(n.offset.left=n.element.offset().left,n.offset.top=n.element.offset().top),p=Math.abs(n.sizeDiff.width+(n._helper?n.offset.left-s.left:n.offset.left-o.left)),c=Math.abs(n.sizeDiff.height+(n._helper?n.offset.top-s.top:n.offset.top-o.top)),p+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-p,a&&(n.size.height=n.size.width/n.aspectRatio,d=!1)),c+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-c,a&&(n.size.width=n.size.height*n.aspectRatio,d=!1)),d||(n.position.left=n.prevPosition.left,n.position.top=n.prevPosition.top,n.size.width=n.prevSize.width,n.size.height=n.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,o=t.containerOffset,i=t.containerPosition,r=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,d=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-i.left-o.left,width:l,height:d}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-i.left-o.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};e(r.alsoResize).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),r={},a=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(o[t]||0)+(s[t]||0);n&&0<=n&&(r[t]=n||null)}),t.css(r)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).resizable("instance"),n=t.options,o=t.size,i=t.originalSize,r=t.originalPosition,s=t.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,d=a[1]||1,p=Math.round((o.width-i.width)/l)*l,c=Math.round((o.height-i.height)/d)*d,u=i.width+p,m=i.height+c,g=n.maxWidth&&n.maxWidth<u,h=n.maxHeight&&n.maxHeight<m,f=n.minWidth&&n.minWidth>u,y=n.minHeight&&n.minHeight>m,b;n.grid=a,f&&(u+=l),y&&(m+=d),g&&(u-=l),h&&(m-=d),/^(se|s|e)$/.test(s)?(t.size.width=u,t.size.height=m):/^(ne)$/.test(s)?(t.size.width=u,t.size.height=m,t.position.top=r.top-c):/^(sw)$/.test(s)?(t.size.width=u,t.size.height=m,t.position.left=r.left-p):((0>=m-d||0>=u-l)&&(b=t._getPaddingPlusBorderDimensions(this)),0<m-d?(t.size.height=m,t.position.top=r.top-c):(m=d-b.height,t.size.height=m,t.position.top=r.top+i.height-m),0<u-l?(t.size.width=u,t.position.left=r.left-p):(u=l-b.width,t.size.width=u,t.position.left=r.left+i.width-u))}}),e.ui.resizable}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/focusable",["jquery","./version"],e):e(jQuery)}(function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,o){var i=n.nodeName.toLowerCase(),r,a,s,l,d;return"area"===i?(r=n.parentNode,a=r.name,n.href&&a&&"map"===r.nodeName.toLowerCase())&&(s=e("img[usemap='#"+a+"']"),0<s.length&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(i)?(l=!n.disabled,l&&(d=e(n).closest("fieldset")[0],d&&(l=!d.disabled))):"a"===i?l=n.href||o:l=o,l&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/position",["jquery","./version"],e):e(jQuery)}(function(e){return function(){function t(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function o(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var i=Math.max,r=Math.abs,a=/left|center|right/,s=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,c=e.fn.position,u;e.position={scrollbarWidth:function(){if(null!=u)return u;var t=e("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),n=t.children()[0],o,i;return e("body").append(t),o=n.offsetWidth,t.css("overflow","scroll"),i=n.offsetWidth,o===i&&(i=t[0].clientWidth),t.remove(),u=o-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),o=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===o||"auto"===o&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),o=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:o,isDocument:i,offset:!o&&!i?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(p){if(!p||!p.of)return c.apply(this,arguments);p=e.extend({},p);var u=e(p.of),m=e.position.getWithinInfo(p.within),g=e.position.getScrollInfo(m),h=(p.collision||"flip").split(" "),f={},y,b,_,v,x,w;return w=o(u),u[0].preventDefault&&(p.at="left top"),b=w.width,_=w.height,v=w.offset,x=e.extend({},v),e.each(["my","at"],function(){var e=(p[this]||"").split(" "),t,n;1===e.length&&(e=a.test(e[0])?e.concat(["center"]):s.test(e[0])?["center"].concat(e):["center","center"]),e[0]=a.test(e[0])?e[0]:"center",e[1]=s.test(e[1])?e[1]:"center",t=l.exec(e[0]),n=l.exec(e[1]),f[this]=[t?t[0]:0,n?n[0]:0],p[this]=[d.exec(e[0])[0],d.exec(e[1])[0]]}),1===h.length&&(h[1]=h[0]),"right"===p.at[0]?x.left+=b:"center"===p.at[0]&&(x.left+=b/2),"bottom"===p.at[1]?x.top+=_:"center"===p.at[1]&&(x.top+=_/2),y=t(f.at,b,_),x.left+=y[0],x.top+=y[1],this.each(function(){var o=e(this),a=o.outerWidth(),s=o.outerHeight(),l=n(this,"marginLeft"),d=n(this,"marginTop"),c=a+l+n(this,"marginRight")+g.width,w=s+d+n(this,"marginBottom")+g.height,k=e.extend({},x),T=t(f.my,o.outerWidth(),o.outerHeight()),C,S;"right"===p.my[0]?k.left-=a:"center"===p.my[0]&&(k.left-=a/2),"bottom"===p.my[1]?k.top-=s:"center"===p.my[1]&&(k.top-=s/2),k.left+=T[0],k.top+=T[1],C={marginLeft:l,marginTop:d},e.each(["left","top"],function(t,n){e.ui.position[h[t]]&&e.ui.position[h[t]][n](k,{targetWidth:b,targetHeight:_,elemWidth:a,elemHeight:s,collisionPosition:C,collisionWidth:c,collisionHeight:w,offset:[y[0]+T[0],y[1]+T[1]],my:p.my,at:p.at,within:m,elem:o})}),p.using&&(S=function(e){var t=v.left-k.left,n=t+b-a,l=v.top-k.top,d=l+_-s,c={target:{element:u,left:v.left,top:v.top,width:b,height:_},element:{element:o,left:k.left,top:k.top,width:a,height:s},horizontal:0>n?"left":0<t?"right":"center",vertical:0>d?"top":0<l?"bottom":"middle"};b<a&&r(t+n)<b&&(c.horizontal="center"),_<s&&r(l+d)<_&&(c.vertical="middle"),c.important=i(r(t),r(n))>i(r(l),r(d))?"horizontal":"vertical",p.using.call(this,e,c)}),o.offset(e.extend(k,{using:S}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,s=o-a,l=a+t.collisionWidth-r-o,d;t.collisionWidth>r?0<s&&0>=l?(d=e.left+s+t.collisionWidth-r-o,e.left+=s-d):0<l&&0>=s?e.left=o:s>l?e.left=o+r-t.collisionWidth:e.left=o:0<s?e.left+=s:0<l?e.left-=l:e.left=i(e.left-a,e.left)},top:function(e,t){var n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,s=o-a,l=a+t.collisionHeight-r-o,d;t.collisionHeight>r?0<s&&0>=l?(d=e.top+s+t.collisionHeight-r-o,e.top+=s-d):0<l&&0>=s?e.top=o:s>l?e.top=o+r-t.collisionHeight:e.top=o:0<s?e.top+=s:0<l?e.top-=l:e.top=i(e.top-a,e.top)}},flip:{left:function(e,t){var n=t.within,o=n.offset.left+n.scrollLeft,i=n.width,a=n.isWindow?n.scrollLeft:n.offset.left,s=e.left-t.collisionPosition.marginLeft,l=s-a,d=s+t.collisionWidth-i-a,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,c="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,u=-2*t.offset[0],m,g;0>l?(m=e.left+p+c+u+t.collisionWidth-i-o,(0>m||m<r(l))&&(e.left+=p+c+u)):0<d&&(g=e.left-t.collisionPosition.marginLeft+p+c+u-a,(0<g||r(g)<d)&&(e.left+=p+c+u))},top:function(e,t){var n=t.within,o=n.offset.top+n.scrollTop,i=n.height,a=n.isWindow?n.scrollTop:n.offset.top,s=e.top-t.collisionPosition.marginTop,l=s-a,d=s+t.collisionHeight-i-a,p="top"===t.my[1],c=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,u="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1],g,h;0>l?(h=e.top+c+u+m+t.collisionHeight-i-o,(0>h||h<r(l))&&(e.top+=c+u+m)):0<d&&(g=e.top-t.collisionPosition.marginTop+c+u+m-a,(0<g||r(g)<d)&&(e.top+=c+u+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/tabbable",["jquery","./version","./focusable"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),o=null!=n;return(!o||0<=n)&&e.ui.focusable(t,o)}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/unique-id",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/dialog",["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e=this.originalPosition,t;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").trigger("focus").length&&e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var o=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),r=Math.max.apply(null,i);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),o=!0),o&&!n&&this._trigger("focus",t),o},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):void(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(!(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented())){var n=this.uiDialog.find(":tabbable"),o=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===o[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(this._delay(function(){i.trigger("focus")}),t.preventDefault()):(this._delay(function(){o.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):void(e.each(n,function(n,o){var i,r;o=e.isFunction(o)?{click:o,text:n}:o,o=e.extend({type:"button"},o),i=o.click,r={icon:o.icon,iconPosition:o.iconPosition,showLabel:o.showLabel,icons:o.icons,text:o.text},delete o.click,delete o.icon,delete o.iconPosition,delete o.showLabel,delete o.icons,"boolean"==typeof o.text&&delete o.text,e("<button></button>",o).button(r).appendTo(t.uiButtonSet).on("click",function(){i.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,o=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,i){n._addClass(e(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",o,t(i))},drag:function(e,o){n._trigger("drag",e,t(o))},stop:function(i,r){var a=r.offset.left-n.document.scrollLeft(),s=r.offset.top-n.document.scrollTop();o.position={my:"left top",at:"left"+(0<=a?"+":"")+a+" "+"top"+(0<=s?"+":"")+s,of:n.window},n._removeClass(e(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",i,t(r))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,o=this.options,i=o.resizable,r=this.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:a,start:function(o,i){n._addClass(e(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",o,t(i))},resize:function(e,o){n._trigger("resize",e,t(o))},stop:function(i,r){var a=n.uiDialog.offset(),s=a.left-n.document.scrollLeft(),l=a.top-n.document.scrollTop();o.height=n.uiDialog.height(),o.width=n.uiDialog.width(),o.position={my:"left top",at:"left"+(0<=s?"+":"")+s+" "+"top"+(0<=l?"+":"")+l,of:n.window},n._removeClass(e(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,o=!1,i={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(o=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(t,n){var o=this.uiDialog,i,r;"disabled"===t||(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&(i=o.is(":data(ui-draggable)"),i&&!n&&o.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(r=o.is(":data(ui-resizable)"),r&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),!r&&!1!==n&&this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e=this.options,t,n,o;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),e.minWidth>e.width&&(e.width=e.minWidth),t=this.uiDialog.css({height:"auto",width:e.width}).outerHeight(),n=Math.max(0,e.minHeight-t),o="number"==typeof e.maxHeight?Math.max(0,e.maxHeight-t):"none","auto"===e.height?this.element.css({minHeight:n,maxHeight:o,height:"auto"}):this.element.height(Math.max(0,e.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||!this._allowInteraction(e)&&(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog}),"use strict",define("src/util/ui",["src/util/util","src/util/debug","src/util/datatraversing","lodash","jquery","src/util/typerenderer","forms/button","src/util/Form","lib/twigjs/twig","notifyjs","jquery-ui/ui/widgets/dialog"],function(e,t,n,o,i,r,a,s,l){"use strict";function d(){return"<div style=\"width:100%; height: 100%;\"><a class=\"icon-clickable recycle-bin\"><i class=\"centered-icon fa fa-trash\"></i></a></div>"}function p(e,t,n,o){if(e){var i=DataObject.check(n).getChildSync(o.jpath);r.render(e,i,o.rendererOptions)}}i.notify.addStyle("inprogress",{html:`<div><span data-notify-text/>   &nbsp; &nbsp; ${e.getLoadingAnimation(24,"black").css("vertical-align","middle").wrap("<div/>").parent().html()}</div>`,classes:{xxx:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px",color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1"}}});var c={},u={},m;c.showCode=function(t){var t=Object.assign({mode:"json",content:"",width:800,height:600},t);require(["ace/ace"],function(n){var o=e.getNextUniqueId(!0);c.dialog(i(`<div style="width: 100%; height: 100%;" id="${o}"></div>`),t);var r=n.edit(o),a=`./mode/${t.mode}`;r.getSession().setOption("useWorker",!1),r.getSession().setMode(a),r.setValue(t.content,-1)})},c.enterValue=function(e){return e=Object.assign({},{description:"",label:"Enter a value",buttonLabel:"Submit",validationMessage:"What you entered is not valid",value:"",validation:()=>!0},e),new Promise(function(t){var n=i(`<div>${e.description}<div>${e.label}: </div></div>`),o=i(`<input type="text" value="${e.value}"/>`).appendTo(n.find("div")).on("keypress",e=>{13===e.keyCode&&r()});const r=()=>{var n=o.val();return e.validation(n)?void(t(n),s.dialog("destroy")):void c.showNotification(e.validationMessage,"error")},a=Object.assign({},e.dialog,{buttons:{[e.buttonLabel]:r},close:function(){t(null),s.dialog("destroy")}});var s=c.dialog(n,a)})},c.renderTwig=async function(e,t){var e=l.twig({data:DataObject.resurrect(e)}),n=await e.renderAsync(DataObject.resurrect(t));const o=document.createElement("div");o.style="position: absolute; width: 1; height: 1; visibility: none";const i=document.getElementsByTagName("body")[0];o.innerHTML=n.html,i.append(o),await n.render();const r=o.innerHTML;return i.removeChild(o),r},c.form=function(e,t,n){if(n=Object.assign({},n),n.twig){var o=l.twig({data:DataObject.resurrect(e)}),r=o.renderAsync(DataObject.resurrect(n.twig));r.render(),e=r.html}return new Promise(function(o){const r=e=>{var t=a.getData(!0);t._clickedButton=e,a.unbind(),o(t),d.dialog("destroy")};e.jquery||(e=i(e));var a=new s(e);t&&a.setData(t),a.onSubmit(e=>{r(e.target.name)});const l=Object.assign({buttons:{}},n.dialog,{close:function(){a.unbind(),o(null),d.dialog("destroy")}});if(n.buttonLabels)for(let e=0;e<n.buttonLabels.length;e++){const t=n.buttonLabels[e];"string"==typeof t?l.buttons[t]=()=>r(t):l.buttons[t.label]=()=>r(t.key)}var d=c.dialog(e,l)})},c.chooseSearch=async function(t,n){let r;const a=new Promise(function(e){r=e});n=Object.assign({},{title:"Choose",width:500,template:e=>e.text||e.id,id:e=>e.id,text:e=>e.text,groupBy:null},n);let s=t.map(e=>({original:e,text:n.text(e),id:n.id(e)}));if(n.groupBy){const e=o.groupBy(s,e=>n.groupBy(e.original)),t=Object.keys(e);s=t.map(t=>({id:`group-${t}`,text:t,children:e[t]}))}await e.require("select2"),await e.loadCss("components/select2/dist/css/select2.css");var l="<div><div style=\"height:50px\"></div> <select>",d=n.width,p=Math.max(document.documentElement.clientWidth,window.innerWidth||0),c=Math.max(document.documentElement.clientHeight,window.innerHeight||0);l+="</select></div>",l=i(l),l=l.css({position:"fixed","justify-content":"center",top:0,left:0,width:p,height:c,paddingLeft:Math.floor(p/2-d/2),paddingTop:50,margin:0,"box-sizing":"border-box",opacity:.7,backgroundColor:"#262b33"}).appendTo("body").find("select").addClass("js-example-basic-single").css({width:d,zIndex:5e3}),l.select2({placeholder:n.title,data:s,templateResult:n.template}).select2("open").val(null).trigger("change");var u;return l.on("select2:selecting",function(){u=!0}),l.on("select2:select",function(e){l.select2("destroy"),l.parent().remove(),r(e.params.data.original)}),l.on("select2:close",function(){u||(l.select2("destroy"),l.parent().remove(),r(null))}),a},c.editTable=async function(t,n){function a(e,t){if(o.isUndefined(t))return null;var n=e.mapRowsToIds([t])[0];return n?{id:n,idx:e.getIdxById(n),item:e.getItemById(n)}:null}let s=JSON.parse(JSON.stringify(t));const l=await e.require("slickgrid");var u={formatter:function(){return"..."},asyncPostRender:p,colDef:{}},m,g;const h=n.columns.map(e=>("auto"===e.editor&&(e.editor=l.typeEditors[e.forceType]),Object.assign({},u,e)));n.remove&&h.unshift({id:"rowDeletion",width:20,field:"rowDeletion",selectable:!1,resizable:!1,focusable:!1,sortable:!1,formatter:d}),n.reorder&&h.unshift({id:"__selectAndMove",name:"",width:40,behavior:"selectAndMove",selectable:!1,resizable:!1,cssClass:"cell-reorder dnd",formatter:function(){return""}});const f={width:700,height:500};var n=o.defaults(n.slick,{autoEdit:!0,enableCellNavigation:!0,editable:!0,enableAddRow:!0,enableTextSelectionOnCells:!0,forceFitColumns:!0,explicitInitialization:!0,rowHeight:20,enableAsyncPostRender:!0,asyncEditorLoading:!0,asyncEditorLoadDelay:30,asyncPostRenderDelay:0,idField:"id"});return new Promise(o=>e.loadCss("components/slickgrid/slick.grid.css").then(function(){let e=!1;var r=i("<div>"),d=i("<div>").css("height","100%").css("width","100%").addClass("visualizer-slickgrid"),p=i("<div>").css("height",410);const u=Object.assign({},f,n.dialog,{noWrap:!0,closeOnEscape:!0,buttons:{cancel:function(){i(this).dialog("close")},confirm:function(){e=!0,s=JSON.parse(JSON.stringify(t)),t.length=0;for(let e=0;e<s.length;e++)t[e]=s[e];i(this).dialog("close")}},close:()=>{o(e)},resize:function(){m.resizeCanvas()},open:function(){function e(e,t){return e.__pos-t.__pos}p.addClass("flex-main-container"),p.append(d),r.append(p),g=new l.Data.DataView,p.on("click","a.recycle-bin",function(t){var e=m.getColumns(),n=m.getCellFromEvent(t);if(e[n.cell]&&"rowDeletion"===e[n.cell].id){var o=a(g,n.row);g.deleteItem(o.id),m.invalidateAllRows(),m.render()}}),g.setItems(t,n.idField),g.onRowCountChanged.subscribe(function(){m.updateRowCount(),m.render()}),m=new l.Grid(d,g,h,n);const o=new l.RowMoveManager({cancelEditOnDrag:!0});o.onBeforeMoveRows.subscribe(function(t,e){for(var n=0;n<e.rows.length;n++)if(e.rows[n]==e.insertBefore||e.rows[n]==e.insertBefore-1)return t.stopPropagation(),!1;return!0}),o.onMoveRows.subscribe(function(t,n){var o=n.rows;o=o.map(function(e){return a(g,e).idx});var r=a(g,n.insertBefore);null!==r&&(r=r.idx);for(var s=g.getItems(),l=0;l<s.length;l++)s[l].__pos=-1===o.indexOf(l)?l<r||null===r?1:3:2;g.sort(e);for(var l=0;l<s.length;l++)delete s[l].__pos;m.invalidateAllRows(),m.render()}),m.registerPlugin(o),m.module={view:{slick:{options:n}}},m.setSelectionModel(new l.CellSelectionModel),m.onAddNewRow.subscribe(function(e,t){const o=t.item;o[n.idField]||o.setChildSync([n.idField],Math.random().toString(36).slice(2)),g.addItem(o)}),m.init(),m.resizeCanvas(),m.render()}});c.dialog(r,u)}))},c.choose=async function(n,r){function a(){k.html(`
                <table><tr><td>
                ${w?`${w} sources left`:`Sources loaded.${m?` (${m} failed)`:""}`}
                </td>
                <td id="abc">
                </td></tr>
                `);var t=i(k.find("td")[1]);t.append(e.getLoadingAnimation(16,"blue")),w||t.remove()}function s(e){return d.then(function(t){t.data.beginUpdate();for(var n=0;n<e.length;n++)t.data.addItem(e[n]);t.data.endUpdate(),t.grid.invalidateAllRows(),t.grid.render(),t.grid.resizeCanvas(),w--,a()})}const l=await e.require("slickgrid");r=Object.assign({slick:{}},r);var d=new Promise(e=>{h=e}),u={formatter:function(){return"..."},asyncPostRender:p},m=0,g=Array.isArray(n),h,f,y,b,_,v,x,w,k;if(!r.asynchronous){if(g)v=n;else{var T=Object.keys(n);v=Array(T.length);for(var C=0;C<v.length;C++)v[C]={key:T[C],description:n[T[C]]}}d=s(v),S=[d]}else if(g){w=n.length;var S=Array(n.length);for(let e=0;e<n.length;e++)S[e]=n[e].promise.then(s).catch(function(n){t.error("failed",n),w--,m++,a()})}else throw new Error("Invalid arguments");var E=o.defaults(r.slick,{editable:!0,enableAddRow:!1,enableTextSelectionOnCells:!0,forceFitColumns:!0,explicitInitialization:!0,rowHeight:20,enableAsyncPostRender:!0});x=r.columns?r.columns:[{id:"key",name:"key",field:"key"},{id:"description",name:"description",field:"description"}];for(var C=0;C<x.length;C++)x[C]=o.defaults(x[C],u),!x[C].jpath&&x[C].field&&(x[C].jpath=[x[C].field]);return new Promise(function(t){e.loadCss("components/slickgrid/slick.grid.css").then(function(){var e=i("<div>"),n=i("<div>"),o=i("<div>").css("height",410);Promise.all(S).then(()=>{var n=y.getLength();if(0===n)return t(),void e.dialog("close");if(1===n&&r.autoSelect){var o=y.mapRowsToIds([0])[0];t(o),e.dialog("close")}y.sort(function(e,t){return void 0===e.order||void 0===t.order?0:e.order-t.order})}),_=r.noConfirmation?{}:{Cancel:function(){i(this).dialog("close")},Select:function(){t(b),i(this).dialog("close")}};const s=Object.assign({},{width:700,height:500},r.dialog,{noWrap:!0,closeOnEscape:!1,buttons:_,close:function(){t(null)},resize:function(){f.resizeCanvas()},open:function(){var s=this;o.addClass("flex-main-container"),n.addClass("flex-1"),k=i("<div>"),o.append(k),o.append(n),e.append(o),y=new l.Data.DataView,y.setItems([],r.idField||"key"),f=new l.Grid(n,y,x,E),f.setSelectionModel(new l.RowSelectionModel),f.onClick.subscribe(function(e,n){r.noSelect||(b=y.mapRowsToIds([n.row])[0],r.noConfirmation&&(t(b),i(s).dialog("close")))}),f.init(),h({data:y,grid:f}),a()}});c.dialog(e,s)})}).then(function(e){return r.returnRow?y.getItemById(e):r.returnColumn?y.getItemById(e)[r.returnColumn]:e})},c.confirm=function(e,t,n,r){return o.isUndefined(t)&&(t="Ok"),o.isUndefined(n)&&(n="Cancel"),new Promise(function(o){m||(m=i("<div/>"),i("body").append(m)),e&&m.html(e),r=Object.assign({modal:!0,width:400},r,{close:function(){o(!1)},buttons:{}}),null!==t&&""!==t&&(r.buttons[t]=function(){o(!0),i(this).dialog("close")}),null!==n&&""!==n&&(r.buttons[n]=function(){o(!1),i(this).dialog("close")}),m.dialog(r)})};var g={appendTo:"#ci-visualizer",modal:!0,autoDestroy:!0,autoPosition:!1,noHeader:!1,noWrap:!1};return c.dialog=function(e,t){"object"!=typeof e||e.jquery||(t=e,e=null),t=i.extend({},g,t);var n;return n=t.noWrap?i(e||"<div>"):i("<div>").html(e||""),t.autoDestroy&&!t.close&&(t.close=function(){i(this).dialog("destroy")}),t.autoPosition&&(t.position={my:"top+50",at:"center top",of:"#ci-visualizer"}),n.dialog(t),t.noHeader&&n.prev().remove(),n},c.selectJpath=async function(t,o,r){await e.require("fancytree");let a=null;const s=n.getJPathsFromElement(t),l=i("<div style=\"overflow: auto;\"/>");l.fancytree(Object.assign({},o,{source:{children:s,id:"element"},activate:function(e,t){a=t.node.key},toggleEffect:!1}));const d=await c.confirm(l,"Ok","Cancel",Object.assign({title:"Select a jpath"},r));return a&&(a=e.jpathToArray(a)),d?a:null},c.copyToClipboard=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};const n=t.successMessage,o=void 0===n?"Copy success":n,r=t.failureMessage,a=void 0===r?"Copy failure":r;var s=e.length,l=i("<textarea/>").text(e).css({width:0,height:0,position:"fixed"});i("body").append(l);var d=l.get(0);d.selectionStart=0,d.selectionEnd=s,d.focus();var p=document.execCommand("copy");p?c.showNotification(o,"success"):c.showNotification(a,"error"),l.remove()},c.downloadFile=function(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};const o=n.mimeType,i=void 0===o?"string"==typeof e?"text/plain":"application/octet-stream":o;require(["file-saver"],n=>{var o=new Blob("string"==typeof e?[e]:e,{type:i});n(o,t)})},c.showNotification=function(){var e=Array.from(arguments);e[1]=e[1]||"error",e[1]&&"string"==typeof e[1]?e[1]={className:e[1],autoHide:"error"!==e[1]}:e[1]&&"error"===e[1].className&&(e[1]=Object.assign({autoHide:!1},e[1])),i.notify.apply(i.notify,e)},c.progress=function(e,t){return t||(t=e),c.showNotification(t,{style:"inprogress",autoHide:!1,className:"xxx"}),u[e]=i(".notifyjs-inprogress-xxx").last(),e},c.stopProgress=function(e){u[e]&&(u[e].trigger("notify-hide"),delete u[e])},c.getSafeElement=function(e){return c.makeElementSafe(`<${e}>`)},c.makeElementSafe=function(e){return i(e).css({width:"100%",height:"100%",margin:0,padding:0,border:"none"})},c}),"use strict",define("src/util/versionhandler",["jquery","src/util/util","src/util/localdb","src/util/ui"],function(t,e,n,o){"use strict";var i=function(){this.currentPath=[],this._allData={},this.dom=t("<div />"),this.versionChangeDeferred=t.Deferred(),this._data={},this.structure={server:{title:"Server",children:{head:{title:"Head"},stored:{title:"Stored",children:!0}}},local:{title:"Local DB",children:{head:{title:"Head"},stored:{title:"Stored",children:!0}}}}};return i.prototype={setType:function(e){this.type=e},get reviver(){return this._reviver},set reviver(e){this._reviver=e},getData:function(){var e=this;return"server"==this.currentPath[1]?this._getServer().pipe(function(t){return"view"==e.type?e._data.server=new DataObject(t,!0):"data"==e.type&&(e._data.server=new DataObject(t,!0)),e._data.server},function(){return!1}):this._getLocal().pipe(function(t){return"object"!=typeof t&&(t=JSON.parse(t)),"view"==e.type?e._data.local=new DataObject(t,!0):"data"==e.type&&(e._data.local=new DataObject(t,!0)),e._data.local},function(){return!1})},getBranches:function(){var e=this;return t.when(this.getData()).pipe(function(t){var n={};for(var o in t)n[o]=`${o} (${t[o].list.length+("local"==e.currentPath[1]?1:0)})`;return n})},getElements:function(){var e=this,n=this.currentPath[2];return t.when(this.getData()).pipe(function(t){var o=t[n].list,r={};"local"==e.currentPath[1]&&t[n].head&&(r.head=e.makeFilename(t[n].head));for(var a=o.length-1;0<=a;a--)r[o[a]._time]=e.makeFilename(o[a]);return r})},makeFilename:function(t){if(!t._time)return"Head";var n=new Date(t._time),o=`${n.getDate()}/${n.getMonth()}/${n.getFullYear()} `;return o+=`${e.pad(n.getHours())}:${e.pad(n.getMinutes())}`,o},_getLocal:function(){var e=this;return n.open().pipe(function(){return n.getAll(e.type,e._dirUrl).pipe(function(e){return e})})},_getServer:function(){var e=t.Deferred();return t.ajax({url:this.getUrl(),type:"get",dataType:"json",data:{action:"Dir"},success:function(t){for(var n in t)for(var o in t[n].list=[],t[n].revisions)t[n].list.push({_time:t[n].revisions[o]});e.resolve(t)},error:function(){e.reject()}}),e},makeMenu:function(e){var n=this.structure,o=this;return 1==e?n={server:"Server",local:"Local Database"}:2==e?n=this.getBranches():3==e&&(n=this.getElements()),t.when(n).pipe(function(t){return Array.isArray(t)?o.arrayToMenu(t,e,o.currentPath[e-1]||null,o.currentPath[e-2]||null):o.objectToMenu(t,e,o.currentPath[e-1]||null,o.currentPath[e-2]||null)})},arrayToMenu:function(e,t,n,o){for(var r="",a=0,s=e.length;a<s;a++)r+=`<li draggable="false" data-parent-parent="${o}" data-parent="${n}" data-el="${e[a][1]}"><a>${e[a][0]}${3>t?`<ul draggable="false" class="ci-dataview-menu" data-level="${t+1}"><li><a>Fetching data...</a></li></ul>`:""}</a></li>`;return r},objectToMenu:function(e,t,n,o){var r="";for(var a in e)r+=`<li draggable="false" data-parent-parent="${o}" data-el="${a}" data-parent="${n}"><a>${e[a]}${3>t?`<ul draggable="false" class="ci-dataview-menu" data-level="${t+1}"><li><a>Fetching data...</a></li></ul>`:""}</a></li>`;return r},bindEventsMenu:function(e){var n=this;e.on("mouseenter","li",function(){var e=t(this);if(!(0<e.find(".ci-fetched").length)){var o=e.parent(),i=o.data("level");if(n.currentPath[i]=e.data("el"),3!=i)return n.makeMenu(i+1).then(function(o){o=t(o),e.find("ul").html(o).addClass("ci-fetched"),3==i+1&&"head"==n.currentPath[2]&&o.find("ul").remove(),n._menu.menu("refresh")},function(){e.find("ul").html("<li><a>No element here</a></li>").addClass("ci-fetched"),n._menu.menu("refresh")}),!1}}),e.on("mouseup","li",function(){var e=t(this),o=e.parent(),i=o.data("level");n.currentPath[i]=e.data("el"),0<e.find("ul").length||n.clickLeaf(e)})},buildDom:function(e){var t="<ul draggable=\"false\" class=\"ci-dataview\">";return t+=this._buildDomEl(1,this.currentPath[1]),t+=this._buildDomEl(2,this.currentPath[2]),t+=this._buildDomEl(3,this.makeFilename(e)),`${t}<li class="ci-spacer"></li></ul>`},_buildDomEl:function(e,t){var n,o;return 1==e?"server"==t?(n="On Server",o="server"):(n="Local DB",o="local"):2==e?(n=t,o=t):(n=t,o=t),`<li draggable="false" class="ci-dataview-lvl ci-dataview-lvl-${e}" data-level="${e}" data-value="${escape(o)}">${n}</li>${3>e?"<li class=\"inter\">></li>":""}`},bindEventsDom:function(e){var n=this;e.on("mousedown","li",function(){var e=t(this),o=e.position();n.makeMenu(e.data("level")).done(function(i){i=t(`<ul draggable="false" class="ci-dataview-menu" data-level="${e.data("level")}"></ul>`).append(i).menu(),n._menu=i,n.bindEventsMenu(i),i.appendTo("#visualizer-dataviews").css({position:"absolute",left:o.left,top:o.top+e.outerHeight(!0)})})}),t(document).on("mouseup",function(){t(".ci-dataview-menu").remove()})},getDom:function(){return this.dom},doUpdateButtons:function(){this.updateButtons&&this.updateButtons(this.type,this.currentPath[3],this.currentPath[1])},make:function(e){this.currentElement=e,this.doUpdateButtons();var n=t(this.buildDom(e));this.bindEventsDom(n),this.dom.empty().html(n),this.versionChange().notify(e),this._html=n},versionChange:function(){return this.versionChangeDeferred},clickLeaf:function(e){var n=this,o=e.data("el"),i=e.data("parent"),r=e.data("parent-parent");if("server"==r){var a={branch:i};"head"!==o&&(a.revision=o),this.getFromServer(a).done(function(e){n.currentPath[1]="server",n.currentPath[2]=i,n.currentPath[3]=o,n.make(e,i,o),n._savedServer=JSON.stringify(e),n.onReload(e)})}else t.when(this.getData()).done(function(e){if(e=e[i],"head"==o)e=e.head;else for(var t=0,r=e.list.length;t<r;t++)if(e.list[t]._time==o){e=e.list[t];break}n.currentPath[1]="local",n.currentPath[2]=i,n.currentPath[3]=o,n.make(e,i,o),n._savedLocal=JSON.stringify(e),n.onReload(e)})},loadReadonly:function(n,i){function r(e){e=a._reviver(JSON.parse(e)),a.make(e),a._onLoaded(e),n.resolve()}var a=this,s=this._defaultUrl,l=!0;i&&i.withCredentials&&(l=!1),t.ajax({url:s,timeout:2e5,dataType:"text",success:r,error:function(i){l?t.ajax({url:s,timeout:2e5,dataType:"text",success:r,error:function(t){o.showNotification(`Loading ${a.type} failed: ${t.statusText}`),n.reject(t)}}):(o.showNotification(`Loading ${a.type} failed: ${i.statusText}`),n.reject(i))},xhrFields:{withCredentials:!0}})},load:function(e,n,o,i){function r(e,t,n){s.currentPath[1]="local",s.currentPath[2]=t,s.currentPath[3]=n,s._savedLocal=JSON.stringify(e),s.make(e,s.currentPath[2],s.currentPath[3]),l.resolve(e),s._onLoaded(e)}function a(e,t,n){s.currentPath[1]="server",s.currentPath[2]=t,s.currentPath[3]=n,s.make(e,s.currentPath[2],s.currentPath[3]),s._savedServer=JSON.stringify(e),l.resolve(e),s._onLoaded(e)}this._dirUrl=e,this._defaultUrl=o,this.defaultBranch=n;var s=this,l=t.Deferred();if(!this._dirUrl&&this._defaultUrl)return this.loadReadonly(l,i),l;var d=this.defaultBranch||"Master",p=this.getFromServer({branch:d,action:"Load"}),c=s._getLocalHead(d);return t.when(p).then(function(e){var n=e._name||s.defaultBranch,o=e._time||"head",i=e._saved||0,l=s._getLocalHead(n);t.when(l).then(function(t){if(!t._saved)s.serverCopy(e,n,"head").done(function(){r(e,e._name,"head")});else{var l=t._saved||0;t._name=n,l>i&&0==1?r(t,t._name,t._time||"head"):a(e,n,o)}},function(){a(e,n,o)})},function(){t.when(s._getLocalHead(d)).then(function(e){r(e,d,e._time||"head")})}),l},getUrl:function(){return this._dirUrl},getMonth:function(t){return e.getMonth(t)},getDay:function(t){return e.getDay(t)},_getLocalHead:function(e){return e=e||"Master",n.getHead(this.type,this._dirUrl,e).pipe(function(e){return"object"!=typeof e&&(e=JSON.parse(e)),e})},_localSave:function(e,t,o){var i=this;return e._local=!0,e._time="head"!=t&&Date.now(),e._saved=Date.now(),n.open().pipe(function(){return n["head"==t?"storeToHead":"store"](i.type,i._dirUrl,o,e).pipe(function(t){return i.currentPath[1]="local",i.currentPath[2]=o,i.currentPath[3]=e._time||"head",t})})},localSave:function(e){this._localSave(e,e._time,e._name)},localSnapshot:function(e){e&&this._localSave(e,"stored",e._name||"Master").pipe(function(e){return e._time=!1,e})},localAutosave:function(e,t,n){var o=this;this._autosaveLocal&&window.clearInterval(this._autosaveLocal),e&&(this._autosaveLocal=window.setInterval(function(){var e=t();o._localSave(e,"head",e._name||"Master").done(function(){n&&n()})},1e4))},localBranch:function(e,t){e._name=t,e._time=!1;var n=this;return this._localSave(e,"head",t).pipe(function(e){n.make(e,n.currentPath[2],n.currentPath[3])})},localRevert:function(e){var t=this;e._time=!1,this._localSave(e,"head",e._name||"Master").done(function(e){t.make(e,t.currentPath[2],t.currentPath[3])})},autosaveServer:function(e,t,n){var o=this;this._autosaveServer&&window.clearInterval(this._autosaveServer),e&&(this._autosaveServer=window.setInterval(function(){o._saveToServer(t()).done(function(){n&&n()})},1e4))},_saveToServer:function(e){return e._local=!1,e._saved=Date.now(),e._time=Date.now(),this._savedServer=JSON.stringify(e),t.ajax({type:"post",url:this.getUrl(),data:{content:this._savedServer,branch:e._name,revision:e._saved,action:"Save"}})},getFromServer:function(e){var n=this,o=t.Deferred(),i=this.getUrl()||this._defaultUrl;return i?(e.action="Load",t.ajax({dataType:"text",type:"get",url:i,cache:!1,data:e||{},success:function(e){n._savedServer=e,e=n._reviver(JSON.parse(e)),o.resolve(e)},error:function(){o.reject()}}),o):o.resolve({})},serverCopy:function(e,t){var n=this;return e._name=e._name||t||"Master",e._time=!1,e._saved=Date.now(),this._localSave(e,"head",e._name).pipe(function(t){return n.make(t,e._name,"head")})},serverPush:function(e){return this._saveToServer(e)},_onLoaded:function(e){var t;t=DataObject.check(e,1),this.onLoaded(t)}},i}),"use strict",define("src/main/variables",["jquery","src/util/util","src/main/datas","src/util/debug"],function(e,t,n,o){"use strict";function i(e){var t=e.getId();for(var n of p.values())n.unlisten(t)}function r(e){return p.has(e)?p.get(e):a(e)}function a(e){const t=new c(e);return p.set(e,t),t}function s(){return Array.from(p.keys()).sort()}function l(e,t){if(0!==e.jpath.length){var n=e.jpath,o=n.length,i,r,a;loop1:for(var s of p.values())if(i=s.getjPath(),i){for(a=Math.min(i.length,o),r=0;r<a;r++)if(n[r]!==i[r])continue loop1;s.triggerChange(null,t)}}}var d=new DataObject;d.onChange(l);var p=new Map;class c{constructor(e){this._name=e,this._jpath=null,this._value=null,this._filter=null,this._listenedBy=new Set,this._listeners=[],this._defined=!1,this._upToDate=!0,this._killFilter=null}getName(){return this._name}isDefined(){return this._defined}setFilter(e){this._filter!==e&&(this._filter=e,this._upToDate=!1)}setjPath(e){"string"==typeof e&&(e=e.split("."),e.shift());var t=this._jpath,n=!0;if(t&&e.length===t.length){for(var o=0;o<t.length;o++)if(t[o]+""!==e[o]+""){n=!1;break}}else n=!1;return n||(this._jpath=e,this._upToDate=!1),this.update()}update(){if(!this._upToDate){this._killFilter&&this._killFilter(),this._killFilter=null;let e=null;if(this._filter){const t=this._filter;e=(e,n,o)=>{require([t],t=>("function"==typeof t.kill&&(this._killFilter=t.kill),"function"==typeof t.filter?t.filter(e,n,o):void o(new Error("No filter function defined"))))}}return this._upToDate=!0,this.triggerChange(e)}}getjPath(){return this._jpath}createData(e,t){return t=n.resurrect(t),d.setChild(e,t).then(()=>(this._upToDate=!1,this.setjPath(e)))}getData(){return this._value}setData(e){return e=n.resurrect(e),d.setChild(this.getjPath(),e).then(()=>{this._upToDate=!1,this.update()})}_setValue(e){this._value=e,this._defined=!0}getValue(){return this._value}listen(e,t){var n=e.getId();this._listenedBy.has(n)||(this._listeners.push({callback:t,id:n}),this._listenedBy.add(n))}unlisten(e){if(this._listenedBy.has(e)){for(var t=0,n=this._listeners.length;t<n;t++)if(this._listeners[t].id===e){this._listeners.splice(t,1);break}this._listenedBy.delete(e)}}triggerChange(e,t){this.rejectCurrentPromise&&(this.rejectCurrentPromise(new Error("latency")),this.rejectCurrentPromise=!1),this.currentPromise=new Promise((t,n)=>{this.rejectCurrentPromise=n;const i=t,r=n;return d.trace(this._jpath).then(t=>(e?new Promise((n,o)=>{e(t,n,o)}).then(e=>{e=DataObject.check(e,!0),i(e)},e=>{o.warn("Error during variable filtering : ",e),r(new Error("filter"))}):i(t),null),e=>{r(e)}),null}).then(e=>(this._setValue(e),e));for(var n=this.currentPromise.catch(e=>{"filter"===e.message||"latency"===e.message||o.error("Error in getting the variable through variable.js",e.stack||e)}),r=0,a=this._listeners.length;r<a;r++)this._listeners[r].id!==t&&this._listeners[r].callback.call(this,this);return n}onReady(){return this.currentPromise}}return{getVariable:r,setVariable:function(e,t,n,o){var i=r(e);return i.setFilter(o||null),t?i.setjPath(t):i.createData([e],n)},getNames:s,getData:function(){return d},exist:function(e){return p.has(e)},unlisten:i,eraseAll:function(){p=new Map}}}),"use strict",define("src/util/versioning",["jquery","./cache","./versionhandler","./debug","./ui","forms/button","src/main/variables","version"],function(e,t,n,o,i,r,a,s){"use strict";function l(e,t,n){n=n||{};var o=Promise.resolve();return e.data&&(k.data.url!==e.data.url||k.data.urls!==e.data.urls&&k.data.branch!==e.data.branch)&&(!n.doNotLoad&&(o=p(e.data.urls,e.data.branch,e.data.url,n)),k.data=e.data),e.view&&(k.view.url!==e.view.url||k.view.urls!==e.view.urls&&k.view.branch!==e.view.branch)&&(o=o.then(function(){if(k.view=e.view,!n.doNotLoad)return d(e.view.urls,e.view.branch,e.view.url,n)})),t&&require(["uri/URI.fragmentQuery"],function(t){var n=new t(window.location.href);e.data&&(n[`remove${T}`](["dataURL","dataBranch","results"]),e.data.urls?(n[`add${T}`]("results",e.data.urls),e.data.branch&&n[`add${T}`]("dataBranch",e.data.branch)):e.data.url&&n[`add${T}`]("dataURL",e.data.url)),e.view&&(n[`remove${T}`](["viewURL","viewBranch","views"]),e.view.urls?(n[`add${T}`]("views",e.view.urls),e.view.branch&&n[`add${T}`]("viewBranch",e.view.branch)):e.view.url&&n[`add${T}`]("viewURL",e.view.url)),window.history.pushState({type:"viewchange",value:e},"",n.href())}),o}function d(e,t,n,o){return v.load(e,t,n,o)}function p(e,t,n,o){return _.load(e,t,n,o)}function u(e){e&&e.version&&(y=e.version);for(var n in x)delete x[n];for(n in a.eraseAll(),t.clear(),e)x[n]=DataObject.recursiveTransform(e[n])}function m(e){var t,n;for(t in w)delete w[t];for(t in e)n=DataObject.check(e[t],!0),n&&(w[t]=n,n.linkToParent(w,t));w.triggerChange()}function g(e){return JSON.stringify(x,null,e)}function h(e){return JSON.stringify(w,null,e)}var f=s.version,y="none",b=!1,_=new n,v=new n,x=new DataObject,w=a.getData(),k={view:{},data:{}},T="Search";v.version=f,_.setType("data"),v.setType("view"),_.reviver=function(e){return DataObject.check(e,1,!1)},v.reviver=function(e){return DataObject.check(e,1,!1)},window.onpopstate=function(e){e.state&&"viewchange"===e.state.type&&l(e.state.value,!1)};const C={get version(){return f+""},get originalVersion(){return y+""},setView:d,setData:p,getView:function(){return x},getViewJSON:g,getData:function(){return w},getDataJSON:h,copyView:function(){var t=g("  "),n=t.length,o=e("<textarea/>").text(t).css({width:"100%",height:"95%"});i.dialog(o,{width:"80%",height:.7*e("#ci-visualizer").height()});var r=o.get(0);r.selectionStart=0,r.selectionEnd=n,r.focus()},pasteView:function(){var t=e("<textarea></textarea>").css({width:"100%",height:"200px"}),n=new r("Paste",function(){try{a=JSON.parse(t.val()),s=Object.keys(a);for(var e=0,n=s.length;e<n;e++)"_"===s[e].charAt(0)&&delete a[s[e]];C.setViewJSON(a)}catch(e){}o.dialog("close")}),o=i.dialog(t,{width:"80%"}).append(n.render()),a,s},copyData:function(){var t=h("  "),n=t.length,o=e("<textarea/>").text(t).css({width:"100%",height:"200px"});i.dialog(o,{width:"80%"});var r=o.get(0);r.selectionStart=0,r.selectionEnd=n,r.focus()},pasteData:function(){var t=e("<textarea></textarea>").css({width:"100%",height:"200px"}),n=new r("Paste",function(){try{a=JSON.parse(t.val()),s=Object.keys(a);for(var e=0,n=s.length;e<n;e++)"_"===s[e].charAt(0)&&delete a[s[e]];C.setDataJSON(a)}catch(e){}o.dialog("close")}),o=i.dialog(t,{width:"80%"}).append(n.render()),a,s},getViewHandler:function(){return v},getDataHandler:function(){return _},setViewLoadCallback:function(e){this.viewCallback=e;var t=this;v.onLoaded=function(n){u(n),e.call(t,x)},v.onReload=function(n){u(n),e.call(t,x,!0)}},setDataLoadCallback:function(e){this.dataCallback=e;var t=this;_.onLoaded=function(n){m(n),e.call(t,w)},_.onReload=function(n){m(n),e.call(t,w,!0)}},setViewJSON:function(e){u(e),this.viewCallback(x,!0),v.versionChange().notify(x)},setDataJSON:function(e){m(e),this.dataCallback(w,!0)},blankView:function(){this.setViewJSON({})},switchView:l,setURLType:function(e){T=e},viewLock:function(){b=!0},isViewLocked:function(){return b},lastLoaded:k};return C}),"use strict",define("src/header/header",["require","jquery","src/util/versioning"],function(e,t,n){"use strict";class o{constructor(e){this.elements=[],e.elements&&this.loadHeaderElements(e.elements),this.dom=t("<div id=\"header\"><div id=\"title\"><div></div></div></div>"),t("#ci-visualizer").prepend(this.dom),this.setHeight(e.height||"30px"),this._titleDiv=t("#title").children("div"),this._titleDiv.attr("contenteditable","true").bind("keypress",function(n){n.stopPropagation();13!==n.keyCode||(n.preventDefault(),t(this).trigger("blur"))}).bind("blur",function(){n.getView().configuration.set("title",t(this).text().replace(/[\r\n]/g,""))}),n.getViewHandler().versionChange().progress(e=>{this.setTitle(e)})}setHeight(e){this.dom.css("height",e),t("#modules-grid").css("margin-top",e)}setTitle(e){this._titleDiv.text(e.configuration?e.configuration.title:"Untitled")}loadHeaderElements(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)this.addHeaderElement(t,this.createElement(e[t]));Promise.all(this.elements).then(this.buildHeaderElements.bind(this))}}addHeaderElement(e,t){this.elements[e]=t}createElement(t){return new Promise(function(n,o){let i;i=-1<t.type.indexOf("/")?t.type:`./components/${t.type}`,e([i],function(e){const o=new e;o.init(t),n(o)},o)})}buildHeaderElements(e){this.ul&&this.ul.empty(),this.ul=this.ul||t("<ul class=\"noselect\" />").appendTo(this.dom);for(let t=0;t<e.length;t++)this.ul.append(e[t].getDom())}}return{init(e){new o(e)}}}),"use strict",define("src/util/event",[],function(){"use strict";function e(){}var t=Array.prototype.slice;return e.prototype.on=function(e){return this.topics=this.topics||[],this.topics[e]=this.topics[e]||$.Callbacks(),this.topics[e].add.apply(this.topics[e],t.call(arguments,1)),this},e.prototype.off=function(e){return this.topics&&this.topics[e]&&this.topics[e].remove.apply(this.topics[e],t.call(arguments,1)),this},e.prototype.trigger=function(e){this.topics&&this.topics[e]&&this.topics[e].fireWith(this,t.call(arguments,1))},e}),"use strict",define("src/util/repository",["jquery","src/util/event"],function(e,t){"use strict";function n(e){this._killers={},this._value=[],this.options=e||{doNotSave:!1},this.on("change",function(e,t,n){var o={};this._keys=this._keys||[],e=Array.isArray(e)?e:[e];for(var r=0;r<e.length;r++)if(null!=this._keys[e[r]])for(var s=0;s<this._keys[e[r]].length;s++)o[this._keys[e[r]][s]]=!0;loop1:for(r in o){var l=this._callbacks[r];if(l){var d=a(l[0],e);if(0<d.length||(!d||0==d.length)&&l[2]){for(var p in this._killers)if(-1<this._killers[p].indexOf(+r)){l[1](t,d,p,n);continue loop1}l[1](t,d,null)}}}})}var o=-1,r=function e(t,n,o,r){for(var a=0,s=n.length;a<s;a++){if(Array.isArray(n[a])){e(t,n[a],o,r);continue}if(t._keys[n[a]]=t._keys[n[a]]||[],r)t._keys[n[a]].push(o);else{var l=t._keys[n[a]].indexOf(o);if(-1==l)continue;t._keys[n[a]].splice(l,1)}}},a=function(e,t){for(var n=t.slice(0),o={},r=0,a=e.length;r<a;r++)o[e[r]]=!0;return s(o,n,!0)},s=function e(t,n,o){var r=[],a,s,d;for(a=0,s=n.length;a<s;a++){if(d=n[a],Array.isArray(d)&&(d=e(t,d,!o)),!t[d]&&!o)return null;t[d]&&r.push(d)}return r};return e.extend(n.prototype,t.prototype),n.prototype.get=function(e){return!0===this.options.doNotSave?void 0:this._value[e]},n.prototype.set=function(e,t,n,o){Array.isArray(e)?!e.length&&(e=[]):e=[e],this._value=this._value||[],!0===this.options.doNotSave||(this._value[e]=[e,t]),n||this.trigger("change",e,t,o)},n.prototype.listen=function(e,t,n,i){if(this._keys=this._keys||{},this._callbacks=this._callbacks||[],Array.isArray(e)||(e=[e]),e&&null!=e.length&&0!=e.length){var a=++o;return this._callbacks[a]=[e,t,n],i&&(this._killers[i]=this._killers[i]||[],this._killers[i].push(a)),r(this,e,a,!0),o}},n.prototype.kill=function(e){if(this._killers[e]){for(var t=this._killers[e],n=0,o=t.length;n<o;n++)r(this,this._callbacks[t[n]][0],t[n],!1),delete this._callbacks[t[n]];this._killers[e]=[]}},n.prototype.resetVariables=function(){this._keys={},this._value=[]},n.prototype.resetCallbacks=function(){this._killers={},this._callbacks=[]},n.prototype.unListen=function(e,t){this._keys=this._keys||{},this._callbacks=this._callbacks||[],this._callbacks[t]=void 0,r(this,e,t,!1)},n.prototype.resendAll=function(){if(!0!==this.options.doNotSave)for(var e in this._value)this.set(this._value[e][0],this._value[e][1])},n.prototype.getKeys=function(){var e=this._value,t=[];for(var n in e)t.push(n);return t},n}),"use strict",define("src/util/config",["./versioning"],function(e){"use strict";var t=["undefined","all","global-configuration","configuration","copy","paste","duplicate","add","layers","utils","remove","export","print","refresh","tofront","toback","move","custom","fullscreen"],n;return{getConfig:function(){return n},setConfig:function(e){n=e},contextMenu:function(){return n&&n.contextMenu?n.contextMenu:e.isViewLocked()?[]:t}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ui/widgets/menu",["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),o=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),!t.isPropagationStopped()&&(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&o.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),o=e(t.currentTarget);n[0]!==o[0]||(this._removeClass(o.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,o))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show(),n.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n=!0,o,i,r,a;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:n=!1,i=this.previousFilter||"",a=!1,r=96<=t.keyCode&&105>=t.keyCode?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===i?a=!0:r=i+r,o=this._filterMenuItems(r),o=a&&-1!==o.index(this.active.next())?this.active.nextAll(".ui-menu-item"):o,o.length||(r=String.fromCharCode(t.keyCode),o=this._filterMenuItems(r)),o.length?(this.focus(t,o),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter;}n&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t=this,n=this.options.icons.submenu,o=this.element.find(this.options.menus),i,r,a,s,l;this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),a=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var o=e(this),i=o.prev(),r=e("<span>").data("ui-menu-submenu-caret",!0);t._addClass(r,"ui-menu-icon","ui-icon "+n),i.attr("aria-haspopup","true").prepend(r),o.attr("aria-labelledby",i.attr("id"))}),this._addClass(a,"ui-menu","ui-widget ui-widget-content ui-front"),i=o.add(this.element),r=i.find(this.options.items),r.not(".ui-menu-item").each(function(){var n=e(this);t._isDivider(n)&&t._addClass(n,"ui-menu-divider","ui-widget-content")}),s=r.not(".ui-menu-item, .ui-menu-divider"),l=s.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(l,"ui-menu-item-wrapper"),r.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e+""),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,o,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),o=this.active.children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",o.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,o,i,r,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-o,r=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),0>i?this.activeMenu.scrollTop(r+i):i+s>a&&this.activeMenu.scrollTop(r+i-a+s))},blur:function(e,t){t||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer);"true"!==e.attr("aria-hidden")||(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var o=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));o.length||(o=this.element),this._close(o),this.blur(t),this._removeClass(o.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=o},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var o;this.active&&("first"===e||"last"===e?o=this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):o=this.active[e+"All"](".ui-menu-item").eq(0)),o&&o.length&&this.active||(o=this.activeMenu.find(this.options.items)[t]()),this.focus(n,o)},nextPage:function(t){var n,o,i;return this.active?void(this.isLastItem()||(this._hasScroll()?(o=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-o-i}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,o,i;return this.active?void(this.isFirstItem()||(this._hasScroll()?(o=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),0<n.offset().top-o+i}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),o=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return o.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}})}),"use strict",define("src/util/context",["jquery","src/util/config","jquery-ui/ui/widgets/menu"],function(t,n){"use strict";var o;return{listen:function(e,r,a,s){Array.isArray(r[0])||(r=[r]),e.addEventListener("contextmenu",function(i){a&&a(o);for(let e=0;e<r.length;e++)(function(e,t,r){-1===n.contextMenu().indexOf("all")&&-1===n.contextMenu().indexOf(e.attr("name")||"undefined")||((r&&r(i,e)||!r)&&o.append(e),e.on("mouseup",function(e){2===e.button||t&&t.call(this,i,e)}))})(t(r[e][0]),r[e][1],r[e][2]);s&&s(o)},!0)},unlisten:function(e){e.removeEventListener("contextmenu")},getRootDom:function(){return this.dom},init:function(e){this.dom=e;var n,i;e.addEventListener("contextmenu",function(r){function e(){o&&(o.hasClass("ui-menu")&&o.menu("destroy"),o.remove()),o=null,t(document).unbind("click",e)}o&&(o.hasClass("ui-menu")&&o.menu("destroy"),o.remove()),o=null,n=r.clientY-1,i=r.clientX-1;var a=t("<ul class=\"ci-contextmenu\"></ul>").css({position:"fixed",left:i,top:n,"z-index":1e4}).appendTo(t("body"));o=a,t(document).bind("click",e)},!0),e.parentNode.addEventListener("contextmenu",function(t){if(0<o.children().length){o.menu({select:function(e,t){t.item.attr("name")}}),t.preventDefault(),t.stopPropagation();var e=o.height(),r=o.width(),a=document.documentElement.clientHeight,s=document.documentElement.clientWidth;return n+e>a&&o.css("top",Math.max(0,a-e-10)),i+r>s&&o.css("left",Math.max(0,s-r-10)),!1}},!1)}}}),"use strict",define("src/util/sandbox",["version","babel"],function(Version,babel){"use strict";function Sandbox(){this.contextData=[],this.contextString="",this.scriptID=0}function safeEval(script,__ctx__,Sandbox,babel,safeEval){return eval(script)}const shouldUseBabel=!Version.isModernBrowser;return Sandbox.prototype.setContext=function(e){let t="",n=[];Object.keys(e).forEach(function(o,r){t+=`var ${o} = __ctx__[${r}]; `,n.push(e[o])}),this.contextString=t,this.contextData=n},Sandbox.prototype.run=function(e,t){return t&&(e+=`//# sourceURL=${t}@${this.scriptID++}`),e=this.contextString+e,shouldUseBabel&&(e=babel.transform(e,{presets:["es2015","es2016","es2017"]}).code),safeEval(e,this.contextData.slice())},Sandbox}),"use strict",define("src/util/actionmanager",["./versioning","./sandbox"],function(e,t){"use strict";function n(){const e=o();if(e&&!d){const n=new t;n.setContext({API:l});const o={};for(let t=0;t<e.length;t++){const i=e[t].groups.action[0];o[i.name[0]]=n.run(`(function(value) { ${i.script[0]} })`)}d=o}}function o(){return e.getView().actionscripts||[]}function i(t){d=void 0,e.getView().actionscripts=t,n(t)}function r(t){e.getView().actionfiles=t,a()}function a(){const t=e.getView().actionfiles;if(p={},!!t)for(let e=0,n=t[0].groups.action[0].length;e<n;e++)p[t[0].groups.action[0][e].name]=p[t[0].groups.action[0][e].name]||[],p[t[0].groups.action[0][e].name].push({file:t[0].groups.action[0][e].file,mode:t[0].groups.action[0][e].mode})}function s(e,t){switch(e.mode){case"amd":{require([e.file],function(e){e(t)});break}case"worker":{const n=new Worker(e.file);n.postMessage({method:"actionValue",value:t}),n.onmessage=function(e){if(e.data.method)switch(e.data.method){case"getVar":{if(!Array.isArray(e.data.variables))return;const t={},o=e.data.variables;for(let e=0;e<o.length;e++)t[o[e]]=l.getVar(o[e]);n.postMessage({method:"getVar",variables:t});break}case"setVar":{if(!e.data.variables)return;for(const t in e.data.variables)l.setVar(t,e.data.variables[t]);break}case"terminate":{n.terminate();break}case"sendAction":{if(!e.data.actionName)return;l.doAction(e.data.actionName,e.data.actionValue);break}case"highlight":{if(!e.data.highlightId)return;l.highlightId(e.data.highlightId,e.data.highlightValue||!1);break}}};break}}}let l,d,p;return{setScriptsFromForm(e){i(e)},setFilesFromForm(e){r(e)},viewHasChanged(e){i(e.actionscripts),a()},getScriptsForm(){return e.getView().actionscripts||[]},getFilesForm(){return e.getView().actionfiles||[]},listActions(){let e=[];return p&&e.push(...Object.keys(p)),d&&e.push(...Object.keys(d)),e},execute(e,t){if(d&&d[e]&&setImmediate(function(){d[e](t)}),p&&p[e])for(let n=0;n<p[e].length;n++)s(p[e][n],t)},setAPI(e){l=e}}}),"use strict",define("src/util/api",["./cache","./actionmanager","./util","./ui","./versioning","./config","src/main/variables","src/main/datas","lodash","src/main/grid"],function(e,t,n,o,i,r,a,s,l){"use strict";var d=n.getLoadingAnimation(64,"slateblue"),p=$("<div>",{id:"ci-loading"}).append(d).append($("<div>",{id:"ci-loading-message",class:"ci-loading-subtitle"})),c={},u=0,m={getRepositoryData:function(){return this.repositoryData},setRepositoryData:function(e){this.repositoryData=e},getRepositoryHighlights:function(){return this.repositoryHighlights},setRepositoryHighlights:function(e){this.repositoryHighlights=e},getRepositoryActions:function(){return this.repositoryActions},setRepositoryActions:function(e){this.repositoryActions=e},listenHighlight:function(){arguments[0]&&"undefined"!=typeof arguments[0]._highlight&&(arguments[0]=arguments[0]._highlight,this.repositoryHighlights.listen.apply(this.repositoryHighlights,arguments))},killHighlight:function(){this.repositoryHighlights.kill.apply(this.repositoryHighlights,arguments)},highlightId:function(e,t,n){this.repositoryHighlights.set(e,t,null,n)},getAllFilters:function(){return g},setAllFilters:function(e){g=l([e,g]).flatten().filter(e=>e&&e.name&&e.file).uniq(e=>e.file).unshift({file:"",name:"No filter"}).value()},isViewLocked:function(){return i.isViewLocked()},viewLock:function(){return i.viewLock()},getContextMenu:function(){return r.contextMenu()},dev_fctCalled:function(){},dev_fctUncalled:function(){},dev_assert:function(){}},g;return m.existVariable=function(e){return a.exist(e)},m.existVar=m.existVariable,m.setVariable=function(e,t,n,o){Array.isArray(t)&&(o=n,n=t,t=null),n=n||[];var i=t?t.getjPath().concat(n):n;return a.setVariable(e,i,!1,o)},m.setVar=m.setVariable,m.createData=function(e,t,n){return m.createDataJpath(e,t,[],n)},m.createDataJpath=function(e,t,n,o){return t=s.check(s.resurrect(t),!0),t&&t.trace?t.trace(n).then(t=>a.setVariable(e,!1,t,o)):a.setVariable(e,!1,t,o)},m.getVariable=function(e){return a.getVariable(e)},m.getVar=m.getVariable,m.getData=function(e){return m.getVariable(e).getData()},m.setHighlight=function(e,t){e&&(Array.isArray(e)&&(e={_highlight:e}),"undefined"==typeof e._highlight||this.repositoryHighlights.set(e._highlight,t))},m.highlight=m.setHighlight,m.loading=function(e,t){t||(t=e),0==u&&$("#ci-visualizer").append(p),c[e]?c[e].html(t):(c[e]=$(`<div>${t}</div>`),u++,$("#ci-loading-message").append(c[e]))},m.stopLoading=function(e){c[e]&&(u--,c[e].detach(),c[e]=null,0==u&&p.detach())},m.doAction=function(e,n){s.isSpecialObject(n)&&(n=n.get()),this.repositoryActions.set(e,n),t.execute(e,n)},m.domToHTML=async function(e){let t=e.querySelectorAll("canvas"),n=e.cloneNode(!0),o=n.querySelectorAll("canvas");for(let n=0;n<t.length;n++){const e=t[n].toDataURL("image/png");o[n].parentElement.innerHTML=`<img src="${e}" />`}let r=e.querySelectorAll("svg"),a=n.querySelectorAll("svg");const s=[];for(let t=0;t<r.length;t++){const e=r[t],n=a[t],o=e.clientWidth,i=e.clientHeight,l=e.outerHTML,d=document.createElement("canvas");d.setAttribute("width",o),d.setAttribute("height",i);const p=d.getContext("2d");p.fillStyle="white",p.fillRect(0,0,d.width,d.height);const c=new Image,u=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(u),g=new Promise(e=>{c.onload=()=>{p.drawImage(c,0,0);const t=d.toDataURL("image/png"),o=document.createElement("img");o.src=t,n.replaceWith(o),URL.revokeObjectURL(m),e()}});s.push(g),c.src=m}return await Promise.all(s),n.innerHTML},m.copyHTMLToClipboard=async function(e){const t="text/html";if("undefined"==typeof ClipboardItem)return void o.showNotification("Copy to clipboard not supported in this browser","error");const n=new Blob([e],{type:t}),i=[new ClipboardItem({[t]:n})];navigator.clipboard.write(i).then(()=>{o.showNotification("Copied to clipboard","success")},()=>{o.showNotification("Failed to copy to clipboard","error")})},m.getModule=function(e){const t=require("modules/modulefactory");return t.getModule(e)},m.getModulePreferences=function(e){function t(e){let t=r[e];var n=i;for(let o=0;o<t.length&&(n=n[t[o]],"undefined"!=typeof n);o++);return n}const n=require("modules/modulefactory"),o=n.getModule(e),i=o.definition.configuration,r=o.controller.configAliases,a={};for(let n in r)a[n]=t(n);return a},m.updateModulePreferences=function(e,t){function n(e){for(var t=a,n=0,o=e.length-1;n<o&&(t=t[e[n]],"undefined"!=typeof t);n++);return t}const o=require("modules/modulefactory"),r=o.getModule(e);var a=r.definition.configuration,s=r.controller.configAliases,l;for(var d in t)if(t.hasOwnProperty(d)){var i=s[d];i&&(l=n(s[d]),l[0]=t[d])}r.reload()},m.executeAction=n.deprecate(function(e,n){t.execute(e,n)},"API.doAction is the recommended method."),m.cache=function(t,n){return 1===arguments.length?e.get(t):void e.set(t,n)},m.cache.clear=function(){return e.clear()},m.getLayerNames=function(){return require("src/main/grid").getLayerNames()},m.switchToLayer=function(e,t){return require("src/main/grid").switchToLayer(e,t)},m.getActiveLayerName=function(){return require("src/main/grid").getActiveLayerName()},m.preventUnload=function(t){window.onbeforeunload=function(n){return n.returnValue=t,t}},m.clearPreventUnload=function(){window.onbeforeunload=null},m.onAction=function(e,t){return m.getRepositoryActions().listen(e,t)},m.offAction=function(e){return m.getRepositoryActions().unlisten(e)},m.require=n.require,t.setAPI(m),m}),"use strict",define("src/util/fullscreen",["src/util/ui"],function(e){"use strict";function t(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,t=n.view;e?(i=e.getAttribute("style"),e.setAttribute("style","height:100%; width:100%; background-color:white;"),o=e,r={height:t.height,width:t.width},t.height=n.getDomContent().height(),t.width=n.getDomContent().width()):(o.setAttribute("style",i),t.height=r.height,t.width=r.width,i=r=o=null),n.view.onResize(t.width,t.height)}var n,o,i,r;return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t),{requestFullscreen:function(t){if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){n=t;var o=t.getDomContent()[0];o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}else e.showNotification("Sorry, fullscreen not available in this context","info")}}}),"use strict",define("forms/sectionelement",["require","jquery"],function(e,t){"use strict";var n=function(){};return n.defaultOptions={},t.extend(n.prototype,{init:function(e){this.options=t.extend({},n.defaultOptions,e),this.splice=Array.prototype.splice,this.groupElements={},this.sectionElements={},this.fieldElements=[],this.readyDef=t.Deferred(),this.done=0},fill:function(e,t){return this._fillGroups(e.groups,t),this._fillSections(e.sections,t),0==this.done&&this.readyDef.resolve(),this.readyDef},_fillGroups:function(e,t){var n=this.section.getGroups();this._fill(n,this.getGroupElement,e,t)},_fillSections:function(e,t){var n=this.section.getSections();this._fill(n,this.getSectionElement,e,t)},_fill:function(e,t,n,o){var r=this;n||(n={});var a,s,d;for(a in e)for(n[a]||(n[a]={}),n[a]instanceof Array||(n[a]=[n[a]]),s=0,d=n[a].length,0==d&&(n[a][0]={},d++);s<d;s++)r.done++,t.call(this,a,s).fill(n[a][s],o).done(function(){r.done--,0==r.done&&r.readyDef.resolve()})},visible:function(){this.eachElements(function(e){e.visible()})},condDisplay:function(e,t,n){var o=0,r,a;for("section"===t?r=this.sectionElements[e]:"group"===t?r=this.groupElements[e]:void 0,a=r.length;o<a;o++)n?r[o].show():r[o].hide()},eachGroupElements:function(e,t){if(this.groupElements[e])for(var n=0,o=this.groupElements[e].length;n<o;n++)t.call(this,this.groupElements[e][n])},inDom:function(){this.eachElements(function(e){e.inDom()})},eachElements:function(e){var t=this;this.section.eachGroups(function(n){t.eachGroupElements(n.getName(),function(t){e(t,"group",n.getName())})}),this.section.eachSections(function(n){t.eachSectionElements(n.getName(),function(t){e(t,"section",n.getName())})})},redoTabIndices:function(){this.eachElements(function(e){e.redoTabIndices()})},addFieldElement:function(e){this.fieldElements.push(e)},removeFieldElement:function(e){this.fieldElements.splice(this.fieldElements.indexOf(e),1)},eachSectionElements:function(e,t){if(this.sectionElements[e])for(var n=0,o=this.sectionElements[e].length;n<o;n++)t.call(this,this.sectionElements[e][n])},getGroupElement:function(e,t){return this._getElement(this.groupElements,this.section.getGroup,this.section,e,t)},getSectionElement:function(e,t){return this._getElement(this.sectionElements,this.section.getSection,this.section,e,t)},_getElement:function(e,t,n,o,i){var r;return e[o]=e[o]||[],e[o][i]||(r=t.call(n,o).makeElement(),r.sectionElement=this,e[o][i]=r),e[o][i]},getSectionElements:function(){return this.sectionElements},getGroupElements:function(){return this.groupElements},getValue:function(){var e=this.getGroupElements(),t=this.getSectionElements(),n={sections:{},groups:{}};return this._getValue(t,n.sections),this._getValue(e,n.groups),n},_getValue:function(e,t){var n,o,r;for(n in e)for(o=0,r=e[n].length,t[n]=[];o<r;o++)t[n].push(e[n][o].getValue());return t},getTitle:function(){return this.section.options.title||!1},getTitleIcon:function(){var t="",n=this.getTitle();return this.section.options.icon&&(t+="<img src=\""+e.toUrl("./images/"+this.section.options.icon+".png")+"\" />"),n&&(t+="<div>"+n+"</div>"),t},makeDom:function(){var e=this,n=t("<div />"),o,r,a;switch(this.section.form.tplMode){case 1:1==this.section.sectionLevel?(this.section.form.sectionLvl1Buttons.append("<div data-section-name=\""+this.section.getName()+"\" class=\"form-section-select\">"+this.getTitleIcon()+"</div>"),n.hide()):this.stdTitle(n);break;default:this.stdTitle(n);}for(o in this.groupElements)for(a=this.groupElements[o].length,r=0;r<a;r++)n.append(this.groupElements[o][r].makeDom());for(o in this.sectionElements)for(a=this.sectionElements[o].length,r=0;r<a;r++)n.append(this.sectionElements[o][r].makeDom());return this.dom=n},stdTitle:function(e){var n=this.getTitle(),o=this.section.sectionLevel;if(n||this.section.options.multiple){var i=t("<h"+o+">"+n+"</h"+o+">");this.section.options.multiple&&i.append(this.makeDuplicator()),e.append(i)}},makeDuplicator:function(){var e=this;return t("<div class=\"form-duplicator-wrapper\"><span class=\"form-duplicator form-duplicator-add\">duplicate</span> - <span class=\"form-duplicator form-duplicator-remove\">remove</span></div>").on("click","span",function(){var n=t(this).hasClass("form-duplicator-add");e.sectionElement[n?"duplicateSectionElement":"removeSectionElement"](e)})},show:function(){this.dom.show()},hide:function(){this.dom.hide()},getSectionIndex:function(e){var t=e.section.getName();if(!this.sectionElements[t])return this.form.throwError("Cannot get section index. Section name "+t+" doesn't exist");var n=this.sectionElements[t].indexOf(e);return 0>n?this.form.throwError("Cannot get section index. Cannot find section element"):n},removeSectionElement:function(e){var t=this,n=e.section.getName(),o=this.getSectionIndex(e);!1===o||(1==this.sectionElements[n].length&&this.duplicateSectionElement(e),this.sectionElements[n].splice(o,1),e.dom.remove(),e.dom=null,e=null)},duplicateSectionElement:function(e){var t=this,n=e.section.getName(),o=this.getSectionIndex(e);if(!1!==o){var r=this.section.getSection(n).makeElement();return r.sectionElement=this,this.sectionElements[n].splice(o+1,0,r),r.fill({}),r.readyDef.then(function(){e&&e.dom?e.dom.after(r.makeDom()):t.dom.append(r.makeDom());for(var n=0,o=r.fieldElements.length;n<o;n++)t.section.form.conditionalDisplayer.changed(r.fieldElements[n]);r.inDom()}),r}},ready:function(){return t.when.apply(t.when,this.deferreds)},makeDomTpl:function(){return this._makeDomTpl()},_makeDomTpl:function(){this.dom=this.section._tplClean.clone();var e,t,n;for(e in this.sectionElements)for(t=0,n=this.sectionElements[e].length;t<n;t++)this.dom.find(".form-section-section-container").append(this.sectionElements[e][t].makeDomTpl());for(e in this.groupElements)for(t=0,n=this.groupElements[e].length;t<n;t++)this.dom.find(".form-section-group-container").append(this.groupElements[e][t].makeDomTpl());return this.dom}}),n}),"use strict",define("forms/field",["require","jquery"],function(e,t){"use strict";var n=function(e){this.name=e};return n.defaultOptions={},t.extend(n.prototype,{init:function(e){this.options=t.extend({},n.defaultOptions,e),this.elements=[],this.initimpl()},initimpl:function(){},getTitle:function(){return this.options.title||"Title"},getType:function(){return this.options.type},getName:function(){return this.name||""},isHidden:function(){return this.options.hidden},isDisplayed:function(){return!0===this.options.displayed||void 0===this.options.displayed},makeElement:function(){var n=this,o=this.group.options.type,i=this.options.type,r=t.Deferred();return e(["./types/"+i+"/"+o],function(e){var o=new e;o.init(n.options),o.field=n,n.elements.push(o),t.when(o.ready).then(function(){r.resolve(o)})}),this.group.form.addFieldElement(r),r},removeElement:function(e){this.elements.splice(this.elements.indexOf(e),1)},showExpander:function(e){this._showExpander(e)},_showExpander:function(e){var t=e.domExpander||this.domExpander;this.fieldElementExpanded=e,this.form.setExpander(t,e)},getElementExpanded:function(){return this.fieldElementExpanded},changed:function(e){this.options.onChange&&this.options.onChange.call(this,e)},getOptions:function(e){return e.getOptions()||this.options.options},validate:function(e,t){var n=0,o;if(this.options.validation&&this.options.validation.rules)for(o=this.options.validation.rules.length;n<o;n++){if(this.options.validation.rules[n].pattern)if(this.options.validation.rules[n].orEmpty&&!t||new RegExp(this.options.validation.rules[n].pattern).test(t))e.validation.error=!1;else{e.validation.error=!0,e.validation.feedback=this.options.validation.rules[n].feedback;break}if("undefined"!=typeof this.options.validation.rules[n].nonEmpty)if(!this.options.validation.rules[n].nonEmpty||t)e.validation.error=!1;else{e.validation.error=!0,e.validation.feedback=this.options.validation.rules[n].feedback;break}}}}),Object.defineProperty(n.prototype,"form",{enumerable:!0,configurable:!1,get:function(){return this._form||this.group.form},set:function(e){this._form=e}}),n}),"use strict",define("forms/groupelement",["jquery"],function(e){"use strict";var t=function(){};return t.defaultOptions={},e.extend(t.prototype,{init:function(n){this.options=e.extend({},t.defaultOptions,n),this.splice=Array.prototype.splice,this.readyDef=e.Deferred(),this.fieldElements={}},set section(e){this._section=e},get section(){return this._section},set sectionElement(e){this._sectionElement=e},get sectionElement(){return this._sectionElement},set group(e){this._group=e},get group(){return this._group},_fill:function(e,t){var n=this,o=0,r,a,s;for(r in e._title&&this.setTitle(e._title),this.group.eachFields(function(t){n.getFieldElement(t.getName(),0),e[t.getName()]||(e[t.getName()]=[])}),e)for(e[r]instanceof Array||(e[r]=[e[r]]),a=0,s=e[r].length,0==s&&(e[r][0]=null,s=1);a<s;a++)o++,this.fillElement(r,a,e[r][a],t).then(function(){o--,0==o&&n.readyDef.resolve()});return n.readyDef},fill:function(e,t){return this._fill(e,t)},fillElement:function(t,n,o){return e.when(this.getFieldElement(t,n)).then(function(e){e&&e.setDefaultOr(o)})},inDom:function(){var e=this;this.group.eachFields(function(t){e.eachFieldElements(t.getName(),function(e){e._inDom=!0,e.inDom(),e._validate(e._value)})})},visible:function(){},show:function(){this.dom.show()},hide:function(){this.dom.hide()},getFieldElement:function(e,t){var n=this,o;if(this.group.getField(e))return this.fieldElements[e]=this.fieldElements[e]||[],this.fieldElements[e][t]?this.fieldElements[e][t]:(o=this.group.getField(e).makeElement().done(function(o){o.group=n.group,o.groupElement=n,n.sectionElement.addFieldElement(o),n.fieldElements[e][t]=o}),o)},_getElement:function(e,t,n,o){return e[n]=e[n]||[],e[n][o]},getFieldElements:function(){return this.fieldElements},eachFieldElements:function(e,t){var n=this.getFieldElements()[e],o,r;if(!n)return this.form.throwError("Cannot iterate over field. Field "+e+" does not exist");for(o=0,r=n.length;o<r;o++)t.call(this,n[o])},makeDomTpl:function(){return this._makeDomTpl()},getTitle:function(){return this._title||this.group.getTitle()},setTitle:function(e){this._title=e}}),t}),"use strict",define("forms/grouplistelement",["jquery","./groupelement"],function(e,t){"use strict";var n=function(){};return n.prototype=new t,n.prototype.makeDom=function(t){!t&&this.dom&&this.updateDom();var n=this,o=e("<div />").addClass("form-group-list"),i,r,a;return this.group.getTitle()&&o.append("<div class=\"form-groupelement-title\">"+this.getTitle()+"</div>"),n.fieldElementsDom=n.fieldElementsDom||{},this.group.eachFields(function(t){t.isDisplayed()&&(i=e("<div />").addClass("form-field-list-"+t.getType()),r=e("<label />").html(t.getTitle(!0)),i.append(r),a=e("<div />").addClass("form-field-list-elements"),i.append(a),o.append(i),n.fieldElementsDom[t.getName()]=a)}),this.updateDom(),this.dom=o,this.dom},n.prototype.updateDom=function(){var e=this;return e.fieldElementsDom=e.fieldElementsDom||{},this.group.eachFields(function(t){e.fieldElementsDom[t.getName()]&&(e.fieldElementsDom[t.getName()].children().detach(),e.eachFieldElements(t.getName(),function(n){e.fieldElementsDom[t.getName()].append(n.getDom())}))}),this.group.form.redoTabIndices(),this.dom},n.prototype._makeDomTpl=function(){var t=this;return this.dom=this.group._tplClean.clone(),t.fieldElementsDom=t.fieldElementsDom||{},this.dom.find(".form-dyn").each(function(n,o){o=e(o);var i=o.attr("data-form-content").split(":");switch(i[0]){case"field":if(t.fieldElements[i[1]])switch(i[2]){case"dom":t.fieldElementsDom[i[1]]=o;break;case"label":o.html(t.group.fields[i[1]].options.title||t.group.fields[i[1]].name);}}}),this.updateDom(),this.dom},n.prototype.condDisplay=function(e,t){this.eachFieldElements(e,function(n){t?(this.fieldElementsDom[e].parent().show(),n.afterShow&&n.afterShow()):this.fieldElementsDom[e].parent().hide()})},n.prototype.getFieldIndex=function(e){var t=e.field.getName();if(!this.fieldElements[t])return this.form.throwError("Cannot get field index. Field name "+t+" doesn't exist");var n=this.fieldElements[t].indexOf(e);return 0>n?this.form.throwError("Cannot get field index. Cannot find field element"):n},n.prototype.getValue=function(e,t){var t={},n,o,r;for(n in this.fieldElements)for(o=0,r=this.fieldElements[n].length,t[n]=[];o<r;o++)t[n].push(this.fieldElements[n][o].extractValue());return t},n.prototype.duplicateFieldElement=function(e){var t=this,n=e.field.getName(),o=this.getFieldIndex(e);if(!1!==o){var i=this.group.getField(n).makeElement().done(function(e){e.setDefaultOr(),e.group=t.group,e.groupElement=t,t.fieldElements[n].splice(o+1,0,e)});return i}},n.prototype.removeFieldElement=function(e){var t=e.field.getName(),n=this.getFieldIndex(e);!1===n||(e.field.removeElement(e),this.fieldElements[t].splice(n,1))},n.prototype.getExpanderInfosFor=function(e){var t=e.name,n=e._dom.position(),o=this.group.form.dom.find(".form-sections-wrapper").position();return{width:e._dom.innerWidth(),left:n.left+o.left,top:n.top+o.top+e._dom.height()-1}},n.prototype.redoTabIndices=function(){var e=this;this.group.eachFields(function(t){e.eachFieldElements(t.getName(),function(e){e.redoTabIndices()})})},n}),"use strict",define("forms/grouptableelement",["jquery","./groupelement"],function(e,t){"use strict";var n=function(){this.duplicators=[]};return n.prototype=new t,n.prototype.makeDom=function(){var t=this,n=e("<div />").addClass("form-group-table"),o,i,r,a,s;return this.getTitle()&&n.append("<div class=\"form-groupelement-title\">"+this.getTitle()+"</div>"),o=e("<table />",{cellpadding:0,cellspacing:0}).css({width:"100%"}),i=e("<thead />"),r=e("<tbody />"),a=e("<tr />").appendTo(i),a.append("<th />"),this.group.eachFields(function(t){t.isDisplayed()&&(s=e("<th />").html(t.getTitle(!0)),a.append(s))}),this.options.multiple&&a.append("<th />"),o.append(i).append(r),this.dom=n,this.domHead=i,this.domBody=r,this.options.multiple&&o.on("click",".form-duplicator",function(){var n=e(this).hasClass("form-duplicator-add"),o=parseInt(e(this).parent().attr("data-rowid"));n?t.duplicate(o):t.remove(o)}),this.updateDom(),this.dom.append(o),this.dom},n.prototype._makeDomTpl=function(){return this.makeDom()},n.prototype.visible=function(){var t=this.domBody.width(),n=this,o;t-=20,this.options.multiple&&(t-=30),t/=this.group.nbFields,this.domHead.children().children().each(function(r,i){return o=e(i),0==r?void o.css("width",20):n.group.options.multiple&&r==n.group.nbFields+1?void o.css("width",30):void o.css("width",t)})},n.prototype.updateDom=function(){var t=this,n=[],o=0,r=0,a=[],s,d,p;for(this.domBody.children().detach(),this.group.eachFields(function(i){var s=i.getName();t.getFieldElement(s,0),o=0,t.eachFieldElements(s,function(t){d=e("<td />").html(t.getDom()),n[o]=n[o]||[],n[o][r]=d,o++}),r++,a[r]=i}),o=0,p=n.length;o<p;o++){s=e("<tr />"),s.append("<td>"+(o+1)+"</td>");for(var r=0,c=n[o].length;r<c;r++)s.append(n[o][r]);this.options.multiple&&s.append(this.makeDuplicator(o)),this.domBody.append(s)}return this.group.form.redoTabIndices(),this.dom},n.prototype.makeDuplicator=function(t){if(this.duplicators[t])return this.duplicators[t];var n=e("<td></td>",{"data-rowid":t}).addClass("form-table-duplicator");return n.append("<span class=\"form-duplicator form-duplicator-add\">+</span>"),n.append("<span class=\"form-duplicator form-duplicator-remove\">-</span>"),this.duplicators[t]=n,n},n.prototype.duplicate=function(t){var n=this,o=[];this.group.eachFields(function(e){var i=e.makeElement().done(function(o){o.group=n.group,o.groupElement=n,n.fieldElements[e.getName()].splice(t+1,0,o)});o.push(i)}),e.when.apply(e.when,o).then(function(){n.updateDom();for(var e=0,t=arguments.length;e<t;e++)arguments[e].setDefaultOr(),arguments[e].inDom()})},n.prototype.remove=function(e){var t=this,n;this.group.eachFields(function(o){o.removeElement(t.fieldElements[o.getName()][e]),t.fieldElements[o.getName()].splice(e,1),n=t.fieldElements[o.getName()].length}),0==n?this.duplicate(-1):t.updateDom()},n.prototype.fill=function(e,t){if(!(e instanceof Array))return this.fillOld(e,t);for(var n=0,o=e.length,r={},a={},s=this.group.fields,l;n<o;n++)for(l in s)r[l]=r[l]||[],r[l][n]=e[n][l],a[l]=!0;for(l in s)for(n=0;n<o;n++)r[l][n]=r[l][n]||null;return this._fill(r,t)},n.prototype.fillOld=function(e,t){var n=0,o,r;for(o in this.group.eachFields(function(t){e[t.getName()]=e[t.getName()]||[],n=Math.max(n,e[t.getName()].length)}),e)for(r=e[o].length;r<n;r++)e[o][r]=null;return this._fill(e,t)},n.prototype.getValue=function(e,t){var t=[],n,o,r;for(n in this.fieldElements)for(o=0,r=this.fieldElements[n].length;o<r;o++)t[o]=t[o]||{},t[o][n]=this.fieldElements[n][o].extractValue();return t},n.prototype.getExpanderInfosFor=function(e){var t=e.getName(),n=0,o;this.eachFieldElements(t,function(t){t==e&&(o=n),n++});var r=this.group.form.dom.find(".form-sections-wrapper").position(),a=e.dom.position(),s=this.domBody.children("tr:eq("+o+")"),l=this.domBody.position();return{width:s.outerWidth()-a.left+l.left+2,left:a.left+r.left-1,top:a.top+r.top+this.domBody.children("tr:eq("+o+")").innerHeight()-1}},n.prototype.redoTabIndices=function(){var e=this,t=0,n=this.group.nbFields,o=0,r=[],a=0,s;for(this.group.eachFields(function(i){t=0,e.eachFieldElements(i.getName(),function(e){r[t*n+o]=e,t++}),o++}),s=r.length;a<s;a++)this.group.form.incrementTabIndex(r[a])},n.prototype.getFieldElementCorrespondingTo=function(e,t){var n;if(this.fieldElements[t]&&(n=this.fieldElements[t][this.fieldElements[e.getName()].indexOf(e)]))return n},n}),"use strict",define("forms/grouptextelement",["jquery","./groupelement"],function(e,t){"use strict";var n=function(){this.duplicators=[]};return n.prototype=new t,n.prototype.fill=function(t){return this.value=t,this.dom&&this.dom.html(this.value),e.Deferred().resolve()},n.prototype.inDom=function(){},n.prototype.getFieldElement=function(){},n.prototype._getElement=function(){},n.prototype.getFieldElements=function(){},n.prototype.eachFieldElements=function(){},n.prototype.makeDom=function(){return this.dom=e("<div />"),this.value&&this.dom.html(this.value),this.dom},n.prototype._makeDomTpl=function(){},n.prototype.visible=function(){},n.prototype.updateDom=function(){return this.dom},n.prototype.makeDuplicator=function(){},n.prototype.duplicate=function(){},n.prototype.remove=function(){},n.prototype.getValue=function(){},n.prototype.redoTabIndices=function(){},n}),"use strict",define("forms/group",["require","jquery","./field","./grouplistelement","./grouptableelement","./grouptextelement"],function(e,t,n,o,i,r){"use strict";var a=function(e){this.name=e};return a.defaultOptions={},t.extend(a.prototype,{init:function(e){this.options=t.extend({},a.defaultOptions,e),this.fields={},this.deferreds={},this.elements=[],this.nbFields=0},getName:function(){return this.name},getTitle:function(){return this.options.title},setStructure:function(e){for(var t in e=e.fields,e)this.addField(e[t],t)},addField:function(o,i){var r=i||o.name,a=this;if(this.fields[r])return this.form.throwError("Field \""+sectionobj.getName()+"\" already exists");if(this.nbFields++,!(o instanceof n)){var s=o.type,l=t.Deferred();return e(["./types/"+s+"/field"],function(e){var t=new e(r);t.init(o),t.group=a,a.fields[r]=t,(t.options.displaySource||t.options.displayTarget)&&a.form.conditionalDisplayer.init(t,t.options.displaySource,t.options.displayTarget),l.resolve(t)}),this.form.addField(l),this.deferreds[r]=l,this.fields[r]=!1,l}return this.sections[o.getName()]=o,o},_setTpl:function(e){this.tpl=e,this._tplClean=e},fieldExists:function(e){return!!this.fields[e]},getField:function(e,t){return void 0===t?this.fields[e]||"_title"==e?this.fields[e]:this.form.throwError("Cannot return field \""+e+"\". Field does not exist"):this.getFieldElement(e,t)},eachFields:function(e){for(var t in this.fields)e.call(this,this.fields[t])},makeElement:function(){var e;switch(this.options.type){case"table":e=new i;break;case"text":e=new r;break;case"list":default:e=new o;}return e.init(this.options),e.group=this,this.elements.push(e),e},ready:function(){return t.when(this.deferreds)}}),Object.defineProperty(a.prototype,"section",{enumerable:!1,configurable:!1,get:function(){return this._section},set:function(e){this._section=e}}),Object.defineProperty(a.prototype,"form",{enumerable:!0,configurable:!1,get:function(){return this._form||this.section.form},set:function(e){this._form=e}}),Object.defineProperty(a.prototype,"name",{enumerable:!0,configurable:!1,get:function(){return this._name},set:function(e){this._name=e}}),a}),"use strict",define("forms/section",["jquery","./sectionelement","./group"],function(e,t,n){"use strict";var o=this,i=function(e){this.name=e};return i.defaultOptions={},e.extend(i.prototype,{init:function(t){this.options=e.extend({},i.defaultOptions,t),this.splice=Array.prototype.splice,this.sections={},this.groups={},this.sub=[]},getName:function(){return this.name},setStructure:function(e){e.sections&&this._addSections(e.sections),e.groups&&this._addGroups(e.groups)},_addSections:function(e){this._addElements(e,this.sections,i)},_addGroups:function(e){this._addElements(e,this.groups,n)},_addElements:function(e,t,n){for(var o in e)this._addElement(e[o],t,n,o)},_addElement:function(e,t,n,o){if(!(e instanceof n)){var i=new n(o);i.init(e.options),i.sectionLevel=this.sectionLevel+1,i.section=this,i.form=this.form,i.setStructure(e),e=i}return t[e.getName()]?this.form.throwError("Cannot add Section / Group. \""+e.getName()+"\" already exists"):void(t[e.getName()]=e)},eachGroups:function(e){for(var t in this.groups)e.call(this,this.groups[t])},eachSections:function(e){for(var t in this.sections)e.call(this,this.sections[t])},getValue:function(){var e={};return this.eachSubSections(function(t){e.push(t.getValue())}),e},getSection:function(e,t){var n=this.sections[e];return null==t?n:n.getSectionElement(t)},getSections:function(){return this.sections},getGroups:function(){return this.groups},sectionExists:function(e){return!!this.sections[e]},getGroup:function(e){return this.groups[e]||this.form.throwError("Cannot find group "+e+".")},groupExists:function(e){return!!this.groups[e]},makeElement:function(e){var n=new t;return n.init(e),n.section=this,this.sub.push(n),n},_setTpl:function(e){this._tpl=e,this.eachSections(function(e){e._setTpl(this._tpl.find(".form-section[data-form-sectionname=\""+e.name+"\"]"))}),this.eachGroups(function(e){e._setTpl(this._tpl.find(".form-group[data-form-groupname=\""+e.name+"\"]"))}),this._tplClean=this._tpl.clone(),this._tplClean.find(".form-section-group-container:eq(0)").empty(),this._tplClean.find(".form-section-section-container:eq(0)").empty()}}),Object.defineProperty(i.prototype,"form",{enumerable:!0,configurable:!1,get:function(){return this._form},set:function(e){this._form=e}}),Object.defineProperty(i.prototype,"name",{enumerable:!0,configurable:!1,get:function(){return this._name},set:function(e){this._name=e}}),Object.defineProperty(i.prototype,"section",{enumerable:!0,configurable:!1,get:function(){return this._section},set:function(e){this._section=e}}),i}),"use strict",define("forms/conditionalelementdisplayer",["jquery"],function(){"use strict";var e=function(){this.targets={}};return e.prototype={init:function(){},changed:function(e){var t=e.field.options.displaySource,n=e.value;if(t){for(var o in t)o!==n&&this.triggerValue(e,t[o],!1);"undefined"!=typeof t[n]&&this.triggerValue(e,t[n],!0)}},triggerValue:function(e,t,n){var o=e.groupElement;this.lookForField(o,t,n)},lookForField:function(e,t,n){var o,i,r;for(i in e.fieldElements)o=e.group.fields[i],o.options&&o.options.displayTarget&&-1<o.options.displayTarget.indexOf(t)&&e.condDisplay(i,n);r=e.sectionElement,this.lookForGroupOrSection(r,t,n)},lookForGroupOrSection:function(e,t,n){e.section.eachSections(function(o){o.options.displayTarget&&-1<o.options.displayTarget.indexOf(t)&&e.condDisplay(o.getName(),"section",n)}),e.section.eachGroups(function(o){o.options.displayTarget&&-1<o.options.displayTarget.indexOf(t)&&e.condDisplay(o.getName(),"group",n)}),e=e.sectionElement,e.eachElements&&this.lookForGroupOrSection(e,t,n)}},e}),"use strict",define("forms/form",["jquery","./section","./sectionelement","./conditionalelementdisplayer"],function(e,t,n,o){"use strict";var i=function(){};return i.defaultOptions={},i.prototype=new t,e.extend(i.prototype,{init:function(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this;this.options=e.extend({},i.defaultOptions,t),this.splice=Array.prototype.splice,this.section=this,this.sections={},this.sectionElements={},this.allFields=[],this.allFieldElements=[],this._onStructureLoaded=e.Deferred(),this._onValueLoaded=e.Deferred(),this.sectionLevel=0,this.expander={},this.form=this,this.conditionalDisplayer=new o,this.buttons=[],this.buttonsDom=e("<div />").addClass("form-buttonzone"),this.buttonsDom.append(e("<div />").addClass("cleaner"))},triggerAction:function(){if(arguments[0]){var e=arguments[0];if("function"==typeof this.options[e]){this.splice.call(arguments,0,1);this.options[e].apply(this,arguments)}}},addFieldElement:function(e){this.allFieldElements.push(e)},fieldElementValueChanged:function(e){this.doneDom&&this.triggerAction("onValueChanged",e,this.getValue())},addField:function(e){this.allFields.push(e)},eachFields:function(e){return this._each(this.allFields,e)},eachFieldsElements:function(e){return this._each(this.allFieldElements,e)},_each:function(t,n){var o=this,r=0,a=t.length;e.when.apply(e.when,t).then(function(){for(;r<a;r++)n.call(o,arguments[r])})},setTpl:function(t){t=e(t),this._setTpl(t)},makeDomTpl:function(){this.doneDom=!0;var e=this._makeDomTpl();return this.dom.find(".buttons").html(this.buttonsDom),e},_makeDomTpl:n.prototype._makeDomTpl,makeDom:function(t,n){n=n||0;var o=this,r=e("<form class=\"forms\" tabindex=\"1\" />"),a=e("<div />").addClass("form-sections-wrapper"),s,d,p;switch(this.tplMode=t||1,this.tplMode){case 1:this.sectionLvl1Buttons=e("<div />").addClass("form-section-select-wrapper").appendTo(r),this.sectionLvl1Buttons.on("click",".form-section-select",function(){e(this).siblings().removeClass("selected"),e(this).addClass("selected"),a.children().hide().eq(e(this).index()).show();for(var t=0,n=o.sectionElements[e(this).attr("data-section-name")],i=n.length;t<i;t++)n[t].visible()});}for(s in this.bindEvents(r),this.sectionElements)for(d=0,p=this.sectionElements[s].length;d<p;d++)a.append(this.sectionElements[s][d].makeDom());switch(this.doneDom=!0,r.append(a),this.tplMode){case 1:this.sectionLvl1Buttons.children().eq(n).trigger("click");}return r.append(this.buttonsDom),e.when.apply(e,this.allFieldElements).then(function(){for(var e=0,t=arguments.length;e<t;e++)o.conditionalDisplayer.changed(arguments[e])}),this.dom=r},bindEvents:function(e){var t=this;e.get(0).addEventListener("click",function(){t.hideExpander(),t._unselectField()},!1),e.get(0).addEventListener("submit",function(n){t.formSubmitted(n)},!1),e.get(0).addEventListener("keydown",function(e){t.tabPressed(e)},!1)},_unselectField:function(){this.selectedFieldElement&&this.selectedFieldElement.unSelect()},selectFieldElement:function(e){this._unselectField(),this.selectedFieldElement=e,this.hideExpander()},unSelectFieldElement:function(){this.selectedFieldElement=!1},getValue:function(){var e={sections:{}};return this._getValue(this.sectionElements,e.sections),e},_getValue:n.prototype._getValue,fill:function(t,n){var o=this;t=t||{},this._fillSections(t.sections,n),e.when.apply(e.when,this.allFieldElements).then(function(){o._onValueLoaded.resolve()})},_fillSections:n.prototype._fillSections,_fill:n.prototype._fill,getSectionElement:n.prototype.getSectionElement,_getElement:n.prototype._getElement,getSection:function(e){return this.sections[e]},eachSectionElements:function(e){var t,n,o;for(t in this.sectionElements)for(n=0,o=this.sectionElements[t].length;n<o;n++)e.call(this,this.sectionElements[t][n])},tabPressed:function(e,t){if(9==e.keyCode){if(e.preventDefault(),e.stopPropagation(),!t)if(this.selectedFieldElement)t=this.selectedFieldElement;else return;t.unSelect();var n=this.tabIndexed.indexOf(t);return this.tabIndexed[n+(e.shiftKey?-1:1)].focus(),!0}},incrementTabIndex:function(e){return this.tabIndexed[++this.lastIndex]=e},redoTabIndices:function(){this.lastIndex=1,this.tabIndexed=[],this.eachSectionElements(function(e){e.redoTabIndices()})},inDom:function(){this.eachSectionElements(function(e){e.inDom()});var e=0,t,n;for(t in this.sectionElements)for(n=this.sectionElements[t].length;e<n;e++)this.sectionElements[t][e].visible();this.dom.focus(),this.redoTabIndices()},onReady:function(){return this._onValueLoaded},onLoaded:function(e){return this.onReady(e)},setStructure:function(e){e.sections&&this._addSections(e.sections),this.structureIsSet()},structureIsSet:function(){var t=this;e.when.apply(e,this.allFields).then(function(){t._onStructureLoaded.resolve()})},onStructureLoaded:function(){return this._onStructureLoaded},getExpanderDom:function(){return this.expander.dom||(this.expander.dom=e("<div />").addClass("form-expander").appendTo(this.dom).on("click",function(e){e.stopPropagation(),e.preventDefault()}))},setExpander:function(e){var t=this;this.expander.open?this.hideExpander(!0):this.getExpanderDom().hide(),this.getExpanderDom().children().detach(),this.getExpanderDom().html(e),this.getExpanderDom().stop(!0).show(),t.expander.open=!0},hideExpander:function(){this.expander.open&&(this.getExpanderDom().stop(!0).hide(),this.expander.open=!1)},addButton:function(e,t,n,o){var i=this;require(["forms/button"],function(r){var a=new r(e,n,t);i.buttons.push(a),a.clickOnSubmit=o,i.onReady().done(function(){i.buttonsDom.prepend(a.render())})})},throwError:function(e){return console.error(e),!1},formSubmitted:function(t){t.preventDefault();for(var e=0,n=this.buttons.length;e<n;e++)this.buttons[e].clickOnSubmit&&this.buttons[e].doClick()}}),i}),"use strict",define("modules/module",["jquery","lodash","src/util/context","src/util/api","src/util/util","src/util/fullscreen","src/util/debug","src/main/datas","src/main/variables","src/util/ui","version","forms/form","src/main/grid"],function(e,n,t,o,r,a,s,l,d,p,i,c){"use strict";function u(t){var n=t.definition.getChildSync(["url"],!0).get()+"",o=r.rewriteRequirePath(n);"/"!==o[o.length-1]&&(o=`${o}/`),t.viewReady=new Promise(function(e){t._resolveView=e}),t.controllerReady=new Promise(function(e){t._resolveController=e}),t.modelReady=new Promise(function(e){t._resolveModel=e}),t.globalInitializationReady=new Promise(function(e){t.resolveGlobal=e});const a=Date.now();return t._onReady=Promise.all([t.viewReady,t.controllerReady,t.modelReady,t.globalInitializationReady]),t._onReady.then(()=>(t.controller.sendActionFromEvent("_onLoaded","_moduleUrl",o),t.controller.sendActionFromEvent("_onLoaded","_loadTime",Date.now()-a),t.controller.sendActionFromEvent("_onLoaded","_moduleId",t.getId()),t.updateAllView()),function(e){s.error("Caught error in module ready state",e)}).catch(function(e){s.error("Caught error while updating module",e)}),new Promise(function(a,s){return o?void(t._cssLoaded=-1<i.includedModuleCss.indexOf(r.moduleIdFromUrl(n))?Promise.resolve():r.loadCss(`${o}style.css`),require([`${o}model`,`${o}view`,`${o}controller`],function(n,o,i){t.model=new n,t.view=new o,t.controller=new i,t.controller.moduleInformation&&(t.dom=e(t.buildDom()),t.bindToolbar(),t.domContent=t.dom.children().children(".ci-module-content"),t.domHeader=t.dom.children().children(".ci-module-header"),t.domLoading=t.dom.children().children(".ci-module-loading"),t.domWrapper=t.dom,t.view.setModule(t),t.controller.setModule(t),t.model.setModule(t),t.view.initDefault(),t.view.init(),t.controller.init(),t.model.init(),a(t))},function(e){return s(e)})):void s(new Error("no module URL"))})}function m(e){this.getConfiguration=this.getConfiguration.bind(this),this.getConfigurationCheckbox=this.getConfigurationCheckbox.bind(this),this.definition=DataObject.recursiveTransform(e),this.definition.configuration=this.definition.configuration||new DataObject,this.definition.layers=this.definition.layers||new DataObject,this.ready=u(this).then(()=>{if(0===Object.keys(this.definition.configuration).length){const e=this.getConfigForm();return Promise.resolve(e.onLoaded().then(()=>{g(this,e,!0)}))}}),this.ready.catch(function(e){s.error("Caught error in module initialization.",e)})}function g(e,t,n){const o=t.getValue().sections;e.controller.onBeforeSave&&e.controller.onBeforeSave(o),e.definition.layers=e.definition.layers||{};const r=o.module_config[0].sections.layer[0].groups.group,a=o.module_config[0].groups.layerDisplay[0].displayOn[0];for(var s=0;s<r.length;s++)e.definition.layers[r[s].layerName[0]].display=-1<a.indexOf(r[s].layerName[0]),e.definition.layers[r[s].layerName[0]].title=r[s].moduletitle[0],e.definition.layers[r[s].layerName[0]].bgColor=r[s].bgcolor[0],e.definition.layers[r[s].layerName[0]].wrapper=-1<r[s].modulewrapper[0].indexOf("display");e.definition.toolbar={},e.definition.toolbar.custom=o.module_config[0].groups.customToolbar,e.definition.toolbar.common=o.module_config[0].groups.commonToolbar,e.definition.css=o.module_config[0].groups.customCss,o.vars_out&&e.setSendVars(o.vars_out[0].groups.group[0]),o.vars_in&&e.setSourceVars(o.vars_in[0].groups.group[0]),o.actions_in&&e.setActionsIn(o.actions_in[0].groups.group[0]),o.actions_out&&e.setActionsOut(o.actions_out[0].groups.group[0]),o.module_specific_config&&(e.definition.configuration=o.module_specific_config[0]),n||e.reload()}function h(e,t){for(var n=t.length,o=0,r;o<n&&!!e;o++)if(r=t[o],"string"==typeof r)e=e[r];else{if(o==n-1){if(e.options){if("table"===e.options.type){var a=f(e.fields);return e.options.multiple&&(a=[a]),a}return y(e)}return y(e)}e.fields&&(e=e.fields)}}function f(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=y(e[n]));return t}function y(e){switch(e.type){case"checkbox":var t=[];for(var n in e.options)t.push(n);return t;case"color":case"spectrum":return[0,0,0,1];case"combo":var o=e.options[0];return o=o?o.key:"",e.extractValue&&(o=e.extractValue(o)),o;case"float":return e.default||0;case"jscode":case"text":case"textarea":case"wysiwyg":return e.default||"";case"slider":case"textstyle":default:return s.error(`Unknow field type: ${e.type}`),e.default||"";}}function b(e){return Array.isArray(e)?e.map(e=>({key:e.file||"",title:e.name,children:b(e.children)})):[]}return m.prototype={buildDom(){var e="";return e+="<div class=\"ci-module-wrapper ci-module-displaywrapper ci-module-",e+=this.controller.moduleInformation.cssClass,e+="\" data-module-id=\"",e+=this.definition.id,e+="\"",e+=" style=\"z-index: ",e+=this.definition.zindex||0,e+="\"",e+=`><div class="ci-module" id="module-${this.definition.id}"><div class="ci-module-header`,e+="\"><div class=\"ci-module-header-title\">",e+=this.definition.title,e+="</div>",e+="<div class=\"ci-module-header-toolbar\">",e+="<ul>",e+="</ul>",e+="</div>",e+="</div><div class=\"ci-module-content\">",e+="</div>",e+="<div class=\"ci-module-loading\">Loading ...</div>",e+="</div>",e},setCustomStyle(){var e=this.definition.css;if(e){e=e[0];var t={fontSize:e.fontSize[0],fontFamily:e.fontFamily[0]};this.dom.find(".ci-module-content").css(t)}},drawToolbar(){for(var e=o.isViewLocked(),t=this.dom.find(".ci-module-header-toolbar ul"),n=this.controller.getToolbar(),r="",a=0;a<n.length;a++){if(!n[a].ifLocked&&e)continue;const t=n[a].color||"rgba(100,100, 100, 1)";r+=`<li style="color:${n[a].color}" + title="${n[a].title||""}">`,n[a].icon&&(r+=`<div style="color=${t}"><i src="${n[a].icon}"/></div>`),n[a].cssClass&&(r+=`<span style="color: ${t};" class="${n[a].cssClass}"/>`),r+="</li>"}t.html(r)},bindToolbar(){var o=this;this.dom.find(".ci-module-header-toolbar ul").on("click","li",i=>{var r=o.controller.getToolbar(),a=e(i.target).closest("li").attr("title"),s=n.find(r,e=>e.title===a);s&&s.onClick&&s.onClick.apply(o)})},onReady(){return this._onReady},async updateView(e,t,n){!this.view.update[e]&&this.view[`_update_${e}`]?await this.view[`_update_${e}`](t,n):await this.view.update[e].call(this.view,t,n),this.controller.sendActionFromEvent("_onVarUpdated","_varName",n)},async updateAllView(){if(this.view.update&&this.definition){const e=this.vars_in();for(let t=0;t<e.length;t++){const n=o.getVar(e[t].name);n.isDefined()&&(await this.model.onVarChange(n))}}},getDomContent(){if("undefined"!=typeof this.domContent)return this.domContent;throw new Error("The module has not been loaded yet")},getDomWrapper(){if("undefined"!=typeof this.domWrapper)return this.domWrapper;throw new Error("The module has not been loaded yet")},getDomView(){if("function"==typeof this.view.getDom)return this.view.getDom();throw new Error("The module's view doest not implement the getDom function")},getDomHeader(){if("undefined"!=typeof this.domHeader)return this.domHeader;throw new Error("The module has not been loaded yet")},getAcceptedTypes(e){var t=this.controller.references;return!!t&&t[e]},getDataFromRel(e){if(this.model&&this.model.data){var t=this.model.data[e];return!!t&&t[Object.keys(t)[0]]}},getVariableFromRel(e){var t=this.getNameFromRel(e);return o.getVar(t)},getNameFromRel(e){for(var t=this.vars_in(),n=0;n<t.length;n++)if(t[n].rel==e)return t[n].name;return!1},getData(){return this.model.data},getDataRelFromName(e){for(var t=this.vars_in(),n=[],o=0;o<t.length;o++)t[o].name==e&&n.push(t[o].rel);return n},getActionRelFromName(e){for(var t=this.actions_in(),n=0;n<t.length;n++)if(t[n].name==e)return t[n].rel;return!1},inDom(){this.drawToolbar(),this.setCustomStyle(),this.view.inDom(),this.controller.inDom(),this.model.inDom();var e=this;o.isViewLocked()||t.listen(this.getDomWrapper().get(0),[["<li name=\"fullscreen\"><a><span class=\"ui-icon ui-icon-arrow-4-diag\"></span> Fullscreen</a></li>",function(){e.enableFullscreen()}],["<li name=\"export\"><a><span class=\"ui-icon ui-icon-suitcase\"></span> Export</a></li>",function(){e.exportData()}],["<li name=\"config-example\"><a><span class=\"ui-icon ui-icon-suitcase\"></span> Config example</a></li>",function(){e.exportConfigExample()}],["<li name=\"print\"><a><span class=\"ui-icon ui-icon-print\"></span> Print</a></li>",function(){e.printView()}],["<li name=\"configuration\"><a><span class=\"ui-icon ui-icon-gear\"></span> Parameters</a></li>",function(){e.doConfig()}]])},enableFullscreen(){a.requestFullscreen(this)},toggleLayer(e){var t;if(this.activeLayerName=e,t=this.getLayer(e)){if(!t.display)return void this.hide();this.show(),this.setTitle(t.title),this.setDisplayWrapper(t.wrapper),this.setBackgroundColor(t.bgColor||[255,255,255,1]);var n=require("src/main/grid");return n.setModuleSize(this),n.moduleResize(this),t}},eachLayer(e){for(var t in this.definition.layers)e(this.definition.layers[t],t)},setLayers(t,n,o,r,a){if(this.definition.layers=this.definition.layers||new DataObject,o)o.remove?delete this.definition.layers[o.remove]:o.rename&&(this.definition.layers[o.rename.new]=this.definition.layers[o.rename.old],delete this.definition.layers[o.rename.old]);else for(var s in t)this.definition.layers[s]||(this.definition.layers[s]=new DataObject,n?(e.extend(!0,this.definition.layers[s],m.prototype.emptyConfig),this.definition.layers[s].name=s,s!==a&&(this.definition.layers[s].display=!1)):(e.extend(!0,this.definition.layers[s],this.getLayer(this.getActiveLayerName())),(r||a!==this.getActiveLayerName())&&(this.definition.layers[s].display=!1)),this.definition.layers[s]=this.definition.layers[s].duplicate())},getActiveLayerName(){return this.activeLayerName},getLayer(e){return!!e&&this.definition.layers[e]},hide(){this.getDomWrapper().hide()},show(){this.getDomWrapper().show()},getConfigForm(){function t(e,t){if(!a[e])return[];let n;return"event"===t?n=a[e].refVariable||[]:"action"===t?n=a[e].refAction||[]:void 0,n.map(e=>({key:e,title:i[e].label}))}const n=this,i=Object.assign({},this.controller.defaultReferences,this.controller.references),a=Object.assign({},this.controller.defaultEvents,this.controller.events),s=Object.assign({},this.controller.defaultActionsIn,this.controller.actionsIn),l=b(o.getAllFilters()),p=r.stringsToAutocomplete(d.getNames()),u=r.stringsToAutocomplete(o.getRepositoryActions().getKeys()),m=this.controller.variablesIn.filter(e=>i[e]).map(e=>({key:e,title:i[e].label})),g={};Object.keys(i).forEach(e=>{g[e]=this.model.getjPath(e)});const h=[],f=[];for(const e in a)a[e].refVariable&&h.push({key:e,title:a[e].label}),a[e].refAction&&f.push({key:e,title:a[e].label});const y=[];for(const e in s)y.push({key:e,title:s[e]});const _={};this.eachLayer(function(e,t){_[t]=t});const v={sections:{module_infos:{options:{title:"Module informations",icon:"info_rhombus"},groups:{group:{options:{type:"text"}}}},module_config:{options:{title:"General configuration",icon:"page_white_paint"},groups:{layerDisplay:{options:{title:"Display on layers",type:"list"},fields:{displayOn:{type:"checkbox",title:"Display on layers",options:_}}},commonToolbar:{options:{title:"Common toolbar options",type:"list"},fields:{toolbar:{type:"checkbox",title:"Common toolbar options",options:{"Open Preferences":"Open Preferences","Show fullscreen":"Show fullscreen","Export Data":"Export Data",Print:"Print"},default:["Open Preferences"]}}},customToolbar:{options:{title:"Custom toolbar options",type:"table",multiple:!0},fields:{title:{type:"text",title:"Title",default:""},icon:{title:"Icon",type:"text",default:""},action:{title:"Action",type:"text",default:""},position:{title:"Position",type:"combo",options:[{key:"begin",title:"Begin"},{key:"end",title:"End"}],default:"begin"},color:{title:"Color",type:"spectrum",default:[100,100,100,1]}}},customCss:{options:{title:"Custom css",type:"list"},fields:{fontSize:{type:"text",title:"Font size",default:""},fontFamily:{type:"text",title:"Font Family",default:""}}}},sections:{layer:{options:{title:"Shown on layers"},groups:{group:{options:{type:"list",multiple:!0,title:!0},fields:{layerName:{type:"text",multiple:!1,title:"Layer name",displayed:!1},moduletitle:{type:"text",multiple:!1,title:"Module title"},bgcolor:{type:"spectrum",multiple:!1,title:"Background color"},modulewrapper:{type:"checkbox",title:"Module boundaries",options:{display:""}}}}}}}}}},x=this.controller.configurationStructure();x&&(v.sections.module_specific_config=Object.assign(x,{options:{title:"Module configuration",icon:"page_white_wrench"}})),0<m.length&&(v.sections.vars_in={options:{title:"Variables in",icon:"basket_put"},groups:{group:{options:{type:"table",multiple:!0},fields:{rel:{type:"combo",title:"Reference",options:m},name:{type:"text",title:"From variable",options:p},filter:{type:"combo",title:"Filter variable",options:l}}}}}),0<h.length&&(v.sections.vars_out={options:{title:"Variables out",icon:"basket_remove"},groups:{group:{options:{type:"table",multiple:!0},fields:{event:{type:"combo",title:"Event",options:h},rel:{type:"combo",title:"Reference"},jpath:{type:"combo",title:"jPath",options:{},extractValue:r.jpathToArray,insertValue:r.jpathToString},filter:{type:"combo",title:"Filter variable",options:l},name:{type:"text",title:"To variable"}}}}}),0<y.length&&(v.sections.actions_in={options:{title:"Actions in",icon:"door_in"},groups:{group:{options:{type:"table",multiple:!0},fields:{rel:{type:"combo",title:"Reference",options:y},name:{type:"text",title:"Action name",options:u}}}}}),0<f.length&&(v.sections.actions_out={options:{title:"Actions out",icon:"door_out"},groups:{group:{options:{type:"table",multiple:!0},fields:{event:{type:"combo",title:"On event",options:f},rel:{type:"combo",title:"Reference"},jpath:{type:"combo",title:"jPath",options:{},extractValue:r.jpathToArray,insertValue:r.jpathToString},name:{type:"text",title:"Action name"}}}}});const w=new c;return w.init(),w.setStructure(v),w.onStructureLoaded().then(function(){w.getSection("vars_out")&&(w.getSection("vars_out").getGroup("group").getField("event").options.onChange=function(n){n.groupElement&&e.when(n.groupElement.getFieldElementCorrespondingTo(n,"rel")).then(function(e){e&&e.setOptions(t(n.value,"event"))})},w.getSection("vars_out").getGroup("group").getField("rel").options.onChange=function(t){t.groupElement&&e.when(t.groupElement.getFieldElementCorrespondingTo(t,"jpath")).then(function(e){e&&e.setOptions(g[t.value])})}),w.getSection("actions_out")&&(w.getSection("actions_out").getGroup("group").getField("event").options.onChange=function(n){n.groupElement&&e.when(n.groupElement.getFieldElementCorrespondingTo(n,"rel")).then(function(e){e&&e.setOptions(t(n.value,"action"))})},w.getSection("actions_out").getGroup("group").getField("rel").options.onChange=function(t){t.groupElement&&e.when(t.groupElement.getFieldElementCorrespondingTo(t,"jpath")).then(function(e){e&&e.setOptions(g[t.value])})});const o=`${"<table class=\"moduleInformation\">"+"<tr><td>Module name</td><td>"}${n.controller.moduleInformation.name}</td></tr>`+`<tr><td></td><td><small>${n.controller.moduleInformation.description}</small></td></tr>`+`<tr><td>Module author</td><td>${n.controller.moduleInformation.author}</td></tr>`+`<tr><td>Creation date</td><td>${n.controller.moduleInformation.date}</td></tr>`+`<tr><td>Released under</td><td>${n.controller.moduleInformation.license}</td></tr>`+"</table>",i=[],r=[];let a,s;n.definition.toolbar&&(a=n.definition.toolbar.common,s=n.definition.toolbar.custom);let l;n.definition.css&&(l=n.definition.css),n.eachLayer(function(e,t){e.display&&r.push(t),i.push({_title:t,layerName:[t],moduletitle:[e.title],bgcolor:[e.bgColor||[255,255,255,0]],modulewrapper:[!0===e.wrapper||void 0===e.wrapper?"display":""]})}),w.fill({sections:{module_config:[{groups:{layerDisplay:[{displayOn:[r]}],commonToolbar:a,customToolbar:s,customCss:l},sections:{layer:[{groups:{group:i}}]}}],module_infos:[{groups:{group:[o]}}],module_specific_config:[n.definition.configuration||{}],vars_out:[{groups:{group:[n.vars_out()]}}],vars_in:[{groups:{group:[n.vars_in()]}}],actions_in:[{groups:{group:[n.actions_in()]}}],actions_out:[{groups:{group:[n.actions_out()]}}]}})}),w},doConfig(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;const t=p.dialog({autoPosition:!0,noHeader:!0,width:"80%"}),n=this.getConfigForm();n.addButton("Cancel",{color:"blue"},()=>t.dialog("close")),n.addButton("Save",{color:"green"},()=>{g(this,n),t.dialog("close")}),n.onLoaded().then(()=>{t.html(n.makeDom(1,e)),n.inDom()})},resetReady(){var e=this;e.viewReady=new Promise(function(t){e._resolveView=t}),e.controllerReady=new Promise(function(t){e._resolveController=t}),e._onReady=Promise.all([e.viewReady,e.controllerReady])},getConfiguration(e,t){let n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];var o=this.definition.configuration,r=this.controller.configAliases[e],a;if(r){for(var d=0;d<r.length;d++)if(o=o[r[d]],"undefined"==typeof o){a=this._getConfigurationDefault(r,e);break}}else s.warn(`Alias ${e} not defined `);return null==a&&(a=this._doConfigurationFunction(o,e)),null==a&&(a=t),n?l.resurrect(a):a},getConfigurationCheckbox(e,t){var n=this.getConfiguration(e);return!!Array.isArray(n)&&-1<n.indexOf(t)},_getConfigurationDefault(e,t){this._cfgStructure=this._cfgStructure||this.controller.configurationStructure();for(var n=this._cfgStructure,o=0,r=e.length;o<r;o++)if("number"!=typeof e[o]){if(n.fields){o--,n=n.fields;continue}if(n=n[e[o]],!n)return s.warn("Error in configuration file - Alias is not a correct jPath"),!1}return this._doConfigurationFunction(n.default,t)},_doConfigurationFunction(t,n){if(this.controller.configFunctions[n])try{return this.controller.configFunctions[n](t)}catch(n){return t}return t},getValue(){if("function"==typeof this.model.getValue)return this.model.getValue()},getPosition(e){var t=this.getLayer(e);return t.position},getSize(e){var t=this.getLayer(e);return t.size},getWidthPx(){return this.getDomContent().innerWidth()},getHeightPx(){return this.getDomContent().innerHeight()},getId(){return DataObject.resurrect(this.definition.id)},setId(e){this.definition.set("id",e)},setSourceVars(e){this.definition.set("vars_in",e,!0)},setSendVars(e){this.definition.set("vars_out",e,!0)},setActionsIn(e){this.definition.set("actions_in",e,!0)},setActionsOut(e){this.definition.set("actions_out",e,!0)},vars_in(){return!this.definition.vars_in&&this.definition.dataSource&&(this.definition.vars_in=this.definition.dataSource,delete this.definition.dataSource),this.definition.vars_in=this.definition.vars_in||new DataArray,this.definition.vars_in.filter(function(e){return!!e&&!!(e.name&&e.rel)})},vars_out(){return!this.definition.vars_out&&this.definition.dataSend&&(this.definition.vars_out=this.definition.dataSend,delete this.definition.dataSend),this.definition.vars_out||(this.definition.vars_out=new DataArray),this.definition.vars_out},actions_in(){return!this.definition.actions_in&&this.definition.actionsIn&&(this.definition.actions_in=this.definition.actionsIn,delete this.definition.actionsIn),this.definition.actions_in||(this.definition.actions_in=new DataArray),this.definition.actions_in},actions_out(){return!this.definition.actions_out&&this.definition.actionsOut&&(this.definition.actions_out=this.definition.actionsOut,delete this.definition.actionsOut),this.definition.actions_out||(this.definition.actions_out=new DataArray),this.definition.actions_out},getDefinition(){return this.definition},getTitle(){return this.definition.title},setTitle(e){this.definition.set("title",e),this.domHeader.find(".ci-module-header-title").text(e)},async exportData(){const e=await this.controller.export();"string"==typeof e&&p.dialog("<div class=\"ci-module-export\"><textarea></textarea></div>",{title:`Export data from module ${this.getTitle()}`,width:"70%",height:500,noWrap:!0}).children("textarea").text(e)},printView(e){const t=this.controller.print();if(e&&e.window)var n=e.window;else var n=window.open("","","");n.document.body.appendChild(t),n.document.close(),n.focus(),window.setTimeout(function(){n.print(),n.close()},e.delay||100)},setBackgroundColor(e){this.domContent.get(0).style.backgroundColor=`rgba(${e.join(",")})`},setDisplayWrapper(e){this.getDomWrapper()[!0===e||null==e?"addClass":"removeClass"]("ci-module-displaywrapper");try{this.getDomWrapper().resizable(!0===e||null==e?"enable":"disable")}catch(t){}},blankVariable(e){const t=this.getDataRelFromName(e);for(let n=0;n<t.length;n++)!this.view.blank[t[n]]&&this.view[`_blank_${t[n]}`]?this.view[`_blank_${t[n]}`](e):this.view.blank[t[n]]?this.view.blank[t[n]].call(this.view,e):r.warnOnce(`missing-blank-${this.controller.moduleInformation.name}_${t[n]}`,`Module ${this.controller.moduleInformation.name}: no blank method defined for rel ${t[n]}`);return null},startLoading(e){const t=this.getDataRelFromName(e);for(let n=0;n<t.length;n++)this.view.startLoading(t[n])},endLoading(e){const t=this.getDataRelFromName(e);for(let n=0;n<t.length;n++)this.view.endLoading(t[n])},get emptyConfig(){return new DataObject({position:{left:0,top:0},size:{width:20,height:20},zIndex:0,display:!0,title:"",bgColor:[255,255,255,0],wrapper:!0,created:!0})},reload(){this.view.unload&&this.view.unload(),this.resetReady(),this.controller.init(),this.view.init(),this.drawToolbar(),this.setCustomStyle(),this.view.inDom(),this.toggleLayer(this.getActiveLayerName()),this.model.resetListeners(),this.updateAllView()},getConfigExample(){var e=this.controller.configAliases,t=this.controller.configurationStructure(),n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=h(t,e[o]));return n},exportConfigExample(){var e=this;p.dialog("<div class=\"ci-module-export\"><textarea></textarea></div>",{title:"Config example",width:"70%",height:500,noWrap:!0}).children("textarea").text(JSON.stringify(e.getConfigExample(),null,4))}},m}),"use strict",define("modules/modulefactory",["jquery","modules/module","src/util/debug","src/util/util"],function(e,t,n,o){"use strict";function r(t){return new Promise(function(o){const a={folders:{}};e.getJSON(require.toUrl(`${t}/folder.json`)).then(function(e){if(a.name=e.name,a.modules=e.modules,e.folders&&Array.isArray(e.folders)){const s=[];for(let n=0;n<e.folders.length;n++)s.push(r(`${t}/${e.folders[n]}`));Promise.all(s).then(function(e){for(let t=0;t<e.length;t++){const n=e[t];a.folders[n.name]=n}o(a)},function(e){n.error("Caught error in ModuleFactory",e)})}else"object"==typeof e.folders&&(a.folders=e.folders),o(a)})})}let a=0,s=[],l=new DataArray,d={};return{getTypes(){return d},traverseModules(e,t){if(t=t||d,t.modules)for(let n=0;n<t.modules.length;n++)e(t.modules[n]);if(t.folders)for(const n in t.folders)this.traverseModules(e,t.folders[n])},setModules:function(t){const a=[];if(Array.isArray(t))throw new Error("Module configuration error : list of folders must be defined in a \"folders\" array.");if(Array.isArray(t.folders)){const o=d;t.modules&&(o.modules=t.modules),o.folders=o.folders||{};for(let s=0;s<t.folders.length;s++)if("object"==typeof t.folders[s]){const n=t.folders[s];e.extend(!0,o.folders,n.folders)}else a.push(r(t.folders[s]).then(function(t){e.extend(!0,o,t)},function(e){n.error("Caught error in ModuleFactory",e)}));d=o}else d=t;return Promise.all(a).then(()=>{this.traverseModules(function(e){const t=o.moduleIdFromUrl(e.url);t&&(e.id=t),e.url=`${e.url.replace(/\/$/,"")}/`})})},newModule(e){const o=new t(e);return o.setId(++a),s.push(o),l.push(e),o.ready.catch(function(t){n.error("Initialization of module failed",t)}),o},removeModule(e){s.splice(s.indexOf(e),1),l.splice(l.indexOf(e.definition),1)},empty(){l=new DataArray,s=[]},getModules(){return s},getModule(e){e=+e;var t=this.getModules();return t=t.filter(function(t){return+t.getId()===e}),t[0]},getDefinitions(){return l},getModulesById(){const e={};return this.traverseModules(t=>e[t.id]=t),e}}}),"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a=e[Symbol.iterator](),s;!(o=(s=a.next()).done)&&(n.push(s.value),!(t&&n.length===t));o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a["return"]||a["return"]()}finally{if(i)throw r}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}define("src/util/diagram",["src/util/util","src/util/ui","src/util/debug","lodash","jquery","modules/modulefactory"],function(e,t,n,o,i,r){"use strict";function a(e){var t;if(3===arguments.length?this.init1.apply(this,arguments):4===arguments.length?this.init2.apply(this,arguments):1===arguments.length&&e instanceof Array?3===arguments[0].length?this.init1.apply(this,arguments[0]):4===arguments.length?this.init2.apply(this,arguments[0]):t=!0:t=!0,t)throw new Error("Rectangle construction failed")}function s(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}function l(){var e=[],t=[],a=[],s=r.getModules(),l,d;for(l=0;l<s.length;l++){var p=s[l].definition,c=p.vars_in||[];for(d=0;d<c.length;d++){var u=p.vars_in[d];u.name&&t.push({module:s[l],id:DataObject.resurrect(p.id),name:u.name,rel:u.rel})}var m=p.vars_out||[];for(d=0;d<m.length;d++){var g=p.vars_out[d];!g.name||!g.event||e.push({id:DataObject.resurrect(p.id),filter:g.filter,name:g.name,event:g.event,jpath:g.jpath,rel:g.rel,module:s[l]})}}for(let n=0;n<t.length;n++){var h=o.filter(e,function(e){return e.name===t[n].name});if(h)for(d=0;d<h.length;d++)a.push({source:{module:h[d].module,id:h[d].id},target:{id:t[n].id,module:t[n].module},type:"normal",filter:h[d].filter||"no filter",event:h[d].event||"no event",name:h[d].name||"no name",jpath:h[d].jpath||[],rel_out:h[d].rel,rel_in:t[d].rel})}for(let r=0;r<e.length;r++){var f=o.filter(t,function(n){return n.name===e[r].name});f.length||n.warn(`The module ${e[r].id} has a var_out ${e[r].name} not used as an input of any other module`)}return a}function d(e){var t={};e.forEach(function(e){e.source=t[e.source.id]||(t[e.source.id]={info:e.source}),e.target=t[e.target.id]||(t[e.target.id]={info:e.target})});var o=Object.keys(t).length,n=0;for(var r in t)t[r].x=Math.random()*1400,t[r].y=Math.random()*900,n++;return t}a.prototype.init1=function(e,t,n){this.minmin=e,this.maxmax={x:this.minmin.x+t,y:this.minmin.y+n},this.minmax={x:this.minmin.x,y:this.maxmax.y},this.maxmin={x:this.maxmax.x,y:this.maxmax.y},this._init()},a.prototype._init=function(){this.minx=this.minmin.x,this.maxx=this.maxmax.x,this.miny=this.minmin.y,this.maxy=this.maxmax.y,this.centerx=(this.minx+this.maxx)/2,this.centery=(this.miny+this.maxy)/2},a.prototype.init2=function(){for(var e=arguments,t=o.map(e,"x"),n=o.map(e,"y"),r=0;r<e.length;r++)if(Math.max.apply(null,t)===e[r].x&&Math.max.apply(null,n)===e[r].y)this.maxmax=e[r];else if(Math.min.apply(null,t)===e[r].x&&Math.max.apply(null,n)===e[r].y)this.minmax=e[r];else if(Math.max.apply(null,t)===e[r].x&&Math.min.apply(null,n)===e[r].y)this.maxmin=e[r];else if(Math.min.apply(null,t)===e[r].x&&Math.min.apply(null,n)===e[r].y)this.minmin=e[r];else throw new Error("Rectangle initialisation failed");this._init()},a.prototype.intersection=function(e){var t=this,n;if(e.x!==this.centerx){var i=(e.y-this.centery)/(e.x-this.centerx),r=e.y-i*e.x;n=[{x:(this.miny-r)/i,y:this.miny},{x:(this.maxy-r)/i,y:this.maxy},{x:this.minx,y:i*this.minx+r},{x:this.maxx,y:i*this.maxx+r}],n=o.filter(n,function(e){return t.isInside(e)})}else n=[{x:this.centerx,y:this.miny},{x:this.centerx,y:this.maxy}];var a=o.map(n,function(t){return s(t,e)}),l=a.indexOf(Math.min.apply(null,a));return-1<l?n[l]:null},a.prototype.isInside=function(e){return e.x<=this.maxx&&e.x>=this.minx&&e.y<=this.maxy&&e.y>=this.miny};var p={},c;return p.showVariableDiagram=function(){Promise.all([e.require("d3"),e.loadCss("src/util/diagram.css")]).then(function(e){function n(){j.attr("transform",`translate(${y.event.translate})scale(${y.event.scale})`)}function r(){D.attr("d",s),A.attr("transform",p),P.attr("transform",u),O.attr("transform",m)}function s(e){var t=g(e);return`M${t.from.x},${t.from.y}L${t.to.x} ${t.to.y}`}function p(e){return`translate(${e.x-T.width/2},${e.y-T.height/2})`}function u(e){var t=g(e);return`translate(${(t.from.x+t.to.x)/2-C.width/2},${(t.from.y+t.to.y)/2-C.height/2})`}function m(e){return`translate(${(e.x+e.x)/2-T.width/2},${(e.y+e.y)/2-T.height/2})`}function g(e){var t,n,o,i,r,s;var r=new a({x:e.source.x-T.width/2,y:e.source.y-T.height/2},T.width,T.height),s=new a({x:e.target.x-T.width/2,y:e.target.y-T.height/2},T.width,T.height);return{from:r.intersection(e.target),to:s.intersection(e.source)}}let h=_slicedToArray(e,1),y=h[0];var b="rect",_=l(),v=d(_),x=1400,w=900,k=50,T;T={width:140,height:90,padding:"2px 8px 2px 8px"};var C={width:150,height:200},S=y.layout.force().nodes(y.values(v)).links(_).size([x,w]).linkDistance(Math.max(T.width,T.height)+1.7*Math.max(C.width,C.height)).charge(-4e3).on("tick",r).start();c=i("<div class=\"ci-diagram\">");var E=y.behavior.zoom().scaleExtent([.2,10]).on("zoom",n),j=y.select(c[0]).append("svg").attr("viewBox",`0 0 ${x} ${w}`).attr("width","100%").attr("height","100%");j.append("g").append("rect").attr("width",x).attr("height",w).style("fill","rgba(255,255,255,1").style("stroke-width",0).call(E),j=j.append("g"),j.append("defs").selectAll("marker").data(["normal"]).enter().append("marker").attr("id",function(e){return e}).attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",15).attr("markerHeight",15).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5");var D=j.append("g").selectAll("path").data(S.links()).enter().append("path").attr("class",function(e){return`link ${e.type}`}).attr("marker-end",function(e){return`url(#${e.type})`}),A;A=j.append("g").selectAll("rect").data(S.nodes()).enter().append("rect").attr("width",T.width).attr("height",T.height).call(S.drag);var P=j.append("g").selectAll("foreignObject").data(S.links()).enter().append("foreignObject").style("pointer-events","none").attr("width",C.width).attr("height",C.height);P.append("xhtml:div").append("div").style({display:"flex","align-items":"center",height:`${C.height}px`,width:`${C.width}px`}).attr("class","arrow-text").html(function(e){var t=o.template("Event:&nbsp;<%= event %><br/>\nName:&nbsp;<%= name %><br/>\n<!--<% if(rel_out) { %> Ref out:&nbsp;<%= rel_out %><br/><% } %>-->\n<!--<% if(rel_in) { %> Ref in:&nbsp;<%= rel_in %><br/><% } %>-->\n<% if(jpath.length > 0) { %> <br/>jpath:&nbsp;<% print(\"[\" + jpath.join(\",\") + \"]\"); %> <% } %>");return t(DataObject.resurrect(e))});var O=j.append("g").selectAll("foreignObject").data(S.nodes()).enter().append("foreignObject").style("pointer-events","none").attr({width:T.width,height:T.height});O.append("xhtml:div").append("div").style({display:"flex",height:`${T.height}px`,width:`${T.width}px`,padding:T.padding,"box-sizing":"border-box"}).attr("class","node-text").html(function(e){var t=[`${e.info.module.controller?e.info.module.controller.moduleInformation.name:"unknown"}<br/>`,e.info.module.definition.title];return t.join("<br/>")});var R=Math.max(document.documentElement.clientWidth,window.innerWidth||0),L=Math.max(document.documentElement.clientHeight,window.innerHeight||0),N=.94,f,I;R/x<L/w?(f=N*R,I=f*w/x):(I=N*L,f=I*x/w),t.dialog(c,{width:f,height:I,noHeader:!1,noWrap:!0})})},p}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("delay",[],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.Delay=e()}}(function(){return function(){function s(l,e,n){function t(d,i){if(!e[d]){if(!l[d]){var r="function"==typeof require&&require;if(!i&&r)return r(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[d]={exports:{}};l[d][0].call(a.exports,function(e){var o=l[d][1][e];return t(o||e)},a,a.exports,s,l,e,n)}return e[d].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)t(n[r]);return t}return s}()({1:[function(e,t){'use strict';const n=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},o=({clearTimeout:e,setTimeout:t,willResolve:o})=>(i,{value:r,signal:a}={})=>{if(a&&a.aborted)return Promise.reject(n());let s,l,d;const p=e||clearTimeout,c=()=>{p(s),d(n())},u=()=>{a&&a.removeEventListener("abort",c)},m=new Promise((e,n)=>{l=()=>{u(),o?e(r):n(r)},d=n,s=(t||setTimeout)(l,i)});return a&&a.addEventListener("abort",c,{once:!0}),m.clear=()=>{p(s),s=null,u(),l()},m},i=o({willResolve:!0});i.reject=o({willResolve:!1}),i.createWithTimers=({clearTimeout:e,setTimeout:t})=>{const n=o({clearTimeout:e,setTimeout:t,willResolve:!0});return n.reject=o({clearTimeout:e,setTimeout:t,willResolve:!1}),n},t.exports=i,t.exports.default=i},{}]},{},[1])(1)}),"use strict",define("src/main/grid",["jquery","src/util/ui","src/util/util","src/util/diagram","modules/modulefactory","src/util/context","src/util/versioning","forms/form","src/main/variables","src/util/debug","version","src/util/config","delay"],function(t,e,n,o,r,a,s,l,d,p,c,u,m){"use strict";function g(e){var n=r.getModules(),o=0;for(var a in n){var i=n[a].getPosition(te()),s=n[a].getSize(te());i.top&&s.height&&n[a].getLayer(te()).display&&(o=Math.max(o,i.top+s.height))}q.css("height",Math.max(t("#ci-visualizer").height()-t("#header").outerHeight(!0)-5,Q.yHeight*o+(e?400:0)))}function h(e){const t=r.newModule(e);return b(t),t}function f(e){const t=DataObject.recursiveTransform(JSON.parse(JSON.stringify(e.definition)));t.layers[te()].position.left+=2,t.layers[te()].position.top+=2,h(t)}function y(e){const t=e.getPosition(te()),n=e.getSize(te());e.getDomWrapper().css({top:Math.round(t.top)*H.yHeight,left:Math.round(t.left)*H.xWidth,width:Math.round(n.width)*H.xWidth,height:Math.round(n.height)*H.yHeight,position:"absolute"})}function b(o){o.setLayers(H.getChildSync(["layers"],!0),!0,!1,!1,te()),o.ready.then(function(){o.getDomWrapper().appendTo(q),y(o),s.isViewLocked()||a.listen(o.getDomWrapper().get(0),[["<li name=\"tofront\"><a><span class=\"ui-icon ui-icon-arrowreturn-1-n\"></span> Move to front</a></li>",function(){C(o)}],["<li name=\"toback\"><a><span class=\"ui-icon ui-icon-arrowreturn-1-s\"></span> Move to back</a></li>",function(){S(o)}],["<li name=\"remove\"><a><span class=\"ui-icon ui-icon-close\"></span> Remove module</a></li>",function(){E(o)}],["<li name=\"move\"><a><span class=\"ui-icon ui-icon-arrow-4\"></span> Move</a></li>",function(t){var e=o.getDomWrapper().position(),n=t.pageX-e.left,i=t.pageY-e.top;j(o,n,i)}],["<li name=\"duplicate\"><a><span class=\"ui-icon ui-icon-copy\"></span> Duplicate</a></li>",function(){f(o)}],["<li name=\"copy\"><a><span class=\"ui-icon ui-icon-copy\"></span> Copy module</a></li>",function(){let e=JSON.parse(JSON.stringify(o.definition));Object.keys(e.layers).forEach(t=>{"Default layer"!==t&&delete e.layers[t]}),window.localStorage.setItem("ci-copy-module",JSON.stringify(e))}]]),o.inDom&&o.inDom(),s.isViewLocked()||o.getDomWrapper().resizable({grid:[H.xWidth,H.yHeight],start(){n.maskIframes(),o.resizing=!0},stop(){n.unmaskIframes(),v(),k(o),o.resizing=!1,g(!1)},resize(e,t){_(o,t.size),g(!0)},containment:"parent"}).draggable({grid:[H.xWidth,H.yHeight],containment:"parent",handle:".ci-module-header",start(){n.maskIframes(),g(!0),o.moving=!0},stop(){const e=t(this).position();n.unmaskIframes(),w(),o.getPosition(te()).set("left",Math.round(e.left/H.xWidth)),o.getPosition(te()).set("top",Math.round(e.top/H.yHeight)),o.moving=!1,g(!0)},drag(e,t){x(o,t.position),g(!0)}}).trigger("resize"),o.getDomWrapper().on("mouseover",function(){o.resizing||o.moving||o.getDomHeader().hasClass("ci-hidden")&&(o.getDomHeader().removeClass("ci-hidden").addClass("ci-hidden-disabled"),k(o))}).on("mouseout",function(){o.resizing||o.moving||o.getDomHeader().hasClass("ci-hidden-disabled")&&(o.getDomHeader().addClass("ci-hidden").removeClass("ci-hidden-disabled"),k(o))}),o.getDomWrapper().find(".ui-resizable-handle").on("mousedown",function(){g(!0)}),o.getDomWrapper().on("click",".ci-module-expand",function(){o.getDomWrapper().height(o.getDomContent().outerHeight()+o.getDomHeader().outerHeight(!0)),k(o)}),k(o),o.toggleLayer(te())},function(e){p.error("Error during module dom initialization",e)})}function _(e,t){const n=Math.round(t.width),o=Math.round(t.height),i=e.getDomWrapper();i.append(J),J.css({top:t.height,left:t.width/2}).text(n+""),i.append(K),K.css({top:t.height/2,left:t.width+4}).text(o+"")}function v(){J.remove(),K.remove()}function x(e,t){const n=Math.round(t.left/H.xWidth),o=Math.round(t.top/H.yHeight),i=e.getDomWrapper();i.append(Z),Z.text(`${n} / ${o}`)}function w(){Z.remove()}function k(e){var t=e.getDomWrapper();e.getSize(te()).set("width",Math.round(t.width()/H.xWidth)),e.getSize(te()).set("height",Math.round(t.height()/H.yHeight));var n=t.height()-(e.getDomHeader().is(":visible")?e.getDomHeader().outerHeight(!0):0);e.getDomContent().css({height:n}),e.view.width=e.getDomContent().width(),e.view.height=n,e.view.onResize(e.view.width,e.view.height)}function T(e){var n={},o=function o(){var s=q.position(),l=Math.round((n.left-s.left)/H.xWidth),d=Math.round((n.top-s.top)/H.yHeight),p=Math.round(n.width/H.xWidth),c=Math.round(n.height/H.yHeight);n.div.remove(),n={};var u=r.newModule(new DataObject({url:e}));b(u);var m=u.getLayer(te());m.position.set("left",l),m.position.set("top",d),m.size.set("width",p),m.size.set("height",c),m.wrapper=!0,m.title="",t(document).off("mousedown",i).off("mousemove",a).off("mouseup",o),q.css("cursor","default")},i=function(o){n.left=o.pageX,n.top=o.pageY,n.ileft=o.pageX,n.itop=o.pageY,n.div=t("<div>").css({border:"1px solid red",backgroundColor:"rgba(255, 0, 0, 0.2)",width:0,height:0,left:n.left,top:n.top,position:"absolute"}).appendTo(t("body"))},a=function(t){n.left&&(n.width=Math.abs(t.pageX-n.ileft),n.height=Math.abs(t.pageY-n.itop),n.left=Math.min(n.ileft,t.pageX),n.top=Math.min(n.itop,t.pageY),n.div.css({width:n.width,height:n.height,left:n.left,top:n.top}))};t(document).on("mousedown",i).on("mousemove",a).on("mouseup",o),q.css("cursor","crosshair")}function C(e){var n=r.getModules(),o=e.dom,a=e.definition.zindex||1,s=0,l;for(l in n)n[l].definition.zindex=n[l].definition.zindex||1,n[l].definition.zindex>=a&&n[l].definition.zindex--,n[l].dom.css("zIndex",n[l].definition.zindex),s++;t(o).css("zIndex",s),e.definition.zindex=s}function S(e){var n=r.getModules(),o=e.dom,a=e.definition.zindex||1,s=0,l;for(l in n)n[l].definition.zindex=n[l].definition.zindex||1,n[l].definition.zindex<=a&&n[l].definition.zindex++,n[l].dom.css("zIndex",n[l].definition.zindex),s++;t(o).css("zIndex",1),e.definition.zindex=1}function E(t){if(!(t.controller&&t.controller.onBeforeRemove&&!1===t.controller.onBeforeRemove())){try{t.getDomWrapper().remove().unbind()}catch(n){t.onReady().then(function(){t.getDomWrapper().remove().unbind()}).catch(function(t){p.warn("Could not remove module from dom.",t)})}r.removeModule(t),t.controller&&t.controller.onRemove&&t.controller.onRemove(),d.unlisten(t)}}function j(e,o,i){U={module:e,div:e.getDomWrapper()},n.maskIframes();var r=function(t){q.position();U.top=t.pageY-i,U.left=t.pageX-o,U.div.css({top:U.top,left:U.left})},a=function e(){if(U.left){var o=q.position(),i=Math.max(-3,Math.round(U.left/H.xWidth)),a=Math.max(-3,Math.round(U.top/H.yHeight));U.module.getPosition(te()).top=a,U.module.getPosition(te()).left=i,U.div.css({top:a*H.yHeight,left:i*H.xWidth}),n.unmaskIframes(),U=null,t(document).off("click",e).off("mousemove",r)}};t(document).on("click",a).on("mousemove",r)}function D(n,o){var i=t.Deferred();if(o)return H.layers[o]={name:o};var r=e.dialog({autoPosition:!0,title:"New layer",width:"600px"}),a=new l({});return a.init(),a.setStructure({sections:{layeropts:{options:{},groups:{layeropts:{options:{type:"list",multiple:!0},fields:{layername:{type:"text",title:"Layer name",validation:{rules:[{nonEmpty:!0,feedback:{_class:!0,message:"The layer name cannot be empty"}}]}},blanklayer:{type:"checkbox",title:"Blank layer?",options:{blank:" yes / no"}}}}}}}}),a.onStructureLoaded().done(function(){a.fill({})}),a.addButton("Validate",{color:"green"},function(){r.dialog("close");var e=a.getValue().sections.layeropts[0].groups.layeropts[0],t={name:e.layername[0]};H.layers[t.name]=t,i.resolve(t),0===e.blanklayer[0].length?O(!1,void 0,!1):O(!1,void 0,!0),n&&I(t.name)}),a.onLoaded().done(function(){r.html(a.makeDom(2)),a.inDom()}),i}function A(){var n=t.Deferred(),o=e.dialog({autoPosition:!0,title:"Remove layer",width:"600px"}),i=new l({});return i.init(),i.setStructure({sections:{layeropts:{options:{},groups:{layeropts:{options:{type:"list",multiple:!0},fields:{layername:{type:"text",title:"Layer name",validation:{rules:[{nonEmpty:!0,feedback:{_class:!0,message:"The layer name cannot be empty"}}]}}}}}}}}),i.onStructureLoaded().done(function(){i.fill({})}),i.addButton("Validate",{color:"green"},function(){o.dialog("close");var t=i.getValue().sections.layeropts[0].groups.layeropts[0],n={name:t.layername[0]};H.layers[n.name]&&1<Object.keys(H.layers).length?e.confirm(`<p>Are you sure that you want to delete the layer "${n.name}"</p>`,"Confirm","Cancel").then(function(t){t?(n.name===z&&I(Object.keys(H.layers)[0]),delete H.layers[n.name],e.showNotification(`Layer "${n.name}" deleted`,"success")):e.showNotification("Cancel layer deletion","info")}):e.showNotification(`Layer "${n.name}" doesn't exist`,"error"),O(!1,{remove:n.name})}),i.onLoaded().done(function(){o.html(i.makeDom(2)),i.inDom()}),n}function P(){var n=t.Deferred(),o=e.dialog({autoPosition:!0,title:"Rename layer",width:"600px"}),i=new l({});return i.init(),i.setStructure({sections:{layeropts:{options:{},groups:{layeropts:{options:{type:"list",multiple:!0},fields:{originalname:{type:"text",title:"Original layer name",validation:{rules:[{nonEmpty:!0,feedback:{_class:!0,message:"The layer name cannot be empty"}}]}},newname:{type:"text",title:"New layer name",validation:{rules:[{nonEmpty:!0,feedback:{_class:!0,message:"The layer name cannot be empty"}}]}}}}}}}}),i.onStructureLoaded().done(function(){i.fill({})}),i.addButton("Validate",{color:"green"},function(){o.dialog("close");var t=i.getValue().sections.layeropts[0].groups.layeropts[0],n={old:t.originalname[0],new:t.newname[0]};H.layers[n.old]?H.layers[n.new]?e.showNotification(`Layer "${n.new}" already exist`,"error"):(H.layers[n.new]={name:n.new},delete H.layers[n.old],n.old===z&&I(n.new),e.showNotification(`Layer "${n.old}" renamed to "${n.new}"`,"success")):e.showNotification(`Layer "${n.old}" doesn't exist`,"error"),O(!1,{rename:n})}),i.onLoaded().done(function(){o.html(i.makeDom(2)),i.inDom()}),n}function O(e,t,n){ee(function(o){o.setLayers(H.layers,e,t,n,te())})}function R(e,t){var n=L(t),o=N();for(var i of n)for(var r of o)if(r.match(new RegExp(`${e}.${i}`)))return r;return e}function L(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var t=e.onlyLarger,n=JSON.parse(JSON.stringify(G)),o=screen.width,i=screen.height;for(var r of n)r.error=o-r.width+i-r.height;return(void 0===t||t)&&(n=n.filter(e=>0<=e.error)),n.sort((e,t)=>0<=e.error&&0<=t.error?e.error-t.error:0<=e.error?-1:0<=t.error?1:t.error-e.error),n.map(e=>e.name)}function N(){return Object.keys(H.layers)}function I(e){let n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};n.autoSize&&(e=R(e,n));var o=H.layers[e]?H.layers[e]:D(!1,e);t.when(o).then(function(e){e&&(o=e);te()===o.name||(z=o.name,ee(async function(e){for(;!e.domWrapper;)await m(10);var t=e.toggleLayer(o.name);t&&y(e)}))})}function F(e){for(var t in H.layers)e(H.layers[t],t)}var M=!1,z="Default layer",H,q,U,B,W,V,Y;const G=[{name:"1080",width:1920,height:1080},{name:"768",width:1366,height:768},{name:"1440",width:2560,height:1440}],Q={xWidth:10,yHeight:10},X={position:"absolute",fontSize:"16pt"},J=t("<span>").css(X),K=t("<span>").css(X),Z=t("<span>").css(X).css({top:-2,left:4});var ee=function(e){for(var t=r.getModules(),n=0,o=t.length;n<o;n++)e(t[n])},te=function(){return z};return{init:function(i,l){function d(e,n){if(e.modules)for(var o=0,r=e.modules.length;o<r;o++)e.modules[o].hidden||n.append(`<li class="ci-item-newmodule" data-url="${encodeURIComponent(e.modules[o].url)}"><a>${e.modules[o].moduleName}</a></li>`);if(e.folders)for(var o in e.folders){var a=t(`<li><a>${o}</a></li>`),s=t("<ul />").appendTo(a);d(e.folders[o],s),n.append(a)}}M||(q=t(l),M=!0,!s.isViewLocked()&&(a.listen(a.getRootDom(),[["<li name=\"paste\"><a><span class=\"ui-icon ui-icon-clipboard\"></span>Paste module</a></li>",function(){var e=DataObject.recursiveTransform(JSON.parse(window.localStorage.getItem("ci-copy-module")));h(e)}]]),(-1<u.contextMenu().indexOf("all")||-1<u.contextMenu().indexOf("add"))&&a.listen(l,[],function(e){var n=t("<li name=\"add\"><a> Add a module</a></li>"),o=t("<ul />").appendTo(n),i=r.getTypes();t.when(i).then(function(e){if("object"!=typeof e||Array.isArray(e)||(e=[e]),Array.isArray(e))for(var t=0,n=e.length;t<n;t++)d(e[t],o)}),t(e).append(n),n.on("mouseup",function(e){e.stopPropagation();var n=t(e.target);"A"===n.prop("tagName")&&(n=n.parent());var o=n.attr("data-url");o&&T(decodeURIComponent(o))})}),W=t("<li><a> Switch to layer</a></li>"),B=t("<ul />").appendTo(W),(-1<u.contextMenu().indexOf("all")||-1<u.contextMenu().indexOf("layers"))&&a.listen(l,[],function(e){B.empty(),F(function(e,n){var o=t(`<li data-layer="${encodeURIComponent(n)}"><a><span />${n}</a></li>`).data("layerkey",n).appendTo(B);n==z&&o.find("span").addClass("ui-icon ui-icon-check")}),t("<li data-layer=\"\"><a>+ Add a new layer</a></li>").data("layerkey","-1").appendTo(B),t("<li data-layer=\"\"><a>- Remove a layer</a></li>").data("layerkey","-2").appendTo(B),t("<li data-layer=\"\"><a>= Rename a layer</a></li>").data("layerkey","-3").appendTo(B),t(e).append(W),W.on("mouseup",function(e){e.stopPropagation();var n=t(e.target);"A"===n.prop("tagName")&&(n=n.parent());var o=n.data("layerkey");"-1"!==o&&"-2"!==o&&"-3"!==o?I(o):"-1"==o?D():"-2"==o?A():"-3"==o&&P()})}),Y=t("<li name=\"utils\"><a>Utils</a></li>"),V=t("<ul />").appendTo(Y),(-1<u.contextMenu().indexOf("all")||-1<u.contextMenu().indexOf("utils"))&&a.listen(l,[],function(n){V.empty(),V.append(t("<li data-util=\"copyview\"><a><span/>Copy view</a></li>").data("utilkey","copyview")),V.append(t("<li data-util=\"copydata\"><a><span/>Copy data</a></li>").data("utilkey","copydata")),V.append(t("<li data-util=\"pasteview\"><a><span/>Paste view</a></li>").data("utilkey","pasteview")),V.append(t("<li data-util=\"pastedata\"><a><span/>Paste data</a></li>").data("utilkey","pastedata")),V.append(t("<li data-util=\"blankview\"><a><span/>Blank view</a></li>").data("utilkey","blankview")),V.append(t("<li data-util=\"feedback\"><a><span/>Send Feedback</a></li>").data("utilkey","feedback")),t(n).append(Y),Y.on("mouseup",function(n){var o=t(n.target.parentNode).data("utilkey");switch(o){case"copyview":s.copyView();break;case"blankview":s.blankView();break;case"copydata":s.copyData();break;case"pasteview":s.pasteView();break;case"pastedata":s.pasteData();break;case"feedback":e.feedback();break;default:p.warn("Unknow util key");}})}),a.listen(a.getRootDom(),[["<li name=\"diagram\"><a><span class=\"ui-icon ui-icon-zoomin\"></span>View Diagram</a></li>",function(){o.showVariableDiagram()}]]),a.listen(a.getRootDom(),[[`<li class="ci-item-configureentrypoint" class="ui-state-disabled" id="context-menu-version"><a class="ui-state-disabled"><span class="ui-icon ui-icon-info"></span>${s.version} </a></li>`,function(){window.open("https://github.com/NPellet/visualizer","_blank")}]],null,function(e){var t=s.originalVersion,n="";"none"!==t&&t!==s.version&&(n=`${t}\u2192`),e.find("#context-menu-version a").html(`<span class="ui-icon ui-icon-info"></span>${n}${s.version}${c.isRelease?"":" (pre)"}`)}),c.buildTime&&a.listen(a.getRootDom(),[[`<li id="context-menu-build-info"><a class="ui-state-disabled"><span class="ui-icon ui-icon-info"></span>Built ${c.buildTime}</a></li>`,n.noop]],null,function(e){e.find("#context-menu-build-info").insertAfter(e.find("#context-menu-version"))})),this.reset(i))},reset:function(e){H=e,H.layers=H.layers||{},H.xWidth||(H.xWidth=10),H.yHeight||(H.yHeight=10);for(var n=r.getModules();n.length;)E(n[0]);t(q).empty(),g(),I(z,{autoSize:!0})},switchToLayer:function(e,t){H.layers[e]||t.autoSize?I(e,t):p.warn(`Layer ${e} is not defined`)},getLayerNames:N,setInitialLayerName:function(e){z=e},getActiveLayerName:te,addModule:b,newModule:T,removeModule:E,addModuleFromJSON:h,checkDimensions:g,moduleResize:k,setModuleSize:y}}),"use strict",define("src/util/viewmigration",["src/util/versioning","src/util/debug","lib/semver/semver"],function(e,t,n){"use strict";function o(e,t,n){var o=e.getChildSync(["vars_in"]),i=e.getChildSync(["vars_out"]),r=e.getChildSync(["actions_out"]);o.forEach(function(e){e&&e.rel&&e.rel===t&&(e.rel=n)}),i.forEach(function(e){e&&e.rel&&e.rel===t&&(e.rel=n)}),r&&r.forEach(function(e){e&&e.rel&&e.rel===t&&(e.rel=n)})}function r(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function a(e,t){var n=e.indexOf(t);-1===n&&e.push(t)}function s(e,t,n){if(e.modules){"string"==typeof n?n=[n]:!Array.isArray(n)&&(n=[""]);for(var o=0,r=e.modules.length,a=n.length,s,l,d;o<r;o++)if(s=e.modules[o],l=s.getChildSync(["url"]),l)for(d=0;d<a;d++)if(0<=(l+"").indexOf(n[d])){t(s);break}}}function l(e){return"display_value"===e?"./modules/types/display/single_value/":"jqgrid"===e?"./modules/types/display/jqgrid/":"fasttable"===e?"./modules/types/display/fasttable/":"2d_list"===e?"./modules/types/display/2d_list/":"hashmap"===e?"./modules/types/display/hashmap/":"postit"===e?"./modules/types/display/postit/":"iframe"===e?"./modules/types/display/iframe/":"webservice_search"===e?"./modules/types/server_interaction/webservice_search/":"button_url"===e?"./modules/types/server_interaction/button_url/":"filter"===e?"./modules/types/edition/filter/":"form"===e?"./modules/types/edition/form/":"form_simple"===e?"./modules/types/edition/form_simple/":"var_editor"===e?"./modules/types/edition/var_editor/":"graph_function"===e?"./modules/types/chart/advanced/plot_function/":"canvas_matrix"===e?"./modules/types/chart/advanced/canvas_matrix/":"dendrogram"===e?"./modules/types/chart/statistics/dendrogram/":"loading_plot"===e?"./modules/types/chart/statistics/loading_plot/":"phylogram"===e?"./modules/types/chart/statistics/phylogram/":"spectra_displayer"===e?"./modules/types/science/spectra/spectra_displayer/":"jsme"===e?"./modules/types/science/chemistry/jsme/":"jsmol"===e?"./modules/types/science/chemistry/jsmol/":"jsmol_script"===e?"./modules/types/science/chemistry/jsmol_script/":"mol2d"===e?"./modules/types/science/chemistry/mol2d/":"1dnmr"===e?"./modules/types/science/spectra/nmr/1dnmr/":"2dnmr"===e?"./modules/types/science/spectra/nmr/2dnmr/":"webservice_nmr_spin"===e?"./modules/types/science/spectra/nmr/webservice_nmr_spin/":"gcms"===e?"./modules/types/science/spectra/gcms/":"ivstability"===e?"./modules/types/science/spectra/ivstability/":"array_search"===e?"./modules/types/client_interaction/array_search/":"dragdrop"===e?"./modules/types/client_interaction/dragdrop/":"button_action"===e?"./modules/types/client_interaction/button_action/":"grid_selector"===e?"./modules/types/grid_selector/":"xyzoomnavigator"===e?"./modules/types/xyzoomnavigator/":"webservice_cron"===e?"./modules/types/webservice_cron/":void t.error(`viewmigration problem: ${e} is unknown`)}function d(e){var t=e.getChildSync(["jpath"]);t&&t.split&&e.setChild(["jpath"],t.split(".").slice(1))}function p(o){if(0===Object.keys(o).length)return o.version=e.version,o;if(o._version&&(o.version=o._version,delete o._version),o.version===e.version)return o;switch(o.version){case void 0:o.version="0.0.0";break;case"2.1":o.version="2.1.0";break;case"2.2":o.version="2.2.0";break;case"2.4.0b0":o.version="2.4.0-b0";break;case"2.4.0b1":o.version="2.4.0-b1";break;case"2.4.0b2":o.version="2.4.0-b2";}var r=n.parse(o.version);if(!r)return t.error(`View has an invalid version: ${o.version}. It cannot be migrated`),o;var a=n.parse(e.version);if(n.gt(r,a))return o;t.info(`Migrating view from version ${o.version} to ${e.version}`),r.prerelease.length&&t.warn("Migrating a prerelease view, anything can happen !"),a.prerelease.length&&t.warn("Migrating to a prerelease version of the visualizer, anything can happen !");for(var s=0;s<u.length;s++)n.lt(r,u[s].version)&&(t.debug(`applying migration to v${u[s].version.version}`),u[s].func(o));return o.version=e.version,o}var c=["2.1.0",function(e){if(e.entryPoint){e.variables=e.entryPoint.variables,delete e.entryPoint;for(var t=e.modules,n=0,o;n<t.length;n++)o=t[n],o.position.left*=2,o.position.top*=2,o.size.width*=2,o.size.height*=2}},"2.2.0",function(e){if(e.modules)for(var t=0,n;t<e.modules.length;t++)n=e.modules[t],("grid"===n.type||"editable_grid"===n.type)&&(n.type="jqgrid")},"2.2.1",function(e){if(e.modules)for(var t=0,n;t<e.modules.length;t++)n=e.modules[t],n.url=l(n.type),delete n.type},"2.2.2",function(e){s(e,function(e){e.url="./modules/types/array_search/configured_search/"},"types/client_interaction/array_search")},"2.2.3",function(e){e.title&&(!e.configuration&&(e.configuration=new DataObject),e.configuration.title=e.title,delete e.title),s(e,function(e){var t;for(e.url="modules/types/client_interaction/code_editor/","true"===e.configuration.groups.group[0].iseditable[0][0]&&(e.configuration.groups.group[0].iseditable[0][0]="editable"),delete e.configuration.groups.group[0].padding,e.configuration.groups.group[0].mode=["text"],t=0;t<e.vars_out.length;t++){var n=e.vars_out[t];n.event&&(n.event="onEditorChange",n.rel="value")}for(t=0;t<e.actions_out.length;t++){var o=e.actions_out[t];o.event&&(o.event="onButtonClick",o.rel="value")}},"types/science/chemistry/jsmol_script")},"2.2.4",function(e){s(e,function(e){var t=e.configuration.groups.group[0].url;t[0]&&(t[0]=t[0].replace(/<([a-zA-Z0-9]+)>/g,"{$1}"))},"types/server_interaction/webservice_search")},"2.2.5",function(e){s(e,function(e){for(var t=0,n;t<e.vars_out.length;t++)n=e.vars_out[t],n.event="onRead","data"===n.rel?n.jpath=`${n.jpath}.content`:"filename"===n.rel&&(n.rel="data",n.jpath=`${n.jpath}.filename`)},"types/client_interaction/dragdrop")},"2.3.0-beta1",function(e){e.grid=DataObject.recursiveTransform({layers:{"Default layer":{name:"Default layer"}},xWidth:10,yHeight:10}),s(e,function(e){e.layers||(e.layers=DataObject.recursiveTransform({"Default layer":{position:{left:e.position.left,top:e.position.top,right:0},size:{width:e.size.width,height:e.size.height},zIndex:e.zIndex,display:!0,title:e.title,bgColor:e.bgColor,wrapper:e.displayWrapper,created:!0,name:"Default layer"}}),delete e.title,delete e.position,delete e.size,delete e.zIndex,delete e.displayWrapper,delete e.bgColor)})},"2.4.0-b0",function(e){if(e.variables)for(var t=0;t<e.variables.length;t++)d(e.variables[t]);s(e,function(e){var t;if(e.vars_out)for(t=0;t<e.vars_out.length;t++)d(e.vars_out[t]);if(e.actions_out)for(t=0;t<e.actions_out.length;t++)d(e.actions_out[t])})},"2.4.0-b1",function(e){s(e,function(e){for(var t=e.vars_out,n=0;n<t.length;n++)t[n].setChild(["rel"],"output")},"types/edition/object_editor")},"2.4.0-b2",function(e){s(e,function(e){for(var t=e.vars_out,n=0;n<t.length;n++)t[n].setChild(["rel"],"filteredObject")},"types/edition/filter_editor")},"2.4.1",function(e){s(e,function(e){var t=e.configuration.sections.postvariables[0].groups.postvariables[0],n;for(n=0;n<t.length;n++)t[n].variable?t[n].destination="data":t.splice(n--,1);var o=e.configuration.groups.searchparams[0];for(n=0;n<o.length;n++)o[n].name?o[n].destination="url":o.splice(n--,1);var r=e.vars_in;for(n=0;n<r.length;n++)r[n].rel?"varinput"===r[n].rel?(e.configuration.sections.postvariables[0].groups.postvariables[0].push({name:r[n].name,destination:"url",variable:r[n].name,filter:"none"}),r.splice(n--,1)):"vartrigger"===r[n].rel&&e.configuration.sections.postvariables[0].groups.postvariables[0].push({name:r[n].name,destination:"url",variable:r[n].name,filter:"none"}):r.splice(n--,1)},"types/server_interaction/webservice_search")},"2.4.2",function(e){s(e,function(e){if(e.layers){var t=e.layers,n;for(var o in t)n=t[o],n.bgcolor&&(!n.bgColor&&(n.bgColor=n.bgcolor),delete n.bgcolor)}})},"2.13.1-b0",function(e){s(e,function(e){Array.isArray(e.actions_in)&&e.actions_in.forEach(function(e){"fromTo"===e.rel&&(e.rel="fromToX")}),Array.isArray(e.actions_out)&&e.actions_out.forEach(function(e){"fromTo"===e.rel&&(e.rel="fromToX")})},"spectra_displayer")},"2.13.1-b1",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","plotinfos",0]);t&&t.forEach(function(e){e.plotcontinuous=e.plotcontinuous?"continuous"==e.plotcontinuous[0]?"continuous":"discrete":"continuous"})},"spectra_displayer")},"2.13.1-b2",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","groupings",0]);if(t)for(var n=0;n<t.length;n++)t[n].getter=[t[n].getter]},"slick_grid")},"2.13.1-b3",function(e){s(e,function(e){for(var t=e.getChildSync(["configuration","groups","cols",0]),n=0;n<t.length;n++)delete t[n].selectable,delete t[n].focusable,delete t[n].sortable,delete t[n].defaultSortOnAsc,delete t[n].resizable;var o=e.getChildSync(["configuration","groups","group",0]);delete o.toggle;var a=o.slickCheck[0];a instanceof Array&&(r(a,"multiColumnSort"),r(a,"enableColumnReorder"),r(a,"enableTextSelectionOnCells")),delete o.filterRow},"slick_grid")},"2.15.1",function(e){s(e,function(e){var t=e.actions_in;t&&t.length&&t.forEach(function(e){e&&"fromTo"===e.rel&&(e.rel="fromToX")})},"spectra_displayer")},"2.16.1-1",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","group",0,"slickCheck",0]);t instanceof Array&&a(t,"highlightScroll")},"slick_grid")},"2.22.3-1",function(e){s(e,function(e){o(e,"value","data")},"code_editor")},"2.23.1-1",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","plotinfos",0]);t&&t.forEach(function(e){e.markerShape="1",e.markerSize=2})},"spectra_displayer")},"2.35.2-1",function(e){s(e,function(e){function t(e){return o.getChildSync(["groups","group",0,e])}var n=e.getChildSync(["configuration","groups","group",0,"legend"]);if(n)switch(n[0]+""){case"topright":n[0]="top";break;case"bottomright":n[0]="right";break;case"bottomleft":n[0]="bottom";break;case"topleft":n[0]="left";}var o=e.getChildSync(["configuration"]),i=[],r=[],a=t("displayAxis");Array.isArray(a)&&Array.isArray(a[0])&&(-1<a[0].indexOf("x")&&i.push("display"),-1<a[0].indexOf("y")&&r.push("display"));var s=t("flip");Array.isArray(s)&&Array.isArray(s[0])&&(-1<s[0].indexOf("flipX")&&i.push("flip"),-1<s[0].indexOf("flipY")&&r.push("flip"));var l=t("grids");Array.isArray(l)&&Array.isArray(l[0])&&(-1<l[0].indexOf("vmain")&&i.push("main"),-1<l[0].indexOf("vsec")&&i.push("sec"),-1<l[0].indexOf("hmain")&&r.push("main"),-1<l[0].indexOf("hsec")&&r.push("sec")),e.configuration={sections:{axis:[{groups:{xAxis:[{afterSpacing:t("xRightSpacing"),axismodification:t("xaxismodification"),beforeSpacing:t("xLeftSpacing"),checkboxes:[i],label:t("xLabel"),max:t("maxX"),min:t("minX")}],yAxis:[{afterSpacing:t("yTopSpacing"),beforeSpacing:t("yBottomSpacing"),checkboxes:[r],fitToAxisOnFromTo:t("FitYToAxisOnFromTo"),label:t("yLabel"),max:t("maxY"),min:t("minY")}]}}],graph:[{groups:{graph:[{fullOut:t("fullOut"),legend:t("legend"),mouseTracking:t("mouseTracking"),selectScatter:t("selectScatter"),url:t("graphurl"),wheelAction:t("wheelAction"),wheelbaseline:t("wheelbaseline"),zoom:t("zoom")}]}}],variables:[{groups:{variables:o.getChildSync(["groups","plotinfos"])}}]}}},"spectra_displayer")},"2.47.3-1",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","string",0]);if(t&&t.length)for(var n=0,o;n<t.length;n++)o=t.getChildSync([n,"filter"]),e.setChildSync(["configuration","groups","string",0,n,"extension"],o),e.setChildSync(["configuration","groups","string",0,n,"filter"],"mime")},"dragdrop")},"2.49.1-1",function(e){s(e,function(e){e.toolbar||(e.toolbar={custom:[[{title:"",icon:"",action:"",position:"begin"}]],common:[{toolbar:[["Open Preferences"]]}]})})},"2.53.6-2",function(e){s(e,function(e){var t=e.getChildSync(["configuration","groups","actionCols",0]);t&&!Array.isArray(t)&&e.setChildSync(["configuration","groups","actionCols",0],[])},"slick_grid")},"2.71.8-1",function(e){s(e,function(e){const t=e.getChildSync(["configuration","groups","group",0,"asyncAwait"]);t||e.setChildSync(["configuration","groups","group",0,"asyncAwait"],[[]])},"code_executor")},"2.77.1-1",function(e){e.pouchvariables&&delete e.pouchvariables,e.couch_replication&&delete e.couch_replication,e.crons&&delete e.crons},"2.80.3-1",function(e){s(e,function(e){"yes"===e.getChildSync(["configuration","groups","group",0,"focusOnHighlight",0,0])+""&&(e.configuration.groups.group[0].highlightStrategy=["panzoom"]),e.getChildSync(["configuration","groups","group",0,"focusOnHighlight"])&&delete e.configuration.groups.group[0].focusOnHighlight},"panzoom")}],u=[];if(1==c.length%2)throw new Error("Invalid length of the migrators array.");for(var m=0,g;m<c.length;m+=2){if(g=n.parse(c[m]),!g)throw new Error(`invalid semver for migration function: ${c[m]}`);var h=c[m+1];if("function"!=typeof h)throw new Error(`object passed for migration ${c[m]} has to be a function`);u.push({version:g,func:h})}return u.sort(function(e,t){return e.version.compare(t.version)}),p}),!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("bowser",t):this[e]=t()}("bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&1<n.length&&n[1]||""}var o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),r=!i&&/android/i.test(e),a=/CrOS/.test(e),s=t(/edge\/(\d+(\.\d+)?)/i),l=t(/version\/(\d+(\.\d+)?)/i),d=/tablet/i.test(e),p=!d&&/[^-]mobi/i.test(e),c;/opera|opr/i.test(e)?c={name:"Opera",opera:n,version:l||t(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?c={name:"Yandex Browser",yandexbrowser:n,version:l||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(c={name:"Windows Phone",windowsphone:n},s?(c.msedge=n,c.version=s):(c.msie=n,c.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?c={name:"Internet Explorer",msie:n,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:a?c={name:"Chrome",chromeBook:n,chrome:n,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?c={name:"Microsoft Edge",msedge:n,version:s}:/chrome|crios|crmo/i.test(e)?c={name:"Chrome",chrome:n,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(c={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},l&&(c.version=l)):/sailfish/i.test(e)?c={name:"Sailfish",sailfish:n,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?c={name:"SeaMonkey",seamonkey:n,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(c={name:"Firefox",firefox:n,version:t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(c.firefoxos=n)):/silk/i.test(e)?c={name:"Amazon Silk",silk:n,version:t(/silk\/(\d+(\.\d+)?)/i)}:r?c={name:"Android",version:l}:/phantom/i.test(e)?c={name:"PhantomJS",phantom:n,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?c={name:"BlackBerry",blackberry:n,version:l||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(c={name:"WebOS",webos:n,version:l||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(c.touchpad=n)):/bada/i.test(e)?c={name:"Bada",bada:n,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?c={name:"Tizen",tizen:n,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||l}:/safari/i.test(e)?c={name:"Safari",safari:n,version:l}:c={name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&1<n.length&&n[2]||""}(/^(.*)\/(.*) /)},!c.msedge&&/(apple)?webkit/i.test(e)?(c.name=c.name||"Webkit",c.webkit=n,!c.version&&l&&(c.version=l)):!c.opera&&/gecko\//i.test(e)&&(c.name=c.name||"Gecko",c.gecko=n,c.version=c.version||t(/gecko\/(\d+(\.\d+)?)/i)),!c.msedge&&(r||c.silk)?c.android=n:o&&(c[o]=n,c.ios=n);var u="";c.windowsphone?u=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(u=t(/os (\d+([_\s]\d+)*) like mac os x/i),u=u.replace(/[_\s]/g,".")):r?u=t(/android[ \/-](\d+(\.\d+)*)/i):c.webos?u=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):c.blackberry?u=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):c.bada?u=t(/bada\/(\d+(\.\d+)*)/i):c.tizen&&(u=t(/tizen[\/\s](\d+(\.\d+)*)/i)),u&&(c.osversion=u);var m=u.split(".")[0];return d||"ipad"==o||r&&(3==m||4==m&&!p)||c.silk?c.tablet=n:(p||"iphone"==o||"ipod"==o||r||c.blackberry||c.webos||c.bada)&&(c.mobile=n),c.msedge||c.msie&&10<=c.version||c.yandexbrowser&&15<=c.version||c.chrome&&20<=c.version||c.firefox&&20<=c.version||c.safari&&6<=c.version||c.opera&&10<=c.version||c.ios&&c.osversion&&6<=c.osversion.split(".")[0]||c.blackberry&&10.1<=c.version?c.a=n:c.msie&&10>c.version||c.chrome&&20>c.version||c.firefox&&20>c.version||c.safari&&6>c.version||c.opera&&10>c.version||c.ios&&c.osversion&&6>c.osversion.split(".")[0]?c.c=n:c.x=n,c}var n=!0,t=e("undefined"==typeof navigator?"":navigator.userAgent);return t.test=function(e){for(var n=0,o;n<e.length;++n)if(o=e[n],"string"==typeof o&&o in t)return!0;return!1},t._detect=e,t}),window.Modernizr=function(e,t){function n(e){g.cssText=e}function o(e,t){return n(b.join(e+";")+(t||""))}function r(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var n in e){var o=e[n];if(!a(o,"-")&&void 0!==g[o])return"pfx"!=t||o}return!1}function l(e,t,n){for(var o in e){var i=t[e[o]];if(void 0!==i)return!1===n?e[o]:r(i,"function")?i.bind(n||t):i}return!1}function d(e,t,n){var o=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(o+" ")+o).split(" ");return r(t,"string")||r(t,"undefined")?s(i,t):(i=(e+" "+x.join(o+" ")+o).split(" "),l(i,t,n))}var p={},c=t.documentElement,u="modernizr",m=t.createElement(u),g=m.style,h=t.createElement("input"),f=":)",y={}.toString,b=" -webkit- -moz- -o- -ms- ".split(" "),_="Webkit Moz O ms",v=_.split(" "),x=_.toLowerCase().split(" "),w={svg:"http://www.w3.org/2000/svg"},i={},k={},T={},C=[],S=C.slice,E=function(e,n,o,i){var r=t.createElement("div"),a=t.body,s=a||t.createElement("body"),l,d,p,m;if(parseInt(o,10))for(;o--;)p=t.createElement("div"),p.id=i?i[o]:u+(o+1),r.appendChild(p);return l=["&#173;","<style id=\"s",u,"\">",e,"</style>"].join(""),r.id=u,(a?r:s).innerHTML+=l,s.appendChild(r),a||(s.style.background="",s.style.overflow="hidden",m=c.style.overflow,c.style.overflow="hidden",c.appendChild(s)),d=n(r,e),a?r.parentNode.removeChild(r):(s.parentNode.removeChild(s),c.style.overflow=m),!!d},j=function(){function e(e,o){o=o||t.createElement(n[e]||"div"),e="on"+e;var i=e in o;return i||(!o.setAttribute&&(o=t.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(e,""),i=r(o[e],"function"),!r(o[e],"undefined")&&(o[e]=void 0),o.removeAttribute(e))),o=null,i}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),D={}.hasOwnProperty,A,P;for(var O in P=r(D,"undefined")||r(D.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return D.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),o=function(){if(this instanceof o){var i=function(){};i.prototype=t.prototype;var r=new i,a=t.apply(r,n.concat(S.call(arguments)));return Object(a)===a?a:r}return t.apply(e,n.concat(S.call(arguments)))};return o}),i.flexbox=function(){return d("flexWrap")},i.flexboxlegacy=function(){return d("boxDirection")},i.canvas=function(){var e=t.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))},i.canvastext=function(){return!!(p.canvas&&r(t.createElement("canvas").getContext("2d").fillText,"function"))},i.webgl=function(){return!!e.WebGLRenderingContext},i.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:E(["@media (",b.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},i.geolocation=function(){return"geolocation"in navigator},i.postmessage=function(){return!!e.postMessage},i.websqldatabase=function(){return!!e.openDatabase},i.indexedDB=function(){return!!d("indexedDB",e)},i.hashchange=function(){return j("hashchange",e)&&(void 0===t.documentMode||7<t.documentMode)},i.history=function(){return!!(e.history&&history.pushState)},i.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},i.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},i.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),a(g.backgroundColor,"rgba")},i.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),a(g.backgroundColor,"rgba")||a(g.backgroundColor,"hsla")},i.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},i.backgroundsize=function(){return d("backgroundSize")},i.borderimage=function(){return d("borderImage")},i.borderradius=function(){return d("borderRadius")},i.boxshadow=function(){return d("boxShadow")},i.textshadow=function(){return""===t.createElement("div").style.textShadow},i.opacity=function(){return o("opacity:.55"),/^0.55$/.test(g.opacity)},i.cssanimations=function(){return d("animationName")},i.csscolumns=function(){return d("columnCount")},i.cssgradients=function(){var e="background-image:";return n((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+b.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),a(g.backgroundImage,"gradient")},i.cssreflections=function(){return d("boxReflect")},i.csstransforms=function(){return!!d("transform")},i.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in c.style&&E("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},i.csstransitions=function(){return d("transition")},i.fontface=function(){var e;return E("@font-face {font-family:\"font\";src:url(\"https://\")}",function(n,o){var i=t.getElementById("smodernizr"),r=i.sheet||i.styleSheet,a=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(o.split(" ")[0])}),e},i.generatedcontent=function(){var e;return E(["#",u,"{font:0/0 a}#",u,":after{content:\"",f,"\";visibility:hidden;font:3px/1 a}"].join(""),function(t){e=3<=t.offsetHeight}),e},i.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType("video/ogg; codecs=\"theora\"").replace(/^no$/,""),n.h264=e.canPlayType("video/mp4; codecs=\"avc1.42E01E\"").replace(/^no$/,""),n.webm=e.canPlayType("video/webm; codecs=\"vp8, vorbis\"").replace(/^no$/,""))}catch(t){}return n},i.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(t){}return n},i.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(t){return!1}},i.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(t){return!1}},i.webworkers=function(){return!!e.Worker},i.applicationcache=function(){return!!e.applicationCache},i.svg=function(){return!!t.createElementNS&&!!t.createElementNS(w.svg,"svg").createSVGRect},i.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==w.svg},i.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(y.call(t.createElementNS(w.svg,"animate")))},i.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(y.call(t.createElementNS(w.svg,"clipPath")))},i)P(i,O)&&(A=O.toLowerCase(),p[A]=i[O](),C.push((p[A]?"":"no-")+A));return p.input||function(){p.input=function(n){for(var o=0,r=n.length;o<r;o++)T[n[o]]=!!(n[o]in h);return T.list&&(T.list=!!(t.createElement("datalist")&&e.HTMLDataListElement)),T}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var n=0,o=e.length,r,a,s;n<o;n++)h.setAttribute("type",a=e[n]),r="text"!==h.type,r&&(h.value=f,h.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(a)&&void 0!==h.style.WebkitAppearance?(c.appendChild(h),s=t.defaultView,r=s.getComputedStyle&&"textfield"!==s.getComputedStyle(h,null).WebkitAppearance&&0!==h.offsetHeight,c.removeChild(h)):/^(search|tel)$/.test(a)||(/^(url|email)$/.test(a)?r=h.checkValidity&&!1===h.checkValidity():r=h.value!=f)),k[e[n]]=!!r;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}(),p.addTest=function(e,t){if("object"==typeof e)for(var n in e)P(e,n)&&p.addTest(n,e[n]);else{if(e=e.toLowerCase(),void 0!==p[e])return p;t="function"==typeof t?t():t,c.className+=" "+(t?"":"no-")+e,p[e]=t}return p},n(""),m=h=null,(function(e,t){function n(e,t){var n=e.createElement("p"),o=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",o.insertBefore(n.lastChild,o.firstChild)}function o(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=h[e[m]];return t||(t={},g++,e[m]=g,h[g]=t),t}function a(e,n,o){if(n||(n=t),y)return n.createElement(e);o||(o=r(n));var i;return i=o.cache[e]?o.cache[e].cloneNode():u.test(e)?(o.cache[e]=o.createElem(e)).cloneNode():o.createElem(e),!i.canHaveChildren||c.test(e)||i.tagUrn?i:o.frag.appendChild(i)}function s(e,n){if(e||(e=t),y)return e.createDocumentFragment();n=n||r(e);for(var a=n.frag.cloneNode(),s=0,d=o(),p=d.length;s<p;s++)a.createElement(d[s]);return a}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return b.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+o().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),"c(\""+e+"\")"})+");return n}")(b,t.frag)}function d(e){e||(e=t);var o=r(e);return!b.shivCSS||f||o.hasCSS||(o.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}"+"mark{background:#FF0;color:#000}"+"template{display:none}")),y||l(e,o),e}var p=e.html5||{},c=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,u=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",g=0,h={},f,y;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",f="hidden"in e,y=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(t){f=!0,y=!0}})();var b={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==p.shivCSS,supportsUnknownElements:y,shivMethods:!1!==p.shivMethods,type:"default",shivDocument:d,createElement:a,createDocumentFragment:s};e.html5=b,d(t)}(this,t),p._version="2.8.3",p._prefixes=b,p._domPrefixes=x,p._cssomPrefixes=v,p.mq=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var o;return E("@media "+t+" { #"+u+" { position: absolute; } }",function(t){o="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),o},p.hasEvent=j,p.testProp=function(e){return s([e])},p.testAllProps=d,p.testStyles=E,p.prefixed=function(e,t,n){return t?d(e,t,n):d(e,"pfx")},c.className=c.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+C.join(" ")),p)}(this,this.document),define("modernizr",function(e){return function(){var t;return t||e.Modernizr}}(this)),function(e){"function"==typeof define&&define.amd?define("jquery-cookie",["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(e){function n(e){return d.raw?e:encodeURIComponent(e)}function o(e){return d.raw?e:decodeURIComponent(e)}function i(e){return n(d.json?JSON.stringify(e):e+"")}function r(e){0===e.indexOf("\"")&&(e=e.slice(1,-1).replace(/\\"/g,"\"").replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(l," ")),d.json?JSON.parse(e):e}catch(t){}}function a(t,n){var o=d.raw?t:r(t);return e.isFunction(n)?n(o):o}var l=/\+/g,d=e.cookie=function(r,s,p){if(void 0!==s&&!e.isFunction(s)){if(p=e.extend({},d.defaults,p),"number"==typeof p.expires){var c=p.expires,u=p.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[n(r),"=",i(s),p.expires?"; expires="+p.expires.toUTCString():"",p.path?"; path="+p.path:"",p.domain?"; domain="+p.domain:"",p.secure?"; secure":""].join("")}for(var t=r?void 0:{},m=document.cookie?document.cookie.split("; "):[],g=0,h=m.length;g<h;g++){var l=m[g].split("="),f=o(l.shift()),y=l.join("=");if(r&&r===f){t=a(y,s);break}r||(y=a(y))===void 0||(t[f]=y)}return t};d.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),"use strict",define("src/util/browser",["src/util/debug","bowser","lodash","modernizr","src/util/ui","jquery-cookie"],function(e,t,n,o,i){"use strict";function r(){var e="<h1>Incompatible browser</h1>";return e+="<b><%- browserName %> <%- browserVersion %> </b> is incompatible with the visualizer<br/>",e+="Please update your browser to one of the following: <br/>",e+="<ul class=\"browser-list\"><% _.forEach(browsers, function(b) { %><li class=\"<%- b.name.toLowerCase() %>\"><a href=\"<%- b.url %>\"> <%- b.name %> </a> <span style=\"color:orange\"><%- b.message %></span></li><% }); %></ul>",n.template(e)(p)}function a(){var e="<h1>Your browser is missing some important features </h1><br/>";e+="<table><% _.forEach(features, function(f) { %> <tr>  <td style=\"width:20px; background-color: <%- f.color %>;\"></td> <td> <%- f.name %>  </td></tr> <% }); %> </table><br/>",e+="<p>We recommend updating your browser to one of the following:</p>",e+="<ul class=\"browser-list\"><% _.forEach(browsers, function(b) { %><li class=\"<%- b.name.toLowerCase() %>\"><a href=\"<%- b.url %>\"> <%- b.name %> </a> <span style=\"color:orange\"><%- b.message %></span></li><% }); %></ul>";var t={features:n.cloneDeep(s)};return n.template(e)(n.merge(t,p))}var s={canvas:{name:"Canvas",type:"recommended"},webgl:{name:"WebGL",type:"recommended"},localstorage:{name:"LocalStorage",type:"recommended"}};n.keys(s).forEach(function(e){o[e]?(s[e].has=!0,s[e].color="green"):(s[e].has=!1,s[e].color="red")});var l=n.every(n.map(s,function(e){return e.has})),d={chrome:5,msie:11,firefox:5,msedge:0},p={browserName:t.name,browserVersion:t.version,browsers:[{name:"Chrome",url:"https://www.google.com/intl/en/chrome/browser/",message:"(Recommended)"},{name:"Firefox",url:"https://www.mozilla.org/en-US/firefox/new/"}]},c=function(){var o=/bot/i;if(navigator.userAgent.match(o))return"bot";var i=n.keys(d),r=n.map(i,function(e){return t[e]}),a=n.some(r);if(!a)return e.warn("browser not recognized"),!0;var s=i[r.indexOf(!0)];return d[s]<=+t.version}();return{checkCompatibility:function(){return new Promise(function(t){if("bot"===c)return t();if(!c)return e.error("browser is not compatible"),t(r());if($.cookie("visualizer-skip-feature-warning"))return e.info("user does not want to see warning"),t();if(l)return t();var n=$("<div>");n.html(a()),n.append("<input id=\"skip-warning-checkbox\" type=\"checkbox\">Don't show this again</input>"),i.dialog(n,{buttons:{Ok:function(){$(this).dialog("close"),$("#skip-warning-checkbox").is(":checked")&&$.cookie("visualizer-skip-feature-warning",!0,{path:"/"}),t()}},close:function(){t()},width:600})})}}}),"use strict",define("src/util/shortcuts",["jquery","src/util/versioning"],function(e){"use strict";e(document).keydown(function(e){(e.ctrlKey||e.metaKey)&&!e.altKey&&(191==e.which||111===e.which||77===e.which)&&(e.preventDefault(),require(["src/util/searchBox"],function(e){e()}))})}),"use strict",define("src/util/mousetracker",["jquery","lodash"],function(t,e){"use strict";var n={kind:"grid"};return document.addEventListener("mousemove",e.throttle(o=>{var e=o.target.id;if("modules-grid"===e)return void(n={kind:"grid"});var i=t(o.target);if(i.hasClass("ci-module-header")||i.parents(".ci-module-header").length){var r=i.parents(".ci-module-wrapper").attr("data-module-id");return void(n={kind:"module",moduleId:+r})}n={}},200)),{getState:function(){return n}}}),"use strict",define("src/util/copyPasteManager",["src/util/mousetracker","modules/modulefactory","src/util/ui","src/util/versioning","src/main/grid","src/util/debug"],function(t,n,o,e,i,r){"use strict";document.addEventListener("copy",function(i){var r=document.activeElement;if(!(r&&"TEXTAREA"===r.nodeName)){var a=!1,s=t.getState();if("grid"===s.kind)i.clipboardData.setData("text/plain",e.getViewJSON()),o.showNotification("View copied","success"),a=!0;else if("module"===s.kind){var l=n.getModules();if(l=l.filter(function(e){return+e.getId()===s.moduleId}),l.length){let e=JSON.parse(JSON.stringify(l[0].definition));Object.keys(e.layers).forEach(t=>{"Default layer"!==t&&delete e.layers[t]}),i.clipboardData.setData("text/plain",JSON.stringify(e)),o.showNotification("Module copied","success"),a=!0}}a&&i.preventDefault()}}),document.addEventListener("paste",function(n){var o=t.getState();"grid"!==o.kind&&"module"!==o.kind||n.clipboardData.items[0].getAsString(function(t){try{var n=JSON.parse(t);n.version?e.setViewJSON(n):n.url&&i.addModuleFromJSON(n)}catch(e){r.info("Ignored error while pasting")}})})}),"use strict",define("src/header/components/default",["jquery","src/util/util"],function(e,t){"use strict";function n(){}return n.prototype.init=function(e){this.options=e,this._open=!1,this.makeDom(),this.initImpl()},n.prototype.initImpl=t.noop,n.prototype.makeDom=function(){var t=this;this._dom=document.createElement("li"),this.$_dom=e(this._dom),this.$_dom.text(this.options.label||this.options.title||""),this.$_dom.bind("click",function(){t.onClick()})},n.prototype.getDom=function(){return this.$_dom},n.prototype.onClick=function(){this._open=!this._open,this._onClick()},n.prototype._onClick=t.noop,n.prototype.setStyleOpen=function(e){this.$_dom[e?"addClass":"removeClass"]("opened")},n.prototype.open=function(){this.$_elToOpen.addClass("header-button-list ci-visualizer-text"),0===this.$_elToOpen.parents("body").length&&e("body").append(this.$_elToOpen),this.$_elToOpen.show();var t=this.$_elToOpen.outerWidth(!0),n=this.$_dom.outerHeight(!0),o=this.$_dom.position(),i=e("#header").outerWidth(!0),r,a;r=o.left+t>=i?i-t:o.left,a=n+o.top-1,this.$_elToOpen.css({top:a,left:r})},n.prototype.close=function(){this.$_elToOpen&&this.$_elToOpen.hide()},n}),"use strict",define("src/header/components/blankview",["jquery","src/header/components/default","src/util/versioning","src/util/util"],function(e,t,n,o){"use strict";function i(){}return o.inherits(i,t,{_onClick:function(){n.blankView()}}),i}),"use strict",define("src/header/components/copydata",["src/header/components/default","src/util/versioning","src/util/util"],function(e,t,n){"use strict";function o(){}return n.inherits(o,e,{_onClick(){t.copyData()}}),o}),"use strict",define("src/header/components/copyview",["src/header/components/default","src/util/versioning","src/util/util"],function(e,t,n){"use strict";function o(){}return n.inherits(o,e,{_onClick(){t.copyView()}}),o}),function(e){function t(e){var t=e.split("/");return"_design"==t[0]?(t.shift(),"_design/"+encodeURIComponent(t.join("/"))):encodeURIComponent(e)}function n(t,n,o,i){var r;return n=e.extend({successStatus:200},n),i=e.extend({contentType:"application/json",headers:{Accept:"application/json"}},i),o=o||"Unknown error",r=new Date().getTime(),e.ajax(e.extend(e.extend({type:"GET",dataType:"json",cache:a(),beforeSend:function(e){if(i&&i.headers)for(var t in i.headers)e.setRequestHeader(t,i.headers[t])},complete:function(t){var i=new Date().getTime()-r;try{var a=e.parseJSON(t.responseText)}catch(i){if(n.error)n.error(t.status,t,i);else throw o+": "+i;return}if(n.ajaxStart&&n.ajaxStart(a),t.status==n.successStatus)n.beforeSuccess&&n.beforeSuccess(t,a,i),n.success&&n.success(a,i);else if(n.error)n.error(t.status,a&&a.error||o,a&&a.reason||"no response",i);else throw o+": "+a.reason},crossDomain:!0,xhrFields:{withCredentials:!0}},t),i))}function o(e){var e=e||{};if("undefined"!=typeof e.ensure_full_commit){var t=e.ensure_full_commit;return delete e.ensure_full_commit,function(e){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("X-Couch-Full-Commit",t.toString())}}}function i(t){var n=[];if("object"==typeof t&&null!==t)for(var o in t)if(!(0<=e.inArray(o,["error","success","beforeSuccess","ajaxStart"]))){var i=t[o];0<=e.inArray(o,["key","startkey","endkey"])&&(i=r(i)),n.push(encodeURIComponent(o)+"="+encodeURIComponent(i))}return n.length?"?"+n.join("&"):""}function r(e){return null===e?null:JSON.stringify(e)}function a(){if(!navigator)return!0;return!/(MSIE|Trident)/.test(navigator.userAgent)}e.couch=e.couch||{};var s=[];e.extend(e.couch,{urlPrefix:"",activeTasks:function(e){return n({url:this.urlPrefix+"/_active_tasks"},e,"Active task status could not be retrieved")},allDbs:function(e){return n({url:this.urlPrefix+"/_all_dbs"},e,"An error occurred retrieving the list of all databases")},config:function(e,t,o,i){var a={url:this.urlPrefix+"/_config/"};return t&&(a.url+=encodeURIComponent(t)+"/",o&&(a.url+=encodeURIComponent(o))),null===i?a.type="DELETE":void 0!==i&&(a.type="PUT",a.data=r(i),a.contentType="application/json",a.processData=!1),n(a,e,"An error occurred retrieving/updating the server configuration")},session:function(t){return t=t||{},n({type:"GET",url:this.urlPrefix+"/_session",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},complete:function(n){var o=e.parseJSON(n.responseText);if(200==n.status)t.success&&t.success(o);else if(t.error)t.error(n.status,o.error,o.reason);else throw"An error occurred getting session info: "+o.reason}})},userDb:function(t){return e.couch.session({success:function(n){var o=e.couch.db(n.info.authentication_db);t(o)}})},signup:function(t,n,o){o=o||{},t.password=n,t.roles=t.roles||[],t.type="user";return t._id=t._id||"org.couchdb.user:"+t.name,e.couch.userDb(function(e){e.saveDoc(t,o)})},login:function(t){return t=t||{},e.ajax({type:"POST",url:this.urlPrefix+"/_session",dataType:"json",data:{name:t.name,password:t.password},beforeSend:function(e){e.setRequestHeader("Accept","application/json")},complete:function(n){var o=e.parseJSON(n.responseText);if(200==n.status)t.success&&t.success(o);else if(t.error)t.error(n.status,o.error,o.reason);else throw"An error occurred logging in: "+o.reason;t.complete&&t.complete()},crossDomain:!0,xhrFields:{withCredentials:!0}})},logout:function(t){return t=t||{},e.ajax({type:"DELETE",url:this.urlPrefix+"/_session",dataType:"json",username:"_",password:"_",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},complete:function(n){var o=e.parseJSON(n.responseText);if(200==n.status)t.success&&t.success(o);else if(t.error)t.error(n.status,o.error,o.reason);else throw"An error occurred logging out: "+o.reason;t.complete&&t.complete()},crossDomain:!0,xhrFields:{withCredentials:!0}})},db:function(a,s){function l(e){if(e._id&&e._rev&&d[e._id]&&d[e._id].rev==e._rev)if("undefined"==typeof Base64)throw"Base64 support not found.";else return e._attachments=e._attachments||{},e._attachments["rev-"+e._rev.split("-")[0]]={content_type:"application/json",data:Base64.encode(d[e._id].raw)},!0}s=s||{};var d={};return{name:a,uri:this.urlPrefix+"/"+encodeURIComponent(a)+"/",compact:function(t){return e.extend(t,{successStatus:202}),n({type:"POST",url:this.uri+"_compact",data:"",processData:!1},t,"The database could not be compacted")},viewCleanup:function(t){return e.extend(t,{successStatus:202}),n({type:"POST",url:this.uri+"_view_cleanup",data:"",processData:!1},t,"The views could not be cleaned up")},compactView:function(t,o){return e.extend(o,{successStatus:202}),n({type:"POST",url:this.uri+"_compact/"+t,data:"",processData:!1},o,"The view could not be compacted")},create:function(t){return e.extend(t,{successStatus:201}),n({type:"PUT",url:this.uri,contentType:"application/json",data:"",processData:!1},t,"The database could not be created")},drop:function(e){return n({type:"DELETE",url:this.uri},e,"The database could not be deleted")},info:function(e){return n({url:this.uri},e,"Database information could not be retrieved")},changes:function(t,o){function r(t){e.each(p,function(){this(t)})}function a(){var r=e.extend({heartbeat:10*1e3},o,{feed:"longpoll",since:t});c=n({url:l.uri+"_changes"+i(r)},o,"Error connecting to "+l.uri+"/_changes.")}o=o||{};var s=100,l=this,d=!0,p=[],c=null;return o.success=function(e){s=100,d&&(t=e.last_seq,r(e),a())},o.error=function(){d&&(setTimeout(a,s),s*=2)},t?a():l.info({success:function(e){t=e.update_seq,a()}}),{onChange:function(e){p.push(e)},stop:function(){d=!1,c&&c.abort()}}},allDocs:function(e){var t="GET",o=null;if(e.keys){t="POST";var a=e.keys;delete e.keys,o=r({keys:a})}return n({type:t,data:o,url:this.uri+"_all_docs"+i(e)},e,"An error occurred retrieving a list of all documents")},allDesignDocs:function(t){return this.allDocs(e.extend({startkey:"_design",endkey:"_design0"},t))},allApps:function(t){t=t||{};var n=this;if(t.eachApp)return this.allDesignDocs({success:function(o){e.each(o.rows,function(){n.openDoc(this.id,{success:function(e){var n=e._id.split("/"),o,i;n.shift(),n=n.join("/"),o=e.couchapp&&e.couchapp.index,o?i=["",a,e._id,o].join("/"):e._attachments&&e._attachments["index.html"]&&(i=["",a,e._id,"index.html"].join("/")),i&&t.eachApp(n,i,e)}})})}});throw"Please provide an eachApp function for allApps()"},openDoc:function(o,r,a){return r=r||{},s.attachPrevRev||r.attachPrevRev?e.extend(r,{beforeSuccess:function(e,t){d[t._id]={rev:t._rev,raw:e.responseText}}}):e.extend(r,{beforeSuccess:function(e,t){t["jquery.couch.attachPrevRev"]&&(d[t._id]={rev:t._rev,raw:e.responseText})}}),n({url:this.uri+t(o)+i(r)},r,"The document could not be retrieved",a)},saveDoc:function(n,a){a=a||{};var s=this,d=o(a);if(n._id===void 0)var p="POST",c=this.uri;else var p="PUT",c=this.uri+t(n._id);var u=l(n);return e.ajax({type:p,url:c+i(a),contentType:"application/json",dataType:"json",data:r(n),beforeSend:d,complete:function(t){var o=e.parseJSON(t.responseText);if(200==t.status||201==t.status||202==t.status)n._id=o.id,n._rev=o.rev,u?s.openDoc(n._id,{attachPrevRev:!0,success:function(e){n._attachments=e._attachments,a.success&&a.success(o)}}):a.success&&a.success(o);else if(a.error)a.error(t.status,o.error,o.reason);else throw"The document could not be saved: "+o.reason},crossDomain:!0,xhrFields:{withCredentials:!0}})},bulkSave:function(t,a){var s=o(a);return e.extend(a,{successStatus:201,beforeSend:s}),n({type:"POST",url:this.uri+"_bulk_docs"+i(a),contentType:"application/json",data:r(t)},a,"The documents could not be saved")},removeDoc:function(e,o){return n({type:"DELETE",url:this.uri+t(e._id)+i({rev:e._rev})},o,"The document could not be deleted")},bulkRemove:function(t,o){return t.docs=e.each(t.docs,function(e,t){t._deleted=!0}),e.extend(o,{successStatus:201}),n({type:"POST",url:this.uri+"_bulk_docs"+i(o),data:r(t)},o,"The documents could not be deleted")},copyDoc:function(o,i,r){return r=e.extend(r,{beforeSend:function(e){if(!i||!i.docid)throw"Target docid required";var t=i.docid;i.rev&&(t+="?rev="+i.rev),e.setRequestHeader("Destination",t)},complete:function(t){var n=e.parseJSON(t.responseText);if(201==t.status)i.success&&i.success(n);else if(i.error)i.error(t.status,n.error,n.reason);else throw"The document could not be copied: "+n.reason}}),n({type:"COPY",url:this.uri+t(o)},i,"The document could not be copied",r)},query:function(e,t,o,a){o=o||"javascript","string"!=typeof e&&(e=e.toSource?e.toSource():"("+e.toString()+")");var s={language:o,map:e};if(null!=t&&("string"!=typeof t&&(t=t.toSource?t.toSource():"("+t.toString()+")"),s.reduce=t),a.keys){var l=a.keys;delete a.keys,s.keys=l}return n({type:"POST",url:this.uri+"_temp_view"+i(a),contentType:"application/json",data:r(s)},a,"An error occurred querying the database")},list:function(e,t,o,a){var e=e.split("/"),o=o||{},s="GET",l=null;if(o.keys){s="POST";var d=o.keys;delete o.keys,l=r({keys:d})}return n({type:s,data:l,url:this.uri+"_design/"+e[0]+"/_list/"+e[1]+"/"+t+i(o)},a,"An error occurred accessing the list")},view:function(e,t){var e=e.split("/"),t=t||{},o="GET",a=null;if(t.keys){o="POST";var s=t.keys;delete t.keys,a=r({keys:s})}return n({type:o,data:a,url:this.uri+"_design/"+e[0]+"/_view/"+e[1]+i(t)},t,"An error occurred accessing the view")},getDbProperty:function(e,t,o){return n({url:this.uri+e+i(t)},t,"The property could not be retrieved",o)},setDbProperty:function(e,t,o,r){return n({type:"PUT",url:this.uri+e+i(o),data:JSON.stringify(t)},o,"The property could not be updated",r)}}},encodeDocId:t,info:function(e){return n({url:this.urlPrefix+"/"},e,"Server information could not be retrieved")},replicate:function(t,o,i,r){return r=e.extend({source:t,target:o},r),r.continuous&&!r.cancel&&(i.successStatus=202),n({type:"POST",url:this.urlPrefix+"/_replicate",data:JSON.stringify(r),contentType:"application/json"},i,"Replication failed")},newUUID:function(e){return void 0===e&&(e=1),s.length||n({url:this.urlPrefix+"/_uuids",data:{count:e},async:!1},{success:function(e){s=e.uuids}},"Failed to retrieve UUID batch."),s.shift()}})}(jQuery),define("lib/couchdb/jquery.couch",["jquery"],function(){}),"use strict",define("src/util/couchshare",["jquery","lodash","forms/button","./util","./ui","./versioning","lib/couchdb/jquery.couch"],function(e,t,n,o,i,r){"use strict";function a(t){return new Promise(function(n,o){var i=(t.couchUrl||window.location.origin).replace(/\/$/,""),a=t.database||"x",l=`${(t.tinyUrl||`${window.location.origin}/x/_design/x/_show/x`).replace(/\/$/,"")}/`;e.couch.urlPrefix=i;var d=e.couch.db(a),p=r.getView(),c=btoa(unescape(encodeURIComponent(JSON.stringify(p)))),u=btoa(unescape(encodeURIComponent(r.getDataJSON()))),m=s(),g={_id:m,_attachments:{"view.json":{content_type:"application/json",data:c},"data.json":{content_type:"application/json",data:u}},version:p.version,visualizer:window.location.origin+window.location.pathname,couchdb:`${i}/${a}/`};d.saveDoc(g,{success:function(){return n(l+m)},error:function(t){return o(t)}})})}function s(){for(var e="",t=0;20>t;t++)e+=l[Math.floor(62*Math.random())];return e}var l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";return{share:a,couchShare:function(t,r){var s=o.getNextUniqueId(),l=e("<div>").html("<h3>Click the share button to make a snapshot of your view and generate a tiny URL</h3><br>").append(new n("Share",function(){var n=this;t.disabled||a(t).then(function(t){e(`#${s}`).val(t).focus().select(),n.disable()},function(){e(`#${s}`).val("error")})},{color:"blue"}).render()).append(e(`<input type="text" id="${s}" />`).css("width","400px"));i.dialog(l,r)},feedback:function(e,n){e=e||{},n=n||{},n=t.defaults(n,{couchUrl:"http://visualizer.epfl.ch",database:"x",tinyUrl:"http://visualizer.epfl.ch/tiny"}),e.disabled||a(n).then(function(e){var t=`\n\nTestcase: ${e} ([Original URL](${document.location.href}))`,n=`https://github.com/NPellet/visualizer/issues/new?body=${encodeURIComponent(t)}`,o=window.open(n,"_blank");o.focus()}).catch(()=>{i.showNotification("Error with Feedback, maybe pop-up was blocked","error")})}}}),"use strict",define("src/header/components/couchshare",["src/util/couchshare","src/header/components/default","src/util/util"],function(e,t,n){"use strict";function o(){}return n.inherits(o,t,{initImpl:function(){this.dialogOptions={title:"Share view",width:550,height:170}},_onClick:function(){e.couchShare(this.options,this.dialogOptions)}}),o}),"use strict",define("src/header/components/feedback",["src/header/components/default","./../../util/couchshare","src/util/util"],function(e,t,n){"use strict";function o(){}const i={couchUrl:"https://visualizer.epfl.ch",database:"x",tinyUrl:"https://visualizer.epfl.ch/tiny"};return n.inherits(o,e,{_onClick(){t.feedback(this.options,i)}}),o}),"use strict",define("src/header/components/pastedata",["src/header/components/default","src/util/versioning","src/util/util"],function(e,t,n){"use strict";function o(){}return n.inherits(o,e,{_onClick(){t.pasteData()}}),o}),"use strict",define("src/header/components/pasteview",["src/header/components/default","src/util/versioning","src/util/util"],function(e,t,n){"use strict";function o(){}return n.inherits(o,e,{_onClick(){t.pasteView()}}),o}),function(e){"function"==typeof define&&define.amd?define("select2",["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,o;(function(t){function r(e,t){return y.call(e,t)}function a(e,t){var n=t&&t.split("/"),o=h.map,r=o&&o["*"]||{},a,s,l,d,p,c,u,m,g,f,y;if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),p=e.length-1,h.nodeIdCompat&&_.test(e[p])&&(e[p]=e[p].replace(_,"")),e=n.slice(0,n.length-1).concat(e),g=0;g<e.length;g+=1)if(y=e[g],"."===y)e.splice(g,1),g-=1;else if(".."===y)if(1===g&&(".."===e[2]||".."===e[0]))break;else 0<g&&(e.splice(g-1,2),g-=2);e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((n||r)&&o){for(a=e.split("/"),g=a.length;0<g;g-=1){if(s=a.slice(0,g).join("/"),n)for(f=n.length;0<f;f-=1)if(l=o[n.slice(0,f).join("/")],l&&(l=l[s],l)){d=l,c=g;break}if(d)break;!u&&r&&r[s]&&(u=r[s],m=g)}!d&&u&&(d=u,c=m),d&&(a.splice(0,c,d),e=a.join("/"))}return e}function s(e,n){return function(){var o=b.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),x.apply(t,o.concat([e,n]))}}function l(e){return function(t){return a(t,e)}}function d(e){return function(t){m[e]=t}}function p(e){if(r(g,e)){var n=g[e];delete g[e],f[e]=!0,v.apply(t,n)}if(!r(m,e)&&!r(f,e))throw new Error("No "+e);return m[e]}function c(e){var t=e?e.indexOf("!"):-1,n;return-1<t&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function u(e){return function(){return h&&h.config&&h.config[e]||{}}}var m={},g={},h={},f={},y=Object.prototype.hasOwnProperty,b=[].slice,_=/\.js$/,v,x,w,k;w=function(e,t){var n=c(e),o=n[0],i;return e=n[1],o&&(o=a(o,t),i=p(o)),o?i&&i.normalize?e=i.normalize(e,l(t)):e=a(e,t):(e=a(e,t),n=c(e),o=n[0],e=n[1],o&&(i=p(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:i}},k={require:function(e){return s(e)},exports:function(t){var n=m[t];return"undefined"==typeof n?m[t]={}:n},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},v=function(e,n,o,a){var l=[],c=typeof o,u,h,y,b,_,v;if(a=a||e,"undefined"==c||"function"==c){for(n=!n.length&&o.length?["require","exports","module"]:n,_=0;_<n.length;_+=1)if(b=w(n[_],a),h=b.f,"require"===h)l[_]=k.require(e);else if("exports"===h)l[_]=k.exports(e),v=!0;else if("module"===h)u=l[_]=k.module(e);else if(r(m,h)||r(g,h)||r(f,h))l[_]=p(h);else if(b.p)b.p.load(b.n,s(a,!0),d(h),{}),l[_]=m[h];else throw new Error(e+" missing "+h);y=o?o.apply(m[e],l):void 0,e&&(u&&u.exports!==t&&u.exports!==m[e]?m[e]=u.exports:(y!==t||!v)&&(m[e]=y))}else e&&(m[e]=o)},e=n=x=function(e,n,o,i,r){if("string"==typeof e)return k[e]?k[e](n):p(w(e,n).f);if(!e.splice){if(h=e,h.deps&&x(h.deps,h.callback),!n)return;n.splice?(e=n,n=o,o=null):e=t}return n=n||function(){},"function"==typeof o&&(o=i,i=r),i?v(t,e,n,o):setTimeout(function(){v(t,e,n,o)},4),x},x.config=function(e){return x(e)},e._defined=m,o=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(m,e)||r(g,e)||(g[e]=[e,t,n])},o.amd={jQuery:!0}})(),t.requirejs=e,t.require=n,t.define=o}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var o in t){var i=t[o];"function"==typeof i&&"constructor"!=o&&n.push(o)}return n}var n={Extend:function(e,t){function n(){this.constructor=e}var o={}.hasOwnProperty;for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},Decorate:function(e,n){function o(){var t=Array.prototype.unshift,o=n.prototype.constructor.length,i=e.prototype.constructor;0<o&&(t.call(arguments,e.prototype.constructor),i=n.prototype.constructor),i.apply(this,arguments)}var i=t(n),r=t(e);n.displayName=e.displayName,o.prototype=new function(){this.constructor=o};for(var a=0,s;a<r.length;a++)s=r[a],o.prototype[s]=e.prototype[s];for(var l=function(e){var t=function(){};(e in o.prototype)&&(t=o.prototype[e]);var i=n.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),i.apply(this,arguments)}},p=0,c;p<i.length;p++)c=i[p],o.prototype[c]=l(c);return o}},o=function(){this.listeners={}};return o.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},o.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},o.prototype.invoke=function(e,t){for(var n=0,o=e.length;n<o;n++)e[n].apply(this,t)},n.Observable=o,n.generateChars=function(e){for(var t="",n=0,o;n<e;n++)o=Math.floor(36*Math.random()),t+=o.toString(36);return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),o=e;if(1!==n.length){for(var i=0,r;i<n.length;i++)r=n[i],r=r.substring(0,1).toLowerCase()+r.substring(1),r in o||(o[r]={}),i==n.length-1&&(o[r]=e[t]),o=o[r];delete e[t]}}return e},n.hasScroll=function(t,n){var o=e(n),i=n.style.overflowX,r=n.style.overflowY;return(i!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===i||"scroll"===r||o.innerHeight()<n.scrollHeight||o.innerWidth()<n.scrollWidth)},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"==typeof e?(e+"").replace(/[&<>"'\/\\]/g,function(e){return t[e]}):e},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var o=e();e.map(n,function(e){o=o.add(e)}),n=o}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,o){this.$element=e,this.data=o,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e("<ul class=\"select2-results__options\" role=\"tree\"></ul>");return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var o=e("<li role=\"treeitem\" aria-live=\"assertive\""+" class=\"select2-results__option\"></li>"),i=this.options.get("translations").get(t.message);o.append(n(i(t.args))),o[0].className+=" select2-results__message",this.$results.append(o)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var o=e.results[n],i=this.option(o);t.push(i)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var o=e.map(n,function(e){return e.id.toString()}),i=t.$results.find(".select2-results__option[aria-selected]");i.each(function(){var t=e(this),n=e.data(this,"data"),i=""+n.id;null!=n.element&&n.element.selected||null==n.element&&-1<e.inArray(i,o)?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},o=this.option(n);o.className+=" loading-results",this.$results.prepend(o)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var o={role:"treeitem","aria-selected":"false"};for(var i in t.disabled&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==t.id&&delete o["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(o.role="group",o["aria-label"]=t.text,delete o["aria-selected"]),o){var r=o[i];n.setAttribute(i,r)}if(t.children){var a=e(n),s=document.createElement("strong");s.className="select2-results__group";e(s);this.template(t,s);for(var l=[],d=0;d<t.children.length;d++){var p=t.children[d],u=this.option(p);l.push(u)}var m=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});m.append(l),a.append(s),a.append(m)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t){var n=this,o=t.id+"-results";this.$results.attr("id",o),t.on("results:all",function(e){n.clear(),n.append(e.data),t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("results:append",function(e){n.append(e.data),t.isOpen()&&n.setClasses()}),t.on("query",function(e){n.hideMessages(),n.showLoading(e)}),t.on("select",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible()}),t.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=n.getHighlightedResults();0===e.length||e.trigger("mouseup")}),t.on("results:select",function(){var e=n.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?n.trigger("close",{}):n.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),o=t.index(e);if(0!==o){var i=o-1;0===e.length&&(i=0);var r=t.eq(i);r.trigger("mouseenter");var a=n.$results.offset().top,s=r.offset().top,l=n.$results.scrollTop()+(s-a);0==i?n.$results.scrollTop(0):0>s-a&&n.$results.scrollTop(l)}}),t.on("results:next",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),o=t.index(e),i=o+1;if(!(i>=t.length)){var r=t.eq(i);r.trigger("mouseenter");var a=n.$results.offset().top+n.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),l=n.$results.scrollTop()+s-a;0===i?n.$results.scrollTop(0):s>a&&n.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){n.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=n.$results.scrollTop(),o=n.$results.get(0).scrollHeight-e+t.deltaY,i=0<t.deltaY&&0>=e-t.deltaY,r=0>t.deltaY&&o<=n.$results.height();i?(n.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var o=e(this),i=o.data("data");return"true"===o.attr("aria-selected")?void(n.options.get("multiple")?n.trigger("unselect",{originalEvent:t,data:i}):n.trigger("close",{})):void n.trigger("select",{originalEvent:t,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=e(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:t,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),o=this.$results.offset().top,i=e.offset().top,r=this.$results.scrollTop()+(i-o),a=i-o;r-=2*e.outerHeight(!1),2>=n?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,n){var o=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),r=o(t,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=i(r):e(n).append(r)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return e.Extend(o,e.Observable),o.prototype.render=function(){var e=t("<span class=\"select2-selection\" role=\"combobox\" "+" aria-haspopup=\"true\" aria-expanded=\"false\">"+"</span>");return this._tabindex=0,null==this.$element.data("old-tabindex")?null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")):this._tabindex=this.$element.data("old-tabindex"),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},o.prototype.bind=function(e){var t=this,o=e.id+"-container",i=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){t.trigger("focus",e)}),this.$selection.on("blur",function(e){t._handleBlur(e)}),this.$selection.on("keydown",function(e){t.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){t.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){t.update(e.data)}),e.on("open",function(){t.$selection.attr("aria-expanded","true"),t.$selection.attr("aria-owns",i),t._attachCloseHandler(e)}),e.on("close",function(){t.$selection.attr("aria-expanded","false"),t.$selection.removeAttr("aria-activedescendant"),t.$selection.removeAttr("aria-owns"),t.$selection.focus(),t._detachCloseHandler(e)}),e.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)}),e.on("disable",function(){t.$selection.attr("tabindex","-1")})},o.prototype._handleBlur=function(e){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)},1)},o.prototype._attachCloseHandler=function(e){this;t(document.body).on("mousedown.select2."+e.id,function(n){var e=t(n.target),o=e.closest(".select2"),i=t(".select2.select2-container--open");i.each(function(){var e=t(this);if(this!=o[0]){var n=e.data("element");n.select2("close")}})})},o.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},o}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html("<span class=\"select2-selection__rendered\"></span>"+"<span class=\"select2-selection__arrow\" role=\"presentation\">"+"<b role=\"presentation\"></b>"+"</span>"),e},o.prototype.bind=function(e){var t=this;o.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(e){1!==e.which||t.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),e.on("focus",function(){e.isOpen()||t.$selection.focus()}),e.on("selection:update",function(e){t.update(e.data)})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(e,t){var n=this.options.get("templateSelection"),o=this.options.get("escapeMarkup");return o(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),o=this.display(t,n);n.empty().append(o),n.prop("title",t.title||t.text)},o}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html("<ul class=\"select2-selection__rendered\"></ul>"),e},o.prototype.bind=function(){var t=this;o.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){t.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(n){if(!t.options.get("disabled")){var o=e(this),i=o.parent(),r=i.data("data");t.trigger("unselect",{originalEvent:n,data:r})}})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(e,t){var n=this.options.get("templateSelection"),o=this.options.get("escapeMarkup");return o(n(e,t))},o.prototype.selectionContainer=function(){var t=e("<li class=\"select2-selection__choice\">"+"<span class=\"select2-selection__choice__remove\" role=\"presentation\">"+"&times;"+"</span>"+"</li>");return t},o.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],o=0;o<e.length;o++){var i=e[o],r=this.selectionContainer(),a=this.display(i,r);r.append(a),r.prop("title",i.title||i.text),r.data("data",i),t.push(r)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,t)}},o}),t.define("select2/selection/placeholder",["../utils"],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id,o=1<t.length;if(o||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){o._handleClear(e)}),t.on("keypress",function(e){o._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var o=n.data("data"),i=0,r;i<o.length;i++)if(r={data:o[i]},this.trigger("unselect",r),r.prevented)return;this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,o){o.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(0<this.$selection.find(".select2-selection__placeholder").length||0===n.length)){var o=e("<span class=\"select2-selection__clear\">"+"&times;"+"</span>");o.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(o)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function o(e,t,n){e.call(this,t,n)}return o.prototype.render=function(t){var n=e("<li class=\"select2-search select2-search--inline\">"+"<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\""+" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\""+" spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />"+"</li>");this.$searchContainer=n,this.$search=n.find("input");var o=t.call(this);return this._transferTabIndex(),o},o.prototype.bind=function(e,t,o){var i=this;e.call(this,t,o),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&""===i.$search.val()){var o=i.$searchContainer.prev(".select2-selection__choice");if(0<o.length){var r=o.data("data");i.searchRemoveChoice(r),e.preventDefault()}}});var r=document.documentMode,a=r&&11>=r;this.$selection.on("input.searchcheck",".select2-search--inline",function(){return a?void i.$selection.off("input.search input.searchcheck"):void i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void i.$selection.off("input.search input.searchcheck");var t=e.which;t==n.SHIFT||t==n.CTRL||t==n.ALT||t==n.TAB||i.handleSearch(e)})},o.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},o.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},o.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},o.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},o.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},o.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},o}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,o){var i=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,n,o),n.on("*",function(t,n){if(-1!==e.inArray(t,r)){n=n||{};var o=e.Event("select2:"+t,{params:n});i.$element.trigger(o),-1===e.inArray(t,a)||(n.prevented=o.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var o=t(e);n._cache[e]=o}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY","":"B",:"B",:"B",:"B",:"B",:"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F",:"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J",:"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M",:"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OI",:"OO",:"OU","":"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P","":"Q",:"Q",:"Q",:"Q",:"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"V",:"V",:"V",:"V",:"V",:"V",:"V",:"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"f",:"f",:"f",:"f",:"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j",:"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oi",:"ou",:"oo","":"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p","":"q",:"q",:"q",:"q",:"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"\u0391",:"\u0395",:"\u0397",:"\u0399",:"\u0399",:"\u039F",:"\u03A5",:"\u03A5",:"\u03A9",:"\u03B1",:"\u03B5",:"\u03B7",:"\u03B9",:"\u03B9",:"\u03B9",:"\u03BF",:"\u03C5",:"\u03C5",:"\u03C5",:"\u03C9",:"\u03C3"}}),t.define("select2/data/base",["../utils"],function(e){function t(){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var o=t.id+"-result-";return o+=e.generateChars(4),o+=null==n.id?"-"+e.generateChars(4):"-"+n.id.toString(),o},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return t.Extend(o,e),o.prototype.current=function(e){var t=[],o=this;this.$element.find(":selected").each(function(){var e=n(this),i=o.item(e);t.push(i)}),e(t)},o.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(o){var i=[];e=[e],e.push.apply(e,o);for(var r=0,a;r<e.length;r++)a=e[r].id,-1===n.inArray(a,i)&&i.push(a);t.$element.val(i),t.$element.trigger("change")});else{var o=e.id;this.$element.val(o),this.$element.trigger("change")}},o.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(o){for(var i=[],r=0,a;r<o.length;r++)a=o[r].id,a!==e.id&&-1===n.inArray(a,i)&&i.push(a);t.$element.val(i),t.$element.trigger("change")})},o.prototype.bind=function(e){var t=this;this.container=e,e.on("select",function(e){t.select(e.data)}),e.on("unselect",function(e){t.unselect(e.data)})},o.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},o.prototype.query=function(e,t){var o=[],i=this,r=this.$element.children();r.each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var r=i.item(t),a=i.matches(e,r);null!==a&&o.push(a)}}),t({results:o})},o.prototype.addOptions=function(e){t.appendMany(this.$element,e)},o.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0===t.textContent?t.innerText=e.text:t.textContent=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var o=n(t),i=this._normalizeItem(e);return i.element=t,n.data(t,"data",i),o},o.prototype.item=function(e){var t={};if(t=n.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var o=e.children("option"),i=[],r=0;r<o.length;r++){var a=n(o[r]),s=this.item(a);i.push(s)}t.children=i}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},o.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},o.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},o}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function o(e,t){var n=t.get("data")||[];o.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(o,e),o.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),o.__super__.select.call(this,e)},o.prototype.convertToOptions=function(e){function o(e){return function(){return n(this).val()==e.id}}for(var i=this,r=this.$element.find("option"),a=r.map(function(){return i.item(n(this)).id}).get(),s=[],l=0,p;l<e.length;l++){if(p=this._normalizeItem(e[l]),0<=n.inArray(p.id,a)){var c=r.filter(o(p)),u=this.item(c),m=n.extend(!0,{},p,u),g=this.option(m);c.replaceWith(g);continue}var h=this.option(p);if(p.children){var f=this.convertToOptions(p.children);t.appendMany(h,f)}s.push(h)}return s},o}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function o(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),o.__super__.constructor.call(this,e,t)}return t.Extend(o,e),o.prototype._applyDefaults=function(e){return n.extend({},{data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,o){var i=n.ajax(e);return i.then(t),i.fail(o),i}},e,!0)},o.prototype.processResults=function(e){return e},o.prototype.query=function(e,t){function o(){var o=r.transport(r,function(o){var r=i.processResults(o,e);i.options.get("debug")&&window.console&&console.error&&(!r||!r.results||!n.isArray(r.results))&&console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response."),t(r)},function(){o.status&&"0"===o.status||i.trigger("results:message",{message:"errorLoading"})});i._request=o}var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,e)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)):o()},o}),t.define("select2/data/tags",["jquery"],function(e){function t(n,o,i){var r=i.get("tags"),a=i.get("createTag");void 0!==a&&(this.createTag=a);var s=i.get("insertTag");if(void 0!==s&&(this.insertTag=s),n.call(this,o,i),e.isArray(r))for(var l=0;l<r.length;l++){var d=r[l],p=this._normalizeItem(d),c=this.option(p);this.$element.append(c)}}return t.prototype.query=function(e,t,n){function o(e,a){for(var s=e.results,l=0;l<s.length;l++){var d=s[l],p=null!=d.children&&!o({results:d.children},!0),c=d.text===t.term;if(c||p)return!a&&(e.data=s,void n(e))}if(a)return!0;var u=r.createTag(t);if(null!=u){var m=r.option(u);m.attr("data-select2-tag",!0),r.addOptions([m]),r.insertTag(s,u)}e.results=s,n(e)}var r=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,o)},t.prototype.createTag=function(t,n){var o=e.trim(n.term);return""===o?null:{id:o,text:o}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(){var t=this._lastTag,n=this.$element.find("option[data-select2-tag]");n.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var o=n.get("tokenizer");void 0!==o&&(this.tokenizer=o),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,o){function i(e){r.trigger("select",{data:e})}var r=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,function(t){var n=r._normalizeItem(t),o=r.$element.find("option").filter(function(){return e(this).val()===n.id});if(!o.length){var a=r.option(n);a.attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([a])}i(n)});a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),n.term=a.term),t.call(this,n,o)},t.prototype.tokenizer=function(t,n,o,r){for(var a=o.get("tokenSeparators")||[],s=n.term,l=0,d=this.createTag||function(e){return{id:e.term,text:e.term}},p;l<s.length;){if(p=s[l],-1===e.inArray(p,a)){l++;continue}var c=s.substr(0,l),u=e.extend({},n,{term:c}),m=d(u);if(null==m){l++;continue}r(m),s=s.substr(l+1)||"",l=0}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var o=this;this.current(function(i){var r=null==i?0:i.length;return 0<o.maximumSelectionLength&&r>=o.maximumSelectionLength?void o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):void e.call(o,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e("<span class=\"select2-dropdown\">"+"<span class=\"select2-results\"></span>"+"</span>");return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),o=e("<span class=\"select2-search select2-search--dropdown\">"+"<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\""+" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\""+" spellcheck=\"false\" role=\"textbox\" />"+"</span>");return this.$searchContainer=o,this.$search=o.find("input"),n.prepend(o),n},t.prototype.bind=function(t,n,o){var i=this;t.call(this,n,o),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(){e(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),n.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),n.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val("")}),n.on("focus",function(){n.isOpen()&&i.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=i.showSearch(e);t?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,o){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,o)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),o=t.length-1,i;0<=o;o--)i=t[o],this.placeholder.id===i.id&&n.splice(o,1);return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,o){this.lastParams={},e.call(this,t,n,o),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,o){var i=this;t.call(this,n,o),n.on("query",function(e){i.lastParams=e,i.loading=!0}),n.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,i.$loadingMore[0]);if(!i.loading&&t){var n=i.$results.offset().top+i.$results.outerHeight(!1),o=i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1);n+50>=o&&i.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e("<li "+"class=\"select2-results__option select2-results__option--load-more\""+"role=\"treeitem\" aria-disabled=\"true\"></li>"),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,o){this.$dropdownParent=o.get("dropdownParent")||e(document.body),t.call(this,n,o)}return n.prototype.bind=function(e,t,n){var o=this,i=!1;e.call(this,t,n),t.on("open",function(){o._showDropdown(),o._attachPositioningHandler(t),i||(i=!0,t.on("results:all",function(){o._positionDropdown(),o._resizeDropdown()}),t.on("results:append",function(){o._positionDropdown(),o._resizeDropdown()}))}),t.on("close",function(){o._hideDropdown(),o._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),o=t.call(this);return n.append(o),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,o){var i=this,r="scroll.select2."+o.id,a="resize.select2."+o.id,s="orientationchange.select2."+o.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(r,function(){var t=e(this).data("select2-scroll-position");e(this).scrollTop(t.y)}),e(window).on(r+" "+a+" "+s,function(){i._positionDropdown(),i._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,o){var i="scroll.select2."+o.id,r="resize.select2."+o.id,a="orientationchange.select2."+o.id,s=this.$container.parents().filter(t.hasScroll);s.off(i),e(window).off(i+" "+r+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),o=this.$dropdown.hasClass("select2-dropdown--below"),i=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},d=l.top<r.top-s.height,p=l.bottom>r.bottom+s.height,c={left:r.left,top:a.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var m=u.offset();c.top-=m.top,c.left-=m.left,n||o||(i="below"),p||!d||n?!d&&p&&n&&(i="below"):i="above",("above"==i||n&&"below"!==i)&&(c.top=a.top-m.top-s.height),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(c)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,o=0,i;o<t.length;o++)i=t[o],i.children?n+=e(i.children):n++;return n}function t(e,t,n,o){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),0>this.minimumResultsForSearch&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,o)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("close",function(e){o._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var o=this.getHighlightedResults();if(!(1>o.length)){var i=o.data("data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("select",function(e){o._selectTriggered(e)}),t.on("unselect",function(e){o._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length;return"Please enter "+t+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,o,i,r,a,s,l,d,p,c,u,m,g,h,f,y,b,_,v,x,w,k,T,C,S,E,j){function D(){this.reset()}D.prototype.apply=function(c){if(c=e.extend(!0,{},this.defaults,c),null==c.dataAdapter){if(c.dataAdapter=null==c.ajax?null==c.data?u:m:g,0<c.minimumInputLength&&(c.dataAdapter=d.Decorate(c.dataAdapter,y)),0<c.maximumInputLength&&(c.dataAdapter=d.Decorate(c.dataAdapter,b)),0<c.maximumSelectionLength&&(c.dataAdapter=d.Decorate(c.dataAdapter,_)),c.tags&&(c.dataAdapter=d.Decorate(c.dataAdapter,h)),(null!=c.tokenSeparators||null!=c.tokenizer)&&(c.dataAdapter=d.Decorate(c.dataAdapter,f)),null!=c.query){var j=t(c.amdBase+"compat/query");c.dataAdapter=d.Decorate(c.dataAdapter,j)}if(null!=c.initSelection){var D=t(c.amdBase+"compat/initSelection");c.dataAdapter=d.Decorate(c.dataAdapter,D)}}if(null==c.resultsAdapter&&(c.resultsAdapter=n,null!=c.ajax&&(c.resultsAdapter=d.Decorate(c.resultsAdapter,k)),null!=c.placeholder&&(c.resultsAdapter=d.Decorate(c.resultsAdapter,w)),c.selectOnClose&&(c.resultsAdapter=d.Decorate(c.resultsAdapter,S))),null==c.dropdownAdapter){if(c.multiple)c.dropdownAdapter=v;else{var A=d.Decorate(v,x);c.dropdownAdapter=A}if(0!==c.minimumResultsForSearch&&(c.dropdownAdapter=d.Decorate(c.dropdownAdapter,C)),c.closeOnSelect&&(c.dropdownAdapter=d.Decorate(c.dropdownAdapter,E)),null!=c.dropdownCssClass||null!=c.dropdownCss||null!=c.adaptDropdownCssClass){var P=t(c.amdBase+"compat/dropdownCss");c.dropdownAdapter=d.Decorate(c.dropdownAdapter,P)}c.dropdownAdapter=d.Decorate(c.dropdownAdapter,T)}if(null==c.selectionAdapter){if(c.selectionAdapter=c.multiple?i:o,null!=c.placeholder&&(c.selectionAdapter=d.Decorate(c.selectionAdapter,r)),c.allowClear&&(c.selectionAdapter=d.Decorate(c.selectionAdapter,a)),c.multiple&&(c.selectionAdapter=d.Decorate(c.selectionAdapter,s)),null!=c.containerCssClass||null!=c.containerCss||null!=c.adaptContainerCssClass){var O=t(c.amdBase+"compat/containerCss");c.selectionAdapter=d.Decorate(c.selectionAdapter,O)}c.selectionAdapter=d.Decorate(c.selectionAdapter,l)}if("string"==typeof c.language)if(0<c.language.indexOf("-")){var R=c.language.split("-"),L=R[0];c.language=[c.language,L]}else c.language=[c.language];if(e.isArray(c.language)){var N=new p;c.language.push("en");for(var I=c.language,F=0;F<I.length;F++){var M=I[F],z={};try{z=p.loadPath(M)}catch(t){try{M=this.defaults.amdLanguageBase+M,z=p.loadPath(M)}catch(e){c.debug&&window.console&&console.warn&&console.warn("Select2: The language file for \""+M+"\" could not be "+"automatically loaded. A fallback will be used instead.");continue}}N.extend(z)}c.translations=N}else{var H=p.loadPath(this.defaults.amdLanguageBase+"en"),q=new p(c.language);q.extend(H),c.translations=q}return c},D.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return c[e]||e})}function n(o,i){if(""===e.trim(o.term))return i;if(i.children&&0<i.children.length){for(var r=e.extend(!0,{},i),a=i.children.length-1;0<=a;a--){var s=i.children[a],l=n(o,s);null==l&&r.children.splice(a,1)}return 0<r.children.length?r:n(o,r)}var d=t(i.text).toUpperCase(),p=t(o.term).toUpperCase();return-1<d.indexOf(p)?i:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:d.escapeMarkup,language:j,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},D.prototype.set=function(t,n){var o=e.camelCase(t),i={};i[o]=n;var r=d._convertData(i);e.extend(this.defaults,r)};var A=new D;return A}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,o){function i(t,i){if(this.options=t,null!=i&&this.fromElement(i),this.options=n.apply(this.options),i&&i.is("input")){var r=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=o.Decorate(this.options.dataAdapter,r)}}return i.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-select2-tags` attribute has been changed to "+"use the `data-data` and `data-tags=\"true\"` attributes and will be "+"removed in future versions of Select2."),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i={};i=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var r=t.extend(!0,{},i);for(var a in r=o._convertData(r),r)-1<t.inArray(a,n)||(t.isPlainObject(this.options[a])?t.extend(this.options[a],r[a]):this.options[a]=r[a]);return this},i.prototype.get=function(e){return this.options[e]},i.prototype.set=function(e,t){this.options[e]=t},i}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,o){var i=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),i.__super__.constructor.call(this);var o=e.attr("tabindex")||0;e.data("old-tabindex",o),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var d=this.options.get("resultsAdapter");this.results=new d(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var p=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){p.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(i,n.Observable),i.prototype._generateId=function(e){var t="";return t=null==e.attr("id")?null==e.attr("name")?n.generateChars(4):e.attr("name")+"-"+n.generateChars(2):e.attr("id"),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t,t},i.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},i.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var o=this._resolveWidth(e,"style");return null==o?this._resolveWidth(e,"element"):o}if("element"==t){var r=e.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==t){var a=e.attr("style");if("string"!=typeof a)return null;for(var s=a.split(";"),d=0,p=s.length;d<p;++d){var l=s[d].replace(/\s/g,""),c=l.match(n);if(null!==c&&1<=c.length)return c[1]}return null}return t},i.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},i.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null==o?this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1)):(this._observer=new o(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1}))},i.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(o,i){-1!==e.inArray(o,n)||t.trigger(o,i)})},i.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===o.ESC||n===o.TAB||n===o.UP&&t.altKey?(e.close(),t.preventDefault()):n===o.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===o.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===o.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===o.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===o.ENTER||n===o.SPACE||n===o.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},i.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},i.prototype._syncSubtree=function(e,t){var o=!1,i=this;if(!(e&&e.target&&"OPTION"!==e.target.nodeName&&"OPTGROUP"!==e.target.nodeName)){if(!t)o=!0;else if(t.addedNodes&&0<t.addedNodes.length)for(var r=0,a;r<t.addedNodes.length;r++)a=t.addedNodes[r],a.selected&&(o=!0);else t.removedNodes&&0<t.removedNodes.length&&(o=!0);o&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},i.prototype.trigger=function(e,t){var n=i.__super__.trigger,o={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in o){var r=o[e],a={prevented:!1,name:e,args:t};if(n.call(this,r,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},i.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},i.prototype.open=function(){this.isOpen()||this.trigger("query",{})},i.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},i.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},i.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},i.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},i.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `select2(\"enable\")` method has been deprecated and will"+" be removed in later Select2 versions. Use $element.prop(\"disabled\")"+" instead."),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},i.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn("Select2: Data can no longer be set using `select2(\"data\")`. You "+"should consider setting the value instead using `$element.val()`.");var e=[];return this.dataAdapter.current(function(t){e=t}),e},i.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `select2(\"val\")` method has been deprecated and will be"+" removed in later Select2 versions. Use $element.val() instead."),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},i.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null==this._observer?this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)):(this._observer.disconnect(),this._observer=null),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},i.prototype.render=function(){var t=e("<span class=\"select2 select2-container\">"+"<span class=\"selection\"></span>"+"<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>"+"</span>");return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},i}),t.define("select2/compat/utils",["jquery"],function(e){return{syncCssClasses:function(t,n,o){var i=[],r,a;r=e.trim(t.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&i.push(this)})),r=e.trim(n.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(a=o(this),null!=a&&i.push(a))})),t.attr("class",i.join(" "))}}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(){return null}function o(){}return o.prototype.render=function(o){var i=o.call(this),r=this.options.get("containerCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(e){var t=s(e);return null==t?e:t+" "+e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(i,this.$element,a),i.css(l),i.addClass(r),i},o}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(){return null}function o(){}return o.prototype.render=function(o){var i=o.call(this),r=this.options.get("dropdownCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(e){var t=s(e);return null==t?e:t+" "+e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(i,this.$element,a),i.css(l),i.addClass(r),i},o}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor"+" of a custom data adapter that overrides the `current` method. "+"This method is now called multiple times instead of a single "+"time when the instance is initialized. Support will be removed "+"for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var o=this;return this._isInitialized?void t.call(this,n):void this.initSelection.call(null,this.$element,function(t){o._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer "+"supported and may stop working in the future. It is recommended "+"to use a `<select>` element instead."),e.call(this,t,n)}return t.prototype.current=function(t,n){function o(t,n){var i=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,i.push(t)):t.selected=!1,t.children&&i.push.apply(i,o(t.children,n)),i}for(var i=[],r=0,a;r<this._currentData.length;r++)a=this._currentData[r],i.push.apply(i,o(a,this.$element.val().split(this._valueSeparator)));n(i)},t.prototype.select=function(t,n){if(!this.options.get("multiple"))this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change");else{var o=this.$element.val();o+=this._valueSeparator+n.id,this.$element.val(o),this.$element.trigger("change")}},t.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var o=[],i=0,r;i<e.length;i++)(r=e[i],t.id!=r.id)&&o.push(r.id);n.$element.val(o.join(n._valueSeparator)),n.$element.trigger("change")})},t.prototype.query=function(e,t,n){for(var o=[],i=0;i<this._currentData.length;i++){var r=this._currentData[i],a=this.matches(t,r);null!==a&&o.push(a)}n({results:o})},t.prototype.addOptions=function(t,n){var o=e.map(n,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,o)},t}),t.define("select2/compat/matcher",["jquery"],function(e){return function(t){return function(n,o){var i=e.extend(!0,{},o);if(null==n.term||""===e.trim(n.term))return i;if(o.children){for(var r=o.children.length-1;0<=r;r--){var a=o.children[r],s=t(n.term,a.text,a);s||i.children.splice(r,1)}if(0<i.children.length)return i}return t(n.term,o.text,o)?i:null}}}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a "+"custom data adapter that overrides the `query` method. Support "+"will be removed for the `query` option in future versions of "+"Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n;var o=this.options.get("query");o.call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){var o=n.find(".dropdown-wrapper");o.append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),function(n){"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(e)}(function(e){function t(t){var i=t||window.event,r=s.call(arguments,1),a=0,p=0,u=0,m=0,g=0,h=0;if(t=e.event.fix(i),t.type="mousewheel","detail"in i&&(u=-1*i.detail),"wheelDelta"in i&&(u=i.wheelDelta),"wheelDeltaY"in i&&(u=i.wheelDeltaY),"wheelDeltaX"in i&&(p=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(p=-1*u,u=0),a=0===u?p:u,"deltaY"in i&&(u=-1*i.deltaY,a=u),"deltaX"in i&&(p=i.deltaX,0===u&&(a=-1*p)),0!==u||0!==p){if(1===i.deltaMode){var f=e.data(this,"mousewheel-line-height");a*=f,u*=f,p*=f}else if(2===i.deltaMode){var y=e.data(this,"mousewheel-page-height");a*=y,u*=y,p*=y}if(m=Math.max(Math.abs(u),Math.abs(p)),(!d||m<d)&&(d=m,o(i,m)&&(d/=40)),o(i,m)&&(a/=40,p/=40,u/=40),a=Math[1<=a?"floor":"ceil"](a/d),p=Math[1<=p?"floor":"ceil"](p/d),u=Math[1<=u?"floor":"ceil"](u/d),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();g=t.clientX-b.left,h=t.clientY-b.top}return t.deltaX=p,t.deltaY=u,t.deltaFactor=d,t.offsetX=g,t.offsetY=h,t.deltaMode=0,r.unshift(t,a,p,u),l&&clearTimeout(l),l=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function n(){d=null}function o(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&0==t%120}var r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice,l,d;if(e.event.fixHooks)for(var p=r.length;p;)e.event.fixHooks[r[--p]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),o=n["offsetParent"in e.fn?"offsetParent":"parent"]();return o.length||(o=e("body")),parseInt(o.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,o){if(null==e.fn.select2){var i=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var o=e.extend(!0,{},t),i=new n(e(this),o)}),this;if("string"==typeof t){var o=Array.prototype.slice.call(arguments,1),r;return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an "+"element that is not using Select2."),r=n[t].apply(n,o)}),-1<e.inArray(t,i)?this:r}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=o),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),"use strict",define("src/util/searchBox",["src/util/util","src/util/api","modules/modulefactory","src/main/grid","select2"],function(e,t,n,o){"use strict";return function(){e.loadCss("components/select2/dist/css/select2.css").then(function(){for(var e=n.getModulesById(),r=Object.keys(e),a=[],s=t.getLayerNames(),d=t.getActiveLayerName(),p=[],c=0;c<r.length;c++)if(!e[r[c]].hidden){const t=e[r[c]];a.push(t),t.text=`${r[c]} ${t.moduleName}`,t.cat="module"}for(c=0;c<s.length;c++){var u={};u.text=s[c],u.cat="layer",u.id=`layer-${s[c]}`,s[c]===d&&(u.disabled=!0),p.push(u)}var l="<div><div style=\"height:50px\"></div> <select>",m=500,g=Math.max(document.documentElement.clientWidth,window.innerWidth||0),h=Math.max(document.documentElement.clientHeight,window.innerHeight||0);l+="</select></div>",l=$(l),l=l.css({position:"fixed","justify-content":"center",top:0,left:0,width:g,height:h,paddingLeft:Math.floor(g/2-m/2),paddingTop:50,margin:0,"box-sizing":"border-box",opacity:.7,backgroundColor:"#262b33"}).appendTo("body").find("select").addClass("js-example-basic-single").css({width:m,zIndex:5e3});var f=[];p.length&&f.push({id:"layer-list",text:"Layers",children:p}),a.length&&f.push({id:"module-list",text:"Modules",children:a}),l.select2({placeholder:"Select a module",data:f,templateResult:function(e){return e.moduleName||e.text}}).select2("open").val(null).trigger("change");var y;l.on("select2:selecting",function(){y=!0}),l.on("select2:select",function(n){var e=n.params.data.url;l.select2("destroy"),l.parent().remove(),"module"===n.params.data.cat?setImmediate(function(){o.newModule(e)}):"layer"===n.params.data.cat&&t.switchToLayer(n.params.data.text)}),l.on("select2:close",function(){y||(l.select2("destroy"),l.parent().remove())})})}}),"use strict",define("modules/default/defaultcontroller",["jquery","src/util/api","src/util/util","src/util/color","src/main/grid"],function(e,t,n,o){"use strict";return{setModule(e){this.module=e},init(){this.initImpl()},initImpl(){this.resolveReady()},getToolbar(){var e=this.module.definition.toolbar;if(e)var n=this.module.definition.toolbar.common[0].toolbar[0],r=this.module.definition.toolbar.custom[0];n||(n=["Open Preferences"]);var a=[{onClick(){this.exportData()},title:"Export Data",cssClass:"fa fa-sign-out-alt",ifLocked:!0},{onClick(){this.printView()},title:"Print",cssClass:"fa fa-print",ifLocked:!0},{onClick(){this.enableFullscreen()},title:"Show fullscreen",cssClass:"fa fa-expand",ifLocked:!0},{onClick(){this.doConfig(2)},title:"Open Preferences",cssClass:"fa fa-wrench",ifLocked:!1}];n&&(a=a.filter(e=>n.some(t=>t===e.title)));const s=[],l=[];if(r){r=r.filter(e=>e.title);for(let e=0,n;e<r.length;e++)n={ifLocked:!0,title:r[e].title,cssClass:`fa ${r[e].icon}`,color:o.array2rgba(r[e].color),onClick:function(){t.doAction(r[e].action,this.getId())}},"begin"===r[e].position?s.push(n):l.push(n)}return s.concat(a,l)},inDom:n.noop,setVarFromEvent(e,n,o,r,a){const s=this.module.vars_out();if(!s)return;let l=!0;for(let d=0;d<s.length;d++)s[d].event==e&&(s[d].rel==n||!n)&&s[d].name&&(l&&a&&(l=!1,a.call(this)),s[d].jpath=s[d].jpath||[],"string"==typeof s[d].jpath&&(s[d].jpath=s[d].jpath.split("."),s[d].jpath.shift()),t.setVar(s[d].name,this.module.getVariableFromRel(o),r.concat(s[d].jpath),s[d].filter))},createDataFromEvent(e,n,o,r){const a=this.module.vars_out();if(!a)return;let s=!0;for(let l=0;l<a.length;l++)a[l].event==e&&(a[l].rel==n||!n)&&a[l].name&&(s&&r&&(s=!1,o=r.call(this)),t.createDataJpath(a[l].name,o,a[l].jpath,a[l].filter))},sendActionFromEvent(e,n,o){const r=this.module.actions_out();if(r)for(let a=r.length-1;0<=a;a--)if(r[a].name&&r[a].rel===n&&(e&&e===r[a].event||!e)){const e=r[a].name,n=r[a].jpath;o&&n?(!o.getChild&&(o=DataObject.check(o,!0)),o.getChild(n).then(n=>{t.doAction(e,n)})):t.doAction(e,o)}},sendAction:n.deprecate(function(e,t,n){return this.sendActionFromEvent(n,e,t)},"Use sendActionFromEvent instead."),allVariablesFor(e,t,n){const o=this.module.vars_out();if(o)for(let r=0;r<o.length;r++)o[r].event!=e||o[r].rel!=t&&t||n(o[r])},export:n.noop,print(){const t=this.module.getDomContent(),n=t.clone(),o=t.find("canvas"),i=n.find("canvas");return o.each(function(t){const n=this.toDataURL(),o=new Image;o.src=n,o.width=this.width,o.height=this.height,e(i[t]).after(o),e(i[t]).remove()}),n[0]},configurationStructure:n.noop,configFunctions:{},configAliases:{},defaultReferences:{_moduleId:{label:"Module id"},_loadTime:{label:"Loading time"},_moduleUrl:{label:"Module URL"},_varName:{label:"Variable name",type:"string"}},references:{},defaultEvents:{_onLoaded:{label:"Module loaded",refAction:["_loadTime","_moduleUrl","_moduleId"]},_onVarUpdated:{label:"Variable updated",refAction:["_varName"]}},events:{},variablesIn:[],defaultActionsIn:{_editPreferences:"Edit preferences",_print:"Print module content"},actionsIn:{},resolveReady(){this.module._resolveController()},onBeforeRemove(){return!0},onRemove:n.noop}}),"use strict",define("modules/default/defaultmodel",["src/main/entrypoint","src/util/datatraversing","src/util/api","src/util/debug","src/util/util"],function(e,t,n,o,i){"use strict";const r={setModule(e){this.module=e},init(){this.module.model=this,this.data={},this.triggerChangeCallbacksByRels={},this.mapVars(),this.resetListeners(),this.initImpl()},initImpl(){this.resolveReady()},inDom:i.noop,resetListeners(){this.sourceMap=null,this.mapVars(),n.getRepositoryActions().unListen(this.getActionNameList(),this._actionlisten);for(var e=this.getVarNameList(),t=0,o=e.length;t<o;t++)n.getVar(e[t]).listen(this.module,this.onVarChange.bind(this));this._actionlisten=n.getRepositoryActions().listen(this.getActionNameList(),this.onActionTrigger.bind(this))},mapVars(){const e=this.module.vars_in(),t=[],n=[],o={};if(Array.isArray(e))for(let r=e.length-1;0<=r;r--)t.push(e[r].name),n.push(e[r].rel),o[e[r].name]=e[r];this.sourceMap=o,this.listNames=t,this.listRels=n},getVarNameList(){return this.listNames},getActionNameList(){const e=this.module.actions_in();if(!e)return[];const t=[];for(let n=e.length-1;0<=n;n--)t.push(e[n].name);return t},onVarChange(e){return Promise.all([this.module.onReady(),e.onReady()]).then(()=>{const t=e.getName();this.module.blankVariable(t);const n=e.getValue();if(!t||!this.sourceMap||!this.sourceMap[t]||!this.module.controller.references[this.sourceMap[t].rel])return null;let i=this.buildData(n,this.module.controller.references[this.sourceMap[t].rel].type);if(!i)return null;const r=this.module.vars_in();let a=[];for(let e=0;e<r.length;e++)r[e].name==t&&(this.module.view.update[r[e].rel]||this.module.view[`_update_${r[e].rel}`])&&null!==n&&a.push(new Promise((t,o)=>{r[e].filter?require([r[e].filter],function(e){return e.filter?e.filter(n,t,o):void o(new Error("No filter function defined"))}):t(n)}).then(n=>(this.setData(r[e].rel,t,n),this.removeAllChangeListeners(r[e].rel),this.module.updateView(r[e].rel,n,t)),e=>{o.error("Error while filtering the data : ",e.message,e.stack)}).catch(e=>{o.error("Error while updating module : ",e.message,e.stack)}));return a},function(){}).catch(function(e){o.error("Error while updating variable : ",e.message,e.stack)})},async onActionTrigger(e,t){await this.module.onReady();const n=this.module.getActionRelFromName(t[0]);this.module.view.onActionReceive&&this.module.view.onActionReceive[n]&&this.module.view.onActionReceive[n].call(this.module.view,e,t[0])},buildData(e,t){if(!e)return!1;if(!t)return e;Array.isArray(t)||(t=[t]);var n=e.getType();if(0==t.length)return e;for(var o=0;o<t.length;o++)if(t[o]==n)return e;return!1},getValue(){return this.data},setData(e,t,n){this.data[e]||(this.data[e]={}),this.data[e][t]=n},getData(e,t){return this.data[e]?this.data[e][t]:void 0},getAllDataFromRel(e){return this.data[e]},getjPath(e,t){return this._getjPath(e,t)},_getjPath(e,n){var o=this.module.getDataFromRel(e);return o&&void 0!==n&&(o=o.getChildSync(n)),t.getJPathsFromElement(o)},resolveReady(){this.module._resolveModel()},dataListenChange(e,t,n){if(e){const i=(n,o)=>{o==this.module.getId()||t.call(e,n)};this.addChangeListener(n,e,i)?e.onChange(i):(o.setDebugLevel(1),o.error("Adding the change callback is forbidden as no rel has been defined ! Aborting callback binding to prevent leaks"))}},highlightId(e,t){n.highlightId(e,t,this.module.getId())},dataTriggerChange(e){e.triggerChange(!1,[this.module.getId()])},dataSetChild(e,t,n){return e.setChild(t,n,this.module.getId())},dataSetChildSync(e,t,n){return e.setChildSync(t,n,this.module.getId())},addChangeListener(e,t,n){return!!e&&-1!==this.listRels.indexOf(e)&&(this.triggerChangeCallbacksByRels[e]=this.triggerChangeCallbacksByRels[e]||[],this.triggerChangeCallbacksByRels[e].push({data:t,callback:n}),!0)},removeAllChangeListeners(e){if(this.triggerChangeCallbacksByRels[e])for(var t=0,n=this.triggerChangeCallbacksByRels[e].length;t<n;t++)this.removeChangeListener(this.triggerChangeCallbacksByRels[e][t].data,this.triggerChangeCallbacksByRels[e][t].callback)},removeChangeListener(e,t){e.unbindChange(t)}};return r.setHighlightId=r.highlightId,r}),"use strict",define("modules/default/defaultview",["src/util/util","src/util/api"],function(e,t){"use strict";return{initDefault(){this.onReady=!0},init(){this.resolveReady()},setModule(e){this.module=e},update:{},blank:{},onResize:e.noop,onActionReceive:{_editPreferences(e){t.updateModulePreferences(this.module.definition.id,e)},_print(e){this.module.printView(e)}},inDom:e.noop,resolveReady(){this.module._resolveView()},startLoading(e){this.loadingElements=this.loadingElements||[],-1<this.relsForLoading().indexOf(e)&&-1==this.loadingElements.indexOf(e)&&(this.loadingElements.push(e),this.showLoading())},endLoading(e){this.loadingElements=this.loadingElements||[],-1<this.relsForLoading().indexOf(e)&&-1<this.loadingElements.indexOf(e)&&(this.loadingElements.splice(this.loadingElements.indexOf(e),1),0==this.loadingElements.length&&this.hideLoading())},showLoading(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"Loading ...";this.module.domLoading.text(e),this.module.domLoading.addClass("ci-module-loading-visible")},hideLoading(){this.module.domLoading.removeClass("ci-module-loading-visible")},relsForLoading(){return this._relsForLoading||(this._relsForLoading=[])},refresh(){const e=this.module.getDomContent();e.hide(),setImmediate(function(){e.show()})}}}),"use strict",define("src/main/forceLoad",["src/header/components/blankview","src/header/components/copydata","src/header/components/copyview","src/header/components/couchshare","src/header/components/default","src/header/components/feedback","src/header/components/pastedata","src/header/components/pasteview","src/util/sandbox","src/util/searchBox","modules/default/defaultcontroller","modules/default/defaultmodel","modules/default/defaultview"],function(){"use strict";return{}}),"use strict",define("src/main/entrypoint",["jquery","lodash","src/header/header","src/util/repository","src/main/grid","src/util/api","src/util/context","src/util/datatraversing","src/util/versioning","modules/modulefactory","src/util/viewmigration","src/util/actionmanager","src/util/debug","src/util/browser","src/util/util","src/util/urldata","src/util/ui","src/util/config","src/util/sandbox","src/util/shortcuts","src/util/copyPasteManager","./forceLoad"],function($,_,Header,Repository,Grid,API,Context,Traversing,Versioning,ModuleFactory,Migration,ActionManager,Debug,browser,Util,UrlData,ui,Config,Sandbox){"use strict";function doView(e){DataObject.recursiveTransform(e,!1),e=Migration(e),e.grid=e.grid||new DataObject,this.viewLoaded?(reloadingView(),Grid.reset(e.grid)):(Grid.init(e.grid,document.getElementById("modules-grid")),this.viewLoaded=!0),ModuleFactory.empty(),e.modules=e.modules||new DataArray;var t=e.modules.length;e.variables=e.variables||new DataArray,e.aliases=e.aliases||new DataArray,e.configuration=e.configuration||new DataObject,e.configuration.title=e.configuration.title||"No title";for(var n=0;n<t;n++)Grid.addModuleFromJSON(e.getChildSync(["modules",n],!0));Grid.checkDimensions(),e.modules=ModuleFactory.getDefinitions(),viewLoaded()}function reloadingView(){RepositoryData.resetCallbacks(),RepositoryActions.resetCallbacks()}function doData(e,t){t&&reloadingData(),dataLoaded()}function reloadingData(){RepositoryData.resetVariables(),RepositoryActions.resetVariables(),RepositoryHighlight.resetCallbacks(),RepositoryHighlight.resetVariables()}function viewLoaded(){_viewLoaded=!0,_check("view")}function dataLoaded(){_dataLoaded=!0,_check("data")}function _check(loading){function doInitScript(){if(view.init_script){const e=new Sandbox;e.setContext({API});const t=view.init_script[0].groups.general[0].script[0]||"",n=e.run("(async function init_script(){\"use strict\";\n"+t+"\n});","init_script");return n()}}function configureRequirejs(){if(view.aliases){var e=view.aliases;e=_.filter(e,function(e){return e&&e.alias&&e.path});for(var t={paths:{}},n=0;n<e.length;n++)t.paths[e[n].alias]=e[n].path;for(var o in t.paths)require.undef(o);require.config(DataObject.resurrect(t))}}function checkCustomModules(){for(var e=Versioning.getView().duplicate(),t=!1,n=ModuleFactory.getModulesById(),o=0;o<e.modules.length;o++){var i=Util.moduleIdFromUrl(e.modules[o].url),r=n[i];if(!r){Debug.warn(`Your view contains an url to a module (id: ${i}) that does not correspond to any loaded modules`);continue}r.url.replace(/\/$/,"")!==e.modules[o].url.replace(/\/$/,"")&&(t=!0,e.modules[o].url=r.url)}t&&Versioning.setViewJSON(e)}function loadCustomModules(){var e=view.getChildSync(["custom_filters",0,"sections","modules",0,"groups","modules",0]);if(!e)return Promise.resolve();e=_.filter(e,function(e){return e&&e.url});for(var t=0;t<e.length;t++)e[t].url=e[t].url.replace(/\/$/,"");return ModuleFactory.setModules({folders:_.map(e,"url")})}function loadCustomFilters(){if(view.custom_filters){for(var filters=view.custom_filters[0].sections.filters,allFilters=API.getAllFilters(),i=0,filter;i<filters.length;i++)if(filter=filters[i].groups.filter[0],filter.name[0]){for(var deps=filters[i].groups.libs[0],depsA=["src/util/api"],defineStr="filterDef = function filterDefinition(API",j=0,dep;j<deps.length;j++)dep=deps[j],dep.lib&&(depsA.push(dep.lib),defineStr+=`, ${dep.alias}`);defineStr+=`) { \n ${filter.script[0]} \n}`;try{var filterDef;eval(defineStr),require.undef(filter.name[0]),define(filter.name[0],depsA,filterDef),allFilters.push({file:filter.name[0],name:filter.name[0]})}catch(t){Debug.warn("Problem with custom filter definition",t)}}var filtersLib=view.getChildSync("custom_filters",0,"sections","filtersLib",0,"groups","filters",0);filtersLib&&(filtersLib=_.filter(filtersLib,function(e){return e&&e.name&&e.file}),API.setAllFilters(filtersLib))}}function loadMainVariables(){if(0===view.variables.length)for(var e in data)"_"!==e.charAt(0)&&view.variables.push(new DataObject({varname:e,jpath:[e]}));API.loading("Fetching remote variables");for(var t=[],e=0,n=view.variables.length;e<n;e++)(function(e){var n=view.traceSync(["variables",e]);n.varname&&(n.url?t.push(UrlData.get(n.url,0|n.timeout,{Accept:"application/json"}).then(function(e){var t=n.varname;return data.setChild([t],e,!0),API.setVariable(t,!1,[t])})):n.jpath?("string"==typeof n.jpath&&(n.jpath=n.jpath.split("."),n.jpath.shift()),t.push(API.setVariable(n.varname,!1,n.jpath))):t.push(API.createData(name,!1)))})(e);return Promise.all(t).then(function(){API.stopLoading("Fetching remote variables")})}if(_dataLoaded&&_viewLoaded){var view=Versioning.getView(),data=Versioning.getData();Promise.all([loadCustomFilters(),loadMainVariables(),configureRequirejs(),loadCustomModules()]).then(doInitScript).then(function(){ActionManager.viewHasChanged(view),ModuleFactory.getModules().forEach(function(e){e.controller&&"function"==typeof e.controller.onGlobalPreferenceChange&&e.controller.onGlobalPreferenceChange(),e.resolveGlobal()}),_modulesSet.then(checkCustomModules,checkCustomModules)},function(t){Debug.error("View loading problem",t,t.stack)})}}function configureEntryPoint(){var e=Versioning.getData(),t=Versioning.getView(),n=ui.dialog({autoPosition:!0,width:"80%",noHeader:!0}),o=[];Traversing.getJPathsFromElement(e,o),require(["forms/form"],function(e){var i=new e;i.init({onValueChanged:function(){}}),i.setStructure({sections:{cfg:{options:{title:"General configuration",icon:"hostname"},groups:{tablevars:{options:{type:"table",title:"Main variables",multiple:!0},fields:{varname:{type:"text",multiple:!1,title:"Variable name"},jpath:{type:"combo",title:"J-Path",options:o,extractValue:function(e){if(e){var t=e.split(".");return t.shift(),t}},insertValue:function(e){return`element.${(e||[]).join(".")}`}},url:{type:"text",title:"From URL"},timeout:{type:"text",title:"Timeout"}}},aliases:{options:{type:"table",multiple:!0,title:"Define Global Aliases"},fields:{path:{type:"text",title:"Url or Path (omit .js extension)"},alias:{type:"text",title:"Alias"}}}}},actionscripts:{options:{title:"Action scripting",icon:"script_go"},sections:{actions:{options:{multiple:!0,title:"Action"},groups:{action:{options:{type:"list"},fields:{name:{type:"text",title:"Action name"},script:{type:"jscode",title:"Script"}}}}}}},actionfiles:{options:{title:"Action files",icon:"server_go"},groups:{action:{options:{type:"table",multiple:!0},fields:{name:{type:"text",title:"Action name"},file:{type:"text",title:"File"},mode:{type:"combo",title:"File type",options:[{key:"worker",title:"WebWorker"},{key:"amd",title:"Asynchronously loaded module"}]}}}}},custom_filters:{options:{title:"Custom filters",icon:"script_go"},sections:{modules:{options:{multiple:!1,title:"Modules"},groups:{modules:{options:{type:"table",multiple:!0},fields:{url:{type:"text",title:"Root url to modules"}}}}},filtersLib:{options:{title:"Filters"},groups:{filters:{options:{type:"table",multiple:!0},fields:{name:{type:"text",title:"Name"},file:{type:"text",title:"url"}}}}},filters:{options:{multiple:!0,title:"Custom Filters"},groups:{filter:{options:{type:"list"},fields:{name:{type:"text",title:"Filter name"},script:{type:"jscode",title:"Script"}}},libs:{options:{type:"table",multiple:"true",title:"Dependencies"},fields:{lib:{type:"text",title:"URL"},alias:{type:"text",title:"Alias"}}}}}}},init_script:{options:{title:"Initialization script",icon:"scripts"},groups:{general:{options:{type:"list",multiple:!0},fields:{script:{type:"jscode",title:"Javascript to execute"}}}}}}}),i.onStructureLoaded().done(function(){i.fill({sections:{cfg:[{groups:{tablevars:[t.variables],aliases:[t.aliases]}}],actionscripts:[{sections:{actions:ActionManager.getScriptsForm()}}],init_script:t.init_script,custom_filters:t.custom_filters,actionfiles:ActionManager.getFilesForm(),requirejs:t.requirejs}})}),i.addButton("Cancel",{color:"blue"},function(){n.dialog("close")}),i.addButton("Save",{color:"green"},function(){n.dialog("close");var e=i.getValue(),o;o=new DataArray(e.sections.cfg[0].groups.tablevars[0],!0),t.variables=o,t.aliases=new DataArray(e.sections.cfg[0].groups.aliases[0],!0),t.init_script=e.sections.init_script,t.custom_filters=e.sections.custom_filters,t.requirejs=e.sections.requirejs,_check(!0),o=e.sections.actionscripts[0].sections.actions,ActionManager.setScriptsFromForm(o),o=e.sections.actionfiles,ActionManager.setFilesFromForm(o)}),i.onLoaded().done(function(){n.html(i.makeDom()),i.inDom()})})}var RepositoryData=new Repository,RepositoryHighlight=new Repository,RepositoryActions=new Repository({doNotSave:!0}),_viewLoaded,_dataLoaded,_modulesSet;return API.setRepositoryData(RepositoryData),API.setRepositoryHighlights(RepositoryHighlight),API.setRepositoryActions(RepositoryActions),{init:function(e,t){["css/main.css","components/colors/css/colors.min.css","components/jquery-ui/themes/base/jquery-ui.min.css","lib/forms/style.css","components/fancytree/dist/skin-lion/ui.fancytree.css","css/overwrite_styles.css","node_modules/@fortawesome/fontawesome-free/css/all.min.css"].forEach(function(e){Util.loadCss(e)});var n;e.debug&&(Debug.setDebugLevel(parseInt(e.debug,10)),n=!0),e.lockView&&API.viewLock(),browser.checkCompatibility().then(function(o){var i=$("#ci-visualizer");if(o)return void i.append(`<div id="browser-compatibility">${o}</div>`);i.html("<table id=\"viewport\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n        <td id=\"ci-center\">\n            <div id=\"modules-grid\">\n                <div id=\"ci-dialog\"></div>\n            </div>\n        </td>\n    </tr>\n</table>");var r=e.config||i.attr("data-ci-config");r||(i.attr("config")?(Debug.warn("config as attribute of ci-visualizer is deprecated. Use data-ci-config instead."),r=i.attr("config")):r=require.toUrl("usr/config/default.json")),$.getJSON(r,{},function(e){e.usrDir&&require.config({paths:{usr:e.usrDir}}),n||Debug.setDebugLevel(e.debugLevel||Debug.Levels.ERROR),Config.setConfig(e),(e.lockView||e.viewLock)&&Versioning.viewLock(),e.header&&Header.init(e.header),e.modules&&(_modulesSet=ModuleFactory.setModules(e.modules)),API.setAllFilters(e.filters||[])}).fail(function(e,t){Debug.error(`Error loading the config : ${t}`)}).always(function(){require(["usr/datastructures/filelist"],function(){Context.init(document.getElementById("modules-grid")),Versioning.isViewLocked()||(Context.listen(Context.getRootDom(),[["<li class=\"ci-item-configureentrypoint\"><a><span class=\"ui-icon ui-icon-key\"></span>Global preferences</a></li>",function(){configureEntryPoint()}]]),Context.listen(Context.getRootDom(),[["<li class=\"ci-item-refresh\" name=\"refresh\"><a><span class=\"ui-icon ui-icon-arrowrefresh-1-s\"></span>Refresh page</a></li>",function(){document.location.reload()}]])),Versioning.setViewLoadCallback(doView),Versioning.setDataLoadCallback(doData),Versioning.setViewJSON({}),Versioning.setDataJSON({}),Versioning.setURLType(t);var n=$("#ci-visualizer"),o=e.viewURL||n.attr("data-ci-view");!o&&n.attr("viewURL")&&(Debug.warn("viewURL as attribute of ci-visualizer is deprecated. Use data-ci-view instead."),o=n.attr("viewURL"));var i=e.dataURL||n.attr("data-ci-data");!i&&n.attr("dataURL")&&(Debug.warn("dataURL as attribute of ci-visualizer is deprecated. Use data-ci-data instead."),i=n.attr("dataURL"));var r={view:{urls:e.views,branch:e.viewBranch,url:o},data:{urls:e.results,branch:e.resultBranch,url:i}};window.history.replaceState({type:"viewchange",value:r},""),Versioning.switchView(r,!1)})})})}}});(function(e){function o(e){throw new RangeError(A[e])}function i(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function r(e,t){var n=e.split("@"),o="";1<n.length&&(o=n[0]+"@",e=n[1]),e=e.replace(D,".");var r=e.split("."),a=i(r,t).join(".");return o+a}function a(e){for(var t=[],n=0,o=e.length,i,r;n<o;)i=e.charCodeAt(n++),55296<=i&&56319>=i&&n<o?(r=e.charCodeAt(n++),56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)):t.push(i);return t}function s(e){return i(e,function(e){var t="";return 65535<e&&(e-=65536,t+=R(55296|1023&e>>>10),e=56320|1023&e),t+=R(e),t}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:y}function d(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var o=0;for(e=n?O(e/x):e>>1,e+=O(e/t);e>P*_>>1;o+=y)e=O(e/P);return O(o+(P+1)*e/(e+v))}function c(e){var r=[],a=e.length,d=0,c=C,u=T,m,g,h,v,x,E,D,A,P,R;for(g=e.lastIndexOf(S),0>g&&(g=0),h=0;h<g;++h)128<=e.charCodeAt(h)&&o("not-basic"),r.push(e.charCodeAt(h));for(v=0<g?g+1:0;v<a;){for(x=d,E=1,D=y;;D+=y){if(v>=a&&o("invalid-input"),A=l(e.charCodeAt(v++)),(A>=y||A>O((f-d)/E))&&o("overflow"),d+=A*E,P=D<=u?b:D>=u+_?_:D-u,A<P)break;R=y-P,E>O(f/R)&&o("overflow"),E*=R}m=r.length+1,u=p(d-x,m,0==x),O(d/m)>f-c&&o("overflow"),c+=O(d/m),d%=m,r.splice(d++,0,c)}return s(r)}function u(e){var i=[],r,s,l,c,u,g,h,v,x,w,E,D,A,P,L;for(e=a(e),D=e.length,r=C,s=0,u=T,g=0;g<D;++g)E=e[g],128>E&&i.push(R(E));for(l=c=i.length,c&&i.push(S);l<D;){for(h=f,g=0;g<D;++g)E=e[g],E>=r&&E<h&&(h=E);for(A=l+1,h-r>O((f-s)/A)&&o("overflow"),s+=(h-r)*A,r=h,g=0;g<D;++g)if(E=e[g],E<r&&++s>f&&o("overflow"),E==r){for(v=s,x=y;;x+=y){if(w=x<=u?b:x>=u+_?_:x-u,v<w)break;L=v-w,P=y-w,i.push(R(d(w+L%P,0))),v=O(L/P)}i.push(R(d(v,0))),u=p(s,A,l==c),s=0,++l}++s,++r}return i.join("")}var m="object"==typeof exports&&exports&&!exports.nodeType&&exports,g="object"==typeof module&&module&&!module.nodeType&&module,h="object"==typeof global&&global;(h.global===h||h.window===h||h.self===h)&&(e=h);var f=2147483647,y=36,b=1,_=26,v=38,x=700,T=72,C=128,S="-",E=/^xn--/,j=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=y-b,O=Math.floor,R=String.fromCharCode,L,N;if(L={version:"1.3.2",ucs2:{decode:a,encode:s},decode:c,encode:u,toASCII:function(e){return r(e,function(e){return j.test(e)?"xn--"+u(e):e})},toUnicode:function(e){return r(e,function(e){return E.test(e)?c(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",[],function(){return L});else if(!(m&&g))e.punycode=L;else if(module.exports==m)g.exports=L;else for(N in L)L.hasOwnProperty(N)&&(m[N]=L[N])})(this),define("uri/punycode",function(){}),function(e,t){'use strict';"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("uri/IPv6",t):e.IPv6=t(e)}(this,function(e){'use strict';var t=e&&e.IPv6;return{best:function(e){var t=e.toLowerCase(),n=t.split(":"),o=n.length,r=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),o=n.length,-1!==n[o-1].indexOf(".")&&(r=7);var a;for(a=0;a<o&&""!==n[a];a++);if(a<r)for(n.splice(a,1,"0000");n.length<r;)n.splice(a,0,"0000");for(var s=0,l;s<r;s++){l=n[s].split("");for(var d=0;3>d&&"0"===l[0]&&1<l.length;d++)l.splice(0,1);n[s]=l.join("")}var p=-1,c=0,u=0,m=-1,g=!1;for(s=0;s<r;s++)g?"0"===n[s]?u+=1:(g=!1,u>c&&(p=m,c=u)):"0"===n[s]&&(g=!0,m=s,u=1);u>c&&(p=m,c=u),1<c&&n.splice(p,c,""),o=n.length;var h="";for(""===n[0]&&(h=":"),s=0;s<o&&(h+=n[s],s!=o-1);s++)h+=":";return""===n[o-1]&&(h+=":"),h},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}),function(e,t){'use strict';"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("uri/SecondLevelDomains",t):e.SecondLevelDomains=t(e)}(this,function(e){'use strict';var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var o=e.lastIndexOf(".",t-1);if(0>=o||o>=t-1)return!1;var i=n.list[e.slice(t+1)];return!!i&&0<=i.indexOf(" "+e.slice(o+1,t)+" ")},is:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var o=e.lastIndexOf(".",t-1);if(0<=o)return!1;var i=n.list[e.slice(t+1)];return!!i&&0<=i.indexOf(" "+e.slice(0,t)+" ")},get:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return null;var o=e.lastIndexOf(".",t-1);if(0>=o||o>=t-1)return null;var i=n.list[e.slice(t+1)];return i?0>i.indexOf(" "+e.slice(o+1,t)+" ")?null:e.slice(o+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}),function(e,t){'use strict';"object"==typeof module&&module.exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("uri/URI",["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,n,o){'use strict';function r(e,t){var n=1<=arguments.length,o=2<=arguments.length;if(!(this instanceof r))return n?o?new r(e,t):new r(e):new r;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"==typeof location?"":location.href+""}return this.href(e),void 0===t?this:this.absoluteTo(t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(e){return void 0===e?"Undefined":(Object.prototype.toString.call(e)+"").slice(8,-1)}function d(e){return"Array"===s(e)}function c(e,t){var n={},o,r;if("RegExp"===s(t))n=null;else if(d(t))for(o=0,r=t.length;o<r;o++)n[t[o]]=!0;else n[t]=!0;for(o=0,r=e.length;o<r;o++){var a=n&&void 0!==n[e[o]]||!n&&t.test(e[o]);a&&(e.splice(o,1),r--,o--)}return e}function u(e,t){var n,o;if(d(t)){for(n=0,o=t.length;n<o;n++)if(!u(e,t[n]))return!1;return!0}var r=s(t);for(n=0,o=e.length;n<o;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0;}else if(e[n]===t)return!0;return!1}function m(e,t){if(!d(e)||!d(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0}function g(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function h(e){return escape(e)}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,h).replace(/\*/g,"%2A")}function y(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function b(e,t){return function(n,o){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!o),this)}}var _=o&&o.URI;r.version="1.18.4";var v=r.prototype,l=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:r.domAttributes[t]}},r.encode=f,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=f,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return void 0===t&&(t=r.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(t,n){t+="",void 0===n&&(n=r.escapeQuerySpace);try{return r.decode(n?t.replace(/\+/g,"%20"):t)}catch(n){return t}};var p={encode:"encode",decode:"decode"},x=function(e,t){return function(n){try{return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}catch(t){return n}}},w;for(w in p)r[w+"PathSegment"]=x("pathname",p[w]),r[w+"UrnPathSegment"]=x("urnpath",p[w]);var k=function(e,t,n){return function(o){var a=n?function(e){return r[t](r[n](e))}:r[t];for(var s=(o+"").split(e),l=0,d=s.length;l<d;l++)s[l]=a(s[l]);return s.join(e)}};r.decodePath=k("/","decodePathSegment"),r.decodeUrnPath=k(":","decodeUrnPathSegment"),r.recodePath=k("/","encodePathSegment","decode"),r.recodeUrnPath=k(":","encodeUrnPathSegment","decode"),r.encodeReserved=x("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),-1<n&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),-1<n&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),-1<n&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,n){e=e.replace(/\\/g,"/");var o=e.indexOf("/"),i,r;if(-1===o&&(o=e.length),"["===e.charAt(0))i=e.indexOf("]"),n.hostname=e.substring(1,i)||null,n.port=e.substring(i+2,o)||null,"/"===n.port&&(n.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),l=e.indexOf(":",a+1);-1!==l&&(-1===s||l<s)?(n.hostname=e.substring(0,o)||null,n.port=null):(r=e.substring(0,o).split(":"),n.hostname=r[0]||null,n.port=r[1]||null)}return n.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),e.substring(o)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,n){var o=e.indexOf("/"),i=e.lastIndexOf("@",-1<o?o:e.length-1),a;return-1<i&&(-1===o||i<o)?(a=e.substring(0,i).split(":"),n.username=a[0]?r.decode(a[0]):null,a.shift(),n.password=a[0]?r.decode(a.join(":")):null,e=e.substring(i+1)):(n.username=null,n.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n={},o=e.split("&"),a=o.length,s=0,d,p,c;s<a;s++)d=o[s].split("="),p=r.decodeQuery(d.shift(),t),c=d.length?r.decodeQuery(d.join("="),t):null,l.call(n,p)?(("string"==typeof n[p]||null===n[p])&&(n[p]=[n[p]]),n[p].push(c)):n[p]=c;return n},r.build=function(e){var n="";return e.protocol&&(n+=e.protocol+":"),!e.urn&&(n||e.hostname)&&(n+="//"),n+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(n+="/"),n+=e.path),"string"==typeof e.query&&e.query&&(n+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(n+="#"+e.fragment),n},r.buildHost=function(e){var n="";return e.hostname?(n+=r.ip6_expression.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(n+=":"+e.port),n):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var n="";return e.username&&(n+=r.encode(e.username)),e.password&&(n+=":"+r.encode(e.password)),n&&(n+="@"),n},r.buildQuery=function(e,n,o){var a="",s,p,c,u;for(p in e)if(l.call(e,p)&&p)if(d(e[p]))for(s={},c=0,u=e[p].length;c<u;c++)void 0!==e[p][c]&&void 0===s[e[p][c]+""]&&(a+="&"+r.buildQueryParameter(p,e[p][c],o),!0!==n&&(s[e[p][c]+""]=!0));else void 0!==e[p]&&(a+="&"+r.buildQueryParameter(p,e[p],o));return a.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null===t?"":"="+r.encodeQuery(t,n))},r.addQuery=function(e,t,n){if("object"==typeof t)for(var o in t)l.call(t,o)&&r.addQuery(e,o,t[o]);else if("string"==typeof t){if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),d(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},r.removeQuery=function(e,t,n){var o,a,p;if(d(t))for(o=0,a=t.length;o<a;o++)e[t[o]]=void 0;else if("RegExp"===s(t))for(p in e)t.test(p)&&(e[p]=void 0);else if("object"==typeof t)for(p in t)l.call(t,p)&&r.removeQuery(e,p,t[p]);else if("string"==typeof t)void 0===n?e[t]=void 0:"RegExp"===s(n)?!d(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=c(e[t],n):e[t]!==n+""||d(n)&&1!==n.length?d(e[t])&&(e[t]=c(e[t],n)):e[t]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},r.hasQuery=function(e,t,n,o){switch(s(t)){case"String":break;case"RegExp":for(var i in e)if(l.call(e,i)&&t.test(i)&&(void 0===n||r.hasQuery(e,i,n)))return!0;return!1;case"Object":for(var a in t)if(l.call(t,a)&&!r.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter");}switch(s(n)){case"Undefined":return t in e;case"Boolean":var p=d(e[t])?!!e[t].length:!!e[t];return n===p;case"Function":return!!n(e[t],t,e);case"Array":if(!d(e[t]))return!1;var c=o?u:m;return c(e[t],n);case"RegExp":return d(e[t])?!!o&&u(e[t],n):!!(e[t]&&e[t].match(n));case"Number":n+="";case"String":return d(e[t])?!!o&&u(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}},r.joinPaths=function(){for(var e=[],t=[],n=0,o=0,a;o<arguments.length;o++){a=new r(arguments[o]),e.push(a);for(var l=a.segment(),d=0;d<l.length;d++)"string"==typeof l[d]&&t.push(l[d]),l[d]&&n++}if(!t.length||!n)return new r("");var p=new r("").segment(t);return(""===e[0].path()||"/"===e[0].path().slice(0,1))&&p.path("/"+p.path()),p.normalize()},r.commonPath=function(e,t){var n=Math.min(e.length,t.length),o;for(o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o)){o--;break}return 1>o?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(o)||"/"!==t.charAt(o))&&(o=e.substring(0,o).lastIndexOf("/")),e.substring(0,o+1))},r.withinString=function(e,t,n){n||(n={});var o=n.start||r.findUri.start,i=n.end||r.findUri.end,a=n.trim||r.findUri.trim,s=n.parens||r.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(o.lastIndex=0;;){var d=o.exec(e);if(!d)break;var p=d.index;if(n.ignoreHtml){var c=e.slice(Math.max(p-3,0),p);if(c&&l.test(c))continue}for(var u=p+e.slice(p).search(i),m=e.slice(p,u),g=-1,h,f;h=s.exec(m),!!h;)f=h.index+h[0].length,g=Math.max(g,f);if(m=-1<g?m.slice(0,g)+m.slice(g+1).replace(a,""):m.replace(a,""),!(n.ignore&&n.ignore.test(m))){u=p+m.length;var y=t(m,p,u,e);if(void 0===y){o.lastIndex=u;continue}y+="",e=e.slice(0,p)+y+e.slice(u),o.lastIndex=p+y.length}}return o.lastIndex=0,e},r.ensureValidHostname=function(t){if(t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname \""+t+"\" contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError("Hostname \""+t+"\" contains characters other than [A-Z0-9.-]")}},r.noConflict=function(e){if(e){var t={URI:this.noConflict()};return o.URITemplate&&"function"==typeof o.URITemplate.noConflict&&(t.URITemplate=o.URITemplate.noConflict()),o.IPv6&&"function"==typeof o.IPv6.noConflict&&(t.IPv6=o.IPv6.noConflict()),o.SecondLevelDomains&&"function"==typeof o.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=o.SecondLevelDomains.noConflict()),t}return o.URI===this&&(o.URI=_),this},v.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},v.clone=function(){return new r(this)},v.valueOf=v.toString=function(){return this.build(!1)._string},v.protocol=y("protocol"),v.username=y("username"),v.password=y("password"),v.hostname=y("hostname"),v.port=y("port"),v.query=b("query","?"),v.fragment=b("fragment","#"),v.search=function(e,n){var o=this.query(e,n);return"string"==typeof o&&o.length?"?"+o:o},v.hash=function(e,n){var o=this.fragment(e,n);return"string"==typeof o&&o.length?"#"+o:o},v.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?r.decodeUrnPath:r.decodePath)(n):n}return this._parts.path=this._parts.urn?e?r.recodeUrnPath(e):"":e?r.recodePath(e):"/",this.build(!t),this},v.path=v.pathname,v.href=function(e,t){if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var n=e instanceof r,o="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var i=r.getDomAttribute(e);e=e[i]||"",o=!1}if(!n&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=r.parse(e+"",this._parts);else if(n||o){var a=n?e._parts:e;for(var s in a)l.call(this._parts,s)&&(this._parts[s]=a[s])}else throw new TypeError("invalid input");return this.build(!t),this},v.is=function(e){var t=!1,o=!1,i=!1,a=!1,s=!1,l=!1,d=!1,p=!this._parts.urn;switch(this._parts.hostname&&(p=!1,o=r.ip4_expression.test(this._parts.hostname),i=r.ip6_expression.test(this._parts.hostname),t=o||i,a=!t,s=a&&n&&n.has(this._parts.hostname),l=a&&r.idn_expression.test(this._parts.hostname),d=a&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return o;case"ip6":case"ipv6":case"inet6":return i;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return d;}return null};var T=v.protocol,C=v.port,S=v.hostname;v.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError("Protocol \""+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,e,t)},v.scheme=v.protocol,v.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port \""+e+"\" contains characters other than [0-9]");return C.call(this,e,t)},v.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={},o=r.parseHost(e,n);if("/"!==o)throw new TypeError("Hostname \""+e+"\" contains characters other than [A-Z0-9.-]");e=n.hostname}return S.call(this,e,t)},v.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol(),o=this.authority();return o?(n?n+"://":"")+this.authority():""}var i=r(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},v.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildHost(this._parts):"";var n=r.parseHost(e,this._parts);if("/"!==n)throw new TypeError("Hostname \""+e+"\" contains characters other than [A-Z0-9.-]");return this.build(!t),this},v.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildAuthority(this._parts):"";var n=r.parseAuthority(e,this._parts);if("/"!==n)throw new TypeError("Hostname \""+e+"\" contains characters other than [A-Z0-9.-]");return this.build(!t),this},v.userinfo=function(e,n){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var o=r.buildUserinfo(this._parts);return o?o.substring(0,o.length-1):o}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!n),this},v.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},v.subdomain=function(t,n){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var o=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,o)||""}var i=this._parts.hostname.length-this.domain().length,e=this._parts.hostname.substring(0,i),s=new RegExp("^"+a(e));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(s,t),this.build(!n),this},v.domain=function(e,n){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(n=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var o=this._parts.hostname.match(/\./g);if(o&&2>o.length)return this._parts.hostname;var t=this._parts.hostname.length-this.tld(n).length-1;return t=this._parts.hostname.lastIndexOf(".",t-1)+1,this._parts.hostname.substring(t)||""}if(!e)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var i=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!n),this},v.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var o=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(o+1);return!0!==t&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}var r;if(!e)throw new TypeError("cannot set TLD empty");else if(e.match(/[^a-zA-Z0-9-]/)){if(n&&n.is(e))r=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e);else throw new TypeError("TLD \""+e+"\" contains characters other than [A-Z0-9]");}else if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");else r=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e);return this.build(!t),this},v.directory=function(t,n){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var o=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,o)||(this._parts.hostname?"/":"");return t?r.decodePath(i):i}var s=this._parts.path.length-this.filename().length,e=this._parts.path.substring(0,s),l=new RegExp("^"+a(e));return this.is("relative")||(!t&&(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.recodePath(t),this._parts.path=this._parts.path.replace(l,t),this.build(!n),this},v.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),o=this._parts.path.substring(n+1);return e?r.decodePathSegment(o):o}var i=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var s=new RegExp(a(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),i?this.normalizePath(t):this.build(!t),this},v.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this.filename(),o=n.lastIndexOf("."),i,l;return-1===o?"":(i=n.substring(o+1),l=/^[a-z0-9%]+$/i.test(i)?i:"",e?r.decodePathSegment(l):l)}"."===e.charAt(0)&&(e=e.substring(1));var d=this.suffix(),p;if(!d){if(!e)return this;this._parts.path+="."+r.recodePath(e)}else p=e?new RegExp(a(d)+"$"):new RegExp(a("."+d)+"$");return p&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(p,e)),this.build(!t),this},v.segment=function(e,t,n){var o=this._parts.urn?":":"/",r=this.path(),a="/"===r.substring(0,1),s=r.split(o);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment \""+e+"\", must be 0-based integer");if(a&&s.shift(),0>e&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null!==e&&void 0!==s[e])t?s[e]=g(t):s.splice(e,1);else if(d(t)){s=[];for(var p=0,c=t.length;p<c;p++)(t[p].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(g(t[p])))}else(t||"string"==typeof t)&&(t=g(t),""===s[s.length-1]?s[s.length-1]=t:s.push(t));return a&&s.unshift(""),this.path(s.join(o),n)},v.segmentCoded=function(e,t,n){var o,a,s;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(o=this.segment(e,t,n),!d(o))o=void 0===o?void 0:r.decode(o);else for(a=0,s=o.length;a<s;a++)o[a]=r.decode(o[a]);return o}if(!d(t))t="string"==typeof t||t instanceof String?r.encode(t):t;else for(a=0,s=t.length;a<s;a++)t[a]=r.encode(t[a]);return this.segment(e,t,n)};var E=v.query;return v.query=function(e,t){if(!0===e)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),o=e.call(this,n);return this._parts.query=r.buildQuery(o||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):E.call(this,e,t)},v.setQuery=function(e,t,n){var o=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)o[e]=void 0===t?null:t;else if("object"==typeof e)for(var i in e)l.call(e,i)&&(o[i]=e[i]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=r.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},v.addQuery=function(e,t,n){var o=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(o,e,void 0===t?null:t),this._parts.query=r.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},v.removeQuery=function(e,t,n){var o=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(o,e,t),this._parts.query=r.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},v.hasQuery=function(e,t,n){var o=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(o,e,t,n)},v.setSearch=v.setQuery,v.addSearch=v.addQuery,v.removeSearch=v.removeQuery,v.hasSearch=v.hasQuery,v.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},v.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},v.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},v.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},v.normalizePath=function(e){var t=this._parts.path;if(!t)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;t=r.recodePath(t);var n="",o,i,a;for("/"!==t.charAt(0)&&(o=!0,t="/"+t),("/.."===t.slice(-3)||"/."===t.slice(-2))&&(t+="/"),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),o&&(n=t.substring(1).match(/^(\.\.\/)+/)||"",n&&(n=n[0]));i=t.search(/\/\.\.(\/|$)/),-1!==i;){if(0===i){t=t.substring(3);continue}a=t.substring(0,i).lastIndexOf("/"),-1===a&&(a=i),t=t.substring(0,a)+t.substring(i+3)}return o&&this.is("relative")&&(t=n+t.substring(1)),this._parts.path=t,this.build(!e),this},v.normalizePathname=v.normalizePath,v.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},v.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},v.normalizeSearch=v.normalizeQuery,v.normalizeHash=v.normalizeFragment,v.iso8859=function(){var t=r.encode,e=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},v.unicode=function(){var t=r.encode,e=r.decode;r.encode=f,r.decode=unescape;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},v.readable=function(){var n=this.clone();n.username("").password("").normalize();var o="";if(n._parts.protocol&&(o+=n._parts.protocol+"://"),n._parts.hostname&&(n.is("punycode")&&e?(o+=e.toUnicode(n._parts.hostname),n._parts.port&&(o+=":"+n._parts.port)):o+=n.host()),n._parts.hostname&&n._parts.path&&"/"!==n._parts.path.charAt(0)&&(o+="/"),o+=n.path(!0),n._parts.query){for(var a="",s=0,d=n._parts.query.split("&"),p=d.length,l;s<p;s++)l=(d[s]||"").split("="),a+="&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(a+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));o+="?"+a.substring(1)}return o+=r.decodeQuery(n.hash(),!0),o},v.absoluteTo=function(e){var t=this.clone(),n=["protocol","username","password","hostname","port"],o,a,s;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol),this._parts.hostname)return t;for(a=0;s=n[a];a++)t._parts[s]=e._parts[s];return t._parts.path?(".."===t._parts.path.substring(-2)&&(t._parts.path+="/"),"/"!==t.path().charAt(0)&&(o=e.directory(),o=o?o:0===e.path().indexOf("/")?"/":"",t._parts.path=(o?o+"/":"")+t._parts.path,t.normalizePath())):(t._parts.path=e._parts.path,!t._parts.query&&(t._parts.query=e._parts.query)),t.build(),t},v.relativeTo=function(e){var t=this.clone().normalize(),n,o,i,a,s;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),n=t._parts,o=e._parts,a=t.path(),s=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(n.protocol===o.protocol&&(n.protocol=null),n.username!==o.username||n.password!==o.password)return t.build();if(null!==n.protocol||null!==n.username||null!==n.password)return t.build();if(n.hostname===o.hostname&&n.port===o.port)n.hostname=null,n.port=null;else return t.build();if(a===s)return n.path="",t.build();if(i=r.commonPath(a,s),!i)return t.build();var l=o.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return n.path=l+n.path.substring(i.length)||"./",t.build()},v.equals=function(e){var t=this.clone(),n=new r(e),o={},i={},a={},s,p,c;if(t.normalize(),n.normalize(),t.toString()===n.toString())return!0;if(s=t.query(),p=n.query(),t.query(""),n.query(""),t.toString()!==n.toString())return!1;if(s.length!==p.length)return!1;for(c in o=r.parseQuery(s,this._parts.escapeQuerySpace),i=r.parseQuery(p,this._parts.escapeQuerySpace),o)if(l.call(o,c)){if(!d(o[c])){if(o[c]!==i[c])return!1;}else if(!m(o[c],i[c]))return!1;a[c]=!0}for(c in i)if(l.call(i,c)&&!a[c])return!1;return!0},v.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},v.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}),function(e,t){'use strict';"object"==typeof module&&module.exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define("uri/URI.fragmentQuery",["./URI"],t):t(e.URI)}(this,function(e){'use strict';var t=e.prototype,n=t.fragment;e.fragmentPrefix="?";var o=e._parts;return e._parts=function(){var t=o();return t.fragmentPrefix=e.fragmentPrefix,t},t.fragmentPrefix=function(e){return this._parts.fragmentPrefix=e,this},t.fragment=function(t,o){var i=this._parts.fragmentPrefix,r=this._parts.fragment||"";return!0===t?r.substring(0,i.length)===i?e.parseQuery(r.substring(i.length)):{}:void 0!==t&&"string"!=typeof t?(this._parts.fragment=i+e.buildQuery(t),this.build(!o),this):n.call(this,t,o)},t.addFragment=function(t,n,o){var i=this._parts.fragmentPrefix,r=e.parseQuery((this._parts.fragment||"").substring(i.length));return e.addQuery(r,t,n),this._parts.fragment=i+e.buildQuery(r),"string"!=typeof t&&(o=n),this.build(!o),this},t.removeFragment=function(t,n,o){var i=this._parts.fragmentPrefix,r=e.parseQuery((this._parts.fragment||"").substring(i.length));return e.removeQuery(r,t,n),this._parts.fragment=i+e.buildQuery(r),"string"!=typeof t&&(o=n),this.build(!o),this},t.addHash=t.addFragment,t.removeHash=t.removeFragment,e}),function(e){"use strict";function t(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,f(c),c++}function n(e){delete u[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function i(e){if(m)setTimeout(i,0,e);else{var t=u[e];if(t){m=!0;try{o(t)}finally{n(e),m=!1}}}}function r(){f=function(e){process.nextTick(function(){i(e)})}}function a(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function s(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},f=function(t){e.port2.postMessage(t)}}function d(){var e=g.documentElement;f=function(t){var n=g.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function p(){f=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var c=1,u={},m=!1,g=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e),f;h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r():a()?s():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?d():p(),h.setImmediate=t,h.clearImmediate=n}}("undefined"==typeof self?"undefined"==typeof global?this:global:self),define("components/setImmediate/setImmediate",function(){}),!function(e){"use strict";function t(e,t,n,i){var r=Object.create((t||o).prototype),a=new u(i||[]);return r._invoke=d(e,n,a),r}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function r(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){this.arg=e}function l(e){function t(o,i,r,a){var l=n(e[o],e,i);if("throw"===l.type)a(l.arg);else{var d=l.arg,p=d.value;return p instanceof s?Promise.resolve(p.arg).then(function(e){t("next",e,r,a)},function(e){t("throw",e,r,a)}):Promise.resolve(p).then(function(e){d.value=e,r(d)},a)}}function o(e,n){function o(){return new Promise(function(o,i){t(e,n,o,i)})}return i=i?i.then(o,o):o()}"object"==typeof process&&process.domain&&(t=process.domain.bind(t));var i;this._invoke=o}function d(e,t,o){var i=x;return function(r,a){if(i===k)throw new Error("Generator is already running");if(i===T){if("throw"===r)throw a;return g()}for(;;){var s=o.delegate;if(s){if("return"===r||"throw"===r&&s.iterator[r]===void 0){o.delegate=null;var l=s.iterator["return"];if(l){var d=n(l,s.iterator,a);if("throw"===d.type){r="throw",a=d.arg;continue}}if("return"===r)continue}var d=n(s.iterator[r],s.iterator,a);if("throw"===d.type){o.delegate=null,r="throw",a=d.arg;continue}r="next",a=void 0;var p=d.arg;if(p.done)o[s.resultName]=p.value,o.next=s.nextLoc;else return i=w,p;o.delegate=null}if("next"===r)o.sent=o._sent=a;else if("throw"===r){if(i===x)throw i=T,a;o.dispatchException(a)&&(r="next",a=void 0)}else"return"===r&&o.abrupt("return",a);i=k;var d=n(e,t,o);if("normal"===d.type){i=o.done?T:w;var p={value:d.arg,done:o.done};if(d.arg===C)o.delegate&&"next"===r&&(a=void 0);else return p}else"throw"===d.type&&(i=T,r="throw",a=d.arg)}}}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function c(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function u(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function m(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(h.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:g}}function g(){return{value:void 0,done:!0}}var h=Object.prototype.hasOwnProperty,f="function"==typeof Symbol?Symbol:{},y=f.iterator||"@@iterator",b=f.toStringTag||"@@toStringTag",_="object"==typeof module,v=e.regeneratorRuntime;if(v)return void(_&&(module.exports=v));v=e.regeneratorRuntime=_?module.exports:{},v.wrap=t;var x="suspendedStart",w="suspendedYield",k="executing",T="completed",C={},S=r.prototype=o.prototype;i.prototype=S.constructor=r,r.constructor=i,r[b]=i.displayName="GeneratorFunction",v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,r):(e.__proto__=r,!(b in e)&&(e[b]="GeneratorFunction")),e.prototype=Object.create(S),e},v.awrap=function(e){return new s(e)},a(l.prototype),v.async=function(e,n,o,i){var r=new l(t(e,n,o,i));return v.isGeneratorFunction(n)?r:r.next().then(function(e){return e.done?e.value:r.next()})},a(S),S[y]=function(){return this},S[b]="Generator",S.toString=function(){return"[object Generator]"},v.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},v.values=m,u.prototype={constructor:u,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.tryEntries.forEach(c),!e)for(var t in this)"t"===t.charAt(0)&&h.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,o){return a.type="throw",a.arg=e,n.next=t,!!o}if(this.done)throw e;for(var n=this,o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=h.call(r,"catchLoc"),l=h.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);}else if(!l)throw new Error("try statement without catch or finally");else if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1,o;0<=n;--n)if(o=this.tryEntries[n],o.tryLoc<=this.prev&&h.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?this.next=r.finallyLoc:this.complete(a),C},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),c(n),C},catch:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;c(n)}return r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},C}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this),define("lib/regenerator/regenerator-runtime",function(){}),"use strict",function(){try{eval("(function(){ var a = 0; var b = {a}; })()")}catch(t){alert("Your browser is not supported by this application.\nPlease upgrade to a more modern browser like Microsoft Edge, Google Chrome or Firefox.")}}(),require.config({waitSeconds:0,paths:{ace:"components/ace/src",angularplasmid:"node_modules/angularplasmid/dist/angularplasmid.complete.min",async:"components/async/dist/async",babel:"components/babel-standalone/babel.min",bioParsers:"browserified/bioParsers/index",bluebird:"components/bluebird/js/browser/bluebird",bowser:"components/bowser/bowser",canvg:"components/canvg/dist/canvg.bundle",chroma:"components/chroma-js/chroma.min",ckeditor:"components/ckeditor/ckeditor",countryData:"browserified/country-data/index",delay:"browserified/delay/index",d3:"components/d3/d3.min","d3-hierarchy":"node_modules/d3-hierarchy/dist/d3-hierarchy.min",eventEmitter:"components/eventEmitter/EventEmitter.min",fancytree:"components/fancytree/dist/jquery.fancytree-all",fetch:"components/fetch/fetch","file-saver":"components/file-saver.js/FileSaver",forms:"lib/forms",highlightjs:"lib/highlight.js/highlight.pack",jcampconverter:"components/jcampconverter/dist/jcampconverter.min",jqgrid:"components/jqgrid_edit/js/jquery.jqGrid",jsbarcode:"components/jsbarcode/dist/JsBarcode.all.min",jquery:"components/jquery/dist/jquery","jquery-cookie":"components/jquery-cookie/jquery.cookie","jquery-tmpl":"components/jquery-tmpl/jquery.tmpl.min","jquery-ui":"components/jquery-ui",jsgraph:"components/jsgraph/dist/jsgraph-es6",jsoneditor:"components/jsoneditor/dist/jsoneditor-minimalist.min","json-chart":"components/json-chart/dist/json-chart.min",jszip:"components/jszip/dist/jszip.min","js-yaml":"components/js-yaml/dist/js-yaml.min",katex:"node_modules/katex/dist/katex.min",lodash:"components/lodash/dist/lodash.min",loglevel:"components/loglevel/dist/loglevel","markdown-js":"components/markdown-js/lib/markdown",marked:"components/marked/lib/marked",mathjs:"node_modules/mathjs/dist/math.min","mime-types":"browserified/mime-types/index",moment:"components/moment/moment","moment-duration-format":"components/moment-duration-format/lib/moment-duration-format",notifyjs:"components/notifyjs/dist/notify",modernizr:"components/modernizr/modernizr",msa:"lib/msa/msa.min","nmr-simulation":"components/nmr-simulation/dist/nmr-simulation",numeral:"components/numeral/numeral",openchemlib:"node_modules/openchemlib/dist",papaparse:"components/papa-parse/papaparse.min",plot:"lib/plot/plot",pouchdb:"components/pouchdb/dist/pouchdb.min",quillPrivate:"src/quillPrivate",quill:"components/quill/quill.min",quillImageResizeModule:"node_modules/quill-image-resize-module/image-resize.min",quillImageDropModule:"node_modules/quill-image-drop-module/image-drop.min",RxnRenderer:"browserified/RxnRenderer/index",MFParser:"browserified/MFParser/index",select2:"components/select2/dist/js/select2.full",slickgrid:"components/slickgrid/slick.grid",slickgrid_core:"components/slickgrid/slick.core","smart-array-filter":"browserified/SmartArrayFilter/index",sparkline:"lib/jquery.sparkline/jquery.sparkline.min",sprintf:"components/sprintf/dist/sprintf.min",superagent:"browserified/superagent/index",threejs:"components/threejs/build/three.min",uri:"components/uri.js/src","web-animations":"components/web-animations-js/web-animations.min",x2js:"components/x2js/xml2json.min",BiojsSequence:"lib/biojs-1.0/src/main/javascript/Biojs.Sequence",BiojsTooltip:"lib/biojs-1.0/src/main/javascript/Biojs.Tooltip",BiojsFeatureViewer:"lib/biojs-1.0/src/main/javascript/Biojs.FeatureViewer",BiojsCore:"lib/biojs-1.0/src/main/javascript/Biojs",BiojsMyFeatureViewer:"modules/types/bio/feature_viewer/Biojs.MyFeatureViewer",BiojsDasProteinFeatureViewer:"lib/biojs-1.0/src/main/javascript/Biojs.DasProteinFeatureViewer"},shim:{canvg:{exports:"canvg"},katex:{exports:"katex"},fetch:{exports:"fetch"},threejs:{exports:"THREE",init:function(){this.THREE.ImageUtils.crossOrigin="anonymous"}},msa:{exports:"msa"},x2js:{exports:"X2JS"},"components/jit/Jit/jit":{exports:"$jit"},ckeditor:{exports:"CKEDITOR"},modernizr:{exports:"Modernizr"},"lib/parser/Parser":{exports:"Parser"},quillImageResizeModule:["quillPrivate","quill"],quillImageDropModule:["quillPrivate","quill"],"jquery-cookie":"jquery",select2:["jquery"],jsbarcode:["jquery"],"lib/threejs/TrackballControls":["threejs"],jqgrid:["jquery","components/jqgrid_edit/js/i18n/grid.locale-en"],"lib/couchdb/jquery.couch":["jquery"],slickgrid_core:["jquery","jquery-ui/ui/widgets/sortable","jquery-tmpl"],slickgrid:{deps:["slickgrid_core","components/slickgrid/slick.groupitemmetadataprovider","components/slickgrid/slick.groupitemmetadataprovider","components/slickgrid/slick.dataview","components/slickgrid/lib/jquery.event.drop-2.2","components/slickgrid/lib/jquery.event.drag-2.2","components/slickgrid/plugins/slick.cellrangedecorator","components/slickgrid/plugins/slick.cellrangeselector","components/slickgrid/plugins/slick.cellselectionmodel","components/slickgrid/plugins/slick.rowselectionmodel","components/slickgrid/plugins/slick.rowmovemanager","components/slickgrid/plugins/slick.cellexternalcopymanager","components/slickgrid/slick.editors","modules/types/edition/slick_grid/slickCustomEditors","modules/types/edition/slick_grid/slickCustomFormatters","components/slickgrid/plugins/slick.checkboxselectcolumn","components/slickgrid/controls/slick.columnpicker","components/slickgrid/examples/slick.compositeeditor"],exports:"Slick"},"libs/jsmol/js/JSmolApplet":["libs/jsmol/JSmol.min.nojq"],"lib/flot/jquery.flot.pie":["jquery","lib/flot/jquery.flot"],"lib/pixastic/pixastic":{deps:["lib/pixastic/pixastic/pixastic.core"],exports:"Pixastic"},fancytree:["jquery-ui/ui/effects/effect-blind","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/draggable"],"moment-duration-format":["moment"],BiojsCore:{exports:"Biojs"},BiojsSequence:["BiojsCore"],BiojsTooltip:["BiojsCore"],BiojsMyFeatureViewer:["BiojsFeatureViewer"],BiojsFeatureViewer:["BiojsCore","lib/biojs-1.0/src/main/resources/dependencies/jquery/jquery.tooltip","lib/biojs-1.0/src/main/resources/dependencies/graphics/raphael-2.1.2","lib/biojs-1.0/src/main/resources/dependencies/graphics/canvg","lib/biojs-1.0/src/main/resources/dependencies/graphics/rgbcolor"],BiojsDasProteinFeatureViewer:["BiojsMyFeatureViewer"]},map:{"*":{quill:"quillPrivate"},quillPrivate:{quill:"quill"}}}),window.CKEDITOR_BASEPATH=require.toUrl("components/ckeditor/"),require(["version","jquery","src/main/datas","src/main/entrypoint","uri/URI.fragmentQuery","bluebird","components/setImmediate/setImmediate","lib/regenerator/regenerator-runtime"],function(e,t,n,o,i,r){window.Promise=r,r.config({warnings:e.head,longStackTraces:e.head,monitoring:!1}),t.browser={msie:!1},t(document).ready(()=>{const e=new i(window.location.href),t=0<e.search().length?"search":"?"===e.fragment()[0]?"fragment":"search",n=new i(e[t]()).query(!0);o.init(n,t.replace(t[0],t[0].toUpperCase()))})}),define("init",function(){});
