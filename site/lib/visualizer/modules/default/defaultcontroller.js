define(["src/util/api","src/util/util"],function(a,b){return{setModule:function(a){this.module=a},init:function(){this.initImpl()},initImpl:function(){this.resolveReady()},inDom:b.noop,sendAction:function(b,c,d){var e,f,g,h=this.module.actions_out();if(h)for(e=h.length-1;e>=0;e--)h[e].rel===b&&(d&&d===h[e].event||!d)&&(g=h[e].name,f=h[e].jpath,c&&f&&c.getChild?!function(b){c.getChild(f).then(function(c){a.doAction(b,c)})}(g):a.doAction(g,c))},setVarFromEvent:function(b,c,d,e,f){var g,h=0,i=!0;if(g=this.module.vars_out())for(;h<g.length;h++)g[h].event!=b||g[h].rel!=c&&c||(i&&f&&(i=!1,f.call(this)),g[h].jpath=g[h].jpath||[],"string"==typeof g[h].jpath&&(g[h].jpath=g[h].jpath.split("."),g[h].jpath.shift()),a.setVar(g[h].name,this.module.getVariableFromRel(d),e.concat(g[h].jpath),g[h].filter))},createDataFromEvent:function(b,c,d,e){var f,g=0,h=!0;if(f=this.module.vars_out())for(;g<f.length;g++)f[g].event!=b||f[g].rel!=c&&c||(h&&e&&(h=!1,d=e.call(this)),a.createDataJpath(f[g].name,d,f[g].jpath,f[g].filter))},allVariablesFor:function(a,b,c){var d,e=0;if(d=this.module.vars_out())for(;e<d.length;e++)d[e].event!=a||d[e].rel!=b&&b||c(d[e])},"export":b.noop,print:function(){return this.module.getDomContent()[0].innerHTML},configurationStructure:b.noop,configFunctions:{},configAliases:{},events:{},variablesIn:[],actionsIn:{_editPreferences:"Edit preferences"},resolveReady:function(){this.module._resolveController()},onBeforeRemove:function(){return!0},onRemove:b.noop}});