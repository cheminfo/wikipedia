'use strict';define(["jquery","modules/default/defaultview","forms/button","src/util/ui","src/util/typerenderer"],function(a,b,c,d,e){"use strict";function f(){}let g;return a.extend(!0,f.prototype,b,{redrawButton(){let b=this.module.getConfiguration("contentType");var c=this.module.getConfiguration("content");switch(b){case"content":{let a="",b="";this.isToggle?this.currentState?(a=this.module.getConfiguration("onLabel"),b=this.module.getConfiguration("cssOn")):(a=this.module.getConfiguration("offLabel"),b=this.module.getConfiguration("cssOff")):(a=this.module.getConfiguration("label"),b=this.module.getConfiguration("css")),this.button.html(a),b&&this.button.attr("style",b)}break;case"imageUrl":{let b=a(`<div><img src="${c}"/></div>`);b.find("img").css({width:this.width,height:this.height,objectFit:"contain"}),b.css({cursor:"pointer"}),this.dom.html(b),this.dom.css({overflow:"hidden"}),this.updateOpacity(b)}break;case"svg":{let b=a("<div>");b.append(c),b.css("cursor","pointer"),e.render(b,{type:"svg",value:c}),this.dom.html(b),this.updateOpacity(b)}break;default:}},updateOpacity:function(a){this.isToggle?this.currentState?a.css({opacity:1}):a.css({opacity:this.maskOpacity}):(a.mousedown(()=>{a.css({opacity:this.maskOpacity})}),a.mouseup(()=>{a.css({opacity:1})}))},onResize:function(){let b=this;this.maskOpacity=this.module.getConfiguration("maskOpacity"),this.isToggle="toggle"===this.module.getConfiguration("toggle"),this.isButton="content"===this.module.getConfiguration("contentType");this.dom=a("<div></div>").css({width:"100%",height:"100%"}),this.isToggle&&(this.currentState="on"===this.module.getConfiguration("startState")),g=async function(){let a=!0;b.module.getConfigurationCheckbox("askConfirm","yes")&&(a=await d.confirm(b.module.getConfiguration("confirmText"),b.module.getConfiguration("okLabel"),b.module.getConfiguration("cancelLabel"))),a&&(b.isToggle&&(b.currentState=!b.currentState),b.module.controller.onClick(b),b.redrawButton())},this.isButton?(this.button=a("<button />"),this.button.click(g),this.dom.html(this.button)):this.dom.on("click",g),this.module.getDomContent().html(this.dom),this.redrawButton(),this.resolveReady()},activate:function(){this.currentState=!0},deactivate:function(){this.currentState=!1},toggle:function(){this.currentState=!this.currentState},activateButton(){var a=this.dom.find("button");a.removeAttr("disabled"),a.css({cursor:"pointer",pointerEvent:"auto"})},toggleButton(){this.dom.find("button").attr("disabled")?this.activateButton():this.deactivateButton()},getContentType:function(){var a=this.module.getConfiguration("contentType");if("content"===a){var b=this.module.getConfiguration("content");if(!b)return"button"}return a},onActionReceive:{activate:function(){this.activate(),this.redrawButton()},deactivate:function(){this.deactivate(),this.redrawButton()},toggle:function(){this.toggle(),this.redrawButton()}}}),f});
