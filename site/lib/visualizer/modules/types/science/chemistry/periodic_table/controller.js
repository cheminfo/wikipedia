'use strict';define(["modules/default/defaultcontroller","lodash","src/util/util"],function(a,b,c){"use strict";function d(){}return $.extend(!0,d.prototype,a),d.prototype.moduleInformation={name:"Periodic table",description:"Display the periodic table of elements",author:"Daniel Kostro",date:"09.06.2015",license:"MIT",cssClass:"periodic-table"},d.prototype.references={template:{label:"template"},value:{label:"Periodic table elements"},hltemplate:{label:"Highlight template"},elements:{label:"A selection of elements"},element:{label:"An element"}},d.prototype.events={onPeriodSelect:{label:"Period selected",refVariable:["elements"]},onGroupSelect:{label:"Group selected",refVariable:["elements"]},onElementsSelect:{label:"Elements selected",refVariable:["elements"]},onElementSelect:{label:"Element clicked",refVariable:["element"]},onElementHover:{label:"Element hovered",refVariable:["element"]}},d.prototype.variablesIn=["template","hltemplate","value"],d.prototype.actionsIn=$.extend({},a.actionsIn,{select:"Select element(s)",setSelected:"Set selected element(s)"}),d.prototype.configurationStructure=function(){var a=this.module.model.getjPath(),d={options:{type:"list",title:"Background"},fields:{mode:{type:"combo",title:"Mode",options:[{key:"none",title:"None"},{key:"jpath",title:"Based on color jpath"},{key:"custom",title:"Based on property"},{key:"fixed",title:"Fixed"}],displaySource:{custom:"c",jpath:"j",fixed:"f"},default:"none"},jpath:{type:"combo",title:"jPath",options:a,extractValue:c.jpathToArray,insertValue:c.jpathToString,displayTarget:["c","j"]},min:{type:"float",displayTarget:["c"],title:"Min value"},max:{type:"float",title:"Max value",displayTarget:["c"]},val:{type:"float",title:"Default value",displayTarget:["c"]},step:{type:"float",title:"Step",displayTarget:["c"]},label:{type:"text",title:"Label",displayTarget:["c"],default:""},unit:{type:"text",title:"Unit",displayTarget:["c"],default:""},mincolor:{type:"spectrum",title:"Min color",displayTarget:["c"],default:[0,0,255,1]},neutralcolor:{type:"spectrum",title:"Neutral color",displayTarget:["c"],default:[255,255,255,1]},maxcolor:{type:"spectrum",title:"Max color",displayTarget:["c"],default:[255,0,0,1]},novaluecolor:{type:"spectrum",title:"No value color",displayTarget:["c"],default:[90,90,90,.4]},fixedcolor:{type:"spectrum",title:"Fixed color",displayTarget:["f"],default:[255,255,255,1]},showslider:{type:"checkbox",title:"Show slider",options:{yes:"Yes"},default:["yes"]}}},e=b.cloneDeep(d);return e.options.title="Foreground",e.fields.mode.options.push({key:"state",title:"State"}),e.fields.fixedcolor.default=[0,0,0,1],{groups:{group:{options:{type:"list"},fields:{varName:{type:"text",title:"Variable name",displayTarget:["elPref","elUrl"],default:""},elementsSource:{type:"combo",title:"Elements source",options:[{key:"varin",title:"Variable in"},{key:"pref",title:"Preferences"},{key:"url",title:"Url"}],displaySource:{url:"elUrl",pref:"elPref",varin:"elVarin"},default:"varin"},elementsUrl:{type:"text",title:"Elements url",default:"",displayTarget:["elUrl"]},elementsCode:{type:"jscode",mode:"text",title:"Elements (JSON or csv)",default:"",displayTarget:["elPref"]},templateSource:{type:"combo",title:"Table template",options:[{key:"varin",title:"Variable in"},{key:"pref",title:"Preferences"}],displaySource:{varin:"v",pref:"p"},default:"pref"},template:{type:"jscode",title:"Table template",mode:"html",displayTarget:["p"],default:"<div class=\"element-data\"><p class=\"Z\">{{ element.Z }}</p><h2 class=\"element-name\">{{ element.symbol }}</h2><p>{{ element.name }}</p></div>"},hltemplateSource:{type:"combo",title:"Highlight template",options:[{key:"varin",title:"Variable in"},{key:"pref",title:"Preferences"}],displaySource:{varin:"hv",pref:"hp"},default:"pref"},hltemplate:{type:"jscode",title:"Highlight template",mode:"html",displayTarget:["hp"],default:"<div class=\"element-data\"><p class=\"Z\">{{ element.Z }}</p><h2 class=\"element-name\">{{ element.symbol }}</h2><p>{{ element.name }}</p></div>"},useHighlights:{type:"checkbox",title:"Use highlights",options:{yes:"Yes"},default:["yes"]},display:{type:"checkbox",title:"Display options",options:{families:"Show families"},default:["families"]}}},foreground:e,background:d}}},d.prototype.configAliases={varName:["groups","group",0,"varName",0],elementsSource:["groups","group",0,"elementsSource",0],elementsUrl:["groups","group",0,"elementsUrl",0],elementsCode:["groups","group",0,"elementsCode",0],template:["groups","group",0,"template",0],templateSource:["groups","group",0,"templateSource",0],hltemplate:["groups","group",0,"hltemplate",0],hltemplateSource:["groups","group",0,"hltemplateSource",0],useHighlights:["groups","group",0,"useHighlights",0],foreground:["groups","foreground",0,"mode",0],background:["groups","background",0,"mode",0],foregroundStep:["groups","foreground",0,"step",0],backgroundStep:["groups","background",0,"step",0],display:["groups","group",0,"display",0]},["Min","Max","Val","MinColor","MaxColor","NeutralColor","FixedColor","Label","Unit","Mode","Jpath","NoValueColor","ShowSlider"].forEach(a=>{d.prototype.configAliases[`foreground${a}`]=["groups","foreground",0,a.toLowerCase(),0],d.prototype.configAliases[`background${a}`]=["groups","background",0,a.toLowerCase(),0]}),d.prototype.periodSelected=function(a){var b=this.module.view.elements;b=b.filter(b=>b.period==a),this.createDataFromEvent("onPeriodSelect","elements",b)},d.prototype.groupSelected=function(a){var b=this.module.view.elements;b=b.filter(b=>b.group==a),this.createDataFromEvent("onGroupSelect","elements",b)},d.prototype.elementSelected=function(a){a=+a;var b=this.module.view.elements,c=b.find(b=>+DataObject.resurrect(b.Z)===a);c&&this.createDataFromEvent("onElementSelect","element",c)},d.prototype.elementHovered=function(a){a=+a;var b=this.module.view.elements,c=b.find(b=>+DataObject.resurrect(b.Z)===a);c&&this.createDataFromEvent("onElementHover","element",c)},d.prototype.elementsSelected=function(a){a=a.map(a=>+a);var b=this.module.view.elements;b=b.filter(b=>-1<a.indexOf(+DataObject.resurrect(b.Z))),this.createDataFromEvent("onElementsSelect","elements",b)},d});
