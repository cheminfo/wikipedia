'use strict';define(["modules/default/defaultview","src/util/util","jsoneditor","src/util/context","jquery","ace/ace"],function(a,b,c,d,e,f){"use strict";function g(){this._id=b.getNextUniqueId()}return b.loadCss("components/jsoneditor/dist/jsoneditor.min.css"),e.extend(!0,g.prototype,a,{init(){this.dom||(this.dom=e(`<div id="${this._id}"></div>`).css({height:"100%",width:"100%"}),this.module.getDomContent().html(this.dom))},blank:{value(){this.editor.set({})}},inDom(){this.dom.empty();var a=this.module.getConfiguration("editable");"text"===a&&(a="code"),this.expand=!!this.module.getConfiguration("expanded",!1)[0],this.storeObject=!!this.module.getConfiguration("storeObject",!1)[0],this.changeInputData(DataObject.check(JSON.parse(this.module.getConfiguration("storedObject")),!0)),this.editor=new c(document.getElementById(this._id),{mode:a,modes:["view","tree","code"],ace:f,theme:"ace/theme/textmate",onChange:()=>{var a;try{a=this.editor.get()}catch(b){a=`Invalid JSON: ${b.message}`}this.module.controller.sendValue(a,"onObjectChange")},onModeChange:()=>this.setSendButton(),search:this.module.getConfigurationCheckbox("searchBox","search")}),this.module.getConfigurationCheckbox("sendButton","send")&&this.setSendButton(),this.update.value.call(this,this.inputData),this.resolveReady()},setSendButton:function(){var a=this.dom.find(".jsoneditor-menu").prepend("<button class=\"send\" style=\"width: 45px; float: left; background: none; font-size: small;\">\n    <span style=\"font-size: 10pt; color: black\">Send</span>\n</button>").find("button.send");a.on("click",()=>{this.module.controller.sendValue(this.editor.get(),"onObjectSend")}).on("mouseenter",function(){e(this).css("background-color","#f0f2f5")}).on("mouseleave",function(){e(this).css("background-color","#e3eaf6")}).css("background-color","#e3eaf6")},update:{value(a){this.module.getConfigurationCheckbox("displayValue","display")&&(a=a.get()),this.changeInputData(a);var b=this.inputData.resurrect();this.editor.set(JSON.parse(JSON.stringify(b))),this.expand&&this.editor.expandAll&&this.editor.expandAll(),this.module.controller.sendValue(b,"onObjectChange")}},changeInputData(a){this.inputData===a||(this.inputData=a)}}),g});
