define(["modules/default/defaultview","src/util/domdeferred","src/util/api","src/util/typerenderer","src/util/color"],function(a,b,c,d,e){function f(){}return $.extend(!0,f.prototype,a,{init:function(){var a="<div></div>";this.dom=$(a).css(this.module.getConfigurationCheckbox("append","yes")?{height:"100%",width:"100%","overflow-x":"hidden","overflow-y":"scroll"}:{display:"table","table-layout":"fixed",height:"100%",width:"100%"}),this.values={},this.module.getDomContent().html(this.dom),this.fillWithVal({type:"html",value:this.module.getConfiguration("defaultvalue","")}),this.resolveReady(),this._relsForLoading=["value"]},blank:{value:function(){if(this.module.getConfigurationCheckbox("append","yes"))for(var a=this.module.getConfiguration("maxEntries"),b=this.dom.children(),c=b.length-a,d=0;c>d;d++)b[d].remove();else this.dom.empty()},color:function(){this.module.getDomContent().css("background-color","#FFF")}},update:{color:function(a){this.module.getDomContent().css("background-color",a.get())},value:function(a,b){this.values[b]=a,this._lastValue=a,this.renderAll()}},onResize:function(){this.renderAll(),this.refresh()},renderAll:function(){var a=this._lastValue;if(a){{var b=this,c=this.module.getConfiguration("sprintf");this.module.getConfiguration("sprintfOrder")}if(c&&""!=c)try{require(["sprintf"],function(d){var e=[c];for(var f in b.values)e.push(b.values[f]);a=d.sprintf.apply(this,e),b.fillWithVal(a)})}catch(c){b.fillWithVal(a)}else b.fillWithVal(a)}},_scrollDown:function(){var a=this.dom[0].scrollHeight;this.dom.scrollTop(a)},fillWithVal:function(a){var c,f=this.module.getConfiguration("valign"),g=this.module.getConfiguration("align"),h=this.module.getConfiguration("fontcolor"),i=this.module.getConfiguration("fontsize"),j=this.module.getConfiguration("font"),k=this.module.getConfigurationCheckbox("preformatted","pre"),l=this.module.getConfigurationCheckbox("preformatted","selectable");h&&(h=e.getColor(h)),this.module.getConfigurationCheckbox("append","yes")?(c=$("<div>").css({fontFamily:j||"Arial",fontSize:i||"10pt",color:h||"#000000","vertical-align":f||"top",textAlign:g||"center",width:"100%","white-space":k?"pre":"normal","word-wrap":"break-word","user-select":l?"text":"none"}),this.dom.append(c)):(c=$("<div />").css({fontFamily:j||"Arial",fontSize:i||"10pt",color:h||"#000000",display:"table-cell","vertical-align":f||"top",textAlign:g||"center",width:"100%",height:"100%","white-space":k?"pre":"normal","word-wrap":"break-word","user-select":l?"text":"none"}),this.dom.html(c)),this._scrollDown();var m=this;d.render(c,a).then(function(){m._scrollDown()}),b.notify(c)}}),f});