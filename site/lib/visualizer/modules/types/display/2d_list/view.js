'use strict';define(["modules/default/defaultview","src/util/typerenderer","src/util/api","src/util/util"],function(a,b,c,d){"use strict";function e(){}return $.extend(!0,e.prototype,a,{init:function(){var a=[];a.push("<div class=\"ci-displaylist-list-2d\"></div>"),this.dom=$(a.join("")),this.module.getDomContent().html(this.dom),this.rendererOptions=d.evalOptions(this.module.getConfiguration("rendererOptions"))||{};var b=this.module.getConfiguration("forceType");b&&(this.rendererOptions.forceType=b)},blank:{list:function(){c.killHighlight(this.module.getId()),this.dom.empty()}},inDom:function(){var a=this;this.dom.on("mouseenter mouseleave click","td",function(b){var d=$(this).index(),e=$(this).parent().index(),f=a.module.getConfiguration("colnumber",4)||4,g=e*f+d,h=a.list.get()[g];"mouseenter"===b.type?(a.module.controller.setVarFromEvent("onHover","cell","list",[g]),c.highlight(h,1)):"mouseleave"===b.type?c.highlight(h,0):"click"===b.type&&(a.module.controller.setVarFromEvent("onClick","cell","list",[g]),a.module.controller.sendActionFromEvent("onClick","cell",h))}),this.resolveReady()},update:{list:function(a){var b=this.module.getConfiguration,c=b("colnumber",4)||4,d=a.get(),e=$("<table cellpadding=\"3\" cellspacing=\"0\">").css("text-align","center");this.dom.html(e),this.list=d;for(var f,g,h=b("height"),j={width:`${Math.round(100/c)}%`,height:`${b("height",0)}px`},k=0;k<d.length;k++)g=k%c,0===g&&(f=$("<tr>").appendTo(e)),this.renderElement(f,k,j,b("colorjpath",!1),b("valjpath",""))}},renderElement:function(a,d,e,f,g){var h=this,i=$("<td>").css(e).appendTo(a);this.list.getChild([d]).then(function(a){f&&a.getChild(f).then(function(a){i.css("background-color",a.get())}),b.render(i,a,g,h.rendererOptions),c.listenHighlight(a,function(a){a?i.css("border-color","black"):i.css("border-color","")},!1,h.module.getId())})}}),e});
